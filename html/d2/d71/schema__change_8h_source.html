<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ppl_util: /Users/dabowang/be_all/olap/schema_change.h 源文件</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ppl_util
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_8eac97cde2fee0634bdd38dda0a21780.html">be_all</a></li><li class="navelem"><a class="el" href="../../dir_fd13cd9924173dabc19edd1b98708655.html">olap</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">schema_change.h</div></div>
</div><!--header-->
<div class="contents">
<a href="../../d2/d71/schema__change_8h.html">浏览该文件的文档.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Licensed to the Apache Software Foundation (ASF) under one</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// or more contributor license agreements.  See the NOTICE file</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// distributed with this work for additional information</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// regarding copyright ownership.  The ASF licenses this file</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// to you under the Apache License, Version 2.0 (the</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">// &quot;License&quot;); you may not use this file except in compliance</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">// with the License.  You may obtain a copy of the License at</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">//</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">//   http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">//</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">// Unless required by applicable law or agreed to in writing,</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">// software distributed under the License is distributed on an</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">// &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">// KIND, either express or implied.  See the License for the</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">// specific language governing permissions and limitations</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">// under the License.</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d13/status_8h.html">common/status.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;gen_cpp/AgentService_types.h&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/d3e/column__mapping_8h.html">olap/column_mapping.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="../../dd/db2/delete__handler_8h.html">olap/delete_handler.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="../../d8/d75/rowset_8h.html">olap/rowset/rowset.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="../../d7/d13/rowset__writer_8h.html">olap/rowset/rowset_writer.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/d1e/tablet_8h.html">olap/tablet.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/df8/column_8h.html">vec/columns/column.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/d40/block_8h.html">vec/core/block.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="keyword">namespace </span><a class="code hl_namespace" href="../../d6/d94/namespacedoris.html">doris</a> {</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="../../df/d31/classdoris_1_1_row_block_changer.html">   31</a></span><span class="keyword">class </span><a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a> {</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a9216ba4fd9b418b8808bfb91a407ea20">TabletSchemaSPtr</a> tablet_schema, <span class="keyword">const</span> <a class="code hl_class" href="../../d6/d23/classdoris_1_1_delete_handler.html">DeleteHandler</a>* delete_handler,</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>                    <a class="code hl_class" href="../../da/d43/classdoris_1_1_descriptor_tbl.html">DescriptorTbl</a> desc_tbl);</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <a class="code hl_function" href="../../df/d31/classdoris_1_1_row_block_changer.html#a12670a18ada0070984ad8984aa8e2b21">~RowBlockChanger</a>();</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <a class="code hl_struct" href="../../d1/d84/structdoris_1_1_column_mapping.html">ColumnMapping</a>* <a class="code hl_function" href="../../df/d31/classdoris_1_1_row_block_changer.html#a544ffe0791fbe26c3c15438c8861723c">get_mutable_column_mapping</a>(<span class="keywordtype">size_t</span> column_index);</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../df/d31/classdoris_1_1_row_block_changer.html#a99943c3764aab4692656dd9dff62d26e">change_block</a>(<a class="code hl_class" href="../../d2/d12/classdoris_1_1vectorized_1_1_block.html">vectorized::Block</a>* ref_block, <a class="code hl_class" href="../../d2/d12/classdoris_1_1vectorized_1_1_block.html">vectorized::Block</a>* new_block) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../df/d31/classdoris_1_1_row_block_changer.html#a51e680638fd8d01231a2b394924147b0">_check_cast_valid</a>(<a class="code hl_typedef" href="../../d3/d1e/namespacedoris_1_1vectorized.html#aa1d7b67012985a9197efd18f7dd48e51">vectorized::ColumnPtr</a> ref_column,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>                             <a class="code hl_typedef" href="../../d3/d1e/namespacedoris_1_1vectorized.html#aa1d7b67012985a9197efd18f7dd48e51">vectorized::ColumnPtr</a> new_column) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="comment">// @brief column-mapping specification of new schema</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="../../df/d31/classdoris_1_1_row_block_changer.html#a3ce22e2d8b931e4c220e6e00012f33f2">   47</a></span>    <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ac6a70f89e3ffebb1e772cd5becd6acf8">SchemaMapping</a> <a class="code hl_variable" href="../../df/d31/classdoris_1_1_row_block_changer.html#a3ce22e2d8b931e4c220e6e00012f33f2">_schema_mapping</a>;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="comment">// delete handler for filtering data which use specified in DELETE_DATA</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="../../df/d31/classdoris_1_1_row_block_changer.html#a5e3747e717897600f587d5e1db037c36">   50</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="../../d6/d23/classdoris_1_1_delete_handler.html">DeleteHandler</a>* <a class="code hl_variable" href="../../df/d31/classdoris_1_1_row_block_changer.html#a5e3747e717897600f587d5e1db037c36">_delete_handler</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="../../df/d31/classdoris_1_1_row_block_changer.html#a76aac2dc7938c66a9ab1ab49547c104e">   52</a></span>    <a class="code hl_class" href="../../da/d43/classdoris_1_1_descriptor_tbl.html">DescriptorTbl</a> <a class="code hl_variable" href="../../df/d31/classdoris_1_1_row_block_changer.html#a76aac2dc7938c66a9ab1ab49547c104e">_desc_tbl</a>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="../../df/d31/classdoris_1_1_row_block_changer.html#a81fae9b2c5e539eb8ee3dec755b8f1c7">   54</a></span>    <a class="code hl_function" href="../../df/d31/classdoris_1_1_row_block_changer.html#a81fae9b2c5e539eb8ee3dec755b8f1c7">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>);</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>};</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html">   57</a></span><span class="keyword">class </span><a class="code hl_class" href="../../da/d7e/classdoris_1_1_schema_change.html">SchemaChange</a> {</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a35785f0793b749f203a3248d0b2365a3">   59</a></span>    <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a35785f0793b749f203a3248d0b2365a3">SchemaChange</a>() : <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a435660ba2c88e4cc75c131a0465b959d">_filtered_rows</a>(0), <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a06b84d8f115f05c5d05aaa332fb6cf83">_merged_rows</a>(0) {}</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a7ab9489504ee3138e3563127bccb74ca">   60</a></span>    <span class="keyword">virtual</span> <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a7ab9489504ee3138e3563127bccb74ca">~SchemaChange</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a78e3c3646a61f2617768b45127cce414">   62</a></span>    <span class="keyword">virtual</span> <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a78e3c3646a61f2617768b45127cce414">process</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a4991717acc636b63fb85afa5cd3e02a1">RowsetReaderSharedPtr</a> rowset_reader, <a class="code hl_class" href="../../d4/dd8/classdoris_1_1_rowset_writer.html">RowsetWriter</a>* rowset_writer,</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>                           <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> new_tablet, <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> base_tablet,</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>                           <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a9216ba4fd9b418b8808bfb91a407ea20">TabletSchemaSPtr</a> base_tablet_schema) {</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>        <span class="keywordflow">if</span> (rowset_reader-&gt;rowset()-&gt;empty() || rowset_reader-&gt;rowset()-&gt;num_rows() == 0) {</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>            <a class="code hl_define" href="../../d1/d13/status_8h.html#a7f122d03731fbafe5f83de473538c567">RETURN_WITH_WARN_IF_ERROR</a>(</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>                    rowset_writer-&gt;<a class="code hl_function" href="../../d4/dd8/classdoris_1_1_rowset_writer.html#aa5a8afca4a0eff41fea00af55ebf3f8e">flush</a>(), Status::Error&lt;ErrorCode::INVALID_ARGUMENT&gt;(),</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>                    fmt::format(<span class="stringliteral">&quot;create empty version for schema change failed. version= {}-{}&quot;</span>,</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>                                rowset_writer-&gt;<a class="code hl_function" href="../../d4/dd8/classdoris_1_1_rowset_writer.html#ab3e8becb73a53e2f3c6de22c4bb9bbe7">version</a>().<a class="code hl_variable" href="../../dc/d96/structdoris_1_1_version.html#a60646cb67795d4643f463d6678081989">first</a>, rowset_writer-&gt;<a class="code hl_function" href="../../d4/dd8/classdoris_1_1_rowset_writer.html#ab3e8becb73a53e2f3c6de22c4bb9bbe7">version</a>().<a class="code hl_variable" href="../../dc/d96/structdoris_1_1_version.html#ad199717fb108e23c8a6e7d2c52c4aea8">second</a>));</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../d9/d8d/classdoris_1_1_status.html#a6ec1a217f203269ab53d2290d602db24">Status::OK</a>();</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        }</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a435660ba2c88e4cc75c131a0465b959d">_filtered_rows</a> = 0;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a06b84d8f115f05c5d05aaa332fb6cf83">_merged_rows</a> = 0;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        <a class="code hl_define" href="../../d1/d13/status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a>(</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>                <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#aea5b47411993669371db6080212b65c4">_inner_process</a>(rowset_reader, rowset_writer, new_tablet, base_tablet_schema));</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a0fab415de155ba98c49651c9790c9696">_add_filtered_rows</a>(rowset_reader-&gt;filtered_rows());</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <span class="comment">// Check row num changes</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        <span class="keywordflow">if</span> (config::row_nums_check &amp;&amp; !<a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a4807218cf5d0d48ac9c28a38acc121d3">_check_row_nums</a>(rowset_reader, *rowset_writer)) {</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>            <span class="keywordflow">return</span> Status::Error&lt;ErrorCode::ALTER_STATUS_ERR&gt;();</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        }</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;all row nums. source_rows=&quot;</span> &lt;&lt; rowset_reader-&gt;rowset()-&gt;num_rows()</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>                  &lt;&lt; <span class="stringliteral">&quot;, merged_rows=&quot;</span> &lt;&lt; <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a535f347c1fe73c2166df6e29a30d8a70">merged_rows</a>() &lt;&lt; <span class="stringliteral">&quot;, filtered_rows=&quot;</span> &lt;&lt; <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a116c9cd3bf664580b3591c1561907801">filtered_rows</a>()</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>                  &lt;&lt; <span class="stringliteral">&quot;, new_index_rows=&quot;</span> &lt;&lt; rowset_writer-&gt;<a class="code hl_function" href="../../d4/dd8/classdoris_1_1_rowset_writer.html#aa1e2558f988346fe1f3ff5cf91d1c80c">num_rows</a>();</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d9/d8d/classdoris_1_1_status.html#a6ec1a217f203269ab53d2290d602db24">Status::OK</a>();</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    }</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a116c9cd3bf664580b3591c1561907801">   92</a></span>    uint64_t <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a116c9cd3bf664580b3591c1561907801">filtered_rows</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a435660ba2c88e4cc75c131a0465b959d">_filtered_rows</a>; }</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a535f347c1fe73c2166df6e29a30d8a70">   94</a></span>    uint64_t <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a535f347c1fe73c2166df6e29a30d8a70">merged_rows</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a06b84d8f115f05c5d05aaa332fb6cf83">_merged_rows</a>; }</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="keyword">protected</span>:</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a0fab415de155ba98c49651c9790c9696">   97</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a0fab415de155ba98c49651c9790c9696">_add_filtered_rows</a>(uint64_t <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a116c9cd3bf664580b3591c1561907801">filtered_rows</a>) { <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a435660ba2c88e4cc75c131a0465b959d">_filtered_rows</a> += <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a116c9cd3bf664580b3591c1561907801">filtered_rows</a>; }</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a88eadb24e7d7dd02572ec2d4a51cbe77">   99</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a88eadb24e7d7dd02572ec2d4a51cbe77">_add_merged_rows</a>(uint64_t <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a535f347c1fe73c2166df6e29a30d8a70">merged_rows</a>) { <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a06b84d8f115f05c5d05aaa332fb6cf83">_merged_rows</a> += <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a535f347c1fe73c2166df6e29a30d8a70">merged_rows</a>; }</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#aea5b47411993669371db6080212b65c4">  101</a></span>    <span class="keyword">virtual</span> <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#aea5b47411993669371db6080212b65c4">_inner_process</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a4991717acc636b63fb85afa5cd3e02a1">RowsetReaderSharedPtr</a> rowset_reader, <a class="code hl_class" href="../../d4/dd8/classdoris_1_1_rowset_writer.html">RowsetWriter</a>* rowset_writer,</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>                                  <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> new_tablet, <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a9216ba4fd9b418b8808bfb91a407ea20">TabletSchemaSPtr</a> base_tablet_schema) {</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        <span class="keywordflow">return</span> Status::NotSupported(<span class="stringliteral">&quot;inner process unsupported.&quot;</span>);</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    }</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a4807218cf5d0d48ac9c28a38acc121d3">  106</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a4807218cf5d0d48ac9c28a38acc121d3">_check_row_nums</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a4991717acc636b63fb85afa5cd3e02a1">RowsetReaderSharedPtr</a> reader, <span class="keyword">const</span> <a class="code hl_class" href="../../d4/dd8/classdoris_1_1_rowset_writer.html">RowsetWriter</a>&amp; writer)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        <span class="keywordflow">if</span> (reader-&gt;rowset()-&gt;num_rows() != writer.<a class="code hl_function" href="../../d4/dd8/classdoris_1_1_rowset_writer.html#aa1e2558f988346fe1f3ff5cf91d1c80c">num_rows</a>() + <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a06b84d8f115f05c5d05aaa332fb6cf83">_merged_rows</a> + <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a435660ba2c88e4cc75c131a0465b959d">_filtered_rows</a>) {</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>            LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;fail to check row num! &quot;</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>                         &lt;&lt; <span class="stringliteral">&quot;source_rows=&quot;</span> &lt;&lt; reader-&gt;rowset()-&gt;num_rows()</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>                         &lt;&lt; <span class="stringliteral">&quot;, writer rows=&quot;</span> &lt;&lt; writer.<a class="code hl_function" href="../../d4/dd8/classdoris_1_1_rowset_writer.html#aa1e2558f988346fe1f3ff5cf91d1c80c">num_rows</a>()</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>                         &lt;&lt; <span class="stringliteral">&quot;, merged_rows=&quot;</span> &lt;&lt; <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a535f347c1fe73c2166df6e29a30d8a70">merged_rows</a>()</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>                         &lt;&lt; <span class="stringliteral">&quot;, filtered_rows=&quot;</span> &lt;&lt; <a class="code hl_function" href="../../da/d7e/classdoris_1_1_schema_change.html#a116c9cd3bf664580b3591c1561907801">filtered_rows</a>()</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>                         &lt;&lt; <span class="stringliteral">&quot;, new_index_rows=&quot;</span> &lt;&lt; writer.<a class="code hl_function" href="../../d4/dd8/classdoris_1_1_rowset_writer.html#aa1e2558f988346fe1f3ff5cf91d1c80c">num_rows</a>();</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        }</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    }</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a435660ba2c88e4cc75c131a0465b959d">  120</a></span>    uint64_t <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a435660ba2c88e4cc75c131a0465b959d">_filtered_rows</a>;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno"><a class="line" href="../../da/d7e/classdoris_1_1_schema_change.html#a06b84d8f115f05c5d05aaa332fb6cf83">  121</a></span>    uint64_t <a class="code hl_variable" href="../../da/d7e/classdoris_1_1_schema_change.html#a06b84d8f115f05c5d05aaa332fb6cf83">_merged_rows</a>;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>};</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="../../d0/d19/classdoris_1_1_linked_schema_change.html">  124</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d0/d19/classdoris_1_1_linked_schema_change.html">LinkedSchemaChange</a> : <span class="keyword">public</span> <a class="code hl_class" href="../../da/d7e/classdoris_1_1_schema_change.html">SchemaChange</a> {</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno"><a class="line" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#ae7675c3dbee32120f65523c20f3dbea4">  126</a></span>    <span class="keyword">explicit</span> <a class="code hl_function" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#ae7675c3dbee32120f65523c20f3dbea4">LinkedSchemaChange</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>&amp; row_block_changer)</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>            : <a class="code hl_variable" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#a5529cd1923a9d83446a66a931aa30bc5">_row_block_changer</a>(row_block_changer) {}</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#ab5c1993ece146ed330bb8123f633b799">  128</a></span>    <a class="code hl_function" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#ab5c1993ece146ed330bb8123f633b799">~LinkedSchemaChange</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#a3da2dd115c5ed49f4a1d58419406f566">process</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a4991717acc636b63fb85afa5cd3e02a1">RowsetReaderSharedPtr</a> rowset_reader, <a class="code hl_class" href="../../d4/dd8/classdoris_1_1_rowset_writer.html">RowsetWriter</a>* rowset_writer,</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>                   <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> new_tablet, <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> base_tablet,</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>                   <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a9216ba4fd9b418b8808bfb91a407ea20">TabletSchemaSPtr</a> base_tablet_schema) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#a5529cd1923a9d83446a66a931aa30bc5">  135</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>&amp; <a class="code hl_variable" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#a5529cd1923a9d83446a66a931aa30bc5">_row_block_changer</a>;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno"><a class="line" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#a4d461d310943e9d036be5324d06735c0">  136</a></span>    <a class="code hl_function" href="../../d0/d19/classdoris_1_1_linked_schema_change.html#a4d461d310943e9d036be5324d06735c0">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code hl_class" href="../../d0/d19/classdoris_1_1_linked_schema_change.html">LinkedSchemaChange</a>);</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>};</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno"><a class="line" href="../../da/d81/classdoris_1_1_v_schema_change_directly.html">  139</a></span><span class="keyword">class </span><a class="code hl_class" href="../../da/d81/classdoris_1_1_v_schema_change_directly.html">VSchemaChangeDirectly</a> : <span class="keyword">public</span> <a class="code hl_class" href="../../da/d7e/classdoris_1_1_schema_change.html">SchemaChange</a> {</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno"><a class="line" href="../../da/d81/classdoris_1_1_v_schema_change_directly.html#a97b4bf0f402cb791a3e92fa99ed88445">  141</a></span>    <a class="code hl_function" href="../../da/d81/classdoris_1_1_v_schema_change_directly.html#a97b4bf0f402cb791a3e92fa99ed88445">VSchemaChangeDirectly</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>&amp; row_block_changer) : <a class="code hl_variable" href="../../da/d81/classdoris_1_1_v_schema_change_directly.html#a6692279ecf5e54f13d8932e4b0d7277e">_changer</a>(row_block_changer) {}</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../da/d81/classdoris_1_1_v_schema_change_directly.html#a0d8656af3adfb25b565ff4c3e0fe9fc5">_inner_process</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a4991717acc636b63fb85afa5cd3e02a1">RowsetReaderSharedPtr</a> rowset_reader, <a class="code hl_class" href="../../d4/dd8/classdoris_1_1_rowset_writer.html">RowsetWriter</a>* rowset_writer,</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>                          <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> new_tablet, <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a9216ba4fd9b418b8808bfb91a407ea20">TabletSchemaSPtr</a> base_tablet_schema) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno"><a class="line" href="../../da/d81/classdoris_1_1_v_schema_change_directly.html#a6692279ecf5e54f13d8932e4b0d7277e">  147</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>&amp; <a class="code hl_variable" href="../../da/d81/classdoris_1_1_v_schema_change_directly.html#a6692279ecf5e54f13d8932e4b0d7277e">_changer</a>;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>};</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span><span class="comment">// @breif schema change with sorting</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno"><a class="line" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html">  151</a></span><span class="keyword">class </span><a class="code hl_class" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html">VSchemaChangeWithSorting</a> : <span class="keyword">public</span> <a class="code hl_class" href="../../da/d7e/classdoris_1_1_schema_change.html">SchemaChange</a> {</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <a class="code hl_class" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html">VSchemaChangeWithSorting</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>&amp; row_block_changer, <span class="keywordtype">size_t</span> memory_limitation);</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno"><a class="line" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a9485465bda49bff417c30013c312c62b">  154</a></span>    <a class="code hl_function" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a9485465bda49bff417c30013c312c62b">~VSchemaChangeWithSorting</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a0d8656af3adfb25b565ff4c3e0fe9fc5">_inner_process</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a4991717acc636b63fb85afa5cd3e02a1">RowsetReaderSharedPtr</a> rowset_reader, <a class="code hl_class" href="../../d4/dd8/classdoris_1_1_rowset_writer.html">RowsetWriter</a>* rowset_writer,</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                          <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> new_tablet, <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a9216ba4fd9b418b8808bfb91a407ea20">TabletSchemaSPtr</a> base_tablet_schema) <span class="keyword">override</span>;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a254a5e486aae18deda9378d8c6046ff9">_internal_sorting</a>(<span class="keyword">const</span> std::vector&lt;std::unique_ptr&lt;vectorized::Block&gt;&gt;&amp; blocks,</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                             <span class="keyword">const</span> <a class="code hl_struct" href="../../dc/d96/structdoris_1_1_version.html">Version</a>&amp; temp_delta_versions, int64_t oldest_write_timestamp,</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>                             int64_t newest_write_timestamp, <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> new_tablet,</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>                             RowsetTypePB new_rowset_type, SegmentsOverlapPB segments_overlap,</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>                             <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a45a11d2c52e9b86e26ff0bb6d9c667d2">RowsetSharedPtr</a>* rowset);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a572b14f05da72b0ad62ba76ab3cef526">_external_sorting</a>(std::vector&lt;RowsetSharedPtr&gt;&amp; src_rowsets, <a class="code hl_class" href="../../d4/dd8/classdoris_1_1_rowset_writer.html">RowsetWriter</a>* rowset_writer,</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>                             <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> new_tablet);</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno"><a class="line" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a6692279ecf5e54f13d8932e4b0d7277e">  169</a></span>    <span class="keyword">const</span> <a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>&amp; <a class="code hl_variable" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a6692279ecf5e54f13d8932e4b0d7277e">_changer</a>;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno"><a class="line" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a58931b22871f368c6628c67c064e1814">  170</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a58931b22871f368c6628c67c064e1814">_memory_limitation</a>;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno"><a class="line" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a6b651d17e3eca218ad4f42dcd79a77d5">  171</a></span>    <a class="code hl_struct" href="../../dc/d96/structdoris_1_1_version.html">Version</a> <a class="code hl_variable" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a6b651d17e3eca218ad4f42dcd79a77d5">_temp_delta_versions</a>;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno"><a class="line" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a589c3f7fd9800e4fd09e03c9dd12d33f">  172</a></span>    std::unique_ptr&lt;MemTracker&gt; <a class="code hl_variable" href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a589c3f7fd9800e4fd09e03c9dd12d33f">_mem_tracker</a>;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>};</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_schema_change_handler.html">  175</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d5/d93/classdoris_1_1_schema_change_handler.html">SchemaChangeHandler</a> {</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="comment">// schema change v2, it will not set alter task in base tablet</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="keyword">static</span> <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#aa7f160dfe971788c9421c686a6988d9f">process_alter_tablet_v2</a>(<span class="keyword">const</span> TAlterTabletReqV2&amp; request);</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span> </div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#aabac69293ce5085481024f77d0ceea19">  180</a></span>    <span class="keyword">static</span> std::unique_ptr&lt;SchemaChange&gt; <a class="code hl_function" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#aabac69293ce5085481024f77d0ceea19">get_sc_procedure</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>&amp; rb_changer,</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>                                                          <span class="keywordtype">bool</span> sc_sorting, <span class="keywordtype">bool</span> sc_directly) {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <span class="keywordflow">if</span> (sc_sorting) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>            <span class="keywordflow">return</span> std::make_unique&lt;VSchemaChangeWithSorting&gt;(</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>                    rb_changer, config::memory_limitation_per_thread_for_schema_change_bytes);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        <span class="keywordflow">if</span> (sc_directly) {</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>            <span class="keywordflow">return</span> std::make_unique&lt;VSchemaChangeDirectly&gt;(rb_changer);</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        <span class="keywordflow">return</span> std::make_unique&lt;LinkedSchemaChange&gt;(rb_changer);</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    }</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#aeab57dfc08a5dc6f39a4c73046fbe376">tablet_in_converting</a>(int64_t tablet_id);</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    <span class="keyword">static</span> <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#ac1589d821c47b67cda59adcdf8ec8373">_get_versions_to_be_changed</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> base_tablet,</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>                                              std::vector&lt;Version&gt;* versions_to_be_changed,</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>                                              <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a45a11d2c52e9b86e26ff0bb6d9c667d2">RowsetSharedPtr</a>* max_rowset);</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno"><a class="line" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html">  201</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html">AlterMaterializedViewParam</a> {</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#a418a457a1123a2f29218bc0f252fe0fc">  202</a></span>        std::string <a class="code hl_variable" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#a418a457a1123a2f29218bc0f252fe0fc">column_name</a>;</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#afcb80bff340c0dfbe7c52e549e8b1ca3">  203</a></span>        std::string <a class="code hl_variable" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#afcb80bff340c0dfbe7c52e549e8b1ca3">origin_column_name</a>;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno"><a class="line" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#ae5757a8555e2811ef28594ac20cc3f83">  204</a></span>        std::string <a class="code hl_variable" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#ae5757a8555e2811ef28594ac20cc3f83">mv_expr</a>;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno"><a class="line" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#ad29fa28c6c07599122083a0f818acac9">  205</a></span>        std::shared_ptr&lt;TExpr&gt; <a class="code hl_variable" href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#ad29fa28c6c07599122083a0f818acac9">expr</a>;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    };</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html">  208</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html">SchemaChangeParams</a> {</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#ab00b9c36a7c90b5dfc1129f6f3240cb4">  209</a></span>        AlterTabletType <a class="code hl_variable" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#ab00b9c36a7c90b5dfc1129f6f3240cb4">alter_tablet_type</a>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a93fa663faf4c65fe6a165f60db5f95da">  210</a></span>        <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> <a class="code hl_variable" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a93fa663faf4c65fe6a165f60db5f95da">base_tablet</a>;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a0fdfd239dc1c8ff04adf08046383cb5c">  211</a></span>        <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> <a class="code hl_variable" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a0fdfd239dc1c8ff04adf08046383cb5c">new_tablet</a>;</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a0c96588bc21d209c5b630554586b3f1e">  212</a></span>        <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#a9216ba4fd9b418b8808bfb91a407ea20">TabletSchemaSPtr</a> <a class="code hl_variable" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a0c96588bc21d209c5b630554586b3f1e">base_tablet_schema</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#ae7b666da41962d0caf0d0eca44948d38">  213</a></span>        std::vector&lt;RowsetReaderSharedPtr&gt; <a class="code hl_variable" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#ae7b666da41962d0caf0d0eca44948d38">ref_rowset_readers</a>;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#ad0880837a6a439c3c8eb4f2d5d560a6d">  214</a></span>        <a class="code hl_class" href="../../d6/d23/classdoris_1_1_delete_handler.html">DeleteHandler</a>* <a class="code hl_variable" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#ad0880837a6a439c3c8eb4f2d5d560a6d">delete_handler</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a98f670d04bdcb1c402b3c58b50cb384b">  215</a></span>        std::unordered_map&lt;std::string, AlterMaterializedViewParam&gt; <a class="code hl_variable" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a98f670d04bdcb1c402b3c58b50cb384b">materialized_params_map</a>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a04df63d24aa09eed9d11065c314630d9">  216</a></span>        <a class="code hl_class" href="../../da/d43/classdoris_1_1_descriptor_tbl.html">DescriptorTbl</a>* <a class="code hl_variable" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a04df63d24aa09eed9d11065c314630d9">desc_tbl</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno"><a class="line" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a3a5de7bd423fbc0afc4cf935c166ca6b">  217</a></span>        <a class="code hl_class" href="../../d8/da1/classdoris_1_1_object_pool.html">ObjectPool</a> <a class="code hl_variable" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a3a5de7bd423fbc0afc4cf935c166ca6b">pool</a>;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    };</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="keyword">static</span> <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a70eb38465eb761d944f32619f780a563">_do_process_alter_tablet_v2</a>(<span class="keyword">const</span> TAlterTabletReqV2&amp; request);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    <span class="keyword">static</span> <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a9689b941d610d5024cf79821a4556d5d">_validate_alter_result</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">TabletSharedPtr</a> new_tablet,</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>                                         <span class="keyword">const</span> TAlterTabletReqV2&amp; request);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="keyword">static</span> <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a4695eea517ee59a8ab9f7cf442c1ac24">_convert_historical_rowsets</a>(<span class="keyword">const</span> <a class="code hl_struct" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html">SchemaChangeParams</a>&amp; sc_params);</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="keyword">static</span> <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a158ac5f3db97560c7b015bf12f441693">_parse_request</a>(<span class="keyword">const</span> <a class="code hl_struct" href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html">SchemaChangeParams</a>&amp; sc_params, <a class="code hl_class" href="../../df/d31/classdoris_1_1_row_block_changer.html">RowBlockChanger</a>* rb_changer,</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>                                 <span class="keywordtype">bool</span>* sc_sorting, <span class="keywordtype">bool</span>* sc_directly);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <span class="comment">// Initialization Settings for creating a default value</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <span class="keyword">static</span> <a class="code hl_class" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a00c1ce1a96d782c6015a63dc129a9afc">_init_column_mapping</a>(<a class="code hl_struct" href="../../d1/d84/structdoris_1_1_column_mapping.html">ColumnMapping</a>* column_mapping,</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>                                       <span class="keyword">const</span> <a class="code hl_class" href="../../d8/d28/classdoris_1_1_tablet_column.html">TabletColumn</a>&amp; column_schema, <span class="keyword">const</span> std::string&amp; <a class="code hl_variable" href="../../df/dd9/util_2types_8h.html#adae7202c63102b0934c3ac5be41b0dae">value</a>);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span> </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a0829237c98eabf9ce37eeefa2226d65f">  234</a></span>    <span class="keyword">static</span> std::shared_mutex <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a0829237c98eabf9ce37eeefa2226d65f">_mutex</a>;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a8a0c7f254aac884273e0ca784caf4d22">  235</a></span>    <span class="keyword">static</span> std::unordered_set&lt;int64_t&gt; <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a8a0c7f254aac884273e0ca784caf4d22">_tablet_ids_in_converting</a>;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#abed4664d345e1c75816e318454c56304">  236</a></span>    <span class="keyword">static</span> std::set&lt;std::string&gt; <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_schema_change_handler.html#abed4664d345e1c75816e318454c56304">_supported_functions</a>;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>};</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>} <span class="comment">// namespace doris</span></div>
<div class="ttc" id="ablock_8h_html"><div class="ttname"><a href="../../de/d40/block_8h.html">block.h</a></div></div>
<div class="ttc" id="aclassdoris_1_1_delete_handler_html"><div class="ttname"><a href="../../d6/d23/classdoris_1_1_delete_handler.html">doris::DeleteHandler</a></div><div class="ttdef"><b>Definition:</b> delete_handler.h:55</div></div>
<div class="ttc" id="aclassdoris_1_1_descriptor_tbl_html"><div class="ttname"><a href="../../da/d43/classdoris_1_1_descriptor_tbl.html">doris::DescriptorTbl</a></div><div class="ttdef"><b>Definition:</b> descriptors.h:393</div></div>
<div class="ttc" id="aclassdoris_1_1_linked_schema_change_html"><div class="ttname"><a href="../../d0/d19/classdoris_1_1_linked_schema_change.html">doris::LinkedSchemaChange</a></div><div class="ttdef"><b>Definition:</b> schema_change.h:124</div></div>
<div class="ttc" id="aclassdoris_1_1_linked_schema_change_html_a3da2dd115c5ed49f4a1d58419406f566"><div class="ttname"><a href="../../d0/d19/classdoris_1_1_linked_schema_change.html#a3da2dd115c5ed49f4a1d58419406f566">doris::LinkedSchemaChange::process</a></div><div class="ttdeci">Status process(RowsetReaderSharedPtr rowset_reader, RowsetWriter *rowset_writer, TabletSharedPtr new_tablet, TabletSharedPtr base_tablet, TabletSchemaSPtr base_tablet_schema) override</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:366</div></div>
<div class="ttc" id="aclassdoris_1_1_linked_schema_change_html_a4d461d310943e9d036be5324d06735c0"><div class="ttname"><a href="../../d0/d19/classdoris_1_1_linked_schema_change.html#a4d461d310943e9d036be5324d06735c0">doris::LinkedSchemaChange::DISALLOW_COPY_AND_ASSIGN</a></div><div class="ttdeci">DISALLOW_COPY_AND_ASSIGN(LinkedSchemaChange)</div></div>
<div class="ttc" id="aclassdoris_1_1_linked_schema_change_html_a5529cd1923a9d83446a66a931aa30bc5"><div class="ttname"><a href="../../d0/d19/classdoris_1_1_linked_schema_change.html#a5529cd1923a9d83446a66a931aa30bc5">doris::LinkedSchemaChange::_row_block_changer</a></div><div class="ttdeci">const RowBlockChanger &amp; _row_block_changer</div><div class="ttdef"><b>Definition:</b> schema_change.h:135</div></div>
<div class="ttc" id="aclassdoris_1_1_linked_schema_change_html_ab5c1993ece146ed330bb8123f633b799"><div class="ttname"><a href="../../d0/d19/classdoris_1_1_linked_schema_change.html#ab5c1993ece146ed330bb8123f633b799">doris::LinkedSchemaChange::~LinkedSchemaChange</a></div><div class="ttdeci">~LinkedSchemaChange() override=default</div></div>
<div class="ttc" id="aclassdoris_1_1_linked_schema_change_html_ae7675c3dbee32120f65523c20f3dbea4"><div class="ttname"><a href="../../d0/d19/classdoris_1_1_linked_schema_change.html#ae7675c3dbee32120f65523c20f3dbea4">doris::LinkedSchemaChange::LinkedSchemaChange</a></div><div class="ttdeci">LinkedSchemaChange(const RowBlockChanger &amp;row_block_changer)</div><div class="ttdef"><b>Definition:</b> schema_change.h:126</div></div>
<div class="ttc" id="aclassdoris_1_1_object_pool_html"><div class="ttname"><a href="../../d8/da1/classdoris_1_1_object_pool.html">doris::ObjectPool</a></div><div class="ttdef"><b>Definition:</b> object_pool.h:30</div></div>
<div class="ttc" id="aclassdoris_1_1_row_block_changer_html"><div class="ttname"><a href="../../df/d31/classdoris_1_1_row_block_changer.html">doris::RowBlockChanger</a></div><div class="ttdef"><b>Definition:</b> schema_change.h:31</div></div>
<div class="ttc" id="aclassdoris_1_1_row_block_changer_html_a12670a18ada0070984ad8984aa8e2b21"><div class="ttname"><a href="../../df/d31/classdoris_1_1_row_block_changer.html#a12670a18ada0070984ad8984aa8e2b21">doris::RowBlockChanger::~RowBlockChanger</a></div><div class="ttdeci">~RowBlockChanger()</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:201</div></div>
<div class="ttc" id="aclassdoris_1_1_row_block_changer_html_a3ce22e2d8b931e4c220e6e00012f33f2"><div class="ttname"><a href="../../df/d31/classdoris_1_1_row_block_changer.html#a3ce22e2d8b931e4c220e6e00012f33f2">doris::RowBlockChanger::_schema_mapping</a></div><div class="ttdeci">SchemaMapping _schema_mapping</div><div class="ttdef"><b>Definition:</b> schema_change.h:47</div></div>
<div class="ttc" id="aclassdoris_1_1_row_block_changer_html_a51e680638fd8d01231a2b394924147b0"><div class="ttname"><a href="../../df/d31/classdoris_1_1_row_block_changer.html#a51e680638fd8d01231a2b394924147b0">doris::RowBlockChanger::_check_cast_valid</a></div><div class="ttdeci">Status _check_cast_valid(vectorized::ColumnPtr ref_column, vectorized::ColumnPtr new_column) const</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:309</div></div>
<div class="ttc" id="aclassdoris_1_1_row_block_changer_html_a544ffe0791fbe26c3c15438c8861723c"><div class="ttname"><a href="../../df/d31/classdoris_1_1_row_block_changer.html#a544ffe0791fbe26c3c15438c8861723c">doris::RowBlockChanger::get_mutable_column_mapping</a></div><div class="ttdeci">ColumnMapping * get_mutable_column_mapping(size_t column_index)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:208</div></div>
<div class="ttc" id="aclassdoris_1_1_row_block_changer_html_a5e3747e717897600f587d5e1db037c36"><div class="ttname"><a href="../../df/d31/classdoris_1_1_row_block_changer.html#a5e3747e717897600f587d5e1db037c36">doris::RowBlockChanger::_delete_handler</a></div><div class="ttdeci">const DeleteHandler * _delete_handler</div><div class="ttdef"><b>Definition:</b> schema_change.h:50</div></div>
<div class="ttc" id="aclassdoris_1_1_row_block_changer_html_a76aac2dc7938c66a9ab1ab49547c104e"><div class="ttname"><a href="../../df/d31/classdoris_1_1_row_block_changer.html#a76aac2dc7938c66a9ab1ab49547c104e">doris::RowBlockChanger::_desc_tbl</a></div><div class="ttdeci">DescriptorTbl _desc_tbl</div><div class="ttdef"><b>Definition:</b> schema_change.h:52</div></div>
<div class="ttc" id="aclassdoris_1_1_row_block_changer_html_a81fae9b2c5e539eb8ee3dec755b8f1c7"><div class="ttname"><a href="../../df/d31/classdoris_1_1_row_block_changer.html#a81fae9b2c5e539eb8ee3dec755b8f1c7">doris::RowBlockChanger::DISALLOW_COPY_AND_ASSIGN</a></div><div class="ttdeci">DISALLOW_COPY_AND_ASSIGN(RowBlockChanger)</div></div>
<div class="ttc" id="aclassdoris_1_1_row_block_changer_html_a99943c3764aab4692656dd9dff62d26e"><div class="ttname"><a href="../../df/d31/classdoris_1_1_row_block_changer.html#a99943c3764aab4692656dd9dff62d26e">doris::RowBlockChanger::change_block</a></div><div class="ttdeci">Status change_block(vectorized::Block *ref_block, vectorized::Block *new_block) const</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:216</div></div>
<div class="ttc" id="aclassdoris_1_1_rowset_writer_html"><div class="ttname"><a href="../../d4/dd8/classdoris_1_1_rowset_writer.html">doris::RowsetWriter</a></div><div class="ttdef"><b>Definition:</b> rowset_writer.h:32</div></div>
<div class="ttc" id="aclassdoris_1_1_rowset_writer_html_aa1e2558f988346fe1f3ff5cf91d1c80c"><div class="ttname"><a href="../../d4/dd8/classdoris_1_1_rowset_writer.html#aa1e2558f988346fe1f3ff5cf91d1c80c">doris::RowsetWriter::num_rows</a></div><div class="ttdeci">virtual int64_t num_rows() const =0</div></div>
<div class="ttc" id="aclassdoris_1_1_rowset_writer_html_aa5a8afca4a0eff41fea00af55ebf3f8e"><div class="ttname"><a href="../../d4/dd8/classdoris_1_1_rowset_writer.html#aa5a8afca4a0eff41fea00af55ebf3f8e">doris::RowsetWriter::flush</a></div><div class="ttdeci">virtual Status flush()=0</div></div>
<div class="ttc" id="aclassdoris_1_1_rowset_writer_html_ab3e8becb73a53e2f3c6de22c4bb9bbe7"><div class="ttname"><a href="../../d4/dd8/classdoris_1_1_rowset_writer.html#ab3e8becb73a53e2f3c6de22c4bb9bbe7">doris::RowsetWriter::version</a></div><div class="ttdeci">virtual Version version()=0</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html">doris::SchemaChangeHandler</a></div><div class="ttdef"><b>Definition:</b> schema_change.h:175</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_a00c1ce1a96d782c6015a63dc129a9afc"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a00c1ce1a96d782c6015a63dc129a9afc">doris::SchemaChangeHandler::_init_column_mapping</a></div><div class="ttdeci">static Status _init_column_mapping(ColumnMapping *column_mapping, const TabletColumn &amp;column_schema, const std::string &amp;value)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:1260</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_a0829237c98eabf9ce37eeefa2226d65f"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a0829237c98eabf9ce37eeefa2226d65f">doris::SchemaChangeHandler::_mutex</a></div><div class="ttdeci">static std::shared_mutex _mutex</div><div class="ttdef"><b>Definition:</b> schema_change.h:234</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_a158ac5f3db97560c7b015bf12f441693"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a158ac5f3db97560c7b015bf12f441693">doris::SchemaChangeHandler::_parse_request</a></div><div class="ttdeci">static Status _parse_request(const SchemaChangeParams &amp;sc_params, RowBlockChanger *rb_changer, bool *sc_sorting, bool *sc_directly)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:1114</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_a4695eea517ee59a8ab9f7cf442c1ac24"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a4695eea517ee59a8ab9f7cf442c1ac24">doris::SchemaChangeHandler::_convert_historical_rowsets</a></div><div class="ttdeci">static Status _convert_historical_rowsets(const SchemaChangeParams &amp;sc_params)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:982</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_a70eb38465eb761d944f32619f780a563"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a70eb38465eb761d944f32619f780a563">doris::SchemaChangeHandler::_do_process_alter_tablet_v2</a></div><div class="ttdeci">static Status _do_process_alter_tablet_v2(const TAlterTabletReqV2 &amp;request)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:620</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_a8a0c7f254aac884273e0ca784caf4d22"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a8a0c7f254aac884273e0ca784caf4d22">doris::SchemaChangeHandler::_tablet_ids_in_converting</a></div><div class="ttdeci">static std::unordered_set&lt; int64_t &gt; _tablet_ids_in_converting</div><div class="ttdef"><b>Definition:</b> schema_change.h:235</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_a9689b941d610d5024cf79821a4556d5d"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#a9689b941d610d5024cf79821a4556d5d">doris::SchemaChangeHandler::_validate_alter_result</a></div><div class="ttdeci">static Status _validate_alter_result(TabletSharedPtr new_tablet, const TAlterTabletReqV2 &amp;request)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:1279</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_aa7f160dfe971788c9421c686a6988d9f"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#aa7f160dfe971788c9421c686a6988d9f">doris::SchemaChangeHandler::process_alter_tablet_v2</a></div><div class="ttdeci">static Status process_alter_tablet_v2(const TAlterTabletReqV2 &amp;request)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:579</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_aabac69293ce5085481024f77d0ceea19"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#aabac69293ce5085481024f77d0ceea19">doris::SchemaChangeHandler::get_sc_procedure</a></div><div class="ttdeci">static std::unique_ptr&lt; SchemaChange &gt; get_sc_procedure(const RowBlockChanger &amp;rb_changer, bool sc_sorting, bool sc_directly)</div><div class="ttdef"><b>Definition:</b> schema_change.h:180</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_abed4664d345e1c75816e318454c56304"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#abed4664d345e1c75816e318454c56304">doris::SchemaChangeHandler::_supported_functions</a></div><div class="ttdeci">static std::set&lt; std::string &gt; _supported_functions</div><div class="ttdef"><b>Definition:</b> schema_change.h:236</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_ac1589d821c47b67cda59adcdf8ec8373"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#ac1589d821c47b67cda59adcdf8ec8373">doris::SchemaChangeHandler::_get_versions_to_be_changed</a></div><div class="ttdeci">static Status _get_versions_to_be_changed(TabletSharedPtr base_tablet, std::vector&lt; Version &gt; *versions_to_be_changed, RowsetSharedPtr *max_rowset)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:966</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_handler_html_aeab57dfc08a5dc6f39a4c73046fbe376"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_schema_change_handler.html#aeab57dfc08a5dc6f39a4c73046fbe376">doris::SchemaChangeHandler::tablet_in_converting</a></div><div class="ttdeci">static bool tablet_in_converting(int64_t tablet_id)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:961</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html">doris::SchemaChange</a></div><div class="ttdef"><b>Definition:</b> schema_change.h:57</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a06b84d8f115f05c5d05aaa332fb6cf83"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a06b84d8f115f05c5d05aaa332fb6cf83">doris::SchemaChange::_merged_rows</a></div><div class="ttdeci">uint64_t _merged_rows</div><div class="ttdef"><b>Definition:</b> schema_change.h:121</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a0fab415de155ba98c49651c9790c9696"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a0fab415de155ba98c49651c9790c9696">doris::SchemaChange::_add_filtered_rows</a></div><div class="ttdeci">void _add_filtered_rows(uint64_t filtered_rows)</div><div class="ttdef"><b>Definition:</b> schema_change.h:97</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a116c9cd3bf664580b3591c1561907801"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a116c9cd3bf664580b3591c1561907801">doris::SchemaChange::filtered_rows</a></div><div class="ttdeci">uint64_t filtered_rows() const</div><div class="ttdef"><b>Definition:</b> schema_change.h:92</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a35785f0793b749f203a3248d0b2365a3"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a35785f0793b749f203a3248d0b2365a3">doris::SchemaChange::SchemaChange</a></div><div class="ttdeci">SchemaChange()</div><div class="ttdef"><b>Definition:</b> schema_change.h:59</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a435660ba2c88e4cc75c131a0465b959d"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a435660ba2c88e4cc75c131a0465b959d">doris::SchemaChange::_filtered_rows</a></div><div class="ttdeci">uint64_t _filtered_rows</div><div class="ttdef"><b>Definition:</b> schema_change.h:120</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a4807218cf5d0d48ac9c28a38acc121d3"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a4807218cf5d0d48ac9c28a38acc121d3">doris::SchemaChange::_check_row_nums</a></div><div class="ttdeci">bool _check_row_nums(RowsetReaderSharedPtr reader, const RowsetWriter &amp;writer) const</div><div class="ttdef"><b>Definition:</b> schema_change.h:106</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a535f347c1fe73c2166df6e29a30d8a70"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a535f347c1fe73c2166df6e29a30d8a70">doris::SchemaChange::merged_rows</a></div><div class="ttdeci">uint64_t merged_rows() const</div><div class="ttdef"><b>Definition:</b> schema_change.h:94</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a78e3c3646a61f2617768b45127cce414"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a78e3c3646a61f2617768b45127cce414">doris::SchemaChange::process</a></div><div class="ttdeci">virtual Status process(RowsetReaderSharedPtr rowset_reader, RowsetWriter *rowset_writer, TabletSharedPtr new_tablet, TabletSharedPtr base_tablet, TabletSchemaSPtr base_tablet_schema)</div><div class="ttdef"><b>Definition:</b> schema_change.h:62</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a7ab9489504ee3138e3563127bccb74ca"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a7ab9489504ee3138e3563127bccb74ca">doris::SchemaChange::~SchemaChange</a></div><div class="ttdeci">virtual ~SchemaChange()=default</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_a88eadb24e7d7dd02572ec2d4a51cbe77"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#a88eadb24e7d7dd02572ec2d4a51cbe77">doris::SchemaChange::_add_merged_rows</a></div><div class="ttdeci">void _add_merged_rows(uint64_t merged_rows)</div><div class="ttdef"><b>Definition:</b> schema_change.h:99</div></div>
<div class="ttc" id="aclassdoris_1_1_schema_change_html_aea5b47411993669371db6080212b65c4"><div class="ttname"><a href="../../da/d7e/classdoris_1_1_schema_change.html#aea5b47411993669371db6080212b65c4">doris::SchemaChange::_inner_process</a></div><div class="ttdeci">virtual Status _inner_process(RowsetReaderSharedPtr rowset_reader, RowsetWriter *rowset_writer, TabletSharedPtr new_tablet, TabletSchemaSPtr base_tablet_schema)</div><div class="ttdef"><b>Definition:</b> schema_change.h:101</div></div>
<div class="ttc" id="aclassdoris_1_1_status_html"><div class="ttname"><a href="../../d9/d8d/classdoris_1_1_status.html">doris::Status</a></div><div class="ttdef"><b>Definition:</b> status.h:285</div></div>
<div class="ttc" id="aclassdoris_1_1_status_html_a6ec1a217f203269ab53d2290d602db24"><div class="ttname"><a href="../../d9/d8d/classdoris_1_1_status.html#a6ec1a217f203269ab53d2290d602db24">doris::Status::OK</a></div><div class="ttdeci">static Status OK()</div><div class="ttdef"><b>Definition:</b> status.h:362</div></div>
<div class="ttc" id="aclassdoris_1_1_tablet_column_html"><div class="ttname"><a href="../../d8/d28/classdoris_1_1_tablet_column.html">doris::TabletColumn</a></div><div class="ttdef"><b>Definition:</b> tablet_schema.h:36</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_directly_html"><div class="ttname"><a href="../../da/d81/classdoris_1_1_v_schema_change_directly.html">doris::VSchemaChangeDirectly</a></div><div class="ttdef"><b>Definition:</b> schema_change.h:139</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_directly_html_a0d8656af3adfb25b565ff4c3e0fe9fc5"><div class="ttname"><a href="../../da/d81/classdoris_1_1_v_schema_change_directly.html#a0d8656af3adfb25b565ff4c3e0fe9fc5">doris::VSchemaChangeDirectly::_inner_process</a></div><div class="ttdeci">Status _inner_process(RowsetReaderSharedPtr rowset_reader, RowsetWriter *rowset_writer, TabletSharedPtr new_tablet, TabletSchemaSPtr base_tablet_schema) override</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:409</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_directly_html_a6692279ecf5e54f13d8932e4b0d7277e"><div class="ttname"><a href="../../da/d81/classdoris_1_1_v_schema_change_directly.html#a6692279ecf5e54f13d8932e4b0d7277e">doris::VSchemaChangeDirectly::_changer</a></div><div class="ttdeci">const RowBlockChanger &amp; _changer</div><div class="ttdef"><b>Definition:</b> schema_change.h:147</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_directly_html_a97b4bf0f402cb791a3e92fa99ed88445"><div class="ttname"><a href="../../da/d81/classdoris_1_1_v_schema_change_directly.html#a97b4bf0f402cb791a3e92fa99ed88445">doris::VSchemaChangeDirectly::VSchemaChangeDirectly</a></div><div class="ttdeci">VSchemaChangeDirectly(const RowBlockChanger &amp;row_block_changer)</div><div class="ttdef"><b>Definition:</b> schema_change.h:141</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_with_sorting_html"><div class="ttname"><a href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html">doris::VSchemaChangeWithSorting</a></div><div class="ttdef"><b>Definition:</b> schema_change.h:151</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_with_sorting_html_a0d8656af3adfb25b565ff4c3e0fe9fc5"><div class="ttname"><a href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a0d8656af3adfb25b565ff4c3e0fe9fc5">doris::VSchemaChangeWithSorting::_inner_process</a></div><div class="ttdeci">Status _inner_process(RowsetReaderSharedPtr rowset_reader, RowsetWriter *rowset_writer, TabletSharedPtr new_tablet, TabletSchemaSPtr base_tablet_schema) override</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:443</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_with_sorting_html_a254a5e486aae18deda9378d8c6046ff9"><div class="ttname"><a href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a254a5e486aae18deda9378d8c6046ff9">doris::VSchemaChangeWithSorting::_internal_sorting</a></div><div class="ttdeci">Status _internal_sorting(const std::vector&lt; std::unique_ptr&lt; vectorized::Block &gt; &gt; &amp;blocks, const Version &amp;temp_delta_versions, int64_t oldest_write_timestamp, int64_t newest_write_timestamp, TabletSharedPtr new_tablet, RowsetTypePB new_rowset_type, SegmentsOverlapPB segments_overlap, RowsetSharedPtr *rowset)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:530</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_with_sorting_html_a572b14f05da72b0ad62ba76ab3cef526"><div class="ttname"><a href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a572b14f05da72b0ad62ba76ab3cef526">doris::VSchemaChangeWithSorting::_external_sorting</a></div><div class="ttdeci">Status _external_sorting(std::vector&lt; RowsetSharedPtr &gt; &amp;src_rowsets, RowsetWriter *rowset_writer, TabletSharedPtr new_tablet)</div><div class="ttdef"><b>Definition:</b> schema_change.cpp:559</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_with_sorting_html_a58931b22871f368c6628c67c064e1814"><div class="ttname"><a href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a58931b22871f368c6628c67c064e1814">doris::VSchemaChangeWithSorting::_memory_limitation</a></div><div class="ttdeci">size_t _memory_limitation</div><div class="ttdef"><b>Definition:</b> schema_change.h:170</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_with_sorting_html_a589c3f7fd9800e4fd09e03c9dd12d33f"><div class="ttname"><a href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a589c3f7fd9800e4fd09e03c9dd12d33f">doris::VSchemaChangeWithSorting::_mem_tracker</a></div><div class="ttdeci">std::unique_ptr&lt; MemTracker &gt; _mem_tracker</div><div class="ttdef"><b>Definition:</b> schema_change.h:172</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_with_sorting_html_a6692279ecf5e54f13d8932e4b0d7277e"><div class="ttname"><a href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a6692279ecf5e54f13d8932e4b0d7277e">doris::VSchemaChangeWithSorting::_changer</a></div><div class="ttdeci">const RowBlockChanger &amp; _changer</div><div class="ttdef"><b>Definition:</b> schema_change.h:169</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_with_sorting_html_a6b651d17e3eca218ad4f42dcd79a77d5"><div class="ttname"><a href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a6b651d17e3eca218ad4f42dcd79a77d5">doris::VSchemaChangeWithSorting::_temp_delta_versions</a></div><div class="ttdeci">Version _temp_delta_versions</div><div class="ttdef"><b>Definition:</b> schema_change.h:171</div></div>
<div class="ttc" id="aclassdoris_1_1_v_schema_change_with_sorting_html_a9485465bda49bff417c30013c312c62b"><div class="ttname"><a href="../../dc/d38/classdoris_1_1_v_schema_change_with_sorting.html#a9485465bda49bff417c30013c312c62b">doris::VSchemaChangeWithSorting::~VSchemaChangeWithSorting</a></div><div class="ttdeci">~VSchemaChangeWithSorting() override=default</div></div>
<div class="ttc" id="aclassdoris_1_1vectorized_1_1_block_html"><div class="ttname"><a href="../../d2/d12/classdoris_1_1vectorized_1_1_block.html">doris::vectorized::Block</a></div><div class="ttdef"><b>Definition:</b> block.h:56</div></div>
<div class="ttc" id="acolumn_8h_html"><div class="ttname"><a href="../../dc/df8/column_8h.html">column.h</a></div></div>
<div class="ttc" id="acolumn__mapping_8h_html"><div class="ttname"><a href="../../da/d3e/column__mapping_8h.html">column_mapping.h</a></div></div>
<div class="ttc" id="adelete__handler_8h_html"><div class="ttname"><a href="../../dd/db2/delete__handler_8h.html">delete_handler.h</a></div></div>
<div class="ttc" id="anamespacedoris_1_1vectorized_html_aa1d7b67012985a9197efd18f7dd48e51"><div class="ttname"><a href="../../d3/d1e/namespacedoris_1_1vectorized.html#aa1d7b67012985a9197efd18f7dd48e51">doris::vectorized::ColumnPtr</a></div><div class="ttdeci">IColumn::Ptr ColumnPtr</div><div class="ttdef"><b>Definition:</b> column.h:653</div></div>
<div class="ttc" id="anamespacedoris_html"><div class="ttname"><a href="../../d6/d94/namespacedoris.html">doris</a></div><div class="ttdoc">Utilities for collecting timings.</div><div class="ttdef"><b>Definition:</b> agent_server.cpp:36</div></div>
<div class="ttc" id="anamespacedoris_html_a45a11d2c52e9b86e26ff0bb6d9c667d2"><div class="ttname"><a href="../../d6/d94/namespacedoris.html#a45a11d2c52e9b86e26ff0bb6d9c667d2">doris::RowsetSharedPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Rowset &gt; RowsetSharedPtr</div><div class="ttdef"><b>Definition:</b> rowset.h:38</div></div>
<div class="ttc" id="anamespacedoris_html_a4991717acc636b63fb85afa5cd3e02a1"><div class="ttname"><a href="../../d6/d94/namespacedoris.html#a4991717acc636b63fb85afa5cd3e02a1">doris::RowsetReaderSharedPtr</a></div><div class="ttdeci">std::shared_ptr&lt; RowsetReader &gt; RowsetReaderSharedPtr</div><div class="ttdef"><b>Definition:</b> rowset_reader.h:37</div></div>
<div class="ttc" id="anamespacedoris_html_a9216ba4fd9b418b8808bfb91a407ea20"><div class="ttname"><a href="../../d6/d94/namespacedoris.html#a9216ba4fd9b418b8808bfb91a407ea20">doris::TabletSchemaSPtr</a></div><div class="ttdeci">std::shared_ptr&lt; TabletSchema &gt; TabletSchemaSPtr</div><div class="ttdef"><b>Definition:</b> tablet_schema.h:284</div></div>
<div class="ttc" id="anamespacedoris_html_ac6a70f89e3ffebb1e772cd5becd6acf8"><div class="ttname"><a href="../../d6/d94/namespacedoris.html#ac6a70f89e3ffebb1e772cd5becd6acf8">doris::SchemaMapping</a></div><div class="ttdeci">std::vector&lt; ColumnMapping &gt; SchemaMapping</div><div class="ttdef"><b>Definition:</b> column_mapping.h:44</div></div>
<div class="ttc" id="anamespacedoris_html_ad3e800b72ff04da97e09ccc723b2f8cf"><div class="ttname"><a href="../../d6/d94/namespacedoris.html#ad3e800b72ff04da97e09ccc723b2f8cf">doris::TabletSharedPtr</a></div><div class="ttdeci">std::shared_ptr&lt; Tablet &gt; TabletSharedPtr</div><div class="ttdef"><b>Definition:</b> tablet.h:60</div></div>
<div class="ttc" id="arowset_8h_html"><div class="ttname"><a href="../../d8/d75/rowset_8h.html">rowset.h</a></div></div>
<div class="ttc" id="arowset__writer_8h_html"><div class="ttname"><a href="../../d7/d13/rowset__writer_8h.html">rowset_writer.h</a></div></div>
<div class="ttc" id="astatus_8h_html"><div class="ttname"><a href="../../d1/d13/status_8h.html">status.h</a></div></div>
<div class="ttc" id="astatus_8h_html_a7f122d03731fbafe5f83de473538c567"><div class="ttname"><a href="../../d1/d13/status_8h.html#a7f122d03731fbafe5f83de473538c567">RETURN_WITH_WARN_IF_ERROR</a></div><div class="ttdeci">#define RETURN_WITH_WARN_IF_ERROR(stmt, ret_code, warning_prefix)</div><div class="ttdef"><b>Definition:</b> status.h:546</div></div>
<div class="ttc" id="astatus_8h_html_a85f7d0e774e15eb35b74f53264305e16"><div class="ttname"><a href="../../d1/d13/status_8h.html#a85f7d0e774e15eb35b74f53264305e16">RETURN_IF_ERROR</a></div><div class="ttdeci">#define RETURN_IF_ERROR(stmt)</div><div class="ttdef"><b>Definition:</b> status.h:496</div></div>
<div class="ttc" id="astructdoris_1_1_column_mapping_html"><div class="ttname"><a href="../../d1/d84/structdoris_1_1_column_mapping.html">doris::ColumnMapping</a></div><div class="ttdef"><b>Definition:</b> column_mapping.h:29</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param_html"><div class="ttname"><a href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html">doris::SchemaChangeHandler::AlterMaterializedViewParam</a></div><div class="ttdef"><b>Definition:</b> schema_change.h:201</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param_html_a418a457a1123a2f29218bc0f252fe0fc"><div class="ttname"><a href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#a418a457a1123a2f29218bc0f252fe0fc">doris::SchemaChangeHandler::AlterMaterializedViewParam::column_name</a></div><div class="ttdeci">std::string column_name</div><div class="ttdef"><b>Definition:</b> schema_change.h:202</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param_html_ad29fa28c6c07599122083a0f818acac9"><div class="ttname"><a href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#ad29fa28c6c07599122083a0f818acac9">doris::SchemaChangeHandler::AlterMaterializedViewParam::expr</a></div><div class="ttdeci">std::shared_ptr&lt; TExpr &gt; expr</div><div class="ttdef"><b>Definition:</b> schema_change.h:205</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param_html_ae5757a8555e2811ef28594ac20cc3f83"><div class="ttname"><a href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#ae5757a8555e2811ef28594ac20cc3f83">doris::SchemaChangeHandler::AlterMaterializedViewParam::mv_expr</a></div><div class="ttdeci">std::string mv_expr</div><div class="ttdef"><b>Definition:</b> schema_change.h:204</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param_html_afcb80bff340c0dfbe7c52e549e8b1ca3"><div class="ttname"><a href="../../d3/dea/structdoris_1_1_schema_change_handler_1_1_alter_materialized_view_param.html#afcb80bff340c0dfbe7c52e549e8b1ca3">doris::SchemaChangeHandler::AlterMaterializedViewParam::origin_column_name</a></div><div class="ttdeci">std::string origin_column_name</div><div class="ttdef"><b>Definition:</b> schema_change.h:203</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html">doris::SchemaChangeHandler::SchemaChangeParams</a></div><div class="ttdef"><b>Definition:</b> schema_change.h:208</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html_a04df63d24aa09eed9d11065c314630d9"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a04df63d24aa09eed9d11065c314630d9">doris::SchemaChangeHandler::SchemaChangeParams::desc_tbl</a></div><div class="ttdeci">DescriptorTbl * desc_tbl</div><div class="ttdef"><b>Definition:</b> schema_change.h:216</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html_a0c96588bc21d209c5b630554586b3f1e"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a0c96588bc21d209c5b630554586b3f1e">doris::SchemaChangeHandler::SchemaChangeParams::base_tablet_schema</a></div><div class="ttdeci">TabletSchemaSPtr base_tablet_schema</div><div class="ttdef"><b>Definition:</b> schema_change.h:212</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html_a0fdfd239dc1c8ff04adf08046383cb5c"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a0fdfd239dc1c8ff04adf08046383cb5c">doris::SchemaChangeHandler::SchemaChangeParams::new_tablet</a></div><div class="ttdeci">TabletSharedPtr new_tablet</div><div class="ttdef"><b>Definition:</b> schema_change.h:211</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html_a3a5de7bd423fbc0afc4cf935c166ca6b"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a3a5de7bd423fbc0afc4cf935c166ca6b">doris::SchemaChangeHandler::SchemaChangeParams::pool</a></div><div class="ttdeci">ObjectPool pool</div><div class="ttdef"><b>Definition:</b> schema_change.h:217</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html_a93fa663faf4c65fe6a165f60db5f95da"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a93fa663faf4c65fe6a165f60db5f95da">doris::SchemaChangeHandler::SchemaChangeParams::base_tablet</a></div><div class="ttdeci">TabletSharedPtr base_tablet</div><div class="ttdef"><b>Definition:</b> schema_change.h:210</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html_a98f670d04bdcb1c402b3c58b50cb384b"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#a98f670d04bdcb1c402b3c58b50cb384b">doris::SchemaChangeHandler::SchemaChangeParams::materialized_params_map</a></div><div class="ttdeci">std::unordered_map&lt; std::string, AlterMaterializedViewParam &gt; materialized_params_map</div><div class="ttdef"><b>Definition:</b> schema_change.h:215</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html_ab00b9c36a7c90b5dfc1129f6f3240cb4"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#ab00b9c36a7c90b5dfc1129f6f3240cb4">doris::SchemaChangeHandler::SchemaChangeParams::alter_tablet_type</a></div><div class="ttdeci">AlterTabletType alter_tablet_type</div><div class="ttdef"><b>Definition:</b> schema_change.h:209</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html_ad0880837a6a439c3c8eb4f2d5d560a6d"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#ad0880837a6a439c3c8eb4f2d5d560a6d">doris::SchemaChangeHandler::SchemaChangeParams::delete_handler</a></div><div class="ttdeci">DeleteHandler * delete_handler</div><div class="ttdef"><b>Definition:</b> schema_change.h:214</div></div>
<div class="ttc" id="astructdoris_1_1_schema_change_handler_1_1_schema_change_params_html_ae7b666da41962d0caf0d0eca44948d38"><div class="ttname"><a href="../../d9/dc2/structdoris_1_1_schema_change_handler_1_1_schema_change_params.html#ae7b666da41962d0caf0d0eca44948d38">doris::SchemaChangeHandler::SchemaChangeParams::ref_rowset_readers</a></div><div class="ttdeci">std::vector&lt; RowsetReaderSharedPtr &gt; ref_rowset_readers</div><div class="ttdef"><b>Definition:</b> schema_change.h:213</div></div>
<div class="ttc" id="astructdoris_1_1_version_html"><div class="ttname"><a href="../../dc/d96/structdoris_1_1_version.html">doris::Version</a></div><div class="ttdef"><b>Definition:</b> olap_common.h:201</div></div>
<div class="ttc" id="astructdoris_1_1_version_html_a60646cb67795d4643f463d6678081989"><div class="ttname"><a href="../../dc/d96/structdoris_1_1_version.html#a60646cb67795d4643f463d6678081989">doris::Version::first</a></div><div class="ttdeci">int64_t first</div><div class="ttdef"><b>Definition:</b> olap_common.h:202</div></div>
<div class="ttc" id="astructdoris_1_1_version_html_ad199717fb108e23c8a6e7d2c52c4aea8"><div class="ttname"><a href="../../dc/d96/structdoris_1_1_version.html#ad199717fb108e23c8a6e7d2c52c4aea8">doris::Version::second</a></div><div class="ttdeci">int64_t second</div><div class="ttdef"><b>Definition:</b> olap_common.h:203</div></div>
<div class="ttc" id="atablet_8h_html"><div class="ttname"><a href="../../dc/d1e/tablet_8h.html">tablet.h</a></div></div>
<div class="ttc" id="autil_2types_8h_html_adae7202c63102b0934c3ac5be41b0dae"><div class="ttname"><a href="../../df/dd9/util_2types_8h.html#adae7202c63102b0934c3ac5be41b0dae">value</a></div><div class="ttdeci">__int128 value</div><div class="ttdef"><b>Definition:</b> types.h:10</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
