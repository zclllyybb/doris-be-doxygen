<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ppl_util: LRUFileCache类 参考</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ppl_util
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d6/d94/namespacedoris.html">doris</a></li><li class="navelem"><a class="el" href="../../d4/d00/namespacedoris_1_1io.html">io</a></li><li class="navelem"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html">LRUFileCache</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">类</a> &#124;
<a href="#pub-types">Public 类型</a> &#124;
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="#pub-static-methods">静态 Public 成员函数</a> &#124;
<a href="#pro-types">Protected 类型</a> &#124;
<a href="#pro-methods">Protected 成员函数</a> &#124;
<a href="#pro-attribs">Protected 属性</a> &#124;
<a href="#pri-types">Private 类型</a> &#124;
<a href="#pri-methods">Private 成员函数</a> &#124;
<a href="#pri-attribs">Private 属性</a> &#124;
<a href="../../d4/dc2/classdoris_1_1io_1_1_l_r_u_file_cache-members.html">所有成员列表</a>  </div>
  <div class="headertitle"><div class="title">LRUFileCache类 参考<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d9/dde/block__lru__file__cache_8h_source.html">block_lru_file_cache.h</a>&gt;</code></p>
<div class="dynheader">
类 LRUFileCache 继承关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/dbc/classdoris_1_1io_1_1_l_r_u_file_cache__inherit__graph.svg" width="119" height="110"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="../../graph_legend.html">图例</a>]</span></center></div>
<div class="dynheader">
LRUFileCache 的协作图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/daf/classdoris_1_1io_1_1_l_r_u_file_cache__coll__graph.svg" width="179" height="199"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="../../graph_legend.html">图例</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
类</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/da8/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_file_block_cell.html">FileBlockCell</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dfe/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_hash_cached_file_key.html">HashCachedFileKey</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public 类型</h2></td></tr>
<tr class="memitem:a3c7d80a775cb9b2160e61a945865f534"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a3c7d80a775cb9b2160e61a945865f534">QueryFileCacheContextHolderPtr</a> = std::unique_ptr&lt; <a class="el" href="../../d8/de4/structdoris_1_1io_1_1_i_file_cache_1_1_query_file_cache_context_holder.html">QueryFileCacheContextHolder</a> &gt;</td></tr>
<tr class="separator:a3c7d80a775cb9b2160e61a945865f534"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:a1c1c8aecdaaafd83da19b9e089ca7f8d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a1c1c8aecdaaafd83da19b9e089ca7f8d">LRUFileCache</a> (const std::string &amp;cache_base_path, const <a class="el" href="../../dd/d31/structdoris_1_1io_1_1_file_cache_settings.html">FileCacheSettings</a> &amp;cache_settings)</td></tr>
<tr class="separator:a1c1c8aecdaaafd83da19b9e089ca7f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa01842a257dfda4a1079d7817291181a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/d47/structdoris_1_1io_1_1_file_blocks_holder.html">FileBlocksHolder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#aa01842a257dfda4a1079d7817291181a">get_or_set</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, size_t offset, size_t size, bool is_persistent, const TUniqueId &amp;query_id) override</td></tr>
<tr class="separator:aa01842a257dfda4a1079d7817291181a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795d70c736c3b9b8296faf7959f83403"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d8d/classdoris_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a795d70c736c3b9b8296faf7959f83403">initialize</a> () override</td></tr>
<tr class="memdesc:a795d70c736c3b9b8296faf7959f83403"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore cache from local filesystem.  <br /></td></tr>
<tr class="separator:a795d70c736c3b9b8296faf7959f83403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47a7087bd47c22bfda85416b3aa9b24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#aa47a7087bd47c22bfda85416b3aa9b24">remove_if_exists</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, bool is_persistent) override</td></tr>
<tr class="separator:aa47a7087bd47c22bfda85416b3aa9b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81306e93a8759d883c10f2335dc06d4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a81306e93a8759d883c10f2335dc06d4b">remove_if_releasable</a> (bool is_persistent) override</td></tr>
<tr class="separator:a81306e93a8759d883c10f2335dc06d4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17c021e102f9a430377feed83a3a8b13"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a17c021e102f9a430377feed83a3a8b13">try_get_cache_paths</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, bool is_persistent) override</td></tr>
<tr class="separator:a17c021e102f9a430377feed83a3a8b13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c327f08641ee8ce840a7d54b4c9745"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#ad4c327f08641ee8ce840a7d54b4c9745">get_used_cache_size</a> (bool is_persistent) const override</td></tr>
<tr class="separator:ad4c327f08641ee8ce840a7d54b4c9745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6a7fdbfb1146b13107e4e1dfd100182"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#aa6a7fdbfb1146b13107e4e1dfd100182">get_file_segments_num</a> (bool is_persistent) const override</td></tr>
<tr class="separator:aa6a7fdbfb1146b13107e4e1dfd100182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7500355b22c1715b6d9ae0facdc05453"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a7500355b22c1715b6d9ae0facdc05453">dump_structure</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, bool is_persistent) override</td></tr>
<tr class="memdesc:a7500355b22c1715b6d9ae0facdc05453"><td class="mdescLeft">&#160;</td><td class="mdescRight">For debug.  <br /></td></tr>
<tr class="separator:a7500355b22c1715b6d9ae0facdc05453"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7223528283cd4e5872e0cc716bf9bd9d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a7223528283cd4e5872e0cc716bf9bd9d">capacity</a> () const</td></tr>
<tr class="memdesc:a7223528283cd4e5872e0cc716bf9bd9d"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../de/d06/classdoris_1_1_cache.html">Cache</a> capacity in bytes.  <br /></td></tr>
<tr class="separator:a7223528283cd4e5872e0cc716bf9bd9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d09a4047f95b0143001f69f59548d30"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a4d09a4047f95b0143001f69f59548d30">get_path_in_local_cache</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, size_t offset, bool is_persistent) const</td></tr>
<tr class="separator:a4d09a4047f95b0143001f69f59548d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc9e70487e1ef3e5ba3b0e577a0fa20"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a5bc9e70487e1ef3e5ba3b0e577a0fa20">get_path_in_local_cache</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key) const</td></tr>
<tr class="separator:a5bc9e70487e1ef3e5ba3b0e577a0fa20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c437bfbf13578710df28996a11c181d"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a0c437bfbf13578710df28996a11c181d">get_base_path</a> () const</td></tr>
<tr class="separator:a0c437bfbf13578710df28996a11c181d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3636e05272af94893026ac964ec401fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a3c7d80a775cb9b2160e61a945865f534">QueryFileCacheContextHolderPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a3636e05272af94893026ac964ec401fd">get_query_context_holder</a> (const TUniqueId &amp;query_id)</td></tr>
<tr class="separator:a3636e05272af94893026ac964ec401fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
静态 Public 成员函数</h2></td></tr>
<tr class="memitem:af618e53b20e5e19b7b976dac4620a216"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#af618e53b20e5e19b7b976dac4620a216">hash</a> (const std::string &amp;path)</td></tr>
<tr class="separator:af618e53b20e5e19b7b976dac4620a216"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-types" name="pro-types"></a>
Protected 类型</h2></td></tr>
<tr class="memitem:a1d89d3b7e81c205e0aa726336753a1da"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a1d89d3b7e81c205e0aa726336753a1da">AccessKeyAndOffset</a> = std::tuple&lt; <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a>, size_t, bool &gt;</td></tr>
<tr class="separator:a1d89d3b7e81c205e0aa726336753a1da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adccb0504103447215380ee17166db1f7"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#adccb0504103447215380ee17166db1f7">AccessRecord</a> = std::unordered_map&lt; <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a1d89d3b7e81c205e0aa726336753a1da">AccessKeyAndOffset</a>, LRUQueue::Iterator, <a class="el" href="../../dc/daa/structdoris_1_1io_1_1_i_file_cache_1_1_key_and_offset_hash.html">KeyAndOffsetHash</a> &gt;</td></tr>
<tr class="separator:adccb0504103447215380ee17166db1f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c66fc6bb666006ac6243084864487b6"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">QueryFileCacheContextPtr</a> = std::shared_ptr&lt; <a class="el" href="../../dc/d47/structdoris_1_1io_1_1_i_file_cache_1_1_query_file_cache_context.html">QueryFileCacheContext</a> &gt;</td></tr>
<tr class="separator:a8c66fc6bb666006ac6243084864487b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18f35fffa11659535addfdd93902c7f4"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a18f35fffa11659535addfdd93902c7f4">QueryFileCacheContextMap</a> = std::unordered_map&lt; TUniqueId, <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">QueryFileCacheContextPtr</a> &gt;</td></tr>
<tr class="separator:a18f35fffa11659535addfdd93902c7f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected 成员函数</h2></td></tr>
<tr class="memitem:a5b2a6670f77761ee0e166c8319ed74fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">QueryFileCacheContextPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a5b2a6670f77761ee0e166c8319ed74fe">get_query_context</a> (const TUniqueId &amp;query_id, std::lock_guard&lt; std::mutex &gt; &amp;)</td></tr>
<tr class="separator:a5b2a6670f77761ee0e166c8319ed74fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a171ce34f33a2715f0697f2676892b2ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a171ce34f33a2715f0697f2676892b2ae">remove_query_context</a> (const TUniqueId &amp;query_id)</td></tr>
<tr class="separator:a171ce34f33a2715f0697f2676892b2ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a227d0732b6b1e1ec43cbb6bddcd5e5dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">QueryFileCacheContextPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a227d0732b6b1e1ec43cbb6bddcd5e5dc">get_or_set_query_context</a> (const TUniqueId &amp;query_id, std::lock_guard&lt; std::mutex &gt; &amp;)</td></tr>
<tr class="separator:a227d0732b6b1e1ec43cbb6bddcd5e5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected 属性</h2></td></tr>
<tr class="memitem:a2ba6697a12d63637494dbeec00ff3a78"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a2ba6697a12d63637494dbeec00ff3a78">_cache_base_path</a></td></tr>
<tr class="separator:a2ba6697a12d63637494dbeec00ff3a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0288896c161455b7451327a41d33e74"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#ab0288896c161455b7451327a41d33e74">_max_size</a> = 0</td></tr>
<tr class="separator:ab0288896c161455b7451327a41d33e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19cbdfacaa469abf31575087e0473a73"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a19cbdfacaa469abf31575087e0473a73">_max_element_size</a> = 0</td></tr>
<tr class="separator:a19cbdfacaa469abf31575087e0473a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79ca82467b815ca27bb285d6185c1fe8"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a79ca82467b815ca27bb285d6185c1fe8">_persistent_max_size</a> = 0</td></tr>
<tr class="separator:a79ca82467b815ca27bb285d6185c1fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f6f9a282d55df2917b54cf99d501785"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a6f6f9a282d55df2917b54cf99d501785">_persistent_max_element_size</a> = 0</td></tr>
<tr class="separator:a6f6f9a282d55df2917b54cf99d501785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa297c207d83ea0b9ebf5cee4fbad83a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#afa297c207d83ea0b9ebf5cee4fbad83a">_max_file_segment_size</a> = 0</td></tr>
<tr class="separator:afa297c207d83ea0b9ebf5cee4fbad83a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ab93e3585b26c3ff70100f829e448b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#ad8ab93e3585b26c3ff70100f829e448b">_max_query_cache_size</a> = 0</td></tr>
<tr class="separator:ad8ab93e3585b26c3ff70100f829e448b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47905df0a83061082cf11f932a918df"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#aa47905df0a83061082cf11f932a918df">_is_initialized</a> = false</td></tr>
<tr class="separator:aa47905df0a83061082cf11f932a918df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f0b4c278cb19f9c2b2dbdb065f51e14"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a3f0b4c278cb19f9c2b2dbdb065f51e14">_mutex</a></td></tr>
<tr class="separator:a3f0b4c278cb19f9c2b2dbdb065f51e14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a243744aff6497bffe2dfde68e4b064bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a18f35fffa11659535addfdd93902c7f4">QueryFileCacheContextMap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a243744aff6497bffe2dfde68e4b064bd">_query_map</a></td></tr>
<tr class="separator:a243744aff6497bffe2dfde68e4b064bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b3d22a40257298552eb609d18cb2219"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8b3d22a40257298552eb609d18cb2219">_enable_file_cache_query_limit</a> = config::enable_file_cache_query_limit</td></tr>
<tr class="separator:a8b3d22a40257298552eb609d18cb2219"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private 类型</h2></td></tr>
<tr class="memitem:a71537e7046cc842769c9e7474a084bd8"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a71537e7046cc842769c9e7474a084bd8">FileBlocksByOffset</a> = std::map&lt; size_t, <a class="el" href="../../df/da8/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_file_block_cell.html">FileBlockCell</a> &gt;</td></tr>
<tr class="separator:a71537e7046cc842769c9e7474a084bd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ad54d3b33fc242ffb81e0c4dfeb99eb"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a3ad54d3b33fc242ffb81e0c4dfeb99eb">CachedFiles</a> = std::unordered_map&lt; std::pair&lt; <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a>, bool &gt;, <a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a71537e7046cc842769c9e7474a084bd8">FileBlocksByOffset</a>, <a class="el" href="../../d1/dfe/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_hash_cached_file_key.html">HashCachedFileKey</a> &gt;</td></tr>
<tr class="separator:a3ad54d3b33fc242ffb81e0c4dfeb99eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private 成员函数</h2></td></tr>
<tr class="memitem:a4d35604cf57218b4aec594da6fd17366"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d00/namespacedoris_1_1io.html#a12b7a12e387d2192f0feb8ce5f59c116">FileBlocks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a4d35604cf57218b4aec594da6fd17366">get_impl</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, const TUniqueId &amp;query_id, bool is_persistent, const <a class="el" href="../../d5/d1f/structdoris_1_1io_1_1_file_block_1_1_range.html">FileBlock::Range</a> &amp;range, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock)</td></tr>
<tr class="separator:a4d35604cf57218b4aec594da6fd17366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0bf665f1497fb81251f9cf4c8d2fde5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/da8/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_file_block_cell.html">FileBlockCell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#af0bf665f1497fb81251f9cf4c8d2fde5">get_cell</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, bool is_persistent, size_t offset, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock)</td></tr>
<tr class="separator:af0bf665f1497fb81251f9cf4c8d2fde5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a581f197265ee91151badf10b10015dc9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../df/da8/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_file_block_cell.html">FileBlockCell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a581f197265ee91151badf10b10015dc9">add_cell</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, bool is_persistent, size_t offset, size_t size, <a class="el" href="../../db/d15/classdoris_1_1io_1_1_file_block.html#a5d74787dedbc4e11c1ab15bf487e61f8">FileBlock::State</a> state, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock)</td></tr>
<tr class="separator:a581f197265ee91151badf10b10015dc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e9e107d96582116fc575449a9cd2bda"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a7e9e107d96582116fc575449a9cd2bda">use_cell</a> (const <a class="el" href="../../df/da8/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_file_block_cell.html">FileBlockCell</a> &amp;cell, const TUniqueId &amp;query_id, bool is_persistent, <a class="el" href="../../d4/d00/namespacedoris_1_1io.html#a12b7a12e387d2192f0feb8ce5f59c116">FileBlocks</a> &amp;result, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock)</td></tr>
<tr class="separator:a7e9e107d96582116fc575449a9cd2bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa12d90e78295c706f726f3f38ba0937f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#aa12d90e78295c706f726f3f38ba0937f">try_reserve</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, const TUniqueId &amp;query_id, bool is_persistent, size_t offset, size_t size, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock) override</td></tr>
<tr class="separator:aa12d90e78295c706f726f3f38ba0937f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76b1555e78804c6b63cd0038ec6ad512"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a76b1555e78804c6b63cd0038ec6ad512">try_reserve_for_main_list</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">QueryFileCacheContextPtr</a> query_context, bool is_persistent, size_t offset, size_t size, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock)</td></tr>
<tr class="separator:a76b1555e78804c6b63cd0038ec6ad512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9842f06e7eca4524f3dfa4b09f1cbb9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a9842f06e7eca4524f3dfa4b09f1cbb9c">remove</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, bool is_persistent, size_t offset, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock, std::lock_guard&lt; std::mutex &gt; &amp;segment_lock) override</td></tr>
<tr class="separator:a9842f06e7eca4524f3dfa4b09f1cbb9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af09bfc1a2d83f1089bc31ec8e30048fa"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#af09bfc1a2d83f1089bc31ec8e30048fa">get_available_cache_size</a> (bool is_persistent) const</td></tr>
<tr class="separator:af09bfc1a2d83f1089bc31ec8e30048fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4193c23e933aff85769c000f25bd413"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#ae4193c23e933aff85769c000f25bd413">load_cache_info_into_memory</a> (std::lock_guard&lt; std::mutex &gt; &amp;cache_lock)</td></tr>
<tr class="separator:ae4193c23e933aff85769c000f25bd413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678600500e1d9a7ac56f07ff7c9882dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d00/namespacedoris_1_1io.html#a12b7a12e387d2192f0feb8ce5f59c116">FileBlocks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a678600500e1d9a7ac56f07ff7c9882dc">split_range_into_cells</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, const TUniqueId &amp;query_id, bool is_persistent, size_t offset, size_t size, <a class="el" href="../../db/d15/classdoris_1_1io_1_1_file_block.html#a5d74787dedbc4e11c1ab15bf487e61f8">FileBlock::State</a> state, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock)</td></tr>
<tr class="separator:a678600500e1d9a7ac56f07ff7c9882dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4bd0a5783832f110b9c43288d4cec5b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#ad4bd0a5783832f110b9c43288d4cec5b">dump_structure_unlocked</a> (const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, bool is_persistent, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock)</td></tr>
<tr class="separator:ad4bd0a5783832f110b9c43288d4cec5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc9456e4757b4e8625c8c611859c71b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#afc9456e4757b4e8625c8c611859c71b9">fill_holes_with_empty_file_segments</a> (<a class="el" href="../../d4/d00/namespacedoris_1_1io.html#a12b7a12e387d2192f0feb8ce5f59c116">FileBlocks</a> &amp;file_segments, const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;key, const TUniqueId &amp;query_id, bool is_persistent, const <a class="el" href="../../d5/d1f/structdoris_1_1io_1_1_file_block_1_1_range.html">FileBlock::Range</a> &amp;range, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock)</td></tr>
<tr class="separator:afc9456e4757b4e8625c8c611859c71b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e665ae416cd0bb806ccc36fd2b414b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#af6e665ae416cd0bb806ccc36fd2b414b">get_used_cache_size_unlocked</a> (bool is_persistent, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock) const</td></tr>
<tr class="separator:af6e665ae416cd0bb806ccc36fd2b414b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0781f1ed534dad10e7af439ce08d6d09"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a0781f1ed534dad10e7af439ce08d6d09">get_available_cache_size_unlocked</a> (bool is_persistent, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock) const</td></tr>
<tr class="separator:a0781f1ed534dad10e7af439ce08d6d09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5c5b4161254a93f22dbeaf58a4eec17"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#ac5c5b4161254a93f22dbeaf58a4eec17">get_file_segments_num_unlocked</a> (bool is_persistent, std::lock_guard&lt; std::mutex &gt; &amp;cache_lock) const</td></tr>
<tr class="separator:ac5c5b4161254a93f22dbeaf58a4eec17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private 属性</h2></td></tr>
<tr class="memitem:a31a366c9f070d46beffc14bcd67f2fdd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a3ad54d3b33fc242ffb81e0c4dfeb99eb">CachedFiles</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a31a366c9f070d46beffc14bcd67f2fdd">_files</a></td></tr>
<tr class="separator:a31a366c9f070d46beffc14bcd67f2fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a850e2ffd8de08325716b5f9a9e5dcb86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d81/classdoris_1_1io_1_1_i_file_cache_1_1_l_r_u_queue.html">LRUQueue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a850e2ffd8de08325716b5f9a9e5dcb86">_queue</a></td></tr>
<tr class="separator:a850e2ffd8de08325716b5f9a9e5dcb86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6601fe68ab2b631161709dcd4517d006"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d81/classdoris_1_1io_1_1_i_file_cache_1_1_l_r_u_queue.html">LRUQueue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a6601fe68ab2b631161709dcd4517d006">_persistent_queue</a></td></tr>
<tr class="separator:a6601fe68ab2b631161709dcd4517d006"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>Local cache for remote filesystem files, represented as a set of non-overlapping non-empty file segments. Implements LRU eviction policy. </p>
</div><h2 class="groupheader">成员类型定义说明</h2>
<a id="a71537e7046cc842769c9e7474a084bd8" name="a71537e7046cc842769c9e7474a084bd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71537e7046cc842769c9e7474a084bd8">&#9670;&#160;</a></span>FileBlocksByOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a71537e7046cc842769c9e7474a084bd8">FileBlocksByOffset</a> =  std::map&lt;size_t, <a class="el" href="../../df/da8/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_file_block_cell.html">FileBlockCell</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3ad54d3b33fc242ffb81e0c4dfeb99eb" name="a3ad54d3b33fc242ffb81e0c4dfeb99eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ad54d3b33fc242ffb81e0c4dfeb99eb">&#9670;&#160;</a></span>CachedFiles</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a3ad54d3b33fc242ffb81e0c4dfeb99eb">CachedFiles</a> =  std::unordered_map&lt;std::pair&lt;<a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a>, bool&gt;, <a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a71537e7046cc842769c9e7474a084bd8">FileBlocksByOffset</a>, <a class="el" href="../../d1/dfe/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_hash_cached_file_key.html">HashCachedFileKey</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1d89d3b7e81c205e0aa726336753a1da" name="a1d89d3b7e81c205e0aa726336753a1da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d89d3b7e81c205e0aa726336753a1da">&#9670;&#160;</a></span>AccessKeyAndOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a1d89d3b7e81c205e0aa726336753a1da">AccessKeyAndOffset</a> =  std::tuple&lt;<a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a>, size_t, bool&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adccb0504103447215380ee17166db1f7" name="adccb0504103447215380ee17166db1f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adccb0504103447215380ee17166db1f7">&#9670;&#160;</a></span>AccessRecord</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#adccb0504103447215380ee17166db1f7">AccessRecord</a> =  std::unordered_map&lt;<a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a1d89d3b7e81c205e0aa726336753a1da">AccessKeyAndOffset</a>, LRUQueue::Iterator, <a class="el" href="../../dc/daa/structdoris_1_1io_1_1_i_file_cache_1_1_key_and_offset_hash.html">KeyAndOffsetHash</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8c66fc6bb666006ac6243084864487b6" name="a8c66fc6bb666006ac6243084864487b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c66fc6bb666006ac6243084864487b6">&#9670;&#160;</a></span>QueryFileCacheContextPtr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">QueryFileCacheContextPtr</a> =  std::shared_ptr&lt;<a class="el" href="../../dc/d47/structdoris_1_1io_1_1_i_file_cache_1_1_query_file_cache_context.html">QueryFileCacheContext</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a18f35fffa11659535addfdd93902c7f4" name="a18f35fffa11659535addfdd93902c7f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18f35fffa11659535addfdd93902c7f4">&#9670;&#160;</a></span>QueryFileCacheContextMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a18f35fffa11659535addfdd93902c7f4">QueryFileCacheContextMap</a> =  std::unordered_map&lt;TUniqueId, <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">QueryFileCacheContextPtr</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3c7d80a775cb9b2160e61a945865f534" name="a3c7d80a775cb9b2160e61a945865f534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c7d80a775cb9b2160e61a945865f534">&#9670;&#160;</a></span>QueryFileCacheContextHolderPtr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a3c7d80a775cb9b2160e61a945865f534">QueryFileCacheContextHolderPtr</a> =  std::unique_ptr&lt;<a class="el" href="../../d8/de4/structdoris_1_1io_1_1_i_file_cache_1_1_query_file_cache_context_holder.html">QueryFileCacheContextHolder</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">构造及析构函数说明</h2>
<a id="a1c1c8aecdaaafd83da19b9e089ca7f8d" name="a1c1c8aecdaaafd83da19b9e089ca7f8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c1c8aecdaaafd83da19b9e089ca7f8d">&#9670;&#160;</a></span>LRUFileCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html">LRUFileCache</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cache_base_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d31/structdoris_1_1io_1_1_file_cache_settings.html">FileCacheSettings</a> &amp;&#160;</td>
          <td class="paramname"><em>cache_settings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>cache_base_path: the file cache path cache_settings: the file cache setttings </p>

</div>
</div>
<h2 class="groupheader">成员函数说明</h2>
<a id="aa01842a257dfda4a1079d7817291181a" name="aa01842a257dfda4a1079d7817291181a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa01842a257dfda4a1079d7817291181a">&#9670;&#160;</a></span>get_or_set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/d47/structdoris_1_1io_1_1_file_blocks_holder.html">FileBlocksHolder</a> get_or_set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get the files which range contain [offset, offset+size-1] </p>
<p>Get all segments which intersect with the given range.</p>

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a9080d155c7a2120f589d67c58a0a9a07">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_aa01842a257dfda4a1079d7817291181a_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a795d70c736c3b9b8296faf7959f83403" name="a795d70c736c3b9b8296faf7959f83403"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a795d70c736c3b9b8296faf7959f83403">&#9670;&#160;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Restore cache from local filesystem. </p>

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a5f5cff6d7a886d22eaf83df239062a12">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a795d70c736c3b9b8296faf7959f83403_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="aa47a7087bd47c22bfda85416b3aa9b24" name="aa47a7087bd47c22bfda85416b3aa9b24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa47a7087bd47c22bfda85416b3aa9b24">&#9670;&#160;</a></span>remove_if_exists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void remove_if_exists </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>In ordinary case we remove data from cache when it's not used by anyone. But if we have multiple replicated zero-copy tables on the same server it became possible to start removing something from cache when it is used by other "zero-copy" tables. That is why it's not an error.</p>

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a05953820c1167f79f29c7633162c89e0">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_aa47a7087bd47c22bfda85416b3aa9b24_cgraph.svg" width="100%" height="462"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a81306e93a8759d883c10f2335dc06d4b" name="a81306e93a8759d883c10f2335dc06d4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81306e93a8759d883c10f2335dc06d4b">&#9670;&#160;</a></span>remove_if_releasable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void remove_if_releasable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Try remove all cached files by cache_base_path. Only releasable file segments are evicted. <code>remove_persistent_files</code> defines whether non-evictable by some criteria files (they do not comply with the cache eviction policy) should also be removed.</p>

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#ab3234e7d45625019069bd2817c54feca">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a81306e93a8759d883c10f2335dc06d4b_cgraph.svg" width="100%" height="555"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a17c021e102f9a430377feed83a3a8b13" name="a17c021e102f9a430377feed83a3a8b13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17c021e102f9a430377feed83a3a8b13">&#9670;&#160;</a></span>try_get_cache_paths()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::string &gt; try_get_cache_paths </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a795ade0b90afc69fddcc18ccde18a49f">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a17c021e102f9a430377feed83a3a8b13_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ad4c327f08641ee8ce840a7d54b4c9745" name="ad4c327f08641ee8ce840a7d54b4c9745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c327f08641ee8ce840a7d54b4c9745">&#9670;&#160;</a></span>get_used_cache_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t get_used_cache_size </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#ae52850983c7b2983a900c99d42d31352">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_ad4c327f08641ee8ce840a7d54b4c9745_cgraph.svg" width="556" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa6a7fdbfb1146b13107e4e1dfd100182" name="aa6a7fdbfb1146b13107e4e1dfd100182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6a7fdbfb1146b13107e4e1dfd100182">&#9670;&#160;</a></span>get_file_segments_num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t get_file_segments_num </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a9d792866e963ac72b456d2a6e6918e4c">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_aa6a7fdbfb1146b13107e4e1dfd100182_cgraph.svg" width="640" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4d35604cf57218b4aec594da6fd17366" name="a4d35604cf57218b4aec594da6fd17366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d35604cf57218b4aec594da6fd17366">&#9670;&#160;</a></span>get_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d00/namespacedoris_1_1io.html#a12b7a12e387d2192f0feb8ce5f59c116">FileBlocks</a> get_impl </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d5/d1f/structdoris_1_1io_1_1_file_block_1_1_range.html">FileBlock::Range</a> &amp;&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Given range = [left, right] and non-overlapping ordered set of file segments, find list [segment1, ..., segmentN] of segments which intersect with given range.</p>
<p>Note: it is guaranteed that there is no concurrency with files deletion, because cache files are deleted only inside <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html">IFileCache</a> and under cache lock.</p>
<p>N - last cached segment for given file key, segment{N}.offset &lt; range.left: segment{N} segment{N} [________ [_______] [__________] OR [________] ^ ^ range.left range.left</p>
<p>segment_it &lt;&ndash; segmment{k}</p>
<p>segment{k-1} segment{k} [________] [_____ [___________ ^ range.left</p>
<p>segment{k} ... segment{k-1} segment{k} segment{k} [______ [______] [____ [________ [_________ OR [________ OR [______] ^ ^ ^ ^ segment{k}.offset range.left range.left range.right</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a4d35604cf57218b4aec594da6fd17366_cgraph.svg" width="100%" height="434"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a4d35604cf57218b4aec594da6fd17366_icgraph.svg" width="212" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af0bf665f1497fb81251f9cf4c8d2fde5" name="af0bf665f1497fb81251f9cf4c8d2fde5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0bf665f1497fb81251f9cf4c8d2fde5">&#9670;&#160;</a></span>get_cell()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/da8/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_file_block_cell.html">LRUFileCache::FileBlockCell</a> * get_cell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_af0bf665f1497fb81251f9cf4c8d2fde5_icgraph.svg" width="100%" height="483"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a581f197265ee91151badf10b10015dc9" name="a581f197265ee91151badf10b10015dc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a581f197265ee91151badf10b10015dc9">&#9670;&#160;</a></span>add_cell()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/da8/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_file_block_cell.html">LRUFileCache::FileBlockCell</a> * add_cell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d15/classdoris_1_1io_1_1_file_block.html#a5d74787dedbc4e11c1ab15bf487e61f8">FileBlock::State</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a file segment cell and put it in <code>files</code> map by [key][offset].</p>
<p>Empty files are not cached.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a581f197265ee91151badf10b10015dc9_cgraph.svg" width="100%" height="448"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a581f197265ee91151badf10b10015dc9_icgraph.svg" width="602" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a7e9e107d96582116fc575449a9cd2bda" name="a7e9e107d96582116fc575449a9cd2bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e9e107d96582116fc575449a9cd2bda">&#9670;&#160;</a></span>use_cell()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void use_cell </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../df/da8/structdoris_1_1io_1_1_l_r_u_file_cache_1_1_file_block_cell.html">FileBlockCell</a> &amp;&#160;</td>
          <td class="paramname"><em>cell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d00/namespacedoris_1_1io.html#a12b7a12e387d2192f0feb8ce5f59c116">FileBlocks</a> &amp;&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Move to the end of the queue. The iterator remains valid.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a7e9e107d96582116fc575449a9cd2bda_cgraph.svg" width="100%" height="434"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a7e9e107d96582116fc575449a9cd2bda_icgraph.svg" width="331" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa12d90e78295c706f726f3f38ba0937f" name="aa12d90e78295c706f726f3f38ba0937f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa12d90e78295c706f726f3f38ba0937f">&#9670;&#160;</a></span>try_reserve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool try_reserve </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Select the cache from the LRU queue held by query for expulsion.</p>
<p>The cache corresponding to this record may be swapped out by other queries, so it has become invalid.</p>

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a9084413812a61833bd99dc21f94f94ec">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_aa12d90e78295c706f726f3f38ba0937f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_aa12d90e78295c706f726f3f38ba0937f_icgraph.svg" width="618" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a76b1555e78804c6b63cd0038ec6ad512" name="a76b1555e78804c6b63cd0038ec6ad512"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76b1555e78804c6b63cd0038ec6ad512">&#9670;&#160;</a></span>try_reserve_for_main_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool try_reserve_for_main_list </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">QueryFileCacheContextPtr</a>&#160;</td>
          <td class="paramname"><em>query_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>It is guaranteed that cell is not removed from cache as long as pointer to corresponding file segment is hold by any other thread.</p>
<p>Cell will actually be removed only if we managed to reserve enough space.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a76b1555e78804c6b63cd0038ec6ad512_cgraph.svg" width="100%" height="504"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a76b1555e78804c6b63cd0038ec6ad512_icgraph.svg" width="100%" height="398"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9842f06e7eca4524f3dfa4b09f1cbb9c" name="a9842f06e7eca4524f3dfa4b09f1cbb9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9842f06e7eca4524f3dfa4b09f1cbb9c">&#9670;&#160;</a></span>remove()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void remove </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>segment_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a67d6cf0a4d5c2d331edfe8736fe50846">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a9842f06e7eca4524f3dfa4b09f1cbb9c_cgraph.svg" width="100%" height="462"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a9842f06e7eca4524f3dfa4b09f1cbb9c_icgraph.svg" width="100%" height="464"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="af09bfc1a2d83f1089bc31ec8e30048fa" name="af09bfc1a2d83f1089bc31ec8e30048fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af09bfc1a2d83f1089bc31ec8e30048fa">&#9670;&#160;</a></span>get_available_cache_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t get_available_cache_size </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_af09bfc1a2d83f1089bc31ec8e30048fa_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae4193c23e933aff85769c000f25bd413" name="ae4193c23e933aff85769c000f25bd413"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4193c23e933aff85769c000f25bd413">&#9670;&#160;</a></span>load_cache_info_into_memory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void load_cache_info_into_memory </td>
          <td>(</td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>cache_base_path / key / offset</p>
<p>Or just remove? Some unexpected file.</p>
<p>Shuffle cells to have random order in LRUQueue as at startup all cells have the same priority.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_ae4193c23e933aff85769c000f25bd413_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_ae4193c23e933aff85769c000f25bd413_icgraph.svg" width="272" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a678600500e1d9a7ac56f07ff7c9882dc" name="a678600500e1d9a7ac56f07ff7c9882dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a678600500e1d9a7ac56f07ff7c9882dc">&#9670;&#160;</a></span>split_range_into_cells()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d00/namespacedoris_1_1io.html#a12b7a12e387d2192f0feb8ce5f59c116">FileBlocks</a> split_range_into_cells </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d15/classdoris_1_1io_1_1_file_block.html#a5d74787dedbc4e11c1ab15bf487e61f8">FileBlock::State</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a678600500e1d9a7ac56f07ff7c9882dc_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a678600500e1d9a7ac56f07ff7c9882dc_icgraph.svg" width="483" height="74"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ad4bd0a5783832f110b9c43288d4cec5b" name="ad4bd0a5783832f110b9c43288d4cec5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4bd0a5783832f110b9c43288d4cec5b">&#9670;&#160;</a></span>dump_structure_unlocked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dump_structure_unlocked </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_ad4bd0a5783832f110b9c43288d4cec5b_cgraph.svg" width="383" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_ad4bd0a5783832f110b9c43288d4cec5b_icgraph.svg" width="100%" height="398"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="afc9456e4757b4e8625c8c611859c71b9" name="afc9456e4757b4e8625c8c611859c71b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc9456e4757b4e8625c8c611859c71b9">&#9670;&#160;</a></span>fill_holes_with_empty_file_segments()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fill_holes_with_empty_file_segments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d00/namespacedoris_1_1io.html#a12b7a12e387d2192f0feb8ce5f59c116">FileBlocks</a> &amp;&#160;</td>
          <td class="paramname"><em>file_segments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d5/d1f/structdoris_1_1io_1_1_file_block_1_1_range.html">FileBlock::Range</a> &amp;&#160;</td>
          <td class="paramname"><em>range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>There are segments [segment1, ..., segmentN] (non-overlapping, non-empty, ascending-ordered) which (maybe partially) intersect with given range.</p>
<p>It can have holes: [____________________] &ndash; requested range [____] [_] [_________] &ndash; intersecting cache [segment1, ..., segmentN]</p>
<p>For each such hole create a cell with file segment state EMPTY.</p>
<p>[_______ &ndash; requested range [_______ ^ segment1</p>
<p>________] &ndash; requested range _____] ^ segmentN</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_afc9456e4757b4e8625c8c611859c71b9_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_afc9456e4757b4e8625c8c611859c71b9_icgraph.svg" width="288" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af6e665ae416cd0bb806ccc36fd2b414b" name="af6e665ae416cd0bb806ccc36fd2b414b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6e665ae416cd0bb806ccc36fd2b414b">&#9670;&#160;</a></span>get_used_cache_size_unlocked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t get_used_cache_size_unlocked </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_af6e665ae416cd0bb806ccc36fd2b414b_cgraph.svg" width="360" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_af6e665ae416cd0bb806ccc36fd2b414b_icgraph.svg" width="100%" height="391"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a0781f1ed534dad10e7af439ce08d6d09" name="a0781f1ed534dad10e7af439ce08d6d09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0781f1ed534dad10e7af439ce08d6d09">&#9670;&#160;</a></span>get_available_cache_size_unlocked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t get_available_cache_size_unlocked </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a0781f1ed534dad10e7af439ce08d6d09_cgraph.svg" width="548" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a0781f1ed534dad10e7af439ce08d6d09_icgraph.svg" width="487" height="102"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac5c5b4161254a93f22dbeaf58a4eec17" name="ac5c5b4161254a93f22dbeaf58a4eec17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5c5b4161254a93f22dbeaf58a4eec17">&#9670;&#160;</a></span>get_file_segments_num_unlocked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t get_file_segments_num_unlocked </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_ac5c5b4161254a93f22dbeaf58a4eec17_cgraph.svg" width="432" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_ac5c5b4161254a93f22dbeaf58a4eec17_icgraph.svg" width="379" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a7500355b22c1715b6d9ae0facdc05453" name="a7500355b22c1715b6d9ae0facdc05453"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7500355b22c1715b6d9ae0facdc05453">&#9670;&#160;</a></span>dump_structure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string dump_structure </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For debug. </p>

<p>实现了 <a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#aa71ca3b482c454ff756a920373e49e60">IFileCache</a>.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache_a7500355b22c1715b6d9ae0facdc05453_cgraph.svg" width="543" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a7223528283cd4e5872e0cc716bf9bd9d" name="a7223528283cd4e5872e0cc716bf9bd9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7223528283cd4e5872e0cc716bf9bd9d">&#9670;&#160;</a></span>capacity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="../../de/d06/classdoris_1_1_cache.html">Cache</a> capacity in bytes. </p>

</div>
</div>
<a id="af618e53b20e5e19b7b976dac4620a216" name="af618e53b20e5e19b7b976dac4620a216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af618e53b20e5e19b7b976dac4620a216">&#9670;&#160;</a></span>hash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">IFileCache::Key</a> hash </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_af618e53b20e5e19b7b976dac4620a216_cgraph.svg" width="540" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_af618e53b20e5e19b7b976dac4620a216_icgraph.svg" width="336" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4d09a4047f95b0143001f69f59548d30" name="a4d09a4047f95b0143001f69f59548d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d09a4047f95b0143001f69f59548d30">&#9670;&#160;</a></span>get_path_in_local_cache() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string get_path_in_local_cache </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_persistent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_a4d09a4047f95b0143001f69f59548d30_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_a4d09a4047f95b0143001f69f59548d30_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a5bc9e70487e1ef3e5ba3b0e577a0fa20" name="a5bc9e70487e1ef3e5ba3b0e577a0fa20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bc9e70487e1ef3e5ba3b0e577a0fa20">&#9670;&#160;</a></span>get_path_in_local_cache() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string get_path_in_local_cache </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/dbc/structdoris_1_1io_1_1_i_file_cache_1_1_key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_a5bc9e70487e1ef3e5ba3b0e577a0fa20_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a0c437bfbf13578710df28996a11c181d" name="a0c437bfbf13578710df28996a11c181d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c437bfbf13578710df28996a11c181d">&#9670;&#160;</a></span>get_base_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; get_base_path </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5b2a6670f77761ee0e166c8319ed74fe" name="a5b2a6670f77761ee0e166c8319ed74fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b2a6670f77761ee0e166c8319ed74fe">&#9670;&#160;</a></span>get_query_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">IFileCache::QueryFileCacheContextPtr</a> get_query_context </td>
          <td>(</td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_a5b2a6670f77761ee0e166c8319ed74fe_icgraph.svg" width="100%" height="460"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a171ce34f33a2715f0697f2676892b2ae" name="a171ce34f33a2715f0697f2676892b2ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a171ce34f33a2715f0697f2676892b2ae">&#9670;&#160;</a></span>remove_query_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void remove_query_context </td>
          <td>(</td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_a171ce34f33a2715f0697f2676892b2ae_icgraph.svg" width="430" height="66"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a227d0732b6b1e1ec43cbb6bddcd5e5dc" name="a227d0732b6b1e1ec43cbb6bddcd5e5dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a227d0732b6b1e1ec43cbb6bddcd5e5dc">&#9670;&#160;</a></span>get_or_set_query_context()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a8c66fc6bb666006ac6243084864487b6">IFileCache::QueryFileCacheContextPtr</a> get_or_set_query_context </td>
          <td>(</td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::lock_guard&lt; std::mutex &gt; &amp;&#160;</td>
          <td class="paramname"><em>cache_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_a227d0732b6b1e1ec43cbb6bddcd5e5dc_cgraph.svg" width="360" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_a227d0732b6b1e1ec43cbb6bddcd5e5dc_icgraph.svg" width="402" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a3636e05272af94893026ac964ec401fd" name="a3636e05272af94893026ac964ec401fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3636e05272af94893026ac964ec401fd">&#9670;&#160;</a></span>get_query_context_holder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a3c7d80a775cb9b2160e61a945865f534">IFileCache::QueryFileCacheContextHolderPtr</a> get_query_context_holder </td>
          <td>(</td>
          <td class="paramtype">const TUniqueId &amp;&#160;</td>
          <td class="paramname"><em>query_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>if enable_filesystem_query_cache_limit is true, we create context query for current query.</p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../df/dc4/classdoris_1_1io_1_1_i_file_cache_a3636e05272af94893026ac964ec401fd_cgraph.svg" width="579" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">类成员变量说明</h2>
<a id="a31a366c9f070d46beffc14bcd67f2fdd" name="a31a366c9f070d46beffc14bcd67f2fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31a366c9f070d46beffc14bcd67f2fdd">&#9670;&#160;</a></span>_files</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/ddb/classdoris_1_1io_1_1_l_r_u_file_cache.html#a3ad54d3b33fc242ffb81e0c4dfeb99eb">CachedFiles</a> _files</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a850e2ffd8de08325716b5f9a9e5dcb86" name="a850e2ffd8de08325716b5f9a9e5dcb86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a850e2ffd8de08325716b5f9a9e5dcb86">&#9670;&#160;</a></span>_queue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d81/classdoris_1_1io_1_1_i_file_cache_1_1_l_r_u_queue.html">LRUQueue</a> _queue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6601fe68ab2b631161709dcd4517d006" name="a6601fe68ab2b631161709dcd4517d006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6601fe68ab2b631161709dcd4517d006">&#9670;&#160;</a></span>_persistent_queue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d81/classdoris_1_1io_1_1_i_file_cache_1_1_l_r_u_queue.html">LRUQueue</a> _persistent_queue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2ba6697a12d63637494dbeec00ff3a78" name="a2ba6697a12d63637494dbeec00ff3a78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ba6697a12d63637494dbeec00ff3a78">&#9670;&#160;</a></span>_cache_base_path</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string _cache_base_path</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab0288896c161455b7451327a41d33e74" name="ab0288896c161455b7451327a41d33e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0288896c161455b7451327a41d33e74">&#9670;&#160;</a></span>_max_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t _max_size = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a19cbdfacaa469abf31575087e0473a73" name="a19cbdfacaa469abf31575087e0473a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19cbdfacaa469abf31575087e0473a73">&#9670;&#160;</a></span>_max_element_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t _max_element_size = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a79ca82467b815ca27bb285d6185c1fe8" name="a79ca82467b815ca27bb285d6185c1fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79ca82467b815ca27bb285d6185c1fe8">&#9670;&#160;</a></span>_persistent_max_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t _persistent_max_size = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6f6f9a282d55df2917b54cf99d501785" name="a6f6f9a282d55df2917b54cf99d501785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f6f9a282d55df2917b54cf99d501785">&#9670;&#160;</a></span>_persistent_max_element_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t _persistent_max_element_size = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afa297c207d83ea0b9ebf5cee4fbad83a" name="afa297c207d83ea0b9ebf5cee4fbad83a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa297c207d83ea0b9ebf5cee4fbad83a">&#9670;&#160;</a></span>_max_file_segment_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t _max_file_segment_size = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad8ab93e3585b26c3ff70100f829e448b" name="ad8ab93e3585b26c3ff70100f829e448b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ab93e3585b26c3ff70100f829e448b">&#9670;&#160;</a></span>_max_query_cache_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t _max_query_cache_size = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa47905df0a83061082cf11f932a918df" name="aa47905df0a83061082cf11f932a918df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa47905df0a83061082cf11f932a918df">&#9670;&#160;</a></span>_is_initialized</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool _is_initialized = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3f0b4c278cb19f9c2b2dbdb065f51e14" name="a3f0b4c278cb19f9c2b2dbdb065f51e14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f0b4c278cb19f9c2b2dbdb065f51e14">&#9670;&#160;</a></span>_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex _mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a243744aff6497bffe2dfde68e4b064bd" name="a243744aff6497bffe2dfde68e4b064bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a243744aff6497bffe2dfde68e4b064bd">&#9670;&#160;</a></span>_query_map</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/dc4/classdoris_1_1io_1_1_i_file_cache.html#a18f35fffa11659535addfdd93902c7f4">QueryFileCacheContextMap</a> _query_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8b3d22a40257298552eb609d18cb2219" name="a8b3d22a40257298552eb609d18cb2219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b3d22a40257298552eb609d18cb2219">&#9670;&#160;</a></span>_enable_file_cache_query_limit</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool _enable_file_cache_query_limit = config::enable_file_cache_query_limit</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>/Users/dabowang/be_all/io/cache/block/<a class="el" href="../../d9/dde/block__lru__file__cache_8h_source.html">block_lru_file_cache.h</a></li>
<li>/Users/dabowang/be_all/io/cache/block/<a class="el" href="../../d4/dc9/block__lru__file__cache_8cpp.html">block_lru_file_cache.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
