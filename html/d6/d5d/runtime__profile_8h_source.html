<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>be_all: /Users/dabowang/doris/be/src/util/runtime_profile.h 源文件</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">be_all
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_b08de747208093f820e51238c25d3efa.html">doris</a></li><li class="navelem"><a class="el" href="../../dir_787e83bab9583898d4b4b77c9e19718a.html">be</a></li><li class="navelem"><a class="el" href="../../dir_b680d7e4fd62afc6a08788ccb1c35ea0.html">src</a></li><li class="navelem"><a class="el" href="../../dir_2afd6dcf00871b848b3adc6e1111b5fc.html">util</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">runtime_profile.h</div></div>
</div><!--header-->
<div class="contents">
<a href="../../d6/d5d/runtime__profile_8h.html">浏览该文件的文档.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Licensed to the Apache Software Foundation (ASF) under one</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// or more contributor license agreements.  See the NOTICE file</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// distributed with this work for additional information</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// regarding copyright ownership.  The ASF licenses this file</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// to you under the Apache License, Version 2.0 (the</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">// &quot;License&quot;); you may not use this file except in compliance</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">// with the License.  You may obtain a copy of the License at</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">//</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">//   http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">//</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">// Unless required by applicable law or agreed to in writing,</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">// software distributed under the License is distributed on an</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">// &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">// KIND, either express or implied.  See the License for the</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">// specific language governing permissions and limitations</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">// under the License.</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">// This file is copied from</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment">// https://github.com/apache/impala/blob/branch-2.9.0/be/src/util/runtime-profile.h</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">// and modified by Doris</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;sys/resource.h&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &lt;sys/time.h&gt;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &lt;mutex&gt;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;gen_cpp/RuntimeProfile_types.h&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;rapidjson/stringbuffer.h&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;rapidjson/writer.h&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="../../df/dde/binary__cast_8hpp.html">util/binary_cast.hpp</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="../../d4/dca/pretty__printer_8h.html">util/pretty_printer.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="../../dd/d41/stopwatch_8hpp.html">util/stopwatch.hpp</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/dc7/telemetry_8h.html">util/telemetry/telemetry.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="keyword">namespace </span><a class="code hl_namespace" href="../../d6/d94/namespacedoris.html">doris</a> {</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment">// Some macro magic to generate unique ids using __COUNTER__</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a1a31e7e398f6a2fa20e41c0b5a02cdc4">   43</a></span><span class="preprocessor">#define CONCAT_IMPL(x, y) x##y</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a2871b6acf202f2cf27bc36d11e8ddef2">   44</a></span><span class="preprocessor">#define MACRO_CONCAT(x, y) CONCAT_IMPL(x, y)</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a1c98350069ee6cbc67be687f272e571b">   46</a></span><span class="preprocessor">#define ADD_COUNTER(profile, name, type) (profile)-&gt;add_counter(name, type)</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a8841ca205b2a05d608e82d443bad3a77">   47</a></span><span class="preprocessor">#define ADD_TIMER(profile, name) (profile)-&gt;add_counter(name, TUnit::TIME_NS)</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a1493ed307aec5af9d605b0fd5d23051d">   48</a></span><span class="preprocessor">#define ADD_CHILD_COUNTER(profile, name, type, parent) (profile)-&gt;add_counter(name, type, parent)</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a8d817beaf6c704ff590230236d7591b1">   49</a></span><span class="preprocessor">#define ADD_CHILD_TIMER(profile, name, parent) (profile)-&gt;add_counter(name, TUnit::TIME_NS, parent)</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#aaa9a2971c6368e3ddd3f5140a0295eb7">   50</a></span><span class="preprocessor">#define SCOPED_TIMER(c) ScopedTimer&lt;MonotonicStopWatch&gt; MACRO_CONCAT(SCOPED_TIMER, __COUNTER__)(c)</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a949008b45c5441dabca342bf0d06663b">   51</a></span><span class="preprocessor">#define SCOPED_TIMER_ATOMIC(c) \</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">    ScopedTimer&lt;MonotonicStopWatch, std::atomic_bool&gt; MACRO_CONCAT(SCOPED_TIMER, __COUNTER__)(c)</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a7161952f3416d13cda54f567edd40f3c">   53</a></span><span class="preprocessor">#define SCOPED_CPU_TIMER(c) \</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">    ScopedTimer&lt;ThreadCpuStopWatch&gt; MACRO_CONCAT(SCOPED_TIMER, __COUNTER__)(c)</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a51a033a81368a1912d23f8813c659887">   55</a></span><span class="preprocessor">#define CANCEL_SAFE_SCOPED_TIMER(c, is_cancelled) \</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">    ScopedTimer&lt;MonotonicStopWatch&gt; MACRO_CONCAT(SCOPED_TIMER, __COUNTER__)(c, is_cancelled)</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#ac837aea1ad5504a29387728b1d44f7fa">   57</a></span><span class="preprocessor">#define CANCEL_SAFE_SCOPED_TIMER_ATOMIC(c, is_cancelled)                                       \</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">    ScopedTimer&lt;MonotonicStopWatch, std::atomic_bool&gt; MACRO_CONCAT(SCOPED_TIMER, __COUNTER__)( \</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">            c, is_cancelled)</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#aaf031eb453aeee708e6e627425844795">   60</a></span><span class="preprocessor">#define SCOPED_RAW_TIMER(c)                                                                  \</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">    doris::ScopedRawTimer&lt;doris::MonotonicStopWatch, int64_t&gt; MACRO_CONCAT(SCOPED_RAW_TIMER, \</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="preprocessor">                                                                           __COUNTER__)(c)</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a238a6171aec1d75037d1c99d0b69c091">   63</a></span><span class="preprocessor">#define SCOPED_ATOMIC_TIMER(c)                                                                 \</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="preprocessor">    ScopedRawTimer&lt;MonotonicStopWatch, std::atomic&lt;int64_t&gt;&gt; MACRO_CONCAT(SCOPED_ATOMIC_TIMER, \</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">                                                                          __COUNTER__)(c)</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a3c0413085db33b5cfe29ea149ed3cf0c">   66</a></span><span class="preprocessor">#define COUNTER_UPDATE(c, v) (c)-&gt;update(v)</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="../../d6/d5d/runtime__profile_8h.html#a9e3d8174f6545ee9c4fd37c624ea58f7">   67</a></span><span class="preprocessor">#define COUNTER_SET(c, v) (c)-&gt;set(v)</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="keyword">class </span>ObjectPool;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment">// Runtime profile is a group of profiling counters.  It supports adding named counters</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="comment">// and being able to serialize and deserialize them.</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="comment">// The profiles support a tree structure to form a hierarchy of counters.</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="comment">// Runtime profiles supports measuring wall clock rate based counters.  There is a</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="comment">// single thread per process that will convert an amount (i.e. bytes) counter to a</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="comment">// corresponding rate based counter.  This thread wakes up at fixed intervals and updates</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="comment">// all of the rate counters.</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="comment">// Thread-safe.</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html">   79</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a> {</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">   81</a></span>    <span class="keyword">class </span><a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a> {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a9b2810971dc47dc3f10d21fd608881e7">   83</a></span>        <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a9b2810971dc47dc3f10d21fd608881e7">Counter</a>(TUnit::type <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a060cb58ca1914eb9f853b510f4585b25">type</a>, int64_t <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">value</a> = 0) : <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>(<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">value</a>), <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a42ed8f39f88b60fac5f4a0da22972bc9">_type</a>(<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a060cb58ca1914eb9f853b510f4585b25">type</a>) {}</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a55971926ac6a0680b4612676357c10cc">   84</a></span>        <span class="keyword">virtual</span> <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a55971926ac6a0680b4612676357c10cc">~Counter</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3a5b31a711e7ab302587f2334c0648f9">   86</a></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3a5b31a711e7ab302587f2334c0648f9">update</a>(int64_t delta) { <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>.fetch_add(delta, std::memory_order_relaxed); }</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a1793931b373273e0b6c4fb406c4a2f65">   88</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a1793931b373273e0b6c4fb406c4a2f65">bit_or</a>(int64_t delta) { <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>.fetch_or(delta, std::memory_order_relaxed); }</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#aef395a9dff70512069b03cda90399487">   90</a></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#aef395a9dff70512069b03cda90399487">set</a>(int64_t <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">value</a>) { <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>.store(<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">value</a>, std::memory_order_relaxed); }</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#aa2e4083194118248cb9135d2433f7555">   92</a></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#aa2e4083194118248cb9135d2433f7555">set</a>(<span class="keywordtype">double</span> <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">value</a>) {</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>            DCHECK_EQ(<span class="keyword">sizeof</span>(<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">value</a>), <span class="keyword">sizeof</span>(int64_t));</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>            <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>.store(binary_cast&lt;double, int64_t&gt;(<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">value</a>), std::memory_order_relaxed);</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        }</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">   97</a></span>        <span class="keyword">virtual</span> int64_t <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">value</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>.load(std::memory_order_relaxed); }</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a2f035186ea39738ac93b218640e79860">   99</a></span>        <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a2f035186ea39738ac93b218640e79860">double_value</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>            <span class="keywordflow">return</span> binary_cast&lt;int64_t, double&gt;(<a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>.load(std::memory_order_relaxed));</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        }</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a060cb58ca1914eb9f853b510f4585b25">  103</a></span>        TUnit::type <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a060cb58ca1914eb9f853b510f4585b25">type</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a42ed8f39f88b60fac5f4a0da22972bc9">_type</a>; }</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#aa8d61fad5237e98f83d91f3c7ea55dba">  106</a></span>        <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a>;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">  108</a></span>        std::atomic&lt;int64_t&gt; <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a42ed8f39f88b60fac5f4a0da22972bc9">  109</a></span>        TUnit::type <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a42ed8f39f88b60fac5f4a0da22972bc9">_type</a>;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    };</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="keyword">class </span><a class="code hl_class" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html">DerivedCounter</a>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="keyword">class </span><a class="code hl_class" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html">EventSequence</a>;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keyword">class </span><a class="code hl_class" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html">HighWaterMarkCounter</a>;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno"><a class="line" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html">  118</a></span>    <span class="keyword">class </span><a class="code hl_class" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html">HighWaterMarkCounter</a> : <span class="keyword">public</span> <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a> {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a9af5e7204d66b20df7d3e1efa5d4dfd7">  120</a></span>        <a class="code hl_function" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a9af5e7204d66b20df7d3e1efa5d4dfd7">HighWaterMarkCounter</a>(TUnit::type unit) : <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>(unit), <a class="code hl_variable" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">current_value_</a>(0) {}</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno"><a class="line" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#aabe30c223f7d9d108c6b0217a1681133">  122</a></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#aabe30c223f7d9d108c6b0217a1681133">add</a>(int64_t delta) {</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>            <a class="code hl_variable" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">current_value_</a>.fetch_add(delta, std::memory_order_relaxed);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>            <span class="keywordflow">if</span> (delta &gt; 0) {</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>                <a class="code hl_function" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a843e17bb8d8d326f21400ad14f9ae84b">UpdateMax</a>(<a class="code hl_variable" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">current_value_</a>);</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>            }</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        }</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno"><a class="line" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#abe4a5b403bfdd5005b8b81945654d15a">  131</a></span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#abe4a5b403bfdd5005b8b81945654d15a">try_add</a>(int64_t delta, int64_t max) {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>            <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>                int64_t old_val = <a class="code hl_variable" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">current_value_</a>.load(std::memory_order_relaxed);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>                int64_t new_val = old_val + delta;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>                <span class="keywordflow">if</span> (<a class="code hl_define" href="../../d4/d10/compiler__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a>(new_val &gt; max)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                <span class="keywordflow">if</span> (<a class="code hl_define" href="../../d4/d10/compiler__util_8h.html#a262afcfe437f4addb13fb1b47a6a7086">LIKELY</a>(<a class="code hl_variable" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">current_value_</a>.compare_exchange_weak(old_val, new_val,</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>                                                                std::memory_order_relaxed))) {</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>                    <a class="code hl_function" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a843e17bb8d8d326f21400ad14f9ae84b">UpdateMax</a>(new_val);</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>                }</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>            }</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        }</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno"><a class="line" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a52694a006a5989b9583e8e1b638988ea">  144</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a52694a006a5989b9583e8e1b638988ea">set</a>(int64_t v)<span class="keyword"> override </span>{</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>            <a class="code hl_variable" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">current_value_</a>.store(v, std::memory_order_relaxed);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>            <a class="code hl_function" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a843e17bb8d8d326f21400ad14f9ae84b">UpdateMax</a>(v);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        }</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno"><a class="line" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a312d59315551bb95b01dcdbc41b9d27c">  149</a></span>        int64_t <a class="code hl_function" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a312d59315551bb95b01dcdbc41b9d27c">current_value</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">current_value_</a>.load(std::memory_order_relaxed); }</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno"><a class="line" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a843e17bb8d8d326f21400ad14f9ae84b">  154</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a843e17bb8d8d326f21400ad14f9ae84b">UpdateMax</a>(int64_t v) {</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>            <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>                int64_t old_max = <a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>.load(std::memory_order_relaxed);</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                int64_t new_max = std::max(old_max, v);</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                <span class="keywordflow">if</span> (new_max == old_max) {</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>                    <span class="keywordflow">break</span>; <span class="comment">// Avoid atomic update.</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>                }</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                <span class="keywordflow">if</span> (<a class="code hl_define" href="../../d4/d10/compiler__util_8h.html#a262afcfe437f4addb13fb1b47a6a7086">LIKELY</a>(<a class="code hl_variable" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">_value</a>.compare_exchange_weak(old_max, new_max,</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>                                                        std::memory_order_relaxed))) {</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>                }</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>            }</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        }</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno"><a class="line" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">  170</a></span>        std::atomic&lt;int64_t&gt; <a class="code hl_variable" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">current_value_</a>;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    };</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a69ac4ef174d387fcbd7d6561bee9f314">  173</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a69ac4ef174d387fcbd7d6561bee9f314">DerivedCounterFunction</a> = std::function&lt;int64_t()&gt;;</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="comment">// A DerivedCounter also has a name and type, but the value is computed.</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="comment">// Do not call Set() and Update().</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno"><a class="line" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html">  177</a></span>    <span class="keyword">class </span><a class="code hl_class" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html">DerivedCounter</a> : <span class="keyword">public</span> <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a> {</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno"><a class="line" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#a451bee3185999051b045cf01c0fda9cc">  179</a></span>        <a class="code hl_function" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#a451bee3185999051b045cf01c0fda9cc">DerivedCounter</a>(TUnit::type <a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a060cb58ca1914eb9f853b510f4585b25">type</a>, <span class="keyword">const</span> <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a69ac4ef174d387fcbd7d6561bee9f314">DerivedCounterFunction</a>&amp; counter_fn)</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>                : <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>(<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a060cb58ca1914eb9f853b510f4585b25">type</a>, 0), <a class="code hl_variable" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#a0264bd03cfe21426481c51ceb7f198ea">_counter_fn</a>(counter_fn) {}</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno"><a class="line" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#ad31d274efd111e82aec5480d1f1ebd40">  182</a></span>        int64_t <a class="code hl_function" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#ad31d274efd111e82aec5480d1f1ebd40">value</a>()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#a0264bd03cfe21426481c51ceb7f198ea">_counter_fn</a>(); }</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno"><a class="line" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#a0264bd03cfe21426481c51ceb7f198ea">  185</a></span>        <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a69ac4ef174d387fcbd7d6561bee9f314">DerivedCounterFunction</a> <a class="code hl_variable" href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#a0264bd03cfe21426481c51ceb7f198ea">_counter_fn</a>;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    };</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span> </div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="comment">// An EventSequence captures a sequence of events (each added by</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="comment">// calling MarkEvent). Each event has a text label, and a time</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="comment">// (measured relative to the moment start() was called as t=0). It is</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="comment">// useful for tracking the evolution of some serial process, such as</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// the query lifecycle.</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="comment">// Not thread-safe.</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html">  194</a></span>    <span class="keyword">class </span><a class="code hl_class" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html">EventSequence</a> {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aae5b1517c16448fa0d1b7e00a0f92a74">  196</a></span>        <a class="code hl_function" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aae5b1517c16448fa0d1b7e00a0f92a74">EventSequence</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        <span class="comment">// starts the timer without resetting it.</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a60de64d75454385b23995437f1d72669">  199</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a60de64d75454385b23995437f1d72669">start</a>() { <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aacffbb17723b9291ff712017d448c51b">_sw</a>.<a class="code hl_function" href="../../d7/d16/classdoris_1_1_custom_stop_watch.html#a60de64d75454385b23995437f1d72669">start</a>(); }</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span> </div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        <span class="comment">// stops (or effectively pauses) the timer.</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a8c528baf37154d347366083f0f816846">  202</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a8c528baf37154d347366083f0f816846">stop</a>() { <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aacffbb17723b9291ff712017d448c51b">_sw</a>.<a class="code hl_function" href="../../d7/d16/classdoris_1_1_custom_stop_watch.html#a8c528baf37154d347366083f0f816846">stop</a>(); }</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span> </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        <span class="comment">// Stores an event in sequence with the given label and the</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>        <span class="comment">// current time (relative to the first time start() was called) as</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        <span class="comment">// the timestamp.</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#ab886ce227a51ccc37d54bbc1a7c33bb7">  207</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#ab886ce227a51ccc37d54bbc1a7c33bb7">mark_event</a>(<span class="keyword">const</span> std::string&amp; label) {</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>            <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aa6359645e9ca49a595ce195f6c957b2e">_events</a>.push_back(make_pair(label, <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aacffbb17723b9291ff712017d448c51b">_sw</a>.<a class="code hl_function" href="../../d7/d16/classdoris_1_1_custom_stop_watch.html#adcda5684f125d03f01912ee2b400fd89">elapsed_time</a>()));</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        }</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a84a8b2a8354dfd61c36c2ecaa4e492e0">  211</a></span>        int64_t <a class="code hl_function" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a84a8b2a8354dfd61c36c2ecaa4e492e0">elapsed_time</a>() { <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aacffbb17723b9291ff712017d448c51b">_sw</a>.<a class="code hl_function" href="../../d7/d16/classdoris_1_1_custom_stop_watch.html#adcda5684f125d03f01912ee2b400fd89">elapsed_time</a>(); }</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        <span class="comment">// An Event is a &lt;label, timestamp&gt; pair</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aef55d28165b6a34ffcf3ad04cbc51889">  214</a></span>        <span class="keyword">using </span><a class="code hl_typedef" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aef55d28165b6a34ffcf3ad04cbc51889">Event</a> = std::pair&lt;std::string, int64_t&gt;;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        <span class="comment">// An EventList is a sequence of Events, in increasing timestamp order</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a3aafdf60d36be176c14afd700c141919">  217</a></span>        <span class="keyword">using </span><a class="code hl_typedef" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a3aafdf60d36be176c14afd700c141919">EventList</a> = std::vector&lt;Event&gt;;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span> </div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a43e1b615bec7d8c9f81f10b46755216b">  219</a></span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a3aafdf60d36be176c14afd700c141919">EventList</a>&amp; <a class="code hl_function" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a43e1b615bec7d8c9f81f10b46755216b">events</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aa6359645e9ca49a595ce195f6c957b2e">_events</a>; }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        <span class="comment">// Stored in increasing time order</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aa6359645e9ca49a595ce195f6c957b2e">  223</a></span>        <a class="code hl_typedef" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a3aafdf60d36be176c14afd700c141919">EventList</a> <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aa6359645e9ca49a595ce195f6c957b2e">_events</a>;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        <span class="comment">// Timer which allows events to be timestamped when they are recorded.</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno"><a class="line" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aacffbb17723b9291ff712017d448c51b">  226</a></span>        <a class="code hl_class" href="../../d7/d16/classdoris_1_1_custom_stop_watch.html">MonotonicStopWatch</a> <a class="code hl_variable" href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aacffbb17723b9291ff712017d448c51b">_sw</a>;</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    };</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span> </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    <span class="comment">// Create a runtime profile object with &#39;name&#39;.</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, <span class="keywordtype">bool</span> is_averaged_profile = <span class="keyword">false</span>);</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a6485373c4c236bdce39592de4a113610">  232</a></span>    <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a6485373c4c236bdce39592de4a113610">~RuntimeProfile</a>();</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span> </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    <span class="comment">// Adds a child profile.  This is thread safe.</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <span class="comment">// &#39;indent&#39; indicates whether the child will be printed w/ extra indentation</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    <span class="comment">// relative to the parent.</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    <span class="comment">// If location is non-null, child will be inserted after location.  Location must</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    <span class="comment">// already be added to the profile.</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a6029aa6cdd8fbdbb866951d00634541d">add_child</a>(<a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a>* <a class="code hl_function" href="../../d1/d0c/posix__spawn_8c.html#a90a7b20363e18ef6ec5f22741c81e375">child</a>, <span class="keywordtype">bool</span> indent, <a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a>* location);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span> </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a32783f68fbcd44dac181b182efb874cc">insert_child_head</a>(<a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a>* <a class="code hl_function" href="../../d1/d0c/posix__spawn_8c.html#a90a7b20363e18ef6ec5f22741c81e375">child</a>, <span class="keywordtype">bool</span> indent);</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a15578163bba3cd0ed75be1910c520125">add_child_unlock</a>(<a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a>* <a class="code hl_function" href="../../d1/d0c/posix__spawn_8c.html#a90a7b20363e18ef6ec5f22741c81e375">child</a>, <span class="keywordtype">bool</span> indent, <a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a>* loc);</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a>* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a772b49f46b77aeb76fdfff01807477d4">create_child</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, <span class="keywordtype">bool</span> indent = <span class="keyword">true</span>, <span class="keywordtype">bool</span> prepend = <span class="keyword">false</span>);</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    <span class="comment">// Sorts all children according to a custom comparator. Does not</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="comment">// invalidate pointers to profiles.</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <span class="keyword">template</span> &lt;<span class="keyword">class</span> Compare&gt;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ab149261fcfbf19da42e309af104cf662">  253</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ab149261fcfbf19da42e309af104cf662">sort_childer</a>(<span class="keyword">const</span> Compare&amp; <a class="code hl_function" href="../../df/d6c/decimal12_8h.html#a6ba7ca120d12676a0e996afe452d7b44">cmp</a>) {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        std::lock_guard&lt;std::mutex&gt; l(<a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad4ac1073b9057d416974fad50ea09c5c">_children_lock</a>);</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        std::sort(<a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a5d6889efd94a434c26dfa91c49736795">_children</a>.begin(), <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a5d6889efd94a434c26dfa91c49736795">_children</a>.end(), <a class="code hl_function" href="../../df/d6c/decimal12_8h.html#a6ba7ca120d12676a0e996afe452d7b44">cmp</a>);</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    }</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span> </div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="comment">// Merges the src profile into this one, combining counters that have an identical</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="comment">// path. Info strings from profiles are not merged. &#39;src&#39; would be a const if it</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    <span class="comment">// weren&#39;t for locking.</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    <span class="comment">// Calling this concurrently on two RuntimeProfiles in reverse order results in</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="comment">// undefined behavior.</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#adafc4ea11988fa6a231eda5402132536">merge</a>(<a class="code hl_class" href="../../d9/d96/classdoris_1_1_runtime_profile.html">RuntimeProfile</a>* src);</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="comment">// Updates this profile w/ the thrift profile: behaves like Merge(), except</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <span class="comment">// that existing counters are updated rather than added up.</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    <span class="comment">// Info strings matched up by key and are updated or added, depending on whether</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="comment">// the key has already been registered.</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a3ef66c7862f5e72c0e5b1d3328820f67">update</a>(<span class="keyword">const</span> TRuntimeProfileTree&amp; thrift_profile);</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    <span class="comment">// Add a counter with &#39;name&#39;/&#39;type&#39;.  Returns a counter object that the caller can</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <span class="comment">// update.  The counter is owned by the RuntimeProfile object.</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="comment">// If parent_counter_name is a non-empty string, the counter is added as a child of</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="comment">// parent_counter_name.</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    <span class="comment">// If the counter already exists, the existing counter object is returned.</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    Counter* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a8d99f0127512d003f795f5bb8e6f9af5">add_counter</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, TUnit::type type,</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                         <span class="keyword">const</span> std::string&amp; parent_counter_name);</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#af276c52f0d5245ffca7a19fa812d34d0">  278</a></span>    <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#af276c52f0d5245ffca7a19fa812d34d0">add_counter</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, TUnit::type type) {</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a8d99f0127512d003f795f5bb8e6f9af5">add_counter</a>(<a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, type, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <span class="comment">// Add a derived counter with &#39;name&#39;/&#39;type&#39;. The counter is owned by the</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    <span class="comment">// RuntimeProfile object.</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    <span class="comment">// If parent_counter_name is a non-empty string, the counter is added as a child of</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <span class="comment">// parent_counter_name.</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="comment">// Returns nullptr if the counter already exists.</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    DerivedCounter* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a1a00fd7cc962ea3cdfc544c18a70b45d">add_derived_counter</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, TUnit::type type,</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>                                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a69ac4ef174d387fcbd7d6561bee9f314">DerivedCounterFunction</a>&amp; counter_fn,</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>                                        <span class="keyword">const</span> std::string&amp; parent_counter_name);</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span> </div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    <span class="comment">// Gets the counter object with &#39;name&#39;.  Returns nullptr if there is no counter with</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <span class="comment">// that name.</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    Counter* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a42ba30fca2349c65d5c643acd37bf07c">get_counter</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>);</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <span class="comment">// Adds all counters with &#39;name&#39; that are registered either in this or</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <span class="comment">// in any of the child profiles to &#39;counters&#39;.</span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#acb56d71cd055384cde05bb457ce41703">get_counters</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, std::vector&lt;Counter*&gt;* counters);</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    <span class="comment">// Helper to append to the &quot;ExecOption&quot; info string.</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae0e94d4bfea8cecc33065545adfa2de5">  300</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae0e94d4bfea8cecc33065545adfa2de5">append_exec_option</a>(<span class="keyword">const</span> std::string&amp; option) { <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a1e8e7e6f95a43d0ccef31386313685e5">add_info_string</a>(<span class="stringliteral">&quot;ExecOption&quot;</span>, option); }</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    <span class="comment">// Adds a string to the runtime profile.  If a value already exists for &#39;key&#39;,</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <span class="comment">// the value will be updated.</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a1e8e7e6f95a43d0ccef31386313685e5">add_info_string</a>(<span class="keyword">const</span> std::string&amp; key, <span class="keyword">const</span> std::string&amp; <a class="code hl_variable" href="../../df/dd9/util_2types_8h.html#adae7202c63102b0934c3ac5be41b0dae">value</a>);</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    <span class="comment">// Creates and returns a new EventSequence (owned by the runtime</span></div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <span class="comment">// profile) - unless a timer with the same &#39;key&#39; already exists, in</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    <span class="comment">// which case it is returned.</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <span class="comment">// TODO: EventSequences are not merged by Merge()</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    EventSequence* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7b60c8028b33de61800d18323f9df831">add_event_sequence</a>(<span class="keyword">const</span> std::string&amp; key);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span> </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <span class="comment">// Returns a pointer to the info string value for &#39;key&#39;.  Returns nullptr if</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <span class="comment">// the key does not exist.</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="keyword">const</span> std::string* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad64bbffc43cbfe4c51a41c3b73e8c646">get_info_string</a>(<span class="keyword">const</span> std::string&amp; key);</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="comment">// Returns the counter for the total elapsed time.</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a9ba2374b86d6111f6822d5fc6ffe5569">  317</a></span>    <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a9ba2374b86d6111f6822d5fc6ffe5569">total_time_counter</a>() { <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aee1096301d23b77eef344ba650518cfd">_counter_total_time</a>; }</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span> </div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="comment">// Prints the counters in a name: value format.</span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="comment">// Does not hold locks when it makes any function calls.</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aac27e38355d25752fb3bdb74076aeee9">pretty_print</a>(std::ostream* s, <span class="keyword">const</span> std::string&amp; prefix = <span class="stringliteral">&quot;&quot;</span>) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span> </div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7f9e4116502c6aa37ff850c1437ad95f">add_to_span</a>();</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span> </div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    <span class="comment">// Serializes profile to thrift.</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="comment">// Does not hold locks when it makes any function calls.</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a40312915df3f9d7297b961df9f5a5a6b">to_thrift</a>(TRuntimeProfileTree* tree);</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a40312915df3f9d7297b961df9f5a5a6b">to_thrift</a>(std::vector&lt;TRuntimeProfileNode&gt;* nodes);</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <span class="comment">// Divides all counters by n</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf1eea2fa24a83c75703a01142158dd5">divide</a>(<span class="keywordtype">int</span> n);</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#af13f715420b68accdd88f7920880c15e">get_children</a>(std::vector&lt;RuntimeProfile*&gt;* children);</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span> </div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <span class="comment">// Gets all profiles in tree, including this one.</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a56003aa821801b1bf2011aa82227e041">get_all_children</a>(std::vector&lt;RuntimeProfile*&gt;* children);</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span> </div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    <span class="comment">// Returns the number of counters in this profile</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a63c2d00ffe91f788f845c9422e8c3e26">  339</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a63c2d00ffe91f788f845c9422e8c3e26">num_counters</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aa1392f8e4bf9c4ce2eec0177896e5b01">_counter_map</a>.size(); }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    <span class="comment">// Returns name of this profile</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">  342</a></span>    <span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf2ed934b37cbbd236fdd1b01a5f5005">_name</a>; }</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span> </div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <span class="comment">// *only call this on top-level profiles*</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <span class="comment">// (because it doesn&#39;t re-file child profiles)</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad5260b9627048b854b45d05ed34adc22">  346</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad5260b9627048b854b45d05ed34adc22">set_name</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>) { <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf2ed934b37cbbd236fdd1b01a5f5005">_name</a> = <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>; }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aa55984ea9c7d2f95d794990cf917295f">  348</a></span>    int64_t <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aa55984ea9c7d2f95d794990cf917295f">metadata</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4784190df9a9c1ded0126984f021eec7">_metadata</a>; }</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#add25953e7bee8258fa121ea7000922b5">  349</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#add25953e7bee8258fa121ea7000922b5">set_metadata</a>(int64_t md) { <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4784190df9a9c1ded0126984f021eec7">_metadata</a> = md; }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="comment">// Derived counter function: return measured throughput as input_value/second.</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="keyword">static</span> int64_t <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac6598944fd817d29f09ca31ca3c018ad">units_per_second</a>(<span class="keyword">const</span> Counter* total_counter, <span class="keyword">const</span> Counter* timer);</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span> </div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="comment">// Derived counter function: return aggregated value</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="keyword">static</span> int64_t <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a5440dbfddfa7717a6a753130125ae2d0">counter_sum</a>(<span class="keyword">const</span> std::vector&lt;Counter*&gt;* counters);</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span> </div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="comment">// Function that returns a counter metric.</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    <span class="comment">// Note: this function should not block (or take a long time).</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac801a99b6c464f44fa7d03b40ec2a4cd">  359</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac801a99b6c464f44fa7d03b40ec2a4cd">SampleFn</a> = std::function&lt;int64_t()&gt;;</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span> </div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <span class="comment">// Add a rate counter to the current profile based on src_counter with name.</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    <span class="comment">// The rate counter is updated periodically based on the src counter.</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    <span class="comment">// The rate counter has units in src_counter unit per second.</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7f7297446debc4043c777d8ad3b6dc97">add_rate_counter</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* src_counter);</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span> </div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    <span class="comment">// Same as &#39;add_rate_counter&#39; above except values are taken by calling fn.</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="comment">// The resulting counter will be of &#39;type&#39;.</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7f7297446debc4043c777d8ad3b6dc97">add_rate_counter</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac801a99b6c464f44fa7d03b40ec2a4cd">SampleFn</a> fn, TUnit::type type);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span> </div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    <span class="comment">// Add a sampling counter to the current profile based on src_counter with name.</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    <span class="comment">// The sampling counter is updated periodically based on the src counter by averaging</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="comment">// the samples taken from the src counter.</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <span class="comment">// The sampling counter has the same unit as src_counter unit.</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a68e49b4bc4561ab43047f3c7b663f460">add_sampling_counter</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* src_counter);</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="comment">// Same as &#39;add_sampling_counter&#39; above except the samples are taken by calling fn.</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a68e49b4bc4561ab43047f3c7b663f460">add_sampling_counter</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac801a99b6c464f44fa7d03b40ec2a4cd">SampleFn</a> fn);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a3b20f5c8a2e7c41041db09b0f1116e59">  381</a></span>    <a class="code hl_class" href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html">HighWaterMarkCounter</a>* <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a3b20f5c8a2e7c41041db09b0f1116e59">AddHighWaterMarkCounter</a>(<span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, TUnit::type unit,</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>                                                  <span class="keyword">const</span> std::string&amp; parent_counter_name = <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <span class="comment">// Only for create MemTracker(using profile&#39;s counter to calc consumption)</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    std::shared_ptr&lt;HighWaterMarkCounter&gt; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a1129f8258e68cc81c0a1022546d045fb">AddSharedHighWaterMarkCounter</a>(</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>            <span class="keyword">const</span> std::string&amp; <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">name</a>, TUnit::type unit, <span class="keyword">const</span> std::string&amp; parent_counter_name = <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="comment">// Recursively compute the fraction of the &#39;total_time&#39; spent in this profile and</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <span class="comment">// its children.</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    <span class="comment">// This function updates _local_time_percent for each profile.</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aed25768f2265b2c1bd2d1af1a9d22358">compute_time_in_profile</a>();</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#abb7bcc3e9aa8fe6e49d5f39b2684e675">clear_children</a>();</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="comment">// Pool for allocated counters. Usually owned by the creator of this</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="comment">// object, but occasionally allocated in the constructor.</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae342532f13fab2e527b195cbb6e38642">  398</a></span>    std::unique_ptr&lt;ObjectPool&gt; <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae342532f13fab2e527b195cbb6e38642">_pool</a>;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span> </div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <span class="comment">// Pool for allocated counters. These counters are shared with some other objects.</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a61b85297f54f615b832d04f83b54a687">  401</a></span>    std::map&lt;std::string, std::shared_ptr&lt;HighWaterMarkCounter&gt;&gt; <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a61b85297f54f615b832d04f83b54a687">_shared_counter_pool</a>;</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span> </div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    <span class="comment">// Name for this runtime profile.</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf2ed934b37cbbd236fdd1b01a5f5005">  404</a></span>    std::string <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf2ed934b37cbbd236fdd1b01a5f5005">_name</a>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="comment">// user-supplied, uninterpreted metadata.</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4784190df9a9c1ded0126984f021eec7">  407</a></span>    int64_t <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4784190df9a9c1ded0126984f021eec7">_metadata</a>;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aae9adfb3ecb9c698f6df7a1dbf126240">  411</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aae9adfb3ecb9c698f6df7a1dbf126240">_is_averaged_profile</a>;</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span> </div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="comment">// Map from counter names to counters.  The profile owns the memory for the</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    <span class="comment">// counters.</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae25b44a3020e1ba8ba279fd243c33809">  415</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae25b44a3020e1ba8ba279fd243c33809">CounterMap</a> = std::map&lt;std::string, Counter*&gt;;</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aa1392f8e4bf9c4ce2eec0177896e5b01">  416</a></span>    <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae25b44a3020e1ba8ba279fd243c33809">CounterMap</a> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aa1392f8e4bf9c4ce2eec0177896e5b01">_counter_map</a>;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="comment">// Map from parent counter name to a set of child counter name.</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <span class="comment">// All top level counters are the child of &quot;&quot; (root).</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad854968ee5bfb13c5b351071f82b6f2c">  420</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad854968ee5bfb13c5b351071f82b6f2c">ChildCounterMap</a> = std::map&lt;std::string, std::set&lt;std::string&gt;&gt;;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae053755bdb207dce360aad0fc48e6cb6">  421</a></span>    <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad854968ee5bfb13c5b351071f82b6f2c">ChildCounterMap</a> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae053755bdb207dce360aad0fc48e6cb6">_child_counter_map</a>;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    <span class="comment">// A set of bucket counters registered in this runtime profile.</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a621442fffae02c4f642220c0dba63131">  424</a></span>    std::set&lt;std::vector&lt;Counter*&gt;*&gt; <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a621442fffae02c4f642220c0dba63131">_bucketing_counters</a>;</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="comment">// protects _counter_map, _counter_child_map and _bucketing_counters</span></div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4729a127a30b59e9404a86cfb7924a6a">  427</a></span>    <span class="keyword">mutable</span> std::mutex <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4729a127a30b59e9404a86cfb7924a6a">_counter_map_lock</a>;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="comment">// Child profiles.  Does not own memory.</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    <span class="comment">// We record children in both a map (to facilitate updates) and a vector</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>    <span class="comment">// (to print things in the order they were registered)</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a10a58875728198dc83e845d3d038bde4">  432</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a10a58875728198dc83e845d3d038bde4">ChildMap</a> = std::map&lt;std::string, RuntimeProfile*&gt;;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a2ab2836cfd201ecbca1a3c0f0dcf2e31">  433</a></span>    <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a10a58875728198dc83e845d3d038bde4">ChildMap</a> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a2ab2836cfd201ecbca1a3c0f0dcf2e31">_child_map</a>;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <span class="comment">// vector of (profile, indentation flag)</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4fcf9a6ad31309fb8fd7d71fee32fa5e">  435</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4fcf9a6ad31309fb8fd7d71fee32fa5e">ChildVector</a> = std::vector&lt;std::pair&lt;RuntimeProfile*, bool&gt;&gt;;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a5d6889efd94a434c26dfa91c49736795">  436</a></span>    <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4fcf9a6ad31309fb8fd7d71fee32fa5e">ChildVector</a> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a5d6889efd94a434c26dfa91c49736795">_children</a>;</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad4ac1073b9057d416974fad50ea09c5c">  437</a></span>    <span class="keyword">mutable</span> std::mutex <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad4ac1073b9057d416974fad50ea09c5c">_children_lock</a>; <span class="comment">// protects _child_map and _children</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf967ee2a1fc40fa95e5300880f5e4e1">  439</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf967ee2a1fc40fa95e5300880f5e4e1">InfoStrings</a> = std::map&lt;std::string, std::string&gt;;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a02eb596656e827655a86aa94c8eb3b48">  440</a></span>    <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf967ee2a1fc40fa95e5300880f5e4e1">InfoStrings</a> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a02eb596656e827655a86aa94c8eb3b48">_info_strings</a>;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span> </div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    <span class="comment">// Keeps track of the order in which InfoStrings are displayed when printed</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7900984af393916a4f27488466d453e3">  443</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7900984af393916a4f27488466d453e3">InfoStringsDisplayOrder</a> = std::vector&lt;std::string&gt;;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a6be557888fb757a8d272bb619cd5d181">  444</a></span>    <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7900984af393916a4f27488466d453e3">InfoStringsDisplayOrder</a> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a6be557888fb757a8d272bb619cd5d181">_info_strings_display_order</a>;</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <span class="comment">// Protects _info_strings and _info_strings_display_order</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a9c2bab7ec61ac64a688677ea86270d9b">  447</a></span>    <span class="keyword">mutable</span> std::mutex <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a9c2bab7ec61ac64a688677ea86270d9b">_info_strings_lock</a>;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span> </div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a14b77976d313ee202cdbf4f874279217">  449</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a14b77976d313ee202cdbf4f874279217">EventSequenceMap</a> = std::map&lt;std::string, EventSequence*&gt;;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24d5ad09018db76ebb4e4bc51b539108">  450</a></span>    <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a14b77976d313ee202cdbf4f874279217">EventSequenceMap</a> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24d5ad09018db76ebb4e4bc51b539108">_event_sequence_map</a>;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#af693d45b4c4b1eac72933a6c4df7b144">  451</a></span>    <span class="keyword">mutable</span> std::mutex <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#af693d45b4c4b1eac72933a6c4df7b144">_event_sequences_lock</a>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span> </div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aee1096301d23b77eef344ba650518cfd">  453</a></span>    <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aee1096301d23b77eef344ba650518cfd">_counter_total_time</a>;</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <span class="comment">// Time spent in just in this profile (i.e. not the children) as a fraction</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <span class="comment">// of the total time in the entire profile tree.</span></div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac148065576f306afce6faeb4abddd2da">  456</a></span>    <span class="keywordtype">double</span> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac148065576f306afce6faeb4abddd2da">_local_time_percent</a>;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span> </div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a87e5d53b9d074de778d4ae3af0b7991a">  458</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a87e5d53b9d074de778d4ae3af0b7991a">_added_to_span</a> {<span class="keyword">false</span>};</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span> </div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#acf315c495c75eaf2bbc01e82f4bc174c">  460</a></span>    <span class="keyword">enum</span> <a class="code hl_enumeration" href="../../d9/d96/classdoris_1_1_runtime_profile.html#acf315c495c75eaf2bbc01e82f4bc174c">PeriodicCounterType</a> {</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#acf315c495c75eaf2bbc01e82f4bc174ca4138f7dbee1d97c87cf7ea8b53731b95">  461</a></span>        <a class="code hl_enumvalue" href="../../d9/d96/classdoris_1_1_runtime_profile.html#acf315c495c75eaf2bbc01e82f4bc174ca4138f7dbee1d97c87cf7ea8b53731b95">RATE_COUNTER</a> = 0,</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#acf315c495c75eaf2bbc01e82f4bc174ca31e5109fd5333f0e1ff28e6a17c81ebc">  462</a></span>        <a class="code hl_enumvalue" href="../../d9/d96/classdoris_1_1_runtime_profile.html#acf315c495c75eaf2bbc01e82f4bc174ca31e5109fd5333f0e1ff28e6a17c81ebc">SAMPLING_COUNTER</a>,</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    };</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span> </div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno"><a class="line" href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html">  465</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html">RateCounterInfo</a> {</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno"><a class="line" href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html#afe6ebd1985fd614840590a34a3f7edcf">  466</a></span>        <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* <a class="code hl_variable" href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html#afe6ebd1985fd614840590a34a3f7edcf">src_counter</a>;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno"><a class="line" href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html#ac5b2f8c8f6badf0b483a6789486d2986">  467</a></span>        <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac801a99b6c464f44fa7d03b40ec2a4cd">SampleFn</a> <a class="code hl_variable" href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html#ac5b2f8c8f6badf0b483a6789486d2986">sample_fn</a>;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno"><a class="line" href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html#ac4864b2271e2a1866a54939d80955a6f">  468</a></span>        int64_t <a class="code hl_variable" href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html#ac4864b2271e2a1866a54939d80955a6f">elapsed_ms</a>;</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    };</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span> </div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno"><a class="line" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html">  471</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html">SamplingCounterInfo</a> {</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno"><a class="line" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#afe6ebd1985fd614840590a34a3f7edcf">  472</a></span>        <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* <a class="code hl_variable" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#afe6ebd1985fd614840590a34a3f7edcf">src_counter</a>; <span class="comment">// the counter to be sampled</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno"><a class="line" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#ac5b2f8c8f6badf0b483a6789486d2986">  473</a></span>        <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac801a99b6c464f44fa7d03b40ec2a4cd">SampleFn</a> <a class="code hl_variable" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#ac5b2f8c8f6badf0b483a6789486d2986">sample_fn</a>;</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno"><a class="line" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#a3eeb8370bb431e1fbaf6bc326926eb51">  474</a></span>        int64_t <a class="code hl_variable" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#a3eeb8370bb431e1fbaf6bc326926eb51">total_sampled_value</a>; <span class="comment">// sum of all sampled values;</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno"><a class="line" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#aaff48ba97b1b4a77dde52e2a958b70ff">  475</a></span>        int64_t <a class="code hl_variable" href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#aaff48ba97b1b4a77dde52e2a958b70ff">num_sampled</a>;         <span class="comment">// number of samples taken</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    };</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno"><a class="line" href="../../d5/d02/structdoris_1_1_runtime_profile_1_1_bucket_counters_info.html">  478</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="../../d5/d02/structdoris_1_1_runtime_profile_1_1_bucket_counters_info.html">BucketCountersInfo</a> {</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno"><a class="line" href="../../d5/d02/structdoris_1_1_runtime_profile_1_1_bucket_counters_info.html#afe6ebd1985fd614840590a34a3f7edcf">  479</a></span>        <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* <a class="code hl_variable" href="../../d5/d02/structdoris_1_1_runtime_profile_1_1_bucket_counters_info.html#afe6ebd1985fd614840590a34a3f7edcf">src_counter</a>; <span class="comment">// the counter to be sampled</span></div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno"><a class="line" href="../../d5/d02/structdoris_1_1_runtime_profile_1_1_bucket_counters_info.html#aaff48ba97b1b4a77dde52e2a958b70ff">  480</a></span>        int64_t <a class="code hl_variable" href="../../d5/d02/structdoris_1_1_runtime_profile_1_1_bucket_counters_info.html#aaff48ba97b1b4a77dde52e2a958b70ff">num_sampled</a>;  <span class="comment">// number of samples taken</span></div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        <span class="comment">// TODO: customize bucketing</span></div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    };</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span> </div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    <span class="comment">// update a subtree of profiles from nodes, rooted at *idx.</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    <span class="comment">// On return, *idx points to the node immediately following this subtree.</span></div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a3ef66c7862f5e72c0e5b1d3328820f67">update</a>(<span class="keyword">const</span> std::vector&lt;TRuntimeProfileNode&gt;&amp; nodes, <span class="keywordtype">int</span>* <a class="code hl_variable" href="../../d4/ddd/rowset__tree_8cpp.html#ae40354a1051342eb5a9db005715dcfa9">idx</a>);</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <span class="comment">// Helper function to compute compute the fraction of the total time spent in</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <span class="comment">// this profile and its children.</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    <span class="comment">// Called recursively.</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#aed25768f2265b2c1bd2d1af1a9d22358">compute_time_in_profile</a>(int64_t total_time);</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span> </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <span class="comment">// Print the child counters of the given counter name</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a9de76500880a142f6c1c64310dec5d53">print_child_counters</a>(<span class="keyword">const</span> std::string&amp; prefix, <span class="keyword">const</span> std::string&amp; counter_name,</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>                                     <span class="keyword">const</span> <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae25b44a3020e1ba8ba279fd243c33809">CounterMap</a>&amp; counter_map,</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>                                     <span class="keyword">const</span> <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad854968ee5bfb13c5b351071f82b6f2c">ChildCounterMap</a>&amp; child_counter_map, std::ostream* s);</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span> </div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a3547a57f51e7bba7e6b95d11c677c79f">add_child_counters_to_span</a>(<a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ab7a11c8b8a43361d7691f6c573635824">OpentelemetrySpan</a> span, <span class="keyword">const</span> std::string&amp; profile_name,</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>                                           <span class="keyword">const</span> std::string&amp; counter_name,</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>                                           <span class="keyword">const</span> <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae25b44a3020e1ba8ba279fd243c33809">CounterMap</a>&amp; counter_map,</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>                                           <span class="keyword">const</span> <a class="code hl_typedef" href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad854968ee5bfb13c5b351071f82b6f2c">ChildCounterMap</a>&amp; child_counter_map);</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span> </div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno"><a class="line" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a62bc80998515452584ebcc745cabfe9f">  503</a></span>    <span class="keyword">static</span> std::string <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a62bc80998515452584ebcc745cabfe9f">print_json_counter</a>(<span class="keyword">const</span> std::string&amp; profile_name, <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">Counter</a>* counter) {</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a46cf59a00a2e66e400a585d412a87a71">print_json_info</a>(profile_name,</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>                               <a class="code hl_function" href="../../d4/db8/classdoris_1_1_pretty_printer.html#aaa3ce08858081586e0f1e563733cadf2">PrettyPrinter::print</a>(counter-&gt;<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">value</a>(), counter-&gt;<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a060cb58ca1914eb9f853b510f4585b25">type</a>()));</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    }</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span> </div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    <span class="keyword">static</span> std::string <a class="code hl_function" href="../../d9/d96/classdoris_1_1_runtime_profile.html#a46cf59a00a2e66e400a585d412a87a71">print_json_info</a>(<span class="keyword">const</span> std::string&amp; profile_name, std::string <a class="code hl_variable" href="../../df/dd9/util_2types_8h.html#adae7202c63102b0934c3ac5be41b0dae">value</a>);</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>};</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span> </div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span><span class="comment">// Utility class to update the counter at object construction and destruction.</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span><span class="comment">// When the object is constructed, decrement the counter by val.</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span><span class="comment">// When the object goes out of scope, increment the counter by val.</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno"><a class="line" href="../../db/d88/classdoris_1_1_scoped_counter.html">  514</a></span><span class="keyword">class </span><a class="code hl_class" href="../../db/d88/classdoris_1_1_scoped_counter.html">ScopedCounter</a> {</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno"><a class="line" href="../../db/d88/classdoris_1_1_scoped_counter.html#a7f8029171165d1fc3e2a1bf009181fc2">  516</a></span>    <a class="code hl_function" href="../../db/d88/classdoris_1_1_scoped_counter.html#a7f8029171165d1fc3e2a1bf009181fc2">ScopedCounter</a>(<a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">RuntimeProfile::Counter</a>* counter, int64_t val) : <a class="code hl_variable" href="../../db/d88/classdoris_1_1_scoped_counter.html#af21bc0a1d592988ee93e51b0cc455552">_val</a>(val), <a class="code hl_variable" href="../../db/d88/classdoris_1_1_scoped_counter.html#aff0f54945f56ad4d09c20c4054438326">_counter</a>(counter) {</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <span class="keywordflow">if</span> (counter == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        }</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>        <a class="code hl_variable" href="../../db/d88/classdoris_1_1_scoped_counter.html#aff0f54945f56ad4d09c20c4054438326">_counter</a>-&gt;<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3a5b31a711e7ab302587f2334c0648f9">update</a>(-1L * <a class="code hl_variable" href="../../db/d88/classdoris_1_1_scoped_counter.html#af21bc0a1d592988ee93e51b0cc455552">_val</a>);</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    }</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span> </div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    <span class="comment">// Increment the counter when object is destroyed</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno"><a class="line" href="../../db/d88/classdoris_1_1_scoped_counter.html#a762107be3b340db0781dc7bcf8650d17">  525</a></span>    <a class="code hl_function" href="../../db/d88/classdoris_1_1_scoped_counter.html#a762107be3b340db0781dc7bcf8650d17">~ScopedCounter</a>() {</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/d88/classdoris_1_1_scoped_counter.html#aff0f54945f56ad4d09c20c4054438326">_counter</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            <a class="code hl_variable" href="../../db/d88/classdoris_1_1_scoped_counter.html#aff0f54945f56ad4d09c20c4054438326">_counter</a>-&gt;<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3a5b31a711e7ab302587f2334c0648f9">update</a>(<a class="code hl_variable" href="../../db/d88/classdoris_1_1_scoped_counter.html#af21bc0a1d592988ee93e51b0cc455552">_val</a>);</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>        }</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    }</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <span class="comment">// Disable copy constructor and assignment</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno"><a class="line" href="../../db/d88/classdoris_1_1_scoped_counter.html#a42f88d384ab0555276b987ba2b623671">  532</a></span>    <a class="code hl_function" href="../../db/d88/classdoris_1_1_scoped_counter.html#a42f88d384ab0555276b987ba2b623671">ScopedCounter</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../db/d88/classdoris_1_1_scoped_counter.html">ScopedCounter</a>&amp; counter) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno"><a class="line" href="../../db/d88/classdoris_1_1_scoped_counter.html#aac3e87c50aefe39e2fb4ecc56dd22702">  533</a></span>    <a class="code hl_class" href="../../db/d88/classdoris_1_1_scoped_counter.html">ScopedCounter</a>&amp; <a class="code hl_function" href="../../db/d88/classdoris_1_1_scoped_counter.html#aac3e87c50aefe39e2fb4ecc56dd22702">operator=</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../db/d88/classdoris_1_1_scoped_counter.html">ScopedCounter</a>&amp; counter) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span> </div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno"><a class="line" href="../../db/d88/classdoris_1_1_scoped_counter.html#af21bc0a1d592988ee93e51b0cc455552">  536</a></span>    int64_t <a class="code hl_variable" href="../../db/d88/classdoris_1_1_scoped_counter.html#af21bc0a1d592988ee93e51b0cc455552">_val</a>;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno"><a class="line" href="../../db/d88/classdoris_1_1_scoped_counter.html#aff0f54945f56ad4d09c20c4054438326">  537</a></span>    <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">RuntimeProfile::Counter</a>* <a class="code hl_variable" href="../../db/d88/classdoris_1_1_scoped_counter.html#aff0f54945f56ad4d09c20c4054438326">_counter</a>;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>};</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span><span class="comment">// Utility class to update time elapsed when the object goes out of scope.</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span><span class="comment">// &#39;T&#39; must implement the stopWatch &quot;interface&quot; (start,stop,elapsed_time) but</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span><span class="comment">// we use templates not to pay for virtual function overhead.</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">typename</span> Bool = <span class="keywordtype">bool</span>&gt;</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html">  544</a></span><span class="keyword">class </span><a class="code hl_class" href="../../d4/d32/classdoris_1_1_scoped_timer.html">ScopedTimer</a> {</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad5289b6775355800a544b87dc1d5a2b3">  546</a></span>    <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad5289b6775355800a544b87dc1d5a2b3">ScopedTimer</a>(<a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">RuntimeProfile::Counter</a>* counter, <span class="keyword">const</span> Bool* <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a364f619f880707cca656c3bc8f65009d">is_cancelled</a> = <span class="keyword">nullptr</span>)</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>            : <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#aff0f54945f56ad4d09c20c4054438326">_counter</a>(counter), <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a1df19cc8ee93699e183cae13f3900fcc">_is_cancelled</a>(<a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a364f619f880707cca656c3bc8f65009d">is_cancelled</a>) {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        <span class="keywordflow">if</span> (counter == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>        }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>        DCHECK_EQ(counter-&gt;<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a060cb58ca1914eb9f853b510f4585b25">type</a>(), TUnit::TIME_NS);</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad7a42fab049c67ced722750a16a5e843">_sw</a>.start();</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    }</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span> </div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a8c528baf37154d347366083f0f816846">  555</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a8c528baf37154d347366083f0f816846">stop</a>() { <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad7a42fab049c67ced722750a16a5e843">_sw</a>.stop(); }</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span> </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a60de64d75454385b23995437f1d72669">  557</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a60de64d75454385b23995437f1d72669">start</a>() { <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad7a42fab049c67ced722750a16a5e843">_sw</a>.start(); }</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a364f619f880707cca656c3bc8f65009d">  559</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a364f619f880707cca656c3bc8f65009d">is_cancelled</a>() { <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a1df19cc8ee93699e183cae13f3900fcc">_is_cancelled</a> != <span class="keyword">nullptr</span> &amp;&amp; *<a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a1df19cc8ee93699e183cae13f3900fcc">_is_cancelled</a>; }</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span> </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a15b7147c9248adf6ab3b3f8d1f8e185f">  561</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a15b7147c9248adf6ab3b3f8d1f8e185f">UpdateCounter</a>() {</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#aff0f54945f56ad4d09c20c4054438326">_counter</a> != <span class="keyword">nullptr</span> &amp;&amp; !<a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a364f619f880707cca656c3bc8f65009d">is_cancelled</a>()) {</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>            <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#aff0f54945f56ad4d09c20c4054438326">_counter</a>-&gt;<a class="code hl_function" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3a5b31a711e7ab302587f2334c0648f9">update</a>(<a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad7a42fab049c67ced722750a16a5e843">_sw</a>.elapsed_time());</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>        }</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    }</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span> </div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="comment">// Update counter when object is destroyed</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ac0d9dbda276901ee8642dc51934b7712">  568</a></span>    <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ac0d9dbda276901ee8642dc51934b7712">~ScopedTimer</a>() {</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#aff0f54945f56ad4d09c20c4054438326">_counter</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        }</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad7a42fab049c67ced722750a16a5e843">_sw</a>.stop();</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a15b7147c9248adf6ab3b3f8d1f8e185f">UpdateCounter</a>();</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    }</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <span class="comment">// Disable copy constructor and assignment</span></div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#adbc9280fafbbfb26e0d04a25ae4fa4aa">  577</a></span>    <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#adbc9280fafbbfb26e0d04a25ae4fa4aa">ScopedTimer</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../d4/d32/classdoris_1_1_scoped_timer.html">ScopedTimer</a>&amp; timer) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a20d3ec082c3e0b8facfedd9d4daf90b9">  578</a></span>    <a class="code hl_class" href="../../d4/d32/classdoris_1_1_scoped_timer.html">ScopedTimer</a>&amp; <a class="code hl_function" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a20d3ec082c3e0b8facfedd9d4daf90b9">operator=</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../d4/d32/classdoris_1_1_scoped_timer.html">ScopedTimer</a>&amp; timer) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad7a42fab049c67ced722750a16a5e843">  581</a></span>    <a class="code hl_define" href="../../d5/d6f/exp_8c.html#a0acb682b8260ab1c60b918599864e2e5">T</a> <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad7a42fab049c67ced722750a16a5e843">_sw</a>;</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#aff0f54945f56ad4d09c20c4054438326">  582</a></span>    <a class="code hl_class" href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">RuntimeProfile::Counter</a>* <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#aff0f54945f56ad4d09c20c4054438326">_counter</a>;</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno"><a class="line" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a1df19cc8ee93699e183cae13f3900fcc">  583</a></span>    <span class="keyword">const</span> Bool* <a class="code hl_variable" href="../../d4/d32/classdoris_1_1_scoped_timer.html#a1df19cc8ee93699e183cae13f3900fcc">_is_cancelled</a>;</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>};</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span> </div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span><span class="comment">// Utility class to update time elapsed when the object goes out of scope.</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span><span class="comment">// &#39;T&#39; must implement the stopWatch &quot;interface&quot; (start,stop,elapsed_time) but</span></div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span><span class="comment">// we use templates not to pay for virtual function overhead.</span></div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> C&gt;</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno"><a class="line" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html">  590</a></span><span class="keyword">class </span><a class="code hl_class" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html">ScopedRawTimer</a> {</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno"><a class="line" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#ad1776069d8bbb5ca700c9a844240c663">  592</a></span>    <a class="code hl_function" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#ad1776069d8bbb5ca700c9a844240c663">ScopedRawTimer</a>(<a class="code hl_define" href="../../d4/d8d/exp2f_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>* counter) : <a class="code hl_variable" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#aa9af9f74fec619753c18daab202da3f4">_counter</a>(counter) { <a class="code hl_variable" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#ad7a42fab049c67ced722750a16a5e843">_sw</a>.start(); }</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    <span class="comment">// Update counter when object is destroyed</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno"><a class="line" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#a80217f83910db76b0350b51176bec57b">  594</a></span>    <a class="code hl_function" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#a80217f83910db76b0350b51176bec57b">~ScopedRawTimer</a>() { *<a class="code hl_variable" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#aa9af9f74fec619753c18daab202da3f4">_counter</a> += <a class="code hl_variable" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#ad7a42fab049c67ced722750a16a5e843">_sw</a>.elapsed_time(); }</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span> </div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    <span class="comment">// Disable copy constructor and assignment</span></div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno"><a class="line" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#a0ab52ddbc7fe07a7c25c5d564ed0e0c1">  597</a></span>    <a class="code hl_function" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#a0ab52ddbc7fe07a7c25c5d564ed0e0c1">ScopedRawTimer</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html">ScopedRawTimer</a>&amp; timer) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno"><a class="line" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#a7be55457c2ac0f25d55ed4dc481b559c">  598</a></span>    <a class="code hl_class" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html">ScopedRawTimer</a>&amp; <a class="code hl_function" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#a7be55457c2ac0f25d55ed4dc481b559c">operator=</a>(<span class="keyword">const</span> <a class="code hl_class" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html">ScopedRawTimer</a>&amp; timer) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span> </div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno"><a class="line" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#ad7a42fab049c67ced722750a16a5e843">  601</a></span>    <a class="code hl_define" href="../../d5/d6f/exp_8c.html#a0acb682b8260ab1c60b918599864e2e5">T</a> <a class="code hl_variable" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#ad7a42fab049c67ced722750a16a5e843">_sw</a>;</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno"><a class="line" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#aa9af9f74fec619753c18daab202da3f4">  602</a></span>    <a class="code hl_define" href="../../d4/d8d/exp2f_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a>* <a class="code hl_variable" href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#aa9af9f74fec619753c18daab202da3f4">_counter</a>;</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>};</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span> </div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>} <span class="comment">// namespace doris</span></div>
<div class="ttc" id="abinary__cast_8hpp_html"><div class="ttname"><a href="../../df/dde/binary__cast_8hpp.html">binary_cast.hpp</a></div></div>
<div class="ttc" id="aclassdoris_1_1_custom_stop_watch_html"><div class="ttname"><a href="../../d7/d16/classdoris_1_1_custom_stop_watch.html">doris::CustomStopWatch&lt; CLOCK_MONOTONIC &gt;</a></div></div>
<div class="ttc" id="aclassdoris_1_1_custom_stop_watch_html_a60de64d75454385b23995437f1d72669"><div class="ttname"><a href="../../d7/d16/classdoris_1_1_custom_stop_watch.html#a60de64d75454385b23995437f1d72669">doris::CustomStopWatch::start</a></div><div class="ttdeci">void start()</div><div class="ttdef"><b>Definition:</b> stopwatch.hpp:41</div></div>
<div class="ttc" id="aclassdoris_1_1_custom_stop_watch_html_a8c528baf37154d347366083f0f816846"><div class="ttname"><a href="../../d7/d16/classdoris_1_1_custom_stop_watch.html#a8c528baf37154d347366083f0f816846">doris::CustomStopWatch::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> stopwatch.hpp:48</div></div>
<div class="ttc" id="aclassdoris_1_1_custom_stop_watch_html_adcda5684f125d03f01912ee2b400fd89"><div class="ttname"><a href="../../d7/d16/classdoris_1_1_custom_stop_watch.html#adcda5684f125d03f01912ee2b400fd89">doris::CustomStopWatch::elapsed_time</a></div><div class="ttdeci">uint64_t elapsed_time() const</div><div class="ttdef"><b>Definition:</b> stopwatch.hpp:67</div></div>
<div class="ttc" id="aclassdoris_1_1_pretty_printer_html_aaa3ce08858081586e0f1e563733cadf2"><div class="ttname"><a href="../../d4/db8/classdoris_1_1_pretty_printer.html#aaa3ce08858081586e0f1e563733cadf2">doris::PrettyPrinter::print</a></div><div class="ttdeci">static std::string print(bool value, TUnit::type ignored, bool verbose=false)</div><div class="ttdef"><b>Definition:</b> pretty_printer.h:41</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html">doris::RuntimeProfile::Counter</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:81</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_a060cb58ca1914eb9f853b510f4585b25"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a060cb58ca1914eb9f853b510f4585b25">doris::RuntimeProfile::Counter::type</a></div><div class="ttdeci">TUnit::type type() const</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:103</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_a1793931b373273e0b6c4fb406c4a2f65"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a1793931b373273e0b6c4fb406c4a2f65">doris::RuntimeProfile::Counter::bit_or</a></div><div class="ttdeci">void bit_or(int64_t delta)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:88</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_a2f035186ea39738ac93b218640e79860"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a2f035186ea39738ac93b218640e79860">doris::RuntimeProfile::Counter::double_value</a></div><div class="ttdeci">virtual double double_value() const</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:99</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_a3a5b31a711e7ab302587f2334c0648f9"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3a5b31a711e7ab302587f2334c0648f9">doris::RuntimeProfile::Counter::update</a></div><div class="ttdeci">virtual void update(int64_t delta)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:86</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_a3ad5729c8c11273b9cb61e59e3101f5e"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a3ad5729c8c11273b9cb61e59e3101f5e">doris::RuntimeProfile::Counter::value</a></div><div class="ttdeci">virtual int64_t value() const</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:97</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_a42ed8f39f88b60fac5f4a0da22972bc9"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a42ed8f39f88b60fac5f4a0da22972bc9">doris::RuntimeProfile::Counter::_type</a></div><div class="ttdeci">TUnit::type _type</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:109</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_a55971926ac6a0680b4612676357c10cc"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a55971926ac6a0680b4612676357c10cc">doris::RuntimeProfile::Counter::~Counter</a></div><div class="ttdeci">virtual ~Counter()=default</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_a7da59e843c5074212c73a33d64cff799"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a7da59e843c5074212c73a33d64cff799">doris::RuntimeProfile::Counter::_value</a></div><div class="ttdeci">std::atomic&lt; int64_t &gt; _value</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:108</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_a9b2810971dc47dc3f10d21fd608881e7"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#a9b2810971dc47dc3f10d21fd608881e7">doris::RuntimeProfile::Counter::Counter</a></div><div class="ttdeci">Counter(TUnit::type type, int64_t value=0)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:83</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_aa2e4083194118248cb9135d2433f7555"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#aa2e4083194118248cb9135d2433f7555">doris::RuntimeProfile::Counter::set</a></div><div class="ttdeci">virtual void set(double value)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:92</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_counter_html_aef395a9dff70512069b03cda90399487"><div class="ttname"><a href="../../da/d02/classdoris_1_1_runtime_profile_1_1_counter.html#aef395a9dff70512069b03cda90399487">doris::RuntimeProfile::Counter::set</a></div><div class="ttdeci">virtual void set(int64_t value)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:90</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_derived_counter_html"><div class="ttname"><a href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html">doris::RuntimeProfile::DerivedCounter</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:177</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_derived_counter_html_a0264bd03cfe21426481c51ceb7f198ea"><div class="ttname"><a href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#a0264bd03cfe21426481c51ceb7f198ea">doris::RuntimeProfile::DerivedCounter::_counter_fn</a></div><div class="ttdeci">DerivedCounterFunction _counter_fn</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:185</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_derived_counter_html_a451bee3185999051b045cf01c0fda9cc"><div class="ttname"><a href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#a451bee3185999051b045cf01c0fda9cc">doris::RuntimeProfile::DerivedCounter::DerivedCounter</a></div><div class="ttdeci">DerivedCounter(TUnit::type type, const DerivedCounterFunction &amp;counter_fn)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:179</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_derived_counter_html_ad31d274efd111e82aec5480d1f1ebd40"><div class="ttname"><a href="../../da/d23/classdoris_1_1_runtime_profile_1_1_derived_counter.html#ad31d274efd111e82aec5480d1f1ebd40">doris::RuntimeProfile::DerivedCounter::value</a></div><div class="ttdeci">int64_t value() const override</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:182</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html">doris::RuntimeProfile::EventSequence</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:194</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_a3aafdf60d36be176c14afd700c141919"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a3aafdf60d36be176c14afd700c141919">doris::RuntimeProfile::EventSequence::EventList</a></div><div class="ttdeci">std::vector&lt; Event &gt; EventList</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:217</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_a43e1b615bec7d8c9f81f10b46755216b"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a43e1b615bec7d8c9f81f10b46755216b">doris::RuntimeProfile::EventSequence::events</a></div><div class="ttdeci">const EventList &amp; events() const</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:219</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_a60de64d75454385b23995437f1d72669"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a60de64d75454385b23995437f1d72669">doris::RuntimeProfile::EventSequence::start</a></div><div class="ttdeci">void start()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:199</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_a84a8b2a8354dfd61c36c2ecaa4e492e0"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a84a8b2a8354dfd61c36c2ecaa4e492e0">doris::RuntimeProfile::EventSequence::elapsed_time</a></div><div class="ttdeci">int64_t elapsed_time()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:211</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_a8c528baf37154d347366083f0f816846"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#a8c528baf37154d347366083f0f816846">doris::RuntimeProfile::EventSequence::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:202</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_aa6359645e9ca49a595ce195f6c957b2e"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aa6359645e9ca49a595ce195f6c957b2e">doris::RuntimeProfile::EventSequence::_events</a></div><div class="ttdeci">EventList _events</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:223</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_aacffbb17723b9291ff712017d448c51b"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aacffbb17723b9291ff712017d448c51b">doris::RuntimeProfile::EventSequence::_sw</a></div><div class="ttdeci">MonotonicStopWatch _sw</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:226</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_aae5b1517c16448fa0d1b7e00a0f92a74"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aae5b1517c16448fa0d1b7e00a0f92a74">doris::RuntimeProfile::EventSequence::EventSequence</a></div><div class="ttdeci">EventSequence()=default</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_ab886ce227a51ccc37d54bbc1a7c33bb7"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#ab886ce227a51ccc37d54bbc1a7c33bb7">doris::RuntimeProfile::EventSequence::mark_event</a></div><div class="ttdeci">void mark_event(const std::string &amp;label)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:207</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_event_sequence_html_aef55d28165b6a34ffcf3ad04cbc51889"><div class="ttname"><a href="../../d5/d93/classdoris_1_1_runtime_profile_1_1_event_sequence.html#aef55d28165b6a34ffcf3ad04cbc51889">doris::RuntimeProfile::EventSequence::Event</a></div><div class="ttdeci">std::pair&lt; std::string, int64_t &gt; Event</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:214</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_high_water_mark_counter_html"><div class="ttname"><a href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html">doris::RuntimeProfile::HighWaterMarkCounter</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:118</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_high_water_mark_counter_html_a312d59315551bb95b01dcdbc41b9d27c"><div class="ttname"><a href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a312d59315551bb95b01dcdbc41b9d27c">doris::RuntimeProfile::HighWaterMarkCounter::current_value</a></div><div class="ttdeci">int64_t current_value() const</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:149</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_high_water_mark_counter_html_a52694a006a5989b9583e8e1b638988ea"><div class="ttname"><a href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a52694a006a5989b9583e8e1b638988ea">doris::RuntimeProfile::HighWaterMarkCounter::set</a></div><div class="ttdeci">void set(int64_t v) override</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:144</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_high_water_mark_counter_html_a843e17bb8d8d326f21400ad14f9ae84b"><div class="ttname"><a href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a843e17bb8d8d326f21400ad14f9ae84b">doris::RuntimeProfile::HighWaterMarkCounter::UpdateMax</a></div><div class="ttdeci">void UpdateMax(int64_t v)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:154</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_high_water_mark_counter_html_a9af5e7204d66b20df7d3e1efa5d4dfd7"><div class="ttname"><a href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#a9af5e7204d66b20df7d3e1efa5d4dfd7">doris::RuntimeProfile::HighWaterMarkCounter::HighWaterMarkCounter</a></div><div class="ttdeci">HighWaterMarkCounter(TUnit::type unit)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:120</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_high_water_mark_counter_html_aabe30c223f7d9d108c6b0217a1681133"><div class="ttname"><a href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#aabe30c223f7d9d108c6b0217a1681133">doris::RuntimeProfile::HighWaterMarkCounter::add</a></div><div class="ttdeci">virtual void add(int64_t delta)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:122</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_high_water_mark_counter_html_abe4a5b403bfdd5005b8b81945654d15a"><div class="ttname"><a href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#abe4a5b403bfdd5005b8b81945654d15a">doris::RuntimeProfile::HighWaterMarkCounter::try_add</a></div><div class="ttdeci">bool try_add(int64_t delta, int64_t max)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:131</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_1_1_high_water_mark_counter_html_ac9698c66b76f7f129e8e5e630702ddca"><div class="ttname"><a href="../../d9/d12/classdoris_1_1_runtime_profile_1_1_high_water_mark_counter.html#ac9698c66b76f7f129e8e5e630702ddca">doris::RuntimeProfile::HighWaterMarkCounter::current_value_</a></div><div class="ttdeci">std::atomic&lt; int64_t &gt; current_value_</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:170</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html">doris::RuntimeProfile</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:79</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a02eb596656e827655a86aa94c8eb3b48"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a02eb596656e827655a86aa94c8eb3b48">doris::RuntimeProfile::_info_strings</a></div><div class="ttdeci">InfoStrings _info_strings</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:440</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a10a58875728198dc83e845d3d038bde4"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a10a58875728198dc83e845d3d038bde4">doris::RuntimeProfile::ChildMap</a></div><div class="ttdeci">std::map&lt; std::string, RuntimeProfile * &gt; ChildMap</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:432</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a1129f8258e68cc81c0a1022546d045fb"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a1129f8258e68cc81c0a1022546d045fb">doris::RuntimeProfile::AddSharedHighWaterMarkCounter</a></div><div class="ttdeci">std::shared_ptr&lt; HighWaterMarkCounter &gt; AddSharedHighWaterMarkCounter(const std::string &amp;name, TUnit::type unit, const std::string &amp;parent_counter_name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:379</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a14b77976d313ee202cdbf4f874279217"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a14b77976d313ee202cdbf4f874279217">doris::RuntimeProfile::EventSequenceMap</a></div><div class="ttdeci">std::map&lt; std::string, EventSequence * &gt; EventSequenceMap</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:449</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a15578163bba3cd0ed75be1910c520125"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a15578163bba3cd0ed75be1910c520125">doris::RuntimeProfile::add_child_unlock</a></div><div class="ttdeci">void add_child_unlock(RuntimeProfile *child, bool indent, RuntimeProfile *loc)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:294</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a1a00fd7cc962ea3cdfc544c18a70b45d"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a1a00fd7cc962ea3cdfc544c18a70b45d">doris::RuntimeProfile::add_derived_counter</a></div><div class="ttdeci">DerivedCounter * add_derived_counter(const std::string &amp;name, TUnit::type type, const DerivedCounterFunction &amp;counter_fn, const std::string &amp;parent_counter_name)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:422</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a1e8e7e6f95a43d0ccef31386313685e5"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a1e8e7e6f95a43d0ccef31386313685e5">doris::RuntimeProfile::add_info_string</a></div><div class="ttdeci">void add_info_string(const std::string &amp;key, const std::string &amp;value)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:334</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a24d5ad09018db76ebb4e4bc51b539108"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24d5ad09018db76ebb4e4bc51b539108">doris::RuntimeProfile::_event_sequence_map</a></div><div class="ttdeci">EventSequenceMap _event_sequence_map</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:450</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a24dcbf29c0d6cd766009a182a6484e3b"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a24dcbf29c0d6cd766009a182a6484e3b">doris::RuntimeProfile::name</a></div><div class="ttdeci">const std::string &amp; name() const</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:342</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a2ab2836cfd201ecbca1a3c0f0dcf2e31"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a2ab2836cfd201ecbca1a3c0f0dcf2e31">doris::RuntimeProfile::_child_map</a></div><div class="ttdeci">ChildMap _child_map</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:433</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a32783f68fbcd44dac181b182efb874cc"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a32783f68fbcd44dac181b182efb874cc">doris::RuntimeProfile::insert_child_head</a></div><div class="ttdeci">void insert_child_head(RuntimeProfile *child, bool indent)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:285</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a3547a57f51e7bba7e6b95d11c677c79f"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a3547a57f51e7bba7e6b95d11c677c79f">doris::RuntimeProfile::add_child_counters_to_span</a></div><div class="ttdeci">static void add_child_counters_to_span(OpentelemetrySpan span, const std::string &amp;profile_name, const std::string &amp;counter_name, const CounterMap &amp;counter_map, const ChildCounterMap &amp;child_counter_map)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:594</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a3b20f5c8a2e7c41041db09b0f1116e59"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a3b20f5c8a2e7c41041db09b0f1116e59">doris::RuntimeProfile::AddHighWaterMarkCounter</a></div><div class="ttdeci">HighWaterMarkCounter * AddHighWaterMarkCounter(const std::string &amp;name, TUnit::type unit, const std::string &amp;parent_counter_name=&quot;&quot;)</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a3ef66c7862f5e72c0e5b1d3328820f67"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a3ef66c7862f5e72c0e5b1d3328820f67">doris::RuntimeProfile::update</a></div><div class="ttdeci">void update(const TRuntimeProfileTree &amp;thrift_profile)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:126</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a40312915df3f9d7297b961df9f5a5a6b"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a40312915df3f9d7297b961df9f5a5a6b">doris::RuntimeProfile::to_thrift</a></div><div class="ttdeci">void to_thrift(TRuntimeProfileTree *tree)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:626</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a42ba30fca2349c65d5c643acd37bf07c"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a42ba30fca2349c65d5c643acd37bf07c">doris::RuntimeProfile::get_counter</a></div><div class="ttdeci">Counter * get_counter(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:439</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a46cf59a00a2e66e400a585d412a87a71"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a46cf59a00a2e66e400a585d412a87a71">doris::RuntimeProfile::print_json_info</a></div><div class="ttdeci">static std::string print_json_info(const std::string &amp;profile_name, std::string value)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:613</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a4729a127a30b59e9404a86cfb7924a6a"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4729a127a30b59e9404a86cfb7924a6a">doris::RuntimeProfile::_counter_map_lock</a></div><div class="ttdeci">std::mutex _counter_map_lock</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:427</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a4784190df9a9c1ded0126984f021eec7"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4784190df9a9c1ded0126984f021eec7">doris::RuntimeProfile::_metadata</a></div><div class="ttdeci">int64_t _metadata</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:407</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a4fcf9a6ad31309fb8fd7d71fee32fa5e"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a4fcf9a6ad31309fb8fd7d71fee32fa5e">doris::RuntimeProfile::ChildVector</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; RuntimeProfile *, bool &gt; &gt; ChildVector</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:435</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a5440dbfddfa7717a6a753130125ae2d0"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a5440dbfddfa7717a6a753130125ae2d0">doris::RuntimeProfile::counter_sum</a></div><div class="ttdeci">static int64_t counter_sum(const std::vector&lt; Counter * &gt; *counters)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:691</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a56003aa821801b1bf2011aa82227e041"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a56003aa821801b1bf2011aa82227e041">doris::RuntimeProfile::get_all_children</a></div><div class="ttdeci">void get_all_children(std::vector&lt; RuntimeProfile * &gt; *children)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:325</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a5d6889efd94a434c26dfa91c49736795"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a5d6889efd94a434c26dfa91c49736795">doris::RuntimeProfile::_children</a></div><div class="ttdeci">ChildVector _children</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:436</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a6029aa6cdd8fbdbb866951d00634541d"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a6029aa6cdd8fbdbb866951d00634541d">doris::RuntimeProfile::add_child</a></div><div class="ttdeci">void add_child(RuntimeProfile *child, bool indent, RuntimeProfile *location)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:311</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a61b85297f54f615b832d04f83b54a687"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a61b85297f54f615b832d04f83b54a687">doris::RuntimeProfile::_shared_counter_pool</a></div><div class="ttdeci">std::map&lt; std::string, std::shared_ptr&lt; HighWaterMarkCounter &gt; &gt; _shared_counter_pool</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:401</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a621442fffae02c4f642220c0dba63131"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a621442fffae02c4f642220c0dba63131">doris::RuntimeProfile::_bucketing_counters</a></div><div class="ttdeci">std::set&lt; std::vector&lt; Counter * &gt; * &gt; _bucketing_counters</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:424</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a62bc80998515452584ebcc745cabfe9f"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a62bc80998515452584ebcc745cabfe9f">doris::RuntimeProfile::print_json_counter</a></div><div class="ttdeci">static std::string print_json_counter(const std::string &amp;profile_name, Counter *counter)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:503</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a63c2d00ffe91f788f845c9422e8c3e26"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a63c2d00ffe91f788f845c9422e8c3e26">doris::RuntimeProfile::num_counters</a></div><div class="ttdeci">int num_counters() const</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:339</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a6485373c4c236bdce39592de4a113610"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a6485373c4c236bdce39592de4a113610">doris::RuntimeProfile::~RuntimeProfile</a></div><div class="ttdeci">~RuntimeProfile()</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a68e49b4bc4561ab43047f3c7b663f460"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a68e49b4bc4561ab43047f3c7b663f460">doris::RuntimeProfile::add_sampling_counter</a></div><div class="ttdeci">Counter * add_sampling_counter(const std::string &amp;name, Counter *src_counter)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:728</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a69ac4ef174d387fcbd7d6561bee9f314"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a69ac4ef174d387fcbd7d6561bee9f314">doris::RuntimeProfile::DerivedCounterFunction</a></div><div class="ttdeci">std::function&lt; int64_t()&gt; DerivedCounterFunction</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:173</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a6be557888fb757a8d272bb619cd5d181"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a6be557888fb757a8d272bb619cd5d181">doris::RuntimeProfile::_info_strings_display_order</a></div><div class="ttdeci">InfoStringsDisplayOrder _info_strings_display_order</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:444</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a772b49f46b77aeb76fdfff01807477d4"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a772b49f46b77aeb76fdfff01807477d4">doris::RuntimeProfile::create_child</a></div><div class="ttdeci">RuntimeProfile * create_child(const std::string &amp;name, bool indent=true, bool prepend=false)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:272</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a7900984af393916a4f27488466d453e3"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7900984af393916a4f27488466d453e3">doris::RuntimeProfile::InfoStringsDisplayOrder</a></div><div class="ttdeci">std::vector&lt; std::string &gt; InfoStringsDisplayOrder</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:443</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a7b60c8028b33de61800d18323f9df831"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7b60c8028b33de61800d18323f9df831">doris::RuntimeProfile::add_event_sequence</a></div><div class="ttdeci">EventSequence * add_event_sequence(const std::string &amp;key)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:739</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a7f7297446debc4043c777d8ad3b6dc97"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7f7297446debc4043c777d8ad3b6dc97">doris::RuntimeProfile::add_rate_counter</a></div><div class="ttdeci">Counter * add_rate_counter(const std::string &amp;name, Counter *src_counter)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:701</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a7f9e4116502c6aa37ff850c1437ad95f"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a7f9e4116502c6aa37ff850c1437ad95f">doris::RuntimeProfile::add_to_span</a></div><div class="ttdeci">void add_to_span()</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:544</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a87e5d53b9d074de778d4ae3af0b7991a"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a87e5d53b9d074de778d4ae3af0b7991a">doris::RuntimeProfile::_added_to_span</a></div><div class="ttdeci">bool _added_to_span</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:458</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a8d99f0127512d003f795f5bb8e6f9af5"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a8d99f0127512d003f795f5bb8e6f9af5">doris::RuntimeProfile::add_counter</a></div><div class="ttdeci">Counter * add_counter(const std::string &amp;name, TUnit::type type, const std::string &amp;parent_counter_name)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:402</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a9ba2374b86d6111f6822d5fc6ffe5569"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a9ba2374b86d6111f6822d5fc6ffe5569">doris::RuntimeProfile::total_time_counter</a></div><div class="ttdeci">Counter * total_time_counter()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:317</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a9c2bab7ec61ac64a688677ea86270d9b"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a9c2bab7ec61ac64a688677ea86270d9b">doris::RuntimeProfile::_info_strings_lock</a></div><div class="ttdeci">std::mutex _info_strings_lock</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:447</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_a9de76500880a142f6c1c64310dec5d53"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#a9de76500880a142f6c1c64310dec5d53">doris::RuntimeProfile::print_child_counters</a></div><div class="ttdeci">static void print_child_counters(const std::string &amp;prefix, const std::string &amp;counter_name, const CounterMap &amp;counter_map, const ChildCounterMap &amp;child_counter_map, std::ostream *s)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:752</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_aa1392f8e4bf9c4ce2eec0177896e5b01"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#aa1392f8e4bf9c4ce2eec0177896e5b01">doris::RuntimeProfile::_counter_map</a></div><div class="ttdeci">CounterMap _counter_map</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:416</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_aa55984ea9c7d2f95d794990cf917295f"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#aa55984ea9c7d2f95d794990cf917295f">doris::RuntimeProfile::metadata</a></div><div class="ttdeci">int64_t metadata() const</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:348</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_aac27e38355d25752fb3bdb74076aeee9"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#aac27e38355d25752fb3bdb74076aeee9">doris::RuntimeProfile::pretty_print</a></div><div class="ttdeci">void pretty_print(std::ostream *s, const std::string &amp;prefix=&quot;&quot;) const</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:468</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_aae9adfb3ecb9c698f6df7a1dbf126240"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#aae9adfb3ecb9c698f6df7a1dbf126240">doris::RuntimeProfile::_is_averaged_profile</a></div><div class="ttdeci">bool _is_averaged_profile</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:411</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_aaf1eea2fa24a83c75703a01142158dd5"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf1eea2fa24a83c75703a01142158dd5">doris::RuntimeProfile::divide</a></div><div class="ttdeci">void divide(int n)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:213</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_aaf2ed934b37cbbd236fdd1b01a5f5005"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf2ed934b37cbbd236fdd1b01a5f5005">doris::RuntimeProfile::_name</a></div><div class="ttdeci">std::string _name</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:404</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_aaf967ee2a1fc40fa95e5300880f5e4e1"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#aaf967ee2a1fc40fa95e5300880f5e4e1">doris::RuntimeProfile::InfoStrings</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; InfoStrings</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:439</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ab149261fcfbf19da42e309af104cf662"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ab149261fcfbf19da42e309af104cf662">doris::RuntimeProfile::sort_childer</a></div><div class="ttdeci">void sort_childer(const Compare &amp;cmp)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:253</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_abb7bcc3e9aa8fe6e49d5f39b2684e675"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#abb7bcc3e9aa8fe6e49d5f39b2684e675">doris::RuntimeProfile::clear_children</a></div><div class="ttdeci">void clear_children()</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:238</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ac148065576f306afce6faeb4abddd2da"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac148065576f306afce6faeb4abddd2da">doris::RuntimeProfile::_local_time_percent</a></div><div class="ttdeci">double _local_time_percent</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:456</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ac6598944fd817d29f09ca31ca3c018ad"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac6598944fd817d29f09ca31ca3c018ad">doris::RuntimeProfile::units_per_second</a></div><div class="ttdeci">static int64_t units_per_second(const Counter *total_counter, const Counter *timer)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:678</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ac801a99b6c464f44fa7d03b40ec2a4cd"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ac801a99b6c464f44fa7d03b40ec2a4cd">doris::RuntimeProfile::SampleFn</a></div><div class="ttdeci">std::function&lt; int64_t()&gt; SampleFn</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:359</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_acb56d71cd055384cde05bb457ce41703"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#acb56d71cd055384cde05bb457ce41703">doris::RuntimeProfile::get_counters</a></div><div class="ttdeci">void get_counters(const std::string &amp;name, std::vector&lt; Counter * &gt; *counters)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:449</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_acf315c495c75eaf2bbc01e82f4bc174c"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#acf315c495c75eaf2bbc01e82f4bc174c">doris::RuntimeProfile::PeriodicCounterType</a></div><div class="ttdeci">PeriodicCounterType</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:460</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_acf315c495c75eaf2bbc01e82f4bc174ca31e5109fd5333f0e1ff28e6a17c81ebc"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#acf315c495c75eaf2bbc01e82f4bc174ca31e5109fd5333f0e1ff28e6a17c81ebc">doris::RuntimeProfile::SAMPLING_COUNTER</a></div><div class="ttdeci">@ SAMPLING_COUNTER</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:462</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_acf315c495c75eaf2bbc01e82f4bc174ca4138f7dbee1d97c87cf7ea8b53731b95"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#acf315c495c75eaf2bbc01e82f4bc174ca4138f7dbee1d97c87cf7ea8b53731b95">doris::RuntimeProfile::RATE_COUNTER</a></div><div class="ttdeci">@ RATE_COUNTER</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:461</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ad4ac1073b9057d416974fad50ea09c5c"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad4ac1073b9057d416974fad50ea09c5c">doris::RuntimeProfile::_children_lock</a></div><div class="ttdeci">std::mutex _children_lock</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:437</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ad5260b9627048b854b45d05ed34adc22"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad5260b9627048b854b45d05ed34adc22">doris::RuntimeProfile::set_name</a></div><div class="ttdeci">void set_name(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:346</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ad64bbffc43cbfe4c51a41c3b73e8c646"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad64bbffc43cbfe4c51a41c3b73e8c646">doris::RuntimeProfile::get_info_string</a></div><div class="ttdeci">const std::string * get_info_string(const std::string &amp;key)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:346</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ad854968ee5bfb13c5b351071f82b6f2c"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ad854968ee5bfb13c5b351071f82b6f2c">doris::RuntimeProfile::ChildCounterMap</a></div><div class="ttdeci">std::map&lt; std::string, std::set&lt; std::string &gt; &gt; ChildCounterMap</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:420</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_adafc4ea11988fa6a231eda5402132536"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#adafc4ea11988fa6a231eda5402132536">doris::RuntimeProfile::merge</a></div><div class="ttdeci">void merge(RuntimeProfile *src)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:59</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_add25953e7bee8258fa121ea7000922b5"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#add25953e7bee8258fa121ea7000922b5">doris::RuntimeProfile::set_metadata</a></div><div class="ttdeci">void set_metadata(int64_t md)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:349</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ae053755bdb207dce360aad0fc48e6cb6"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae053755bdb207dce360aad0fc48e6cb6">doris::RuntimeProfile::_child_counter_map</a></div><div class="ttdeci">ChildCounterMap _child_counter_map</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:421</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ae0e94d4bfea8cecc33065545adfa2de5"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae0e94d4bfea8cecc33065545adfa2de5">doris::RuntimeProfile::append_exec_option</a></div><div class="ttdeci">void append_exec_option(const std::string &amp;option)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:300</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ae25b44a3020e1ba8ba279fd243c33809"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae25b44a3020e1ba8ba279fd243c33809">doris::RuntimeProfile::CounterMap</a></div><div class="ttdeci">std::map&lt; std::string, Counter * &gt; CounterMap</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:415</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_ae342532f13fab2e527b195cbb6e38642"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#ae342532f13fab2e527b195cbb6e38642">doris::RuntimeProfile::_pool</a></div><div class="ttdeci">std::unique_ptr&lt; ObjectPool &gt; _pool</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:398</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_aed25768f2265b2c1bd2d1af1a9d22358"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#aed25768f2265b2c1bd2d1af1a9d22358">doris::RuntimeProfile::compute_time_in_profile</a></div><div class="ttdeci">void compute_time_in_profile()</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:243</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_aee1096301d23b77eef344ba650518cfd"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#aee1096301d23b77eef344ba650518cfd">doris::RuntimeProfile::_counter_total_time</a></div><div class="ttdeci">Counter _counter_total_time</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:453</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_af13f715420b68accdd88f7920880c15e"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#af13f715420b68accdd88f7920880c15e">doris::RuntimeProfile::get_children</a></div><div class="ttdeci">void get_children(std::vector&lt; RuntimeProfile * &gt; *children)</div><div class="ttdef"><b>Definition:</b> runtime_profile.cpp:316</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_af276c52f0d5245ffca7a19fa812d34d0"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#af276c52f0d5245ffca7a19fa812d34d0">doris::RuntimeProfile::add_counter</a></div><div class="ttdeci">Counter * add_counter(const std::string &amp;name, TUnit::type type)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:278</div></div>
<div class="ttc" id="aclassdoris_1_1_runtime_profile_html_af693d45b4c4b1eac72933a6c4df7b144"><div class="ttname"><a href="../../d9/d96/classdoris_1_1_runtime_profile.html#af693d45b4c4b1eac72933a6c4df7b144">doris::RuntimeProfile::_event_sequences_lock</a></div><div class="ttdeci">std::mutex _event_sequences_lock</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:451</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_counter_html"><div class="ttname"><a href="../../db/d88/classdoris_1_1_scoped_counter.html">doris::ScopedCounter</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:514</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_counter_html_a42f88d384ab0555276b987ba2b623671"><div class="ttname"><a href="../../db/d88/classdoris_1_1_scoped_counter.html#a42f88d384ab0555276b987ba2b623671">doris::ScopedCounter::ScopedCounter</a></div><div class="ttdeci">ScopedCounter(const ScopedCounter &amp;counter)=delete</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_counter_html_a762107be3b340db0781dc7bcf8650d17"><div class="ttname"><a href="../../db/d88/classdoris_1_1_scoped_counter.html#a762107be3b340db0781dc7bcf8650d17">doris::ScopedCounter::~ScopedCounter</a></div><div class="ttdeci">~ScopedCounter()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:525</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_counter_html_a7f8029171165d1fc3e2a1bf009181fc2"><div class="ttname"><a href="../../db/d88/classdoris_1_1_scoped_counter.html#a7f8029171165d1fc3e2a1bf009181fc2">doris::ScopedCounter::ScopedCounter</a></div><div class="ttdeci">ScopedCounter(RuntimeProfile::Counter *counter, int64_t val)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:516</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_counter_html_aac3e87c50aefe39e2fb4ecc56dd22702"><div class="ttname"><a href="../../db/d88/classdoris_1_1_scoped_counter.html#aac3e87c50aefe39e2fb4ecc56dd22702">doris::ScopedCounter::operator=</a></div><div class="ttdeci">ScopedCounter &amp; operator=(const ScopedCounter &amp;counter)=delete</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_counter_html_af21bc0a1d592988ee93e51b0cc455552"><div class="ttname"><a href="../../db/d88/classdoris_1_1_scoped_counter.html#af21bc0a1d592988ee93e51b0cc455552">doris::ScopedCounter::_val</a></div><div class="ttdeci">int64_t _val</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:536</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_counter_html_aff0f54945f56ad4d09c20c4054438326"><div class="ttname"><a href="../../db/d88/classdoris_1_1_scoped_counter.html#aff0f54945f56ad4d09c20c4054438326">doris::ScopedCounter::_counter</a></div><div class="ttdeci">RuntimeProfile::Counter * _counter</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:537</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_raw_timer_html"><div class="ttname"><a href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html">doris::ScopedRawTimer</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:590</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_raw_timer_html_a0ab52ddbc7fe07a7c25c5d564ed0e0c1"><div class="ttname"><a href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#a0ab52ddbc7fe07a7c25c5d564ed0e0c1">doris::ScopedRawTimer::ScopedRawTimer</a></div><div class="ttdeci">ScopedRawTimer(const ScopedRawTimer &amp;timer)=delete</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_raw_timer_html_a7be55457c2ac0f25d55ed4dc481b559c"><div class="ttname"><a href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#a7be55457c2ac0f25d55ed4dc481b559c">doris::ScopedRawTimer::operator=</a></div><div class="ttdeci">ScopedRawTimer &amp; operator=(const ScopedRawTimer &amp;timer)=delete</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_raw_timer_html_a80217f83910db76b0350b51176bec57b"><div class="ttname"><a href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#a80217f83910db76b0350b51176bec57b">doris::ScopedRawTimer::~ScopedRawTimer</a></div><div class="ttdeci">~ScopedRawTimer()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:594</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_raw_timer_html_aa9af9f74fec619753c18daab202da3f4"><div class="ttname"><a href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#aa9af9f74fec619753c18daab202da3f4">doris::ScopedRawTimer::_counter</a></div><div class="ttdeci">C * _counter</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:602</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_raw_timer_html_ad1776069d8bbb5ca700c9a844240c663"><div class="ttname"><a href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#ad1776069d8bbb5ca700c9a844240c663">doris::ScopedRawTimer::ScopedRawTimer</a></div><div class="ttdeci">ScopedRawTimer(C *counter)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:592</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_raw_timer_html_ad7a42fab049c67ced722750a16a5e843"><div class="ttname"><a href="../../dd/de9/classdoris_1_1_scoped_raw_timer.html#ad7a42fab049c67ced722750a16a5e843">doris::ScopedRawTimer::_sw</a></div><div class="ttdeci">T _sw</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:601</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html">doris::ScopedTimer</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:544</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_a15b7147c9248adf6ab3b3f8d1f8e185f"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#a15b7147c9248adf6ab3b3f8d1f8e185f">doris::ScopedTimer::UpdateCounter</a></div><div class="ttdeci">void UpdateCounter()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:561</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_a1df19cc8ee93699e183cae13f3900fcc"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#a1df19cc8ee93699e183cae13f3900fcc">doris::ScopedTimer::_is_cancelled</a></div><div class="ttdeci">const Bool * _is_cancelled</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:583</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_a20d3ec082c3e0b8facfedd9d4daf90b9"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#a20d3ec082c3e0b8facfedd9d4daf90b9">doris::ScopedTimer::operator=</a></div><div class="ttdeci">ScopedTimer &amp; operator=(const ScopedTimer &amp;timer)=delete</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_a364f619f880707cca656c3bc8f65009d"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#a364f619f880707cca656c3bc8f65009d">doris::ScopedTimer::is_cancelled</a></div><div class="ttdeci">bool is_cancelled()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:559</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_a60de64d75454385b23995437f1d72669"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#a60de64d75454385b23995437f1d72669">doris::ScopedTimer::start</a></div><div class="ttdeci">void start()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:557</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_a8c528baf37154d347366083f0f816846"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#a8c528baf37154d347366083f0f816846">doris::ScopedTimer::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:555</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_ac0d9dbda276901ee8642dc51934b7712"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#ac0d9dbda276901ee8642dc51934b7712">doris::ScopedTimer::~ScopedTimer</a></div><div class="ttdeci">~ScopedTimer()</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:568</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_ad5289b6775355800a544b87dc1d5a2b3"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad5289b6775355800a544b87dc1d5a2b3">doris::ScopedTimer::ScopedTimer</a></div><div class="ttdeci">ScopedTimer(RuntimeProfile::Counter *counter, const Bool *is_cancelled=nullptr)</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:546</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_ad7a42fab049c67ced722750a16a5e843"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#ad7a42fab049c67ced722750a16a5e843">doris::ScopedTimer::_sw</a></div><div class="ttdeci">T _sw</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:581</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_adbc9280fafbbfb26e0d04a25ae4fa4aa"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#adbc9280fafbbfb26e0d04a25ae4fa4aa">doris::ScopedTimer::ScopedTimer</a></div><div class="ttdeci">ScopedTimer(const ScopedTimer &amp;timer)=delete</div></div>
<div class="ttc" id="aclassdoris_1_1_scoped_timer_html_aff0f54945f56ad4d09c20c4054438326"><div class="ttname"><a href="../../d4/d32/classdoris_1_1_scoped_timer.html#aff0f54945f56ad4d09c20c4054438326">doris::ScopedTimer::_counter</a></div><div class="ttdeci">RuntimeProfile::Counter * _counter</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:582</div></div>
<div class="ttc" id="acompiler__util_8h_html_a262afcfe437f4addb13fb1b47a6a7086"><div class="ttname"><a href="../../d4/d10/compiler__util_8h.html#a262afcfe437f4addb13fb1b47a6a7086">LIKELY</a></div><div class="ttdeci">#define LIKELY(expr)</div><div class="ttdef"><b>Definition:</b> compiler_util.h:35</div></div>
<div class="ttc" id="acompiler__util_8h_html_a9acc330d508b9a3b775cfdf7ce405e7d"><div class="ttname"><a href="../../d4/d10/compiler__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(expr)</div><div class="ttdef"><b>Definition:</b> compiler_util.h:36</div></div>
<div class="ttc" id="adecimal12_8h_html_a6ba7ca120d12676a0e996afe452d7b44"><div class="ttname"><a href="../../df/d6c/decimal12_8h.html#a6ba7ca120d12676a0e996afe452d7b44">cmp</a></div><div class="ttdeci">int32_t cmp(const decimal12_t &amp;other) const</div><div class="ttdef"><b>Definition:</b> decimal12.h:36</div></div>
<div class="ttc" id="aexp2f_8c_html_ac4cf4b2ab929bd23951a8676eeac086b"><div class="ttname"><a href="../../d4/d8d/exp2f_8c.html#ac4cf4b2ab929bd23951a8676eeac086b">C</a></div><div class="ttdeci">#define C</div><div class="ttdef"><b>Definition:</b> exp2f.c:25</div></div>
<div class="ttc" id="aexp_8c_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="../../d5/d6f/exp_8c.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>Definition:</b> exp.c:18</div></div>
<div class="ttc" id="anamespacedoris_html"><div class="ttname"><a href="../../d6/d94/namespacedoris.html">doris</a></div><div class="ttdoc">Utilities for collecting timings.</div><div class="ttdef"><b>Definition:</b> agent_server.cpp:37</div></div>
<div class="ttc" id="anamespacedoris_html_ab7a11c8b8a43361d7691f6c573635824"><div class="ttname"><a href="../../d6/d94/namespacedoris.html#ab7a11c8b8a43361d7691f6c573635824">doris::OpentelemetrySpan</a></div><div class="ttdeci">opentelemetry::nostd::shared_ptr&lt; opentelemetry::trace::Span &gt; OpentelemetrySpan</div><div class="ttdef"><b>Definition:</b> open_telemetry_scop_wrapper.hpp:27</div></div>
<div class="ttc" id="aposix__spawn_8c_html_a90a7b20363e18ef6ec5f22741c81e375"><div class="ttname"><a href="../../d1/d0c/posix__spawn_8c.html#a90a7b20363e18ef6ec5f22741c81e375">child</a></div><div class="ttdeci">static int child(void *args_vp)</div><div class="ttdef"><b>Definition:</b> posix_spawn.c:30</div></div>
<div class="ttc" id="apretty__printer_8h_html"><div class="ttname"><a href="../../d4/dca/pretty__printer_8h.html">pretty_printer.h</a></div></div>
<div class="ttc" id="arowset__tree_8cpp_html_ae40354a1051342eb5a9db005715dcfa9"><div class="ttname"><a href="../../d4/ddd/rowset__tree_8cpp.html#ae40354a1051342eb5a9db005715dcfa9">idx</a></div><div class="ttdeci">int idx</div><div class="ttdef"><b>Definition:</b> rowset_tree.cpp:67</div></div>
<div class="ttc" id="astopwatch_8hpp_html"><div class="ttname"><a href="../../dd/d41/stopwatch_8hpp.html">stopwatch.hpp</a></div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_bucket_counters_info_html"><div class="ttname"><a href="../../d5/d02/structdoris_1_1_runtime_profile_1_1_bucket_counters_info.html">doris::RuntimeProfile::BucketCountersInfo</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:478</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_bucket_counters_info_html_aaff48ba97b1b4a77dde52e2a958b70ff"><div class="ttname"><a href="../../d5/d02/structdoris_1_1_runtime_profile_1_1_bucket_counters_info.html#aaff48ba97b1b4a77dde52e2a958b70ff">doris::RuntimeProfile::BucketCountersInfo::num_sampled</a></div><div class="ttdeci">int64_t num_sampled</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:480</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_bucket_counters_info_html_afe6ebd1985fd614840590a34a3f7edcf"><div class="ttname"><a href="../../d5/d02/structdoris_1_1_runtime_profile_1_1_bucket_counters_info.html#afe6ebd1985fd614840590a34a3f7edcf">doris::RuntimeProfile::BucketCountersInfo::src_counter</a></div><div class="ttdeci">Counter * src_counter</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:479</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_rate_counter_info_html"><div class="ttname"><a href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html">doris::RuntimeProfile::RateCounterInfo</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:465</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_rate_counter_info_html_ac4864b2271e2a1866a54939d80955a6f"><div class="ttname"><a href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html#ac4864b2271e2a1866a54939d80955a6f">doris::RuntimeProfile::RateCounterInfo::elapsed_ms</a></div><div class="ttdeci">int64_t elapsed_ms</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:468</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_rate_counter_info_html_ac5b2f8c8f6badf0b483a6789486d2986"><div class="ttname"><a href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html#ac5b2f8c8f6badf0b483a6789486d2986">doris::RuntimeProfile::RateCounterInfo::sample_fn</a></div><div class="ttdeci">SampleFn sample_fn</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:467</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_rate_counter_info_html_afe6ebd1985fd614840590a34a3f7edcf"><div class="ttname"><a href="../../d1/d99/structdoris_1_1_runtime_profile_1_1_rate_counter_info.html#afe6ebd1985fd614840590a34a3f7edcf">doris::RuntimeProfile::RateCounterInfo::src_counter</a></div><div class="ttdeci">Counter * src_counter</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:466</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_sampling_counter_info_html"><div class="ttname"><a href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html">doris::RuntimeProfile::SamplingCounterInfo</a></div><div class="ttdef"><b>Definition:</b> runtime_profile.h:471</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_sampling_counter_info_html_a3eeb8370bb431e1fbaf6bc326926eb51"><div class="ttname"><a href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#a3eeb8370bb431e1fbaf6bc326926eb51">doris::RuntimeProfile::SamplingCounterInfo::total_sampled_value</a></div><div class="ttdeci">int64_t total_sampled_value</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:474</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_sampling_counter_info_html_aaff48ba97b1b4a77dde52e2a958b70ff"><div class="ttname"><a href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#aaff48ba97b1b4a77dde52e2a958b70ff">doris::RuntimeProfile::SamplingCounterInfo::num_sampled</a></div><div class="ttdeci">int64_t num_sampled</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:475</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_sampling_counter_info_html_ac5b2f8c8f6badf0b483a6789486d2986"><div class="ttname"><a href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#ac5b2f8c8f6badf0b483a6789486d2986">doris::RuntimeProfile::SamplingCounterInfo::sample_fn</a></div><div class="ttdeci">SampleFn sample_fn</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:473</div></div>
<div class="ttc" id="astructdoris_1_1_runtime_profile_1_1_sampling_counter_info_html_afe6ebd1985fd614840590a34a3f7edcf"><div class="ttname"><a href="../../d1/d05/structdoris_1_1_runtime_profile_1_1_sampling_counter_info.html#afe6ebd1985fd614840590a34a3f7edcf">doris::RuntimeProfile::SamplingCounterInfo::src_counter</a></div><div class="ttdeci">Counter * src_counter</div><div class="ttdef"><b>Definition:</b> runtime_profile.h:472</div></div>
<div class="ttc" id="atelemetry_8h_html"><div class="ttname"><a href="../../de/dc7/telemetry_8h.html">telemetry.h</a></div></div>
<div class="ttc" id="autil_2types_8h_html_adae7202c63102b0934c3ac5be41b0dae"><div class="ttname"><a href="../../df/dd9/util_2types_8h.html#adae7202c63102b0934c3ac5be41b0dae">value</a></div><div class="ttdeci">__int128 value</div><div class="ttdef"><b>Definition:</b> types.h:10</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
