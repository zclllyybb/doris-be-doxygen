<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ppl_util: MemPool类 参考</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ppl_util
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d6/d94/namespacedoris.html">doris</a></li><li class="navelem"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html">MemPool</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">类</a> &#124;
<a href="#pub-methods">Public 成员函数</a> &#124;
<a href="#pub-static-attribs">静态 Public 属性</a> &#124;
<a href="#pri-methods">Private 成员函数</a> &#124;
<a href="#pri-attribs">Private 属性</a> &#124;
<a href="#pri-static-attribs">静态 Private 属性</a> &#124;
<a href="#friends">友元</a> &#124;
<a href="../../df/df6/classdoris_1_1_mem_pool-members.html">所有成员列表</a>  </div>
  <div class="headertitle"><div class="title">MemPool类 参考</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../db/d7d/mem__pool_8h_source.html">mem_pool.h</a>&gt;</code></p>
<div class="dynheader">
MemPool 的协作图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/d22/classdoris_1_1_mem_pool__coll__graph.svg" width="147" height="227"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a href="../../graph_legend.html">图例</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
类</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d26/structdoris_1_1_mem_pool_1_1_chunk_info.html">ChunkInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public 成员函数</h2></td></tr>
<tr class="memitem:a8b3cced6f5cb7c5084768b29bb461a00"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a8b3cced6f5cb7c5084768b29bb461a00">MemPool</a> (<a class="el" href="../../d4/d22/classdoris_1_1_mem_tracker.html">MemTracker</a> *<a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a3784f1d2cedbd86999122cf6b1419e81">mem_tracker</a>)</td></tr>
<tr class="separator:a8b3cced6f5cb7c5084768b29bb461a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42145941c12bbb94e798490e14f940f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a42145941c12bbb94e798490e14f940f4">MemPool</a> ()</td></tr>
<tr class="separator:a42145941c12bbb94e798490e14f940f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d9436e563027071fb7f5471f26af32c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a5d9436e563027071fb7f5471f26af32c">~MemPool</a> ()</td></tr>
<tr class="separator:a5d9436e563027071fb7f5471f26af32c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bbe6a57173c878bdb87ee90c87022a9"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a6bbe6a57173c878bdb87ee90c87022a9">allocate</a> (int64_t size, bool free_old_chunks=false)</td></tr>
<tr class="separator:a6bbe6a57173c878bdb87ee90c87022a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c8a9fd44a082f7172774fa2592c89b"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#ae6c8a9fd44a082f7172774fa2592c89b">allocate_aligned</a> (int64_t size, int alignment)</td></tr>
<tr class="separator:ae6c8a9fd44a082f7172774fa2592c89b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09fa199573f5b5e14ccbf12b75d7dc1c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d8d/classdoris_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a09fa199573f5b5e14ccbf12b75d7dc1c">allocate_safely</a> (int64_t size, uint8_t *&amp;<a class="el" href="../../d7/dcc/doris__main_8cpp.html#ab07b31d4e8924e322ffed3f51d39e425">ret</a>)</td></tr>
<tr class="memdesc:a09fa199573f5b5e14ccbf12b75d7dc1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as Allocate() expect add a check when return a nullptr  <br /></td></tr>
<tr class="separator:a09fa199573f5b5e14ccbf12b75d7dc1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77c864da08b18a7f329ea3a4f03d3a49"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a77c864da08b18a7f329ea3a4f03d3a49">try_allocate</a> (int64_t size)</td></tr>
<tr class="separator:a77c864da08b18a7f329ea3a4f03d3a49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593527fbb6f92934decc5c9971e6a6ed"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a593527fbb6f92934decc5c9971e6a6ed">try_allocate_aligned</a> (int64_t size, int alignment)</td></tr>
<tr class="separator:a593527fbb6f92934decc5c9971e6a6ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d26bcac68a4840a8aed98fe68998980"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a6d26bcac68a4840a8aed98fe68998980">try_allocate_unaligned</a> (int64_t size)</td></tr>
<tr class="memdesc:a6d26bcac68a4840a8aed98fe68998980"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as TryAllocate() except returned memory is not aligned at all.  <br /></td></tr>
<tr class="separator:a6d26bcac68a4840a8aed98fe68998980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8bb3912a3ce86b15842e79d0b421204"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#ac8bb3912a3ce86b15842e79d0b421204">clear</a> ()</td></tr>
<tr class="memdesc:ac8bb3912a3ce86b15842e79d0b421204"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes all allocated chunks available for re-use, but doesn't delete any chunks.  <br /></td></tr>
<tr class="separator:ac8bb3912a3ce86b15842e79d0b421204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4de2f83436cd4ed6744ced00335545a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#af4de2f83436cd4ed6744ced00335545a">free_all</a> ()</td></tr>
<tr class="separator:af4de2f83436cd4ed6744ced00335545a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8390fe0aaec400317015c6c6f4c885b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a8390fe0aaec400317015c6c6f4c885b2">acquire_data</a> (<a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html">MemPool</a> *src, bool keep_current)</td></tr>
<tr class="separator:a8390fe0aaec400317015c6c6f4c885b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dcb28d0641b6d37aef23c662ec11908"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a4dcb28d0641b6d37aef23c662ec11908">debug_string</a> ()</td></tr>
<tr class="separator:a4dcb28d0641b6d37aef23c662ec11908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c82d6ddaca81b4a1fbea56357a56a0"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#ac2c82d6ddaca81b4a1fbea56357a56a0">total_allocated_bytes</a> () const</td></tr>
<tr class="separator:ac2c82d6ddaca81b4a1fbea56357a56a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa18c7f597cda80b68976807afee3ccae"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#aa18c7f597cda80b68976807afee3ccae">total_reserved_bytes</a> () const</td></tr>
<tr class="separator:aa18c7f597cda80b68976807afee3ccae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3784f1d2cedbd86999122cf6b1419e81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d22/classdoris_1_1_mem_tracker.html">MemTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a3784f1d2cedbd86999122cf6b1419e81">mem_tracker</a> ()</td></tr>
<tr class="separator:a3784f1d2cedbd86999122cf6b1419e81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
静态 Public 属性</h2></td></tr>
<tr class="memitem:a55e30d64539971321c58aa1a26d8b671"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a55e30d64539971321c58aa1a26d8b671">DEFAULT_ALIGNMENT</a> = 16</td></tr>
<tr class="separator:a55e30d64539971321c58aa1a26d8b671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ec6fd4aacd7be3f89a40feab9b4539"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a23ec6fd4aacd7be3f89a40feab9b4539">DEFAULT_PADDING_SIZE</a> = 0x0</td></tr>
<tr class="separator:a23ec6fd4aacd7be3f89a40feab9b4539"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private 成员函数</h2></td></tr>
<tr class="memitem:a496b30429df7da46fc8fdc8cd6ffa680"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d8d/classdoris_1_1_status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a496b30429df7da46fc8fdc8cd6ffa680">find_chunk</a> (size_t min_size, bool check_limits, bool free_old_chunks)</td></tr>
<tr class="separator:a496b30429df7da46fc8fdc8cd6ffa680"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b20ce905b38d4fdd3d623e2d1fad9b2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a6b20ce905b38d4fdd3d623e2d1fad9b2">check_integrity</a> (bool check_current_chunk_empty)</td></tr>
<tr class="separator:a6b20ce905b38d4fdd3d623e2d1fad9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c2ed43ca91dcc971913c2a307df6d77"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a3c2ed43ca91dcc971913c2a307df6d77">get_free_offset</a> () const</td></tr>
<tr class="memdesc:a3c2ed43ca91dcc971913c2a307df6d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return offset to unoccupied space in current chunk.  <br /></td></tr>
<tr class="separator:a3c2ed43ca91dcc971913c2a307df6d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55575a1816c844dbbaf0dba2cd0af4c0"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a55575a1816c844dbbaf0dba2cd0af4c0">allocate_from_current_chunk</a> (int64_t size, int alignment)</td></tr>
<tr class="separator:a55575a1816c844dbbaf0dba2cd0af4c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb9972328c7f8747a778c0969829d1a"><td class="memTemplParams" colspan="2">template&lt;bool CHECK_LIMIT_FIRST&gt; </td></tr>
<tr class="memitem:abcb9972328c7f8747a778c0969829d1a"><td class="memTemplItemLeft" align="right" valign="top">uint8_t *<a class="el" href="../../d4/d10/compiler__util_8h.html#aa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#abcb9972328c7f8747a778c0969829d1a">allocate</a> (int64_t size, int alignment, bool free_old_chunks=false)</td></tr>
<tr class="separator:abcb9972328c7f8747a778c0969829d1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a742414fe4ed173877a599b5b44c509c5"><td class="memTemplParams" colspan="2">template&lt;bool CHECK_LIMIT_FIRST&gt; </td></tr>
<tr class="memitem:a742414fe4ed173877a599b5b44c509c5"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="el" href="../../d4/d10/compiler__util_8h.html#aa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a742414fe4ed173877a599b5b44c509c5">allocate_safely</a> (int64_t size, int alignment, uint8_t *&amp;<a class="el" href="../../d7/dcc/doris__main_8cpp.html#ab07b31d4e8924e322ffed3f51d39e425">ret</a>)</td></tr>
<tr class="separator:a742414fe4ed173877a599b5b44c509c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private 属性</h2></td></tr>
<tr class="memitem:aed7d68711317ab1df2c91ff520320321"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#aed7d68711317ab1df2c91ff520320321">current_chunk_idx_</a></td></tr>
<tr class="separator:aed7d68711317ab1df2c91ff520320321"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a960c7e4aa89884aae5bc4ba96cc74167"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a960c7e4aa89884aae5bc4ba96cc74167">next_chunk_size_</a></td></tr>
<tr class="memdesc:a960c7e4aa89884aae5bc4ba96cc74167"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the next chunk to allocate.  <br /></td></tr>
<tr class="separator:a960c7e4aa89884aae5bc4ba96cc74167"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5999667e31d6e6cd3dfbae837e52d2f1"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a5999667e31d6e6cd3dfbae837e52d2f1">total_allocated_bytes_</a></td></tr>
<tr class="memdesc:a5999667e31d6e6cd3dfbae837e52d2f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">sum of allocated_bytes_  <br /></td></tr>
<tr class="separator:a5999667e31d6e6cd3dfbae837e52d2f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8207c0d5e43fdd326d0064ea5f5a76d7"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a8207c0d5e43fdd326d0064ea5f5a76d7">total_reserved_bytes_</a></td></tr>
<tr class="memdesc:a8207c0d5e43fdd326d0064ea5f5a76d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">sum of all bytes allocated in chunks_  <br /></td></tr>
<tr class="separator:a8207c0d5e43fdd326d0064ea5f5a76d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a481f648c78e8f8ac2912c950c0f34e6c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../de/d26/structdoris_1_1_mem_pool_1_1_chunk_info.html">ChunkInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a481f648c78e8f8ac2912c950c0f34e6c">chunks_</a></td></tr>
<tr class="separator:a481f648c78e8f8ac2912c950c0f34e6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb56efb11f09c22f1a97a0238206da30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d22/classdoris_1_1_mem_tracker.html">MemTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#aeb56efb11f09c22f1a97a0238206da30">_mem_tracker</a></td></tr>
<tr class="separator:aeb56efb11f09c22f1a97a0238206da30"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
静态 Private 属性</h2></td></tr>
<tr class="memitem:a0b66ea488b861cbafd4a896fbd931422"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a0b66ea488b861cbafd4a896fbd931422">INITIAL_CHUNK_SIZE</a> = 4 * 1024</td></tr>
<tr class="separator:a0b66ea488b861cbafd4a896fbd931422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae966c6584335ae929dbd77531ebcf301"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#ae966c6584335ae929dbd77531ebcf301">MAX_CHUNK_SIZE</a> = 512 * 1024</td></tr>
<tr class="separator:ae966c6584335ae929dbd77531ebcf301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6dd0f9c2f7f6a29a032ab185d4e700f"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#ab6dd0f9c2f7f6a29a032ab185d4e700f">k_zero_length_region_</a> = <a class="el" href="../../de/ded/mem__pool_8cpp.html#a0cc6ca3f6c7ecc98eac526d585f2ebba">MEM_POOL_POISON</a></td></tr>
<tr class="separator:ab6dd0f9c2f7f6a29a032ab185d4e700f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
友元</h2></td></tr>
<tr class="memitem:a322861f486366e94b973dd022ab523a8"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a322861f486366e94b973dd022ab523a8">MemPoolTest</a></td></tr>
<tr class="separator:a322861f486366e94b973dd022ab523a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p>A <a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html">MemPool</a> maintains a list of memory chunks from which it allocates memory in response to Allocate() calls; Chunks stay around for the lifetime of the mempool or until they are passed on to another mempool. The caller registers a <a class="el" href="../../d4/d22/classdoris_1_1_mem_tracker.html">MemTracker</a> with the pool; chunk allocations are counted against that tracker and all of its ancestors. If chunks get moved between pools during <a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a8390fe0aaec400317015c6c6f4c885b2">acquire_data()</a> calls, the respective MemTrackers are updated accordingly. Chunks freed up in the d'tor are subtracted from the registered trackers. An Allocate() call will attempt to allocate memory from the chunk that was most recently added; if that chunk doesn't have enough memory to satisfy the allocation request, the free chunks are searched for one that is big enough otherwise a new chunk is added to the list. In order to keep allocation overhead low, chunk sizes double with each new one added, until they hit a maximum size.</p>
<p>Allocated chunks can be reused for new allocations if Clear() is called to free all allocations or ReturnPartialAllocation() is called to return part of the last allocation.</p>
<p>All chunks before 'current_chunk_idx_' have allocated memory, while all chunks after 'current_chunk_idx_' are free. The chunk at 'current_chunk_idx_' may or may not have allocated memory. </p><pre class="fragment">Example:
MemPool* p = new MemPool();
for (int i = 0; i &lt; 1024; ++i) {
</pre><p> returns 8-byte aligned memory (effectively 24 bytes): .. = p-&gt;Allocate(17); } at this point, 17K have been handed out in response to Allocate() calls and 28K of chunks have been allocated (chunk sizes: 4K, 8K, 16K) We track total and peak allocated bytes. At this point they would be the same: 28k bytes. A call to Clear will return the allocated memory so total_allocated_bytes_ becomes 0. p-&gt;Clear(); the entire 1st chunk is returned: .. = p-&gt;Allocate(4 * 1024); 4K of the 2nd chunk are returned: .. = p-&gt;Allocate(4 * 1024); a new 20K chunk is created .. = p-&gt;Allocate(20 * 1024); MemPool* p2 = new <a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a42145941c12bbb94e798490e14f940f4">MemPool()</a>; the new mempool receives all chunks containing data from p p2-&gt;acquire_data(p, false); At this point p.total_allocated_bytes_ would be 0. The one remaining (empty) chunk is released: delete p; </p>
</div><h2 class="groupheader">构造及析构函数说明</h2>
<a id="a8b3cced6f5cb7c5084768b29bb461a00" name="a8b3cced6f5cb7c5084768b29bb461a00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b3cced6f5cb7c5084768b29bb461a00">&#9670;&#160;</a></span>MemPool() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html">MemPool</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d22/classdoris_1_1_mem_tracker.html">MemTracker</a> *&#160;</td>
          <td class="paramname"><em>mem_tracker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a42145941c12bbb94e798490e14f940f4" name="a42145941c12bbb94e798490e14f940f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42145941c12bbb94e798490e14f940f4">&#9670;&#160;</a></span>MemPool() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html">MemPool</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5d9436e563027071fb7f5471f26af32c" name="a5d9436e563027071fb7f5471f26af32c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d9436e563027071fb7f5471f26af32c">&#9670;&#160;</a></span>~MemPool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html">MemPool</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees all chunks of memory and subtracts the total allocated bytes from the registered limits. </p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a5d9436e563027071fb7f5471f26af32c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">成员函数说明</h2>
<a id="a6bbe6a57173c878bdb87ee90c87022a9" name="a6bbe6a57173c878bdb87ee90c87022a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bbe6a57173c878bdb87ee90c87022a9">&#9670;&#160;</a></span>allocate() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * allocate </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>free_old_chunks</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allocates a section of memory of 'size' bytes with DEFAULT_ALIGNMENT at the end of the current chunk. Creates a new chunk if there aren't any chunks with enough capacity. </p>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a6bbe6a57173c878bdb87ee90c87022a9_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ae6c8a9fd44a082f7172774fa2592c89b" name="ae6c8a9fd44a082f7172774fa2592c89b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6c8a9fd44a082f7172774fa2592c89b">&#9670;&#160;</a></span>allocate_aligned()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * allocate_aligned </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_ae6c8a9fd44a082f7172774fa2592c89b_cgraph.svg" width="344" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_ae6c8a9fd44a082f7172774fa2592c89b_icgraph.svg" width="559" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a09fa199573f5b5e14ccbf12b75d7dc1c" name="a09fa199573f5b5e14ccbf12b75d7dc1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09fa199573f5b5e14ccbf12b75d7dc1c">&#9670;&#160;</a></span>allocate_safely() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> allocate_safely </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&amp;&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Same as Allocate() expect add a check when return a nullptr </p>

</div>
</div>
<a id="a77c864da08b18a7f329ea3a4f03d3a49" name="a77c864da08b18a7f329ea3a4f03d3a49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77c864da08b18a7f329ea3a4f03d3a49">&#9670;&#160;</a></span>try_allocate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * try_allocate </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Same as Allocate() except the mem limit is checked before the allocation and this call will fail (returns nullptr) if it does. The caller must handle the nullptr case. This should be used for allocations where the size can be very big to bound the amount by which we exceed mem limits. </p>

</div>
</div>
<a id="a593527fbb6f92934decc5c9971e6a6ed" name="a593527fbb6f92934decc5c9971e6a6ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a593527fbb6f92934decc5c9971e6a6ed">&#9670;&#160;</a></span>try_allocate_aligned()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * try_allocate_aligned </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Same as TryAllocate() except a non-default alignment can be specified. It should be a power-of-two in [1, alignof(std::max_align_t)]. </p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a593527fbb6f92934decc5c9971e6a6ed_cgraph.svg" width="367" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a6d26bcac68a4840a8aed98fe68998980" name="a6d26bcac68a4840a8aed98fe68998980"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d26bcac68a4840a8aed98fe68998980">&#9670;&#160;</a></span>try_allocate_unaligned()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * try_allocate_unaligned </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Same as TryAllocate() except returned memory is not aligned at all. </p>

</div>
</div>
<a id="ac8bb3912a3ce86b15842e79d0b421204" name="ac8bb3912a3ce86b15842e79d0b421204"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8bb3912a3ce86b15842e79d0b421204">&#9670;&#160;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes all allocated chunks available for re-use, but doesn't delete any chunks. </p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_ac8bb3912a3ce86b15842e79d0b421204_cgraph.svg" width="220" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_ac8bb3912a3ce86b15842e79d0b421204_icgraph.svg" width="292" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af4de2f83436cd4ed6744ced00335545a" name="af4de2f83436cd4ed6744ced00335545a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4de2f83436cd4ed6744ced00335545a">&#9670;&#160;</a></span>free_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes all allocated chunks. <a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#af4de2f83436cd4ed6744ced00335545a">free_all()</a> or <a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html#a8390fe0aaec400317015c6c6f4c885b2">acquire_data()</a> must be called for each mem pool </p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_af4de2f83436cd4ed6744ced00335545a_cgraph.svg" width="663" height="419"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_af4de2f83436cd4ed6744ced00335545a_icgraph.svg" width="334" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8390fe0aaec400317015c6c6f4c885b2" name="a8390fe0aaec400317015c6c6f4c885b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8390fe0aaec400317015c6c6f4c885b2">&#9670;&#160;</a></span>acquire_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void acquire_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d6b/classdoris_1_1_mem_pool.html">MemPool</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>keep_current</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Absorb all chunks that hold data from src. If keep_current is true, let src hold on to its last allocated chunk that contains data. All offsets handed out by calls to GetCurrentOffset() for 'src' become invalid. </p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a8390fe0aaec400317015c6c6f4c885b2_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a4dcb28d0641b6d37aef23c662ec11908" name="a4dcb28d0641b6d37aef23c662ec11908"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dcb28d0641b6d37aef23c662ec11908">&#9670;&#160;</a></span>debug_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string debug_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac2c82d6ddaca81b4a1fbea56357a56a0" name="ac2c82d6ddaca81b4a1fbea56357a56a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2c82d6ddaca81b4a1fbea56357a56a0">&#9670;&#160;</a></span>total_allocated_bytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t total_allocated_bytes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_ac2c82d6ddaca81b4a1fbea56357a56a0_icgraph.svg" width="400" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="aa18c7f597cda80b68976807afee3ccae" name="aa18c7f597cda80b68976807afee3ccae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa18c7f597cda80b68976807afee3ccae">&#9670;&#160;</a></span>total_reserved_bytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t total_reserved_bytes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3784f1d2cedbd86999122cf6b1419e81" name="a3784f1d2cedbd86999122cf6b1419e81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3784f1d2cedbd86999122cf6b1419e81">&#9670;&#160;</a></span>mem_tracker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d22/classdoris_1_1_mem_tracker.html">MemTracker</a> * mem_tracker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a496b30429df7da46fc8fdc8cd6ffa680" name="a496b30429df7da46fc8fdc8cd6ffa680"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a496b30429df7da46fc8fdc8cd6ffa680">&#9670;&#160;</a></span>find_chunk()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> find_chunk </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>min_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>check_limits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>free_old_chunks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Find or allocated a chunk with at least min_size spare capacity and update current_chunk_idx_. Also updates chunks_, chunk_sizes_ and allocated_bytes_ if a new chunk needs to be created. If check_limits is true, this call can fail (returns false) if adding a new chunk exceeds the mem limits. </p>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a496b30429df7da46fc8fdc8cd6ffa680_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a496b30429df7da46fc8fdc8cd6ffa680_icgraph.svg" width="211" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a6b20ce905b38d4fdd3d623e2d1fad9b2" name="a6b20ce905b38d4fdd3d623e2d1fad9b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b20ce905b38d4fdd3d623e2d1fad9b2">&#9670;&#160;</a></span>check_integrity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool check_integrity </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>check_current_chunk_empty</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check integrity of the supporting data structures; always returns true but DCHECKs all invariants. If 'check_current_chunk_empty' is true, checks that the current chunk contains no data. Otherwise the current chunk can be either empty or full. </p>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a6b20ce905b38d4fdd3d623e2d1fad9b2_icgraph.svg" width="496" height="140"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a3c2ed43ca91dcc971913c2a307df6d77" name="a3c2ed43ca91dcc971913c2a307df6d77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c2ed43ca91dcc971913c2a307df6d77">&#9670;&#160;</a></span>get_free_offset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t get_free_offset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return offset to unoccupied space in current chunk. </p>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a3c2ed43ca91dcc971913c2a307df6d77_icgraph.svg" width="264" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a55575a1816c844dbbaf0dba2cd0af4c0" name="a55575a1816c844dbbaf0dba2cd0af4c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55575a1816c844dbbaf0dba2cd0af4c0">&#9670;&#160;</a></span>allocate_from_current_chunk()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * allocate_from_current_chunk </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alignment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a55575a1816c844dbbaf0dba2cd0af4c0_cgraph.svg" width="376" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a55575a1816c844dbbaf0dba2cd0af4c0_icgraph.svg" width="272" height="51"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="abcb9972328c7f8747a778c0969829d1a" name="abcb9972328c7f8747a778c0969829d1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcb9972328c7f8747a778c0969829d1a">&#9670;&#160;</a></span>allocate() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">template uint8_t * allocate&lt; true &gt; </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>free_old_chunks</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_abcb9972328c7f8747a778c0969829d1a_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a742414fe4ed173877a599b5b44c509c5" name="a742414fe4ed173877a599b5b44c509c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a742414fe4ed173877a599b5b44c509c5">&#9670;&#160;</a></span>allocate_safely() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d8d/classdoris_1_1_status.html">Status</a> <a class="el" href="../../d4/d10/compiler__util_8h.html#aa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a> allocate_safely </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&amp;&#160;</td>
          <td class="paramname"><em>ret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d7/d6b/classdoris_1_1_mem_pool_a742414fe4ed173877a599b5b44c509c5_cgraph.svg" width="482" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<h2 class="groupheader">友元及相关函数文档</h2>
<a id="a322861f486366e94b973dd022ab523a8" name="a322861f486366e94b973dd022ab523a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a322861f486366e94b973dd022ab523a8">&#9670;&#160;</a></span>MemPoolTest</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class MemPoolTest</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">类成员变量说明</h2>
<a id="a55e30d64539971321c58aa1a26d8b671" name="a55e30d64539971321c58aa1a26d8b671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55e30d64539971321c58aa1a26d8b671">&#9670;&#160;</a></span>DEFAULT_ALIGNMENT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int DEFAULT_ALIGNMENT = 16</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a23ec6fd4aacd7be3f89a40feab9b4539" name="a23ec6fd4aacd7be3f89a40feab9b4539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23ec6fd4aacd7be3f89a40feab9b4539">&#9670;&#160;</a></span>DEFAULT_PADDING_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int DEFAULT_PADDING_SIZE = 0x0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0b66ea488b861cbafd4a896fbd931422" name="a0b66ea488b861cbafd4a896fbd931422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b66ea488b861cbafd4a896fbd931422">&#9670;&#160;</a></span>INITIAL_CHUNK_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int INITIAL_CHUNK_SIZE = 4 * 1024</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae966c6584335ae929dbd77531ebcf301" name="ae966c6584335ae929dbd77531ebcf301"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae966c6584335ae929dbd77531ebcf301">&#9670;&#160;</a></span>MAX_CHUNK_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int MAX_CHUNK_SIZE = 512 * 1024</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The maximum size of chunk that should be allocated. Allocations larger than this size will get their own individual chunk. </p>

</div>
</div>
<a id="ab6dd0f9c2f7f6a29a032ab185d4e700f" name="ab6dd0f9c2f7f6a29a032ab185d4e700f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6dd0f9c2f7f6a29a032ab185d4e700f">&#9670;&#160;</a></span>k_zero_length_region_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t k_zero_length_region_ = <a class="el" href="../../de/ded/mem__pool_8cpp.html#a0cc6ca3f6c7ecc98eac526d585f2ebba">MEM_POOL_POISON</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A static field used as non-nullptr pointer for zero length allocations. nullptr is reserved for allocation failures. It must be as aligned as max_align_t for TryAllocateAligned(). </p>

</div>
</div>
<a id="aed7d68711317ab1df2c91ff520320321" name="aed7d68711317ab1df2c91ff520320321"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed7d68711317ab1df2c91ff520320321">&#9670;&#160;</a></span>current_chunk_idx_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int current_chunk_idx_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>chunk from which we served the last Allocate() call; always points to the last chunk that contains allocated data; chunks 0..current_chunk_idx_ - 1 are guaranteed to contain data (chunks_[i].allocated_bytes &gt; 0 for i: 0..current_chunk_idx_ - 1); chunks after 'current_chunk_idx_' are "free chunks" that contain no data. -1 if no chunks present </p>

</div>
</div>
<a id="a960c7e4aa89884aae5bc4ba96cc74167" name="a960c7e4aa89884aae5bc4ba96cc74167"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a960c7e4aa89884aae5bc4ba96cc74167">&#9670;&#160;</a></span>next_chunk_size_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int next_chunk_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The size of the next chunk to allocate. </p>

</div>
</div>
<a id="a5999667e31d6e6cd3dfbae837e52d2f1" name="a5999667e31d6e6cd3dfbae837e52d2f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5999667e31d6e6cd3dfbae837e52d2f1">&#9670;&#160;</a></span>total_allocated_bytes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t total_allocated_bytes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>sum of allocated_bytes_ </p>

</div>
</div>
<a id="a8207c0d5e43fdd326d0064ea5f5a76d7" name="a8207c0d5e43fdd326d0064ea5f5a76d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8207c0d5e43fdd326d0064ea5f5a76d7">&#9670;&#160;</a></span>total_reserved_bytes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t total_reserved_bytes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>sum of all bytes allocated in chunks_ </p>

</div>
</div>
<a id="a481f648c78e8f8ac2912c950c0f34e6c" name="a481f648c78e8f8ac2912c950c0f34e6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a481f648c78e8f8ac2912c950c0f34e6c">&#9670;&#160;</a></span>chunks_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../de/d26/structdoris_1_1_mem_pool_1_1_chunk_info.html">ChunkInfo</a>&gt; chunks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aeb56efb11f09c22f1a97a0238206da30" name="aeb56efb11f09c22f1a97a0238206da30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb56efb11f09c22f1a97a0238206da30">&#9670;&#160;</a></span>_mem_tracker</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d22/classdoris_1_1_mem_tracker.html">MemTracker</a>* _mem_tracker</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The current and peak memory footprint of this pool. This is different from total allocated_bytes_ since it includes bytes in chunks that are not used. </p>

</div>
</div>
<hr/>该类的文档由以下文件生成:<ul>
<li>/Users/dabowang/be_all/runtime/<a class="el" href="../../db/d7d/mem__pool_8h_source.html">mem_pool.h</a></li>
<li>/Users/dabowang/be_all/runtime/<a class="el" href="../../de/ded/mem__pool_8cpp.html">mem_pool.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
