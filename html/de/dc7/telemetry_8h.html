<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ppl_util: /Users/dabowang/be_all/util/telemetry/telemetry.h 文件参考</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ppl_util
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_8eac97cde2fee0634bdd38dda0a21780.html">be_all</a></li><li class="navelem"><a class="el" href="../../dir_b392aeb96acef6187cc1409e017c77c3.html">util</a></li><li class="navelem"><a class="el" href="../../dir_2326e672089719117ae43216eb1ec753.html">telemetry</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">命名空间</a> &#124;
<a href="#define-members">宏定义</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle"><div class="title">telemetry.h 文件参考</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;opentelemetry/trace/provider.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d1c/open__telemetry__scop__wrapper_8hpp_source.html">util/telemetry/open_telemetry_scop_wrapper.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
telemetry.h 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../da/db8/telemetry_8h__incl.svg" width="334" height="242"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</div><div class="textblock"><div class="dynheader">
此图展示该文件直接或间接的被哪些文件引用了:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8d/telemetry_8h__dep__incl.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</div>
<p><a href="../../de/dc7/telemetry_8h_source.html">浏览源代码.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
命名空间</h2></td></tr>
<tr class="memitem:d6/d94/namespacedoris"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d94/namespacedoris.html">doris</a></td></tr>
<tr class="memdesc:d6/d94/namespacedoris"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utilities for collecting timings. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:da/dbc/namespacedoris_1_1telemetry"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dbc/namespacedoris_1_1telemetry.html">doris::telemetry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:ac8fdc6ce37d8bb7b6428d21b60e44e6f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc7/telemetry_8h.html#ac8fdc6ce37d8bb7b6428d21b60e44e6f">INIT_AND_SCOPE_GET_NEXT_SPAN</a>(tracer,  get_next_span,  <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:ac8fdc6ce37d8bb7b6428d21b60e44e6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to initialize get_next_span and add Scope.  <br /></td></tr>
<tr class="separator:ac8fdc6ce37d8bb7b6428d21b60e44e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a59e66b2ea1ac89d12cb36c134ed6ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc7/telemetry_8h.html#a9a59e66b2ea1ac89d12cb36c134ed6ae">INIT_AND_SCOPE_SEND_SPAN</a>(tracer,  send_span,  <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)&#160;&#160;&#160;    <a class="el" href="../../de/dc7/telemetry_8h.html#ac8fdc6ce37d8bb7b6428d21b60e44e6f">INIT_AND_SCOPE_GET_NEXT_SPAN</a>(tracer, send_span, <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a9a59e66b2ea1ac89d12cb36c134ed6ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c673112172be52fc85cd82133bac19d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc7/telemetry_8h.html#a5c673112172be52fc85cd82133bac19d">START_AND_SCOPE_SPAN</a>(tracer,  span,  <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a5c673112172be52fc85cd82133bac19d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60cdb9f715eb5d4dd762c77e5fb01588"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc7/telemetry_8h.html#a60cdb9f715eb5d4dd762c77e5fb01588">START_AND_SCOPE_SPAN_IF</a>(enable,  tracer,  <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)&#160;&#160;&#160;    OpenTelemetryScopeWrapper(enable, tracer, <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a60cdb9f715eb5d4dd762c77e5fb01588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a705085278532ed703d5fcda4090415a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dc7/telemetry_8h.html#a705085278532ed703d5fcda4090415a1">INIT_AND_SCOPE_REENTRANT_SPAN_IF</a>(enable,  tracer,  reentrant_span,  <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)&#160;&#160;&#160;    OpenTelemetryScopeWrapper(enable, tracer, reentrant_span, <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:a705085278532ed703d5fcda4090415a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:a5e4d9d179b63fc6ac411df03cb55f9af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dbc/namespacedoris_1_1telemetry.html#a5e4d9d179b63fc6ac411df03cb55f9af">init_tracer</a> ()</td></tr>
<tr class="separator:a5e4d9d179b63fc6ac411df03cb55f9af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dd17b86c23ce20db63533896ca35af8"><td class="memItemLeft" align="right" valign="top">OpentelemetryTracer &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dbc/namespacedoris_1_1telemetry.html#a1dd17b86c23ce20db63533896ca35af8">get_noop_tracer</a> ()</td></tr>
<tr class="separator:a1dd17b86c23ce20db63533896ca35af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9934daefaf5461368b73e2561d0d528"><td class="memItemLeft" align="right" valign="top">OpentelemetryTracer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dbc/namespacedoris_1_1telemetry.html#ab9934daefaf5461368b73e2561d0d528">get_tracer</a> (const std::string &amp;tracer_name)</td></tr>
<tr class="separator:ab9934daefaf5461368b73e2561d0d528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ec43b8bb2989ad7bc08f03e46923cb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dbc/namespacedoris_1_1telemetry.html#ac3ec43b8bb2989ad7bc08f03e46923cb">is_current_span_valid</a> ()</td></tr>
<tr class="memdesc:ac3ec43b8bb2989ad7bc08f03e46923cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the active pan stack is not empty.  <br /></td></tr>
<tr class="separator:ac3ec43b8bb2989ad7bc08f03e46923cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">宏定义说明</h2>
<a id="ac8fdc6ce37d8bb7b6428d21b60e44e6f" name="ac8fdc6ce37d8bb7b6428d21b60e44e6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8fdc6ce37d8bb7b6428d21b60e44e6f">&#9670;&#160;</a></span>INIT_AND_SCOPE_GET_NEXT_SPAN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_AND_SCOPE_GET_NEXT_SPAN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tracer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">get_next_span, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>值:</b><div class="fragment"><div class="line">    <span class="keywordflow">do</span> {                                                          \</div>
<div class="line">        if (<a class="code hl_define" href="../../d4/d10/compiler__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a>(!get_next_span)) {                           \</div>
<div class="line">            get_next_span = tracer-&gt;StartSpan(<a class="code hl_variable" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);              \</div>
<div class="line">        }                                                         \</div>
<div class="line">    } <span class="keywordflow">while</span> (<span class="keyword">false</span>);                                              \</div>
<div class="line">    <a class="code hl_typedef" href="../../d6/d94/namespacedoris.html#ae97071b9406ecba0fd404b41cdfbeaa9">OpentelemetryScope</a> scope {get_next_span};</div>
<div class="ttc" id="acompiler__util_8h_html_a9acc330d508b9a3b775cfdf7ce405e7d"><div class="ttname"><a href="../../d4/d10/compiler__util_8h.html#a9acc330d508b9a3b775cfdf7ce405e7d">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(expr)</div><div class="ttdef"><b>Definition:</b> compiler_util.h:36</div></div>
<div class="ttc" id="anamespacedoris_html_ae97071b9406ecba0fd404b41cdfbeaa9"><div class="ttname"><a href="../../d6/d94/namespacedoris.html#ae97071b9406ecba0fd404b41cdfbeaa9">doris::OpentelemetryScope</a></div><div class="ttdeci">opentelemetry::trace::Scope OpentelemetryScope</div><div class="ttdef"><b>Definition:</b> open_telemetry_scop_wrapper.hpp:26</div></div>
<div class="ttc" id="asignal__handler_8h_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> signal_handler.h:66</div></div>
</div><!-- fragment -->
<p>Used to initialize get_next_span and add Scope. </p>

</div>
</div>
<a id="a9a59e66b2ea1ac89d12cb36c134ed6ae" name="a9a59e66b2ea1ac89d12cb36c134ed6ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a59e66b2ea1ac89d12cb36c134ed6ae">&#9670;&#160;</a></span>INIT_AND_SCOPE_SEND_SPAN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_AND_SCOPE_SEND_SPAN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tracer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">send_span, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    <a class="el" href="../../de/dc7/telemetry_8h.html#ac8fdc6ce37d8bb7b6428d21b60e44e6f">INIT_AND_SCOPE_GET_NEXT_SPAN</a>(tracer, send_span, <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5c673112172be52fc85cd82133bac19d" name="a5c673112172be52fc85cd82133bac19d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c673112172be52fc85cd82133bac19d">&#9670;&#160;</a></span>START_AND_SCOPE_SPAN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define START_AND_SCOPE_SPAN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tracer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">span, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>值:</b><div class="fragment"><div class="line">    <span class="keyword">auto</span> span = tracer-&gt;StartSpan(<a class="code hl_variable" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);         \</div>
<div class="line">    OpentelemetryScope scope {span};</div>
</div><!-- fragment --><p>Start a span with the specified tracer, name, and variable name, and create a Scope for this span.</p>
<p>span represents the execution time of an operation unit, the time of its construction is the start time, the time of its destructuring is the end time, you can also call the End method to let span terminate, like "span-&gt;End();"</p>
<p>We can add Event and Attribute to span. Event will record the timestamp and event content, and Attribute can record key-value pairs. For example: span-&gt;AddEvent("event content"); span-&gt;SetAttribute("key", "value");</p>
<p>Scope will add the span to a thread-local stack during construction, and remove the span from the stack during destructuring. When starting a span, the top-of-stack span will be the parent span by default, and the top-of-stack span can be obtained via the opentelemetry::trace::Tracer::GetCurrentSpan() method. </p>

</div>
</div>
<a id="a60cdb9f715eb5d4dd762c77e5fb01588" name="a60cdb9f715eb5d4dd762c77e5fb01588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60cdb9f715eb5d4dd762c77e5fb01588">&#9670;&#160;</a></span>START_AND_SCOPE_SPAN_IF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define START_AND_SCOPE_SPAN_IF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">enable, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tracer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    OpenTelemetryScopeWrapper(enable, tracer, <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a705085278532ed703d5fcda4090415a1" name="a705085278532ed703d5fcda4090415a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a705085278532ed703d5fcda4090415a1">&#9670;&#160;</a></span>INIT_AND_SCOPE_REENTRANT_SPAN_IF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_AND_SCOPE_REENTRANT_SPAN_IF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">enable, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">tracer, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">reentrant_span, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    OpenTelemetryScopeWrapper(enable, tracer, reentrant_span, <a class="el" href="../../d6/d79/signal__handler_8h.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
