\hypertarget{charmap_8h_source}{}\doxysection{charmap.\+h}
\label{charmap_8h_source}\index{/Users/dabowang/be\_all/gutil/charmap.h@{/Users/dabowang/be\_all/gutil/charmap.h}}
\mbox{\hyperlink{charmap_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Character\ Map\ Class}}
\DoxyCodeLine{00002\ \textcolor{comment}{//}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Originally\ written\ by\ Daniel\ Dulitz}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Yanked\ out\ from\ url.cc\ on\ February\ 2003\ by\ Wei-\/Hwa\ Huang}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ Copyright\ (C)\ Google,\ 2001.}}
\DoxyCodeLine{00007\ \textcolor{comment}{//}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ A\ fast,\ bit-\/vector\ map\ for\ 8-\/bit\ unsigned\ characters.}}
\DoxyCodeLine{00009\ \textcolor{comment}{//}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ Internally\ stores\ 256\ bits\ in\ an\ array\ of\ 8\ uint32s.}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ See\ changelist\ history\ for\ micro-\/optimization\ attempts.}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ Does\ quick\ bit-\/flicking\ to\ lookup\ needed\ characters.}}
\DoxyCodeLine{00013\ \textcolor{comment}{//}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ This\ class\ is\ useful\ for\ non-\/character\ purposes\ as\ well.}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_charmap}{Charmap}}\ \{}
\DoxyCodeLine{00021\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{comment}{//\ Initializes\ with\ given\ uint32\ values.\ \ For\ instance,\ the\ first}}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{comment}{//\ variable\ contains\ bits\ for\ values\ 0x1F\ (US)\ down\ to\ 0x00\ (NUL).}}
\DoxyCodeLine{00024\ \ \ \ \ \mbox{\hyperlink{class_charmap_a5f95c0c90c352fb2e44febef5a9a8065}{Charmap}}(\mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ b0,\ \mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ b1,\ \mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ b2,\ \mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ b3,\ \mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ b4,\ \mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ b5,\ \mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ b6,}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ b7)\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[0]\ =\ b0;}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[1]\ =\ b1;}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[2]\ =\ b2;}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[3]\ =\ b3;}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[4]\ =\ b4;}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[5]\ =\ b5;}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[6]\ =\ b6;}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[7]\ =\ b7;}
\DoxyCodeLine{00034\ \ \ \ \ \}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{comment}{//\ Initializes\ with\ a\ given\ char*.\ \ Note\ that\ NUL\ is\ not\ treated\ as}}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{comment}{//\ a\ terminator,\ but\ rather\ a\ char\ to\ be\ flicked.}}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{class_charmap_a6b2ed675f772b78fd6bc87d41acee491}{Charmap}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{int}\ len)\ \{\ \mbox{\hyperlink{class_charmap_a4ca52b9bda9dddf3e3773458f2d33229}{Init}}(str,\ len);\ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{comment}{//\ Initializes\ with\ a\ given\ char*.\ \ NUL\ is\ treated\ as\ a\ terminator}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{//\ and\ will\ not\ be\ in\ the\ charmap.}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_charmap_a130cdbf1c2ab6d49d0fee40ee514b67b}{Charmap}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str)\ \{\ \mbox{\hyperlink{class_charmap_a4ca52b9bda9dddf3e3773458f2d33229}{Init}}(str,\ strlen(str));\ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_charmap_abe0104f56ec38817aa78013e16e211ea}{contains}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ c)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[c\ >>\ 5]\ >>\ (c\ \&\ 0x1f))\ \&\ 0x1;\ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ and\ only\ if\ a\ character\ exists\ in\ both\ maps.}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_charmap_a1325a2b85a24ae751af2c41d9a5c4d2e}{IntersectsWith}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_charmap}{Charmap}}\&\ c)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 8;\ ++i)\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[i]\ \&\ c.\mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[i])\ !=\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_charmap_a6d666801efee1f9166508f097e24969f}{IsZero}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ c\ :\ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}})\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c\ !=\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{integral__types_8h_acbd4acd0d29e2d6c43104827f77d9cd2}{uint32}}\ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[8];}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_charmap_a4ca52b9bda9dddf3e3773458f2d33229}{Init}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{int}\ len)\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ memset(\&\mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}},\ 0,\ \textcolor{keyword}{sizeof}\ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ len;\ ++i)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\textcolor{keyword}{>}(str[i]);}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_charmap_ab3e5de3fb59e7a5c046340ab6172688c}{m\_}}[\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ >>\ 5]\ |=\ 1UL\ <<\ (\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ \&\ 0x1f);}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ \};}

\end{DoxyCode}
