\hypertarget{vnested__loop__join__node_8h_source}{}\doxysection{vnested\+\_\+loop\+\_\+join\+\_\+node.\+h}
\label{vnested__loop__join__node_8h_source}\index{/Users/dabowang/doris/be/src/vec/exec/join/vnested\_loop\_join\_node.h@{/Users/dabowang/doris/be/src/vec/exec/join/vnested\_loop\_join\_node.h}}
\mbox{\hyperlink{vnested__loop__join__node_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <boost/thread.hpp>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <future>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <stack>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{runtime__filter_8h}{exprs/runtime\_filter.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}gen\_cpp/PlanNodes\_types.h"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{descriptors_8h}{runtime/descriptors.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{block_8h}{vec/core/block.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vjoin__node__base_8h}{vec/exec/join/vjoin\_node\_base.h}}"{}}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris_1_1vectorized}{doris::vectorized}}\ \{}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{comment}{//\ Node\ for\ nested\ loop\ joins.}}
\DoxyCodeLine{00034\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node}{VNestedLoopJoinNode}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base}{VJoinNodeBase}}\ \{}
\DoxyCodeLine{00035\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node}{VNestedLoopJoinNode}}(\mbox{\hyperlink{classdoris_1_1_object_pool}{ObjectPool}}*\ pool,\ \textcolor{keyword}{const}\ TPlanNode\&\ tnode,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_descriptor_tbl}{DescriptorTbl}}\&\ descs);}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a1be6bfdf0749477f7f8da2a1e8212143}{init}}(\textcolor{keyword}{const}\ TPlanNode\&\ tnode,\ \mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state\ =\ \textcolor{keyword}{nullptr})\ \textcolor{keyword}{override};}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_aa1a9d3c8096a7d5dc7ae0b91b62b7e34}{prepare}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a919ab1c222d6846eb6395f8b2bdc880b}{get\_next}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state,\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block,\ \textcolor{keywordtype}{bool}*\ eos)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ada03c07cfe6d2653890fe818cc4c8397}{alloc\_resource}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{doris::RuntimeState}}*\ state)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a0684d23323ee02f767ee743db96f48b7}{release\_resource}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{doris::RuntimeState}}*\ state)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a35e679254ba8251e1b5d4e6e5baa1c52}{sink}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state,\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ input\_block,\ \textcolor{keywordtype}{bool}\ eos)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a21661abf0b27ddb39fa0f9188f0f23ea}{push}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state,\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ input\_block,\ \textcolor{keywordtype}{bool}\ eos)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a749d58c94b6ea4e2332c59ef62378a6e}{pull}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state,\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ output\_block,\ \textcolor{keywordtype}{bool}*\ eos)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a631396b2254f525844391e6a7aaec76c}{need\_more\_input\_data}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a94e154ac4fd84ce32f92eb5dfac932d8}{close}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a019f7d127e3f74f7fea421a226699777}{open}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_exec_node_ae21c3e223fb1aec0439964d01e5e0282}{debug\_string}}(\textcolor{keywordtype}{int}\ indentation\_level,\ std::stringstream*\ out)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_row_descriptor}{RowDescriptor}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ab2b434e2953954c848918da233c93b57}{intermediate\_row\_desc}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ae4f132d5c12a2f2ad38c7442285d7324}{\_old\_version\_flag}}\ ?\ \mbox{\hyperlink{classdoris_1_1_exec_node_ae7a0a359e78b6027f3f62e5f95972cca}{\_row\_descriptor}}\ :\ *\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_ab2a5735ccaaa0be7745f253727fee68a}{\_intermediate\_row\_desc}};}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_row_descriptor}{RowDescriptor}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a19cab6214284f252fe1a5e0b5cb9ed80}{row\_desc}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ae4f132d5c12a2f2ad38c7442285d7324}{\_old\_version\_flag}}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ?\ (\mbox{\hyperlink{classdoris_1_1_exec_node_aa7171bb35e179373af233efc21a2e2be}{\_output\_row\_descriptor}}\ ?\ *\mbox{\hyperlink{classdoris_1_1_exec_node_aa7171bb35e179373af233efc21a2e2be}{\_output\_row\_descriptor}}\ :\ \mbox{\hyperlink{classdoris_1_1_exec_node_ae7a0a359e78b6027f3f62e5f95972cca}{\_row\_descriptor}})}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ *\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a779cc39064b6cec395f5e3640e5da310}{\_output\_row\_desc}};}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a95828af7e9c02918e55dae810689fe5f}{get\_left\_block}}()\ \{\ \textcolor{keywordflow}{return}\ \&\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_abea5b02fc0e78620c4ff9e0192b849bf}{\_left\_block}};\ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ JoinOpType,\ \textcolor{keywordtype}{bool}\ set\_build\_s\textcolor{keywordtype}{id}e\_flag,\ \textcolor{keywordtype}{bool}\ set\_probe\_s\textcolor{keywordtype}{id}e\_flag>}
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ab417b313f0e0d3c17c8ed5ebfaf9eff5}{\_generate\_join\_block\_data}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state,\ JoinOpType\&\ join\_op\_variants)\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ ignore\_null\ =\ JoinOpType::value\ ==\ TJoinOp::LEFT\_ANTI\_JOIN\ ||}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JoinOpType::value\ ==\ TJoinOp::NULL\_AWARE\_LEFT\_ANTI\_JOIN\ ||}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JoinOpType::value\ ==\ TJoinOp::RIGHT\_ANTI\_JOIN;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_mutable_block}{MutableBlock}}\ mutable\_join\_block(\&\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a026a798207c6058b3642732453d09d83}{\_join\_block}});}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a026a798207c6058b3642732453d09d83}{\_join\_block}}.\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block_a9be86262d8ec3739dba5e0910c2339ad}{rows}}()\ <\ state-\/>\mbox{\hyperlink{classdoris_1_1_runtime_state_aa0f6f2d34b787cb38b2f02c8673d6377}{batch\_size}}()\ \&\&\ !\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a9fffe20963661854c24103e17526d3ab}{\_matched\_rows\_done}})\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ this\ left\ block\ is\ exhausted\ or\ empty,\ we\ need\ to\ pull\ data\ from\ left\ child.}}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a02ff2d5e9e63ce747ed5253b4e92f99f}{\_left\_block\_pos}}\ ==\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_abea5b02fc0e78620c4ff9e0192b849bf}{\_left\_block}}.\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block_a9be86262d8ec3739dba5e0910c2339ad}{rows}}())\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_aced9b571926c7e196cd1586815881877}{\_left\_side\_eos}})\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a9fffe20963661854c24103e17526d3ab}{\_matched\_rows\_done}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a02ff2d5e9e63ce747ed5253b4e92f99f}{\_left\_block\_pos}}\ =\ 0;}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_af98d98c27d791603516b55e4b5a52e65}{\_need\_more\_input\_data}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_status_a6ec1a217f203269ab53d2290d602db24}{Status::OK}}();}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ should\ try\ to\ join\ rows\ if\ there\ still\ are\ some\ rows\ from\ probe\ side.}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a9fffe20963661854c24103e17526d3ab}{\_matched\_rows\_done}}\ \&\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a1b551af65a702d4f01f3f3f9af2028d4}{\_current\_build\_pos}}\ <\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a5e3687b94d562b045d3c859ec5208eda}{\_build\_blocks}}.size())\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ now\_process\_build\_block\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a5e3687b94d562b045d3c859ec5208eda}{\_build\_blocks}}[\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a1b551af65a702d4f01f3f3f9af2028d4}{\_current\_build\_pos}}++];}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (set\_build\_side\_flag)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ab25a59a94acb088ead058ff1dbaf6832}{\_offset\_stack}}.push(mutable\_join\_block.\mbox{\hyperlink{classdoris_1_1vectorized_1_1_mutable_block_a9be86262d8ec3739dba5e0910c2339ad}{rows}}());}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ab2a401ac9b8c62cbb4e53465e2fec54c}{\_process\_left\_child\_block}}(mutable\_join\_block,\ now\_process\_build\_block);}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a026a798207c6058b3642732453d09d83}{\_join\_block}}.\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block_a9be86262d8ec3739dba5e0910c2339ad}{rows}}()\ <\ state-\/>\mbox{\hyperlink{classdoris_1_1_runtime_state_aa0f6f2d34b787cb38b2f02c8673d6377}{batch\_size}}()\ \&\&}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a1b551af65a702d4f01f3f3f9af2028d4}{\_current\_build\_pos}}\ <\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a5e3687b94d562b045d3c859ec5208eda}{\_build\_blocks}}.size());}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (set\_probe\_side\_flag)\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ status\ =}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a95084e37a3a7217f3c530e43eeb4166e}{\_do\_filtering\_and\_update\_visited\_flags}}<set\_build\_side\_flag,}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ set\_probe\_side\_flag,\ ignore\_null>(}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a026a798207c6058b3642732453d09d83}{\_join\_block}},\ !\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a47b440640aff84f74aa16a131f2b1a98}{\_is\_left\_semi\_anti}});}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_abc6567cdd9d0e28b0b1e438da694ce15}{\_update\_additional\_flags}}(\&\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a026a798207c6058b3642732453d09d83}{\_join\_block}});}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!status.ok())\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ status;}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mutable\_join\_block\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_mutable_block}{MutableBlock}}(\&\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a026a798207c6058b3642732453d09d83}{\_join\_block}});}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ this\ join\ operation\ is\ left\ outer\ join\ or\ full\ outer\ join,\ when}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ `\_current\_build\_pos\ ==\ \_build\_blocks.size()`,\ means\ all\ rows\ from\ build}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ side\ have\ been\ joined\ with\ the\ current\ probe\ row,\ we\ should\ output\ current}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ probe\ row\ with\ null\ from\ build\ side.}}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a1b551af65a702d4f01f3f3f9af2028d4}{\_current\_build\_pos}}\ ==\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a5e3687b94d562b045d3c859ec5208eda}{\_build\_blocks}}.size())\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a9fffe20963661854c24103e17526d3ab}{\_matched\_rows\_done}})\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a8899eebb7de903376f79f291ab5d1762}{\_finalize\_current\_phase}}<\textcolor{keyword}{false},}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ JoinOpType::value\ ==\ TJoinOp::LEFT\_SEMI\_JOIN>(}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mutable\_join\_block,\ state-\/>\mbox{\hyperlink{classdoris_1_1_runtime_state_aa0f6f2d34b787cb38b2f02c8673d6377}{batch\_size}}());}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a3c8bfeec8dc6ae8b62b7504b70673b07}{\_reset\_with\_next\_probe\_row}}();}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a9fffe20963661854c24103e17526d3ab}{\_matched\_rows\_done}}\ \&\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a1b551af65a702d4f01f3f3f9af2028d4}{\_current\_build\_pos}}\ ==\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a5e3687b94d562b045d3c859ec5208eda}{\_build\_blocks}}.size())\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a914c2a03e6a5930224d4cdcaa169ec63}{\_is\_mark\_join}}\ \&\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a5e3687b94d562b045d3c859ec5208eda}{\_build\_blocks}}.empty())\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DCHECK\_EQ(JoinOpType::value,\ TJoinOp::CROSS\_JOIN);}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ab98089760dd7a817a17778b26a9cd713}{\_append\_left\_data\_with\_null}}(mutable\_join\_block);}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a3c8bfeec8dc6ae8b62b7504b70673b07}{\_reset\_with\_next\_probe\_row}}();}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a3c8bfeec8dc6ae8b62b7504b70673b07}{\_reset\_with\_next\_probe\_row}}();}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (!set\_probe\_side\_flag)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ status\ =}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a95084e37a3a7217f3c530e43eeb4166e}{\_do\_filtering\_and\_update\_visited\_flags}}<set\_build\_side\_flag,\ set\_probe\_side\_flag,}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ignore\_null>(\&\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a026a798207c6058b3642732453d09d83}{\_join\_block}},}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a022b2e93e3af081aa3acf9d5ffe08ffb}{\_is\_right\_semi\_anti}});}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_abc6567cdd9d0e28b0b1e438da694ce15}{\_update\_additional\_flags}}(\&\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a026a798207c6058b3642732453d09d83}{\_join\_block}});}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ mutable\_join\_block\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_mutable_block}{MutableBlock}}(\&\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_join_node_base_a026a798207c6058b3642732453d09d83}{\_join\_block}});}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!status.\mbox{\hyperlink{classdoris_1_1_status_a03cb7eaa663dc83af68bc28a596d09e6}{ok}}())\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ status;}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (set\_build\_side\_flag)\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a9fffe20963661854c24103e17526d3ab}{\_matched\_rows\_done}}\ \&\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ae66fc003aa09e53202f25d61f14e4e33}{\_output\_null\_idx\_build\_side}}\ <\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a5e3687b94d562b045d3c859ec5208eda}{\_build\_blocks}}.size())\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_finalize\_current\_phase<true,\ JoinOpType::value\ ==\ TJoinOp::RIGHT\_SEMI\_JOIN>(}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ mutable\_join\_block,\ state-\/>\mbox{\hyperlink{classdoris_1_1_runtime_state_aa0f6f2d34b787cb38b2f02c8673d6377}{batch\_size}}());}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_status_a6ec1a217f203269ab53d2290d602db24}{Status::OK}}();}
\DoxyCodeLine{00162\ \ \ \ \ \}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_aba7fa626460a84adba9971bf9f365d75}{\_materialize\_build\_side}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{comment}{//\ Processes\ a\ block\ from\ the\ left\ child.}}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{comment}{//\ \ dst\_columns:\ left\_child\_row\ and\ now\_process\_build\_block\ to\ construct\ a\ bundle\ column\ of\ new\ block}}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{comment}{//\ \ now\_process\_build\_block:\ right\ child\ block\ now\ to\ process}}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ab2a401ac9b8c62cbb4e53465e2fec54c}{\_process\_left\_child\_block}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_mutable_block}{MutableBlock}}\&\ mutable\_block,}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}\&\ now\_process\_build\_block)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ SetBuildS\textcolor{keywordtype}{id}eFlag,\ \textcolor{keywordtype}{bool}\ SetProbeS\textcolor{keywordtype}{id}eFlag,\ \textcolor{keywordtype}{bool}\ IgnoreNull>}
\DoxyCodeLine{00172\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a95084e37a3a7217f3c530e43eeb4166e}{\_do\_filtering\_and\_update\_visited\_flags}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block,\ \textcolor{keywordtype}{bool}\ materialize);}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{comment}{//\ TODO:\ replace\ it\ as\ template\ lambda\ after\ support\ C++20}}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Filter,\ \textcolor{keywordtype}{bool}\ SetBuildS\textcolor{keywordtype}{id}eFlag,\ \textcolor{keywordtype}{bool}\ SetProbeS\textcolor{keywordtype}{id}eFlag>}
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a4b63eaf2a34b8fb86b897470b1c9505b}{\_do\_filtering\_and\_update\_visited\_flags\_impl}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block,\ \textcolor{keywordtype}{int}\ column\_to\_keep,}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ build\_block\_idx,\ \textcolor{keywordtype}{int}\ processed\_blocks\_num,}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ materialize,\ Filter\&\ filter);}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ BuildS\textcolor{keywordtype}{id}e,\ \textcolor{keywordtype}{bool}\ IsSemi>}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a8899eebb7de903376f79f291ab5d1762}{\_finalize\_current\_phase}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_mutable_block}{MutableBlock}}\&\ mutable\_block,\ \textcolor{keywordtype}{size\_t}\ batch\_size);}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a3c8bfeec8dc6ae8b62b7504b70673b07}{\_reset\_with\_next\_probe\_row}}();}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a245b5be18a877b191a3a531a80270e08}{\_release\_mem}}();}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_aa0ee42068d34d6a88eeebb14847cd5c9}{\_fresh\_left\_block}}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ state);}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a39d6fad9f0defa264145159fa50f8093}{\_resize\_fill\_tuple\_is\_null\_column}}(\textcolor{keywordtype}{size\_t}\ new\_size,\ \textcolor{keywordtype}{int}\ left\_flag,\ \textcolor{keywordtype}{int}\ right\_flag);}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{comment}{//\ add\ tuple\ is\ null\ flag\ column\ to\ Block\ for\ filter\ conjunct\ and\ output\ expr}}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_abc6567cdd9d0e28b0b1e438da694ce15}{\_update\_additional\_flags}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block);}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a4f89b193f06cef26447f38926fae359f}{\_add\_tuple\_is\_null\_column}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{comment}{//\ For\ mark\ join,\ if\ the\ relation\ from\ right\ side\ is\ empty,\ we\ should\ construct\ intermediate}}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{comment}{//\ block\ with\ data\ from\ left\ side\ and\ filled\ with\ null\ for\ right\ side}}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ab98089760dd7a817a17778b26a9cd713}{\_append\_left\_data\_with\_null}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_mutable_block}{MutableBlock}}\&\ mutable\_block)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{comment}{//\ List\ of\ build\ blocks,\ constructed\ in\ prepare()}}
\DoxyCodeLine{00201\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a70b9d8eda38b72da69243dc743561bd6}{Blocks}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a5e3687b94d562b045d3c859ec5208eda}{\_build\_blocks}};}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{comment}{//\ Visited\ flags\ for\ each\ row\ in\ build\ side.}}
\DoxyCodeLine{00203\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a3904a5cfbe6dcfc82d31783ef44b8f9c}{MutableColumns}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a10dea6cc7bd28c41d6021daf796eb764}{\_build\_side\_visited\_flags}};}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{comment}{//\ Visited\ flags\ for\ current\ row\ in\ probe\ side.}}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_aeca6a450eebd2ae9f0775f693b6f6722}{\_cur\_probe\_row\_visited\_flags}};}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a1b551af65a702d4f01f3f3f9af2028d4}{\_current\_build\_pos}}\ =\ 0;}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_afe4cb6dd1a8ba8f020f7345c159d3bb0}{\_num\_probe\_side\_columns}}\ =\ 0;}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a62598cbd99286a5314792236ad83a9d8}{\_num\_build\_side\_columns}}\ =\ 0;}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a8b555176fa6e486e7329c81fafede104}{\_build\_rows}}\ =\ 0;}
\DoxyCodeLine{00212\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a3a7f3a06474f8b764a2e1f605addce9d}{\_total\_mem\_usage}}\ =\ 0;}
\DoxyCodeLine{00213\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ae66fc003aa09e53202f25d61f14e4e33}{\_output\_null\_idx\_build\_side}}\ =\ 0;}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a9fffe20963661854c24103e17526d3ab}{\_matched\_rows\_done}};}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{comment}{//\ \_left\_block\ must\ be\ cleared\ before\ calling\ get\_next().\ \ The\ child\ node}}
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{comment}{//\ does\ not\ initialize\ all\ tuple\ ptrs\ in\ the\ row,\ only\ the\ ones\ that\ it}}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{comment}{//\ is\ responsible\ for.}}
\DoxyCodeLine{00220\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_abea5b02fc0e78620c4ff9e0192b849bf}{\_left\_block}};}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a02ff2d5e9e63ce747ed5253b4e92f99f}{\_left\_block\_pos}};\ \textcolor{comment}{//\ current\ scan\ pos\ in\ \_left\_block}}
\DoxyCodeLine{00223\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_aced9b571926c7e196cd1586815881877}{\_left\_side\_eos}};\ \textcolor{comment}{//\ if\ true,\ left\ child\ has\ no\ more\ rows\ to\ process}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ae4f132d5c12a2f2ad38c7442285d7324}{\_old\_version\_flag}};}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a3904a5cfbe6dcfc82d31783ef44b8f9c}{MutableColumns}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a12399a172420a58a105b04e5b7635c20}{\_dst\_columns}};}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ std::vector<TRuntimeFilterDesc>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ac2c0cf2bcf2b02cefeee032b489c541e}{\_runtime\_filter\_descs}};}
\DoxyCodeLine{00230\ \ \ \ \ std::vector<vectorized::VExprContext*>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a1227cd43d8db7ae6c26bfb1ab5326632}{\_filter\_src\_expr\_ctxs}};}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a17cd0f45eccd4d2b4b861c4539165968}{\_is\_output\_left\_side\_only}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_af98d98c27d791603516b55e4b5a52e65}{\_need\_more\_input\_data}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00233\ \ \ \ \ std::stack<uint16\_t>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_ab25a59a94acb088ead058ff1dbaf6832}{\_offset\_stack}};}
\DoxyCodeLine{00234\ \ \ \ \ std::unique\_ptr<VExprContext*>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_nested_loop_join_node_a9e582a3d4e09e7728b717b721839912c}{\_vjoin\_conjunct\_ptr}};}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1vectorized_1_1_runtime_filter_build}{RuntimeFilterBuild}};}
\DoxyCodeLine{00237\ \};}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \}\ \textcolor{comment}{//\ namespace\ doris::vectorized}}

\end{DoxyCode}
