\hypertarget{uid__util_8h_source}{}\doxysection{uid\+\_\+util.\+h}
\label{uid__util_8h_source}\index{/Users/dabowang/doris/be/src/util/uid\_util.h@{/Users/dabowang/doris/be/src/util/uid\_util.h}}
\mbox{\hyperlink{uid__util_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <ostream>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}gen\_cpp/Types\_types.h"{}}\ \textcolor{comment}{//\ for\ TUniqueId}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}gen\_cpp/types.pb.h"{}}\ \ \ \ \textcolor{comment}{//\ for\ PUniqueId}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{uuid__generator_8h}{util/uuid\_generator.h}}"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{comment}{//\ convert\ int\ to\ a\ hex\ format\ string,\ buf\ must\ enough\ to\ hold\ converted\ hex\ string}}
\DoxyCodeLine{00030\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00031\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacedoris_af963c479be7b2734faf43ffaf53c379b}{to\_hex}}(\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ val,\ \textcolor{keywordtype}{char}*\ buf)\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ digits\ =\ \textcolor{stringliteral}{"{}0123456789abcdef"{}};}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 2\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}});\ ++i)\ \{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ buf[2\ *\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}})\ -\/\ 1\ -\/\ i]\ =\ digits[val\ \&\ 0x0F];}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ val\ >>=\ 4;}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ \}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00040\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespacedoris_a31432338247487fcccd639db8328c217}{from\_hex}}(\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{doris__main_8cpp_ab07b31d4e8924e322ffed3f51d39e425}{ret}},\ \textcolor{keyword}{const}\ std::string\&\ buf)\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ val\ =\ 0;}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ buf.length();\ ++i)\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ buf\_val\ =\ 0;}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (buf.c\_str()[i]\ >=\ \textcolor{charliteral}{'0'}\ \&\&\ buf.c\_str()[i]\ <=\ \textcolor{charliteral}{'9'})\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ buf\_val\ =\ buf.c\_str()[i]\ -\/\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ buf\_val\ =\ buf.c\_str()[i]\ -\/\ \textcolor{charliteral}{'a'}\ +\ 10;}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ val\ <<=\ 4;}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ val\ =\ val\ |\ buf\_val;}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ \ \ \ \ *\mbox{\hyperlink{doris__main_8cpp_ab07b31d4e8924e322ffed3f51d39e425}{ret}}\ =\ val;}
\DoxyCodeLine{00053\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\ \{}
\DoxyCodeLine{00056\ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ =\ 0;}
\DoxyCodeLine{00057\ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ =\ 0;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a2c3cbd60b5e6a37fe81c597e6351cb16}{UniqueId}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a55b4153450ac473a6a5ebc1f448225a6}{UniqueId}}(int64\_t\ hi\_,\ int64\_t\ lo\_)\ :\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}(hi\_),\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}(lo\_)\ \{\}}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a174a896079d53bfc04bb83e0b6c96ef8}{UniqueId}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\&\ uid)\ :\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}(uid.\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}),\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}(uid.\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}})\ \{\}}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a0e282e376a854d92a9e8d1d3bf08c60e}{UniqueId}}(\textcolor{keyword}{const}\ TUniqueId\&\ tuid)\ :\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}(tuid.\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}),\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}(tuid.\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}})\ \{\}}
\DoxyCodeLine{00063\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a9028bc4d9382c9e676e7a2871ba8a244}{UniqueId}}(\textcolor{keyword}{const}\ PUniqueId\&\ puid)\ :\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}(puid.\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}()),\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}(puid.\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}())\ \{\}}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_addce7be78dd78d2eb0fb74910e3b2f89}{UniqueId}}(\textcolor{keyword}{const}\ std::string\&\ hi\_str,\ \textcolor{keyword}{const}\ std::string\&\ lo\_str)\ \{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_a31432338247487fcccd639db8328c217}{from\_hex}}(\&\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}},\ hi\_str);}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_a31432338247487fcccd639db8328c217}{from\_hex}}(\&\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}},\ lo\_str);}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_unique_id_afe87a180d00c685893090166d7a8dd46}{initialized}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ !=\ 0\ ||\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ !=\ 0;\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ currently,\ the\ implementation\ is\ uuid,\ but\ it\ may\ change\ in\ the\ future}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\ \mbox{\hyperlink{structdoris_1_1_unique_id_aa67d5fa540c2d330c29c9ce62f9c2e3c}{gen\_uid}}()\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\ uid(0,\ 0);}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ uuid\ =\ \mbox{\hyperlink{classdoris_1_1_u_u_i_d_generator_a8a5a95f91213786fdee553a19a73a8b6}{UUIDGenerator::instance}}()-\/>\mbox{\hyperlink{classdoris_1_1_u_u_i_d_generator_a5b9988b1de4002c77bfafddea8e146b8}{next\_uuid}}();}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{memcpy__aarch64_8cpp_a156c5821f16ed93be8c7d315303f7b2a}{memcpy}}(\&uid.\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}},\ uuid.data,\ \textcolor{keyword}{sizeof}(int64\_t));}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{memcpy__aarch64_8cpp_a156c5821f16ed93be8c7d315303f7b2a}{memcpy}}(\&uid.\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}},\ uuid.data\ +\ \textcolor{keyword}{sizeof}(int64\_t),\ \textcolor{keyword}{sizeof}(int64\_t));}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ uid;}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_aeb047b64ff28d72aaf924b96f2cc6cd6}{\string~UniqueId}}()\ noexcept\ \{\}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ std::string\ \mbox{\hyperlink{structdoris_1_1_unique_id_aac993ecccd3d88aafefb6b8e3caa1dee}{to\_string}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ buf[33];}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_af963c479be7b2734faf43ffaf53c379b}{to\_hex}}(\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}},\ buf);}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ buf[16]\ =\ \textcolor{charliteral}{'-\/'};}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_af963c479be7b2734faf43ffaf53c379b}{to\_hex}}(\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}},\ buf\ +\ 17);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \{buf,\ 33\};}
\DoxyCodeLine{00088\ \ \ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\&\ \mbox{\hyperlink{structdoris_1_1_unique_id_abf0667afdde2a42c6a0a829891f00549}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\ uid)\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ =\ uid.\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}};}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ =\ uid.\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00094\ \ \ \ \ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\&\ \mbox{\hyperlink{structdoris_1_1_unique_id_a2486d346d7e5610ea8a8a192c447dfee}{operator=}}(\textcolor{keyword}{const}\ PUniqueId\ puid)\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ =\ puid.hi();}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ =\ puid.lo();}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\&\ \mbox{\hyperlink{structdoris_1_1_unique_id_a5ba3345073400b5820958d7f5dbba8f6}{operator=}}(\textcolor{keyword}{const}\ TUniqueId\ tuid)\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ =\ tuid.hi;}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ =\ tuid.lo;}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{comment}{//compare\ PUniqueId\ and\ UniqueId}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_unique_id_a4513ea489e342f08311ad75e671ace00}{operator==}}(\textcolor{keyword}{const}\ PUniqueId\&\ rhs)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ ==\ rhs.hi()\ \&\&\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ ==\ rhs.lo();\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_unique_id_adc118169210a2b1e4e878ecffce3864e}{operator!=}}(\textcolor{keyword}{const}\ PUniqueId\&\ rhs)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ !=\ rhs.hi()\ ||\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ !=\ rhs.lo();\ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//\ std::map\ std::set\ needs\ this\ operator}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_unique_id_ada98eb5e200ba90cd83418ab2dc3f6e0}{operator<}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\&\ right)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ !=\ right.\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}})\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ <\ right.\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}};}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ <\ right.\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}};}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{comment}{//\ std::unordered\_map\ need\ this\ api}}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structdoris_1_1_unique_id_aa8194be320c35dd95a128231b102032e}{hash}}(\textcolor{keywordtype}{size\_t}\ seed\ =\ 0)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{comment}{//\ std::unordered\_map\ need\ this\ api}}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_unique_id_ae7c22f3d9785b02ceb051635d48a6070}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\&\ rhs)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ ==\ rhs.\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ \&\&\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ ==\ rhs.\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}};\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_unique_id_a81d80ef37b0cb0d8a599adadea3ef653}{operator!=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_unique_id}{UniqueId}}\&\ rhs)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ !=\ rhs.\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}}\ ||\ \mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}}\ !=\ rhs.\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}};\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ TUniqueId\ \mbox{\hyperlink{structdoris_1_1_unique_id_affd6ca0cff927bbd9a6a3d90c060f836}{to\_thrift}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ TUniqueId\ tid;}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ tid.\_\_set\_hi(\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}});}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ tid.\_\_set\_lo(\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}});}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ tid;}
\DoxyCodeLine{00134\ \ \ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ PUniqueId\ \mbox{\hyperlink{structdoris_1_1_unique_id_acb152fed54d0599ee81fa74da0fe74fb}{to\_proto}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ PUniqueId\ pid;}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ pid.set\_hi(\mbox{\hyperlink{structdoris_1_1_unique_id_a94ebb4c22130c6225e4853bda2afdede}{hi}});}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ pid.set\_lo(\mbox{\hyperlink{structdoris_1_1_unique_id_a02d2e758b56a585c38f9b055ddc6038a}{lo}});}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pid;}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ \};}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \textcolor{comment}{//\ This\ function\ must\ be\ called\ 'hash\_value'\ to\ be\ picked\ up\ by\ boost.}}
\DoxyCodeLine{00145\ std::size\_t\ \mbox{\hyperlink{namespacedoris_ab9737ee3c43e1023a13ca008047f332d}{hash\_value}}(\textcolor{keyword}{const}\ doris::TUniqueId\&\ \textcolor{keywordtype}{id});}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00148\ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{namespacedoris_a5caed16e84d7cd1c6a1227706febcfeb}{generate\_uuid\_string}}()\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{return}\ boost::uuids::to\_string(boost::uuids::basic\_random\_generator<boost::mt19937>()());}
\DoxyCodeLine{00150\ \}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00153\ \textcolor{keyword}{inline}\ TUniqueId\ \mbox{\hyperlink{namespacedoris_a749cb439f250dd25e5068d56c1e9a7b0}{generate\_uuid}}()\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keyword}{auto}\ uuid\ =\ boost::uuids::basic\_random\_generator<boost::mt19937>()();}
\DoxyCodeLine{00155\ \ \ \ \ TUniqueId\ uid;}
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{memcpy__aarch64_8cpp_a156c5821f16ed93be8c7d315303f7b2a}{memcpy}}(\&uid.hi,\ uuid.data,\ \textcolor{keyword}{sizeof}(int64\_t));}
\DoxyCodeLine{00157\ \ \ \ \ \mbox{\hyperlink{memcpy__aarch64_8cpp_a156c5821f16ed93be8c7d315303f7b2a}{memcpy}}(\&uid.lo,\ uuid.data\ +\ \textcolor{keyword}{sizeof}(int64\_t),\ \textcolor{keyword}{sizeof}(int64\_t));}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keywordflow}{return}\ uid;}
\DoxyCodeLine{00159\ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ UniqueId\&\ uid);}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ std::string\ \mbox{\hyperlink{namespacedoris_ab0606cb3935fd04241aef36f19b050fa}{print\_id}}(\textcolor{keyword}{const}\ TUniqueId\&\ \textcolor{keywordtype}{id});}
\DoxyCodeLine{00164\ std::string\ \mbox{\hyperlink{namespacedoris_ab0606cb3935fd04241aef36f19b050fa}{print\_id}}(\textcolor{keyword}{const}\ PUniqueId\&\ \textcolor{keywordtype}{id});}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \textcolor{comment}{//\ Parse\ 's'\ into\ a\ TUniqueId\ object.\ \ The\ format\ of\ s\ needs\ to\ be\ the\ output\ format}}
\DoxyCodeLine{00167\ \textcolor{comment}{//\ from\ PrintId.\ \ (<hi\_part>:<low\_part>)}}
\DoxyCodeLine{00168\ \textcolor{comment}{//\ Returns\ true\ if\ parse\ succeeded.}}
\DoxyCodeLine{00169\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacedoris_a73d0edf0652e7f3e09d8b55202a38a32}{parse\_id}}(\textcolor{keyword}{const}\ std::string\&\ s,\ TUniqueId*\ \textcolor{keywordtype}{id});}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \}\ \textcolor{comment}{//\ namespace\ doris}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00174\ \textcolor{keyword}{struct\ }std::hash<\mbox{\hyperlink{namespacedoris}{doris}}::UniqueId>\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structstd_1_1hash_3_01doris_1_1_unique_id_01_4_a88c4a34b4c811eb3e4891a97207ca05f}{operator()}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_unique_id}{doris::UniqueId}}\&\ uid)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ uid.\mbox{\hyperlink{structdoris_1_1_unique_id_aa8194be320c35dd95a128231b102032e}{hash}}();\ \}}
\DoxyCodeLine{00176\ \};}

\end{DoxyCode}
