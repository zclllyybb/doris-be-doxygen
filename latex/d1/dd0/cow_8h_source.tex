\hypertarget{cow_8h_source}{}\doxysection{cow.\+h}
\label{cow_8h_source}\index{/Users/dabowang/be\_all/vec/common/cow.h@{/Users/dabowang/be\_all/vec/common/cow.h}}
\mbox{\hyperlink{cow_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ This\ file\ is\ copied\ from}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ https://github.com/ClickHouse/ClickHouse/blob/master/src/Common/COW.h}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ and\ modified\ by\ Doris}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <initializer\_list>}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00084\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Derived>}
\DoxyCodeLine{00085\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w}{COW}}\ \{}
\DoxyCodeLine{00086\ \ \ \ \ std::atomic\_uint\ \mbox{\hyperlink{class_c_o_w_a99ea8f05f0564ac618b0620716b84949}{ref\_counter}};}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{class_c_o_w_adcb4ac757e9f4c458d04530fc4a21368}{COW}}()\ :\ \mbox{\hyperlink{class_c_o_w_a99ea8f05f0564ac618b0620716b84949}{ref\_counter}}(0)\ \{\}}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \mbox{\hyperlink{class_c_o_w_a7ff317a28ec404a9e90ed0fd32bbf630}{COW}}(\mbox{\hyperlink{class_c_o_w}{COW}}\ \textcolor{keyword}{const}\&)\ :\ \mbox{\hyperlink{class_c_o_w_a99ea8f05f0564ac618b0620716b84949}{ref\_counter}}(0)\ \{\}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{class_c_o_w}{COW}}\&\ \mbox{\hyperlink{class_c_o_w_aceff3043789d12d8f512d90511c88d11}{operator=}}(\mbox{\hyperlink{class_c_o_w}{COW}}\ \textcolor{keyword}{const}\&)\ \{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_c_o_w_a304ae13388fc1ef08b568f2c73c6485e}{add\_ref}}()\ \{\ ++\mbox{\hyperlink{class_c_o_w_a99ea8f05f0564ac618b0620716b84949}{ref\_counter}};\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_c_o_w_aac945929c99cd5b25c75e78907ee3ccc}{release\_ref}}()\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (-\/-\/\mbox{\hyperlink{class_c_o_w_a99ea8f05f0564ac618b0620716b84949}{ref\_counter}}\ ==\ 0)\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Derived*\textcolor{keyword}{>}(\textcolor{keyword}{this});}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00101\ \ \ \ \ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ Derived*\ \mbox{\hyperlink{class_c_o_w_a0a8a1ca0391807c6e9ef4a742c617dc4}{derived}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}Derived*\textcolor{keyword}{>}(\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keyword}{const}\ Derived*\ \mbox{\hyperlink{class_c_o_w_ab699c258e0b3c5e066ca118abc470d21}{derived}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Derived*\textcolor{keyword}{>}(\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_acd80d37ec8e859b9214adaa8cefa704d}{intrusive\_ptr}}()\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}(nullptr)\ \{\}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a51d564399f51cdce9bba0aefd88b6c0b}{intrusive\_ptr}}(\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}},\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_c_o_w_a304ae13388fc1ef08b568f2c73c6485e}{add\_ref}}\ =\ \textcolor{keyword}{true})\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}\ \&\&\ \mbox{\hyperlink{class_c_o_w_a304ae13388fc1ef08b568f2c73c6485e}{add\_ref}})\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((std::remove\_const\_t<T>*)\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})-\/>add\_ref();}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a913b4d8804c7b875780e08cbb6696ef7}{intrusive\_ptr}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr<U>}}\ \textcolor{keyword}{const}\&\ rhs)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}(rhs.\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_aed182ab5a4742a6fc2f9fe79773c12e1}{get}}())\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((std::remove\_const\_t<T>*)\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})-\/>add\_ref();}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_adc84a49ff8c01a48e532fec452a52336}{intrusive\_ptr}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\ \textcolor{keyword}{const}\&\ rhs)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}(rhs.\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_aed182ab5a4742a6fc2f9fe79773c12e1}{get}}())\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((std::remove\_const\_t<T>*)\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})-\/>add\_ref();}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_aa05bd94796531733d5c432c964de090c}{\string~intrusive\_ptr}}()\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((std::remove\_const\_t<T>*)\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})-\/>release\_ref();}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\&\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4eb76304c083c3111f4721c41b92eca5}{operator=}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr<U>}}\ \textcolor{keyword}{const}\&\ rhs)\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae0004efc13971afea5b6a3e1b4b58874}{intrusive\_ptr}}(rhs).swap(*\textcolor{keyword}{this});}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00142\ \textcolor{preprocessor}{\#if\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{00143\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ push}}
\DoxyCodeLine{00144\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ ignored\ "{}-\/Wuninitialized"{}}}
\DoxyCodeLine{00145\ \textcolor{preprocessor}{\#elif\ defined(\_\_GNUC\_\_)\ ||\ defined(\_\_GNUG\_\_)}}
\DoxyCodeLine{00146\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ push}}
\DoxyCodeLine{00147\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ ignored\ "{}-\/Wmaybe-\/uninitialized"{}}}
\DoxyCodeLine{00148\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a26f88276bb15a84ec9ca8335e2392395}{intrusive\_ptr}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\&\&\ rhs)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}(rhs.\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})\ \{\ rhs.t\ =\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\#if\ defined(\_\_clang\_\_)}}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#pragma\ clang\ diagnostic\ pop}}
\DoxyCodeLine{00152\ \textcolor{preprocessor}{\#elif\ defined(\_\_GNUC\_\_)\ ||\ defined(\_\_GNUG\_\_)}}
\DoxyCodeLine{00153\ \textcolor{preprocessor}{\#pragma\ GCC\ diagnostic\ pop}}
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\&\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a18237e565368725897a16cf8028793d5}{operator=}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\&\&\ rhs)\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae0004efc13971afea5b6a3e1b4b58874}{intrusive\_ptr}}(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\&\&\textcolor{keyword}{>}(rhs)).swap(*\textcolor{keyword}{this});}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ U>}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}};}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ U>}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a6a8dc0962c0c8a1136c2a49630ee3b79}{intrusive\_ptr}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr<U>}}\&\&\ rhs)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}(rhs.\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}})\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ rhs.t\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ U>}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\&\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a824f4fbc7f889130d5bf17e756f626d3}{operator=}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr<U>}}\&\&\ rhs)\ \{}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae0004efc13971afea5b6a3e1b4b58874}{intrusive\_ptr}}(\textcolor{keyword}{static\_cast<}\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr<U>}}\&\&\textcolor{keyword}{>}(rhs)).swap(*\textcolor{keyword}{this});}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\&\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_aab09783f114c291cd9be3589a7dcf347}{operator=}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\ \textcolor{keyword}{const}\&\ rhs)\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae0004efc13971afea5b6a3e1b4b58874}{intrusive\_ptr}}(rhs).swap(*\textcolor{keyword}{this});}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\&\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a6afee4b5580b3addd79c82712617e3b5}{operator=}}(\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ rhs)\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae0004efc13971afea5b6a3e1b4b58874}{intrusive\_ptr}}(rhs).swap(*\textcolor{keyword}{this});}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ad20897c5c8bd47f5d4005989bead0e55}{reset}}()\ \{\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae0004efc13971afea5b6a3e1b4b58874}{intrusive\_ptr}}().swap(*\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae45c33881e2548dea9c03729a885c690}{reset}}(\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ rhs)\ \{\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae0004efc13971afea5b6a3e1b4b58874}{intrusive\_ptr}}(rhs).swap(*\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a5b0cdf3fe9673c761102c7dce2f3c762}{reset}}(\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ rhs,\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_c_o_w_a304ae13388fc1ef08b568f2c73c6485e}{add\_ref}})\ \{\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae0004efc13971afea5b6a3e1b4b58874}{intrusive\_ptr}}(rhs,\ \mbox{\hyperlink{class_c_o_w_a304ae13388fc1ef08b568f2c73c6485e}{add\_ref}}).swap(*\textcolor{keyword}{this});\ \}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_aed182ab5a4742a6fc2f9fe79773c12e1}{get}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}};\ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ab920c13b7d94d4e0f4885295ca19575b}{detach}}()\ \{}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{doris__main_8cpp_ab07b31d4e8924e322ffed3f51d39e425}{ret}}\ =\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}};}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{doris__main_8cpp_ab07b31d4e8924e322ffed3f51d39e425}{ret}};}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a44699cfaad50d80a0521b05279c6c893}{swap}}(\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}\&\ rhs)\ \{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ tmp\ =\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}};}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}\ =\ rhs.\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}};}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ rhs.\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}\ =\ tmp;}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a6395a686c522428c4f0423f177adb1b7}{operator*}}()\ const\&\ \{\ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}};\ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\&\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_ae591d3981d8d89d64f253c38ebce83ee}{operator*}}()\ const\&\&\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}std::remove\_const\_t<T>\&\&\textcolor{keyword}{>}(*t);\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a84e9959608997de8fe4355def47ff45a}{operator-\/>}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}};\ \}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ bool()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}}\ !=\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}};\ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr_a4d7e34be5de3f6ccbc390e891f296cb6}{t}};}
\DoxyCodeLine{00216\ \ \ \ \ \};}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{mutable\_ptr}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}<T>\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{Base}}\ =\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr<T>}};}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}>}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w}{COW}};}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename},\ \textcolor{keyword}{typename}>}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w_helper}{COWHelper}};}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr_a0087f18305f1d31d8f6aef4bb4ffe89d}{mutable\_ptr}}(\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ ptr)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{Base}}(ptr)\ \{\}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr_ac6e2b139018ba5de4a96d1e90721a9c1}{mutable\_ptr}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{mutable\_ptr}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr_a4b16a5ca4f726d2782a250699f4c04c8}{mutable\_ptr}}(\mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{mutable\_ptr}}\&\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{mutable\_ptr}}\&\ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr_af84f496c6e165cff5c9c51a489a4f61a}{operator=}}(\mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{mutable\_ptr}}\&\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr_a2ce94c97c1e3ae49036289ccccc9aba5}{mutable\_ptr}}(\mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{mutable\_ptr<U>}}\&\&\ other)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{Base}}(std::move(other))\ \{\}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr_aa3264bc654ede56bbc422b087a8dd691}{mutable\_ptr}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr_a3d8b48ee2b60c9e6b95f96b4a173251b}{mutable\_ptr}}(std::nullptr\_t)\ \{\}}
\DoxyCodeLine{00246\ \ \ \ \ \};}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{MutablePtr}}\ =\ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{mutable\_ptr<Derived>}};}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_c_o_w_aace49c45a99318b57d3a1600635b8e89}{use\_count}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_a99ea8f05f0564ac618b0620716b84949}{ref\_counter}}.load();\ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr}}<const\ T>\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{Base}}\ =\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{intrusive\_ptr<const\ T>}};}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}>}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w}{COW}};}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename},\ \textcolor{keyword}{typename}>}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w_helper}{COWHelper}};}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_ac3305f2e58361efc4c61ed90152cc958}{immutable\_ptr}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ ptr)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{Base}}(ptr)\ \{\}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_a3e4bdaa759e9329082fc59fb6bdc024a}{immutable\_ptr}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr}}\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr}}\&\ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_a3898d73f8a0d06f74ee891d5f84a8acd}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr}}\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_a30e047d0384b6cac06e5818990429cd4}{immutable\_ptr}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr<U>}}\&\ other)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{Base}}(other)\ \{\}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_a204631ff3989586d1e9cda24df0c7e58}{immutable\_ptr}}(\mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr}}\&\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr}}\&\ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_a562a836c736c5b8b80df8e73f73438ea}{operator=}}(\mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr}}\&\&)\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_a340b53375b9fb962fcda7fa489b2e90b}{immutable\_ptr}}(\mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr<U>}}\&\&\ other)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{Base}}(std::move(other))\ \{\}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_adde234830a343e745b44396c13072626}{immutable\_ptr}}(\mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{mutable\_ptr<U>}}\&\&\ other)\ :\ \mbox{\hyperlink{class_c_o_w_1_1intrusive__ptr}{Base}}(std::move(other))\ \{\}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_a6be8edf5874a83866d637dae93450f0c}{immutable\_ptr}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{mutable\_ptr<U>}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_a54c8978f0da1615b606e13616702fbed}{immutable\_ptr}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr_a06806e2a86bbc2624ca32a7651e8499c}{immutable\_ptr}}(std::nullptr\_t)\ \{\}}
\DoxyCodeLine{00293\ \ \ \ \ \};}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{Ptr}}\ =\ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr<Derived>}};}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{MutablePtr}}\ \mbox{\hyperlink{class_c_o_w_aa14023f47995d24ce0ea777e90a4cb23}{create}}(Args\&\&...\ \mbox{\hyperlink{structargs}{args}})\ \{}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_adfc3e84da89b27b9efa22c1e0691fa87}{MutablePtr}}(\textcolor{keyword}{new}\ Derived(std::forward<Args>(\mbox{\hyperlink{structargs}{args}})...));}
\DoxyCodeLine{00301\ \ \ \ \ \}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{MutablePtr}}\ \mbox{\hyperlink{class_c_o_w_a8e4d809f9f16a3aae70f2ad22e8aa2d2}{create}}(std::initializer\_list<T>\&\&\ \mbox{\hyperlink{threadlocal_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}})\ \{}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_aa14023f47995d24ce0ea777e90a4cb23}{create}}(std::forward<std::initializer\_list<T>>(\mbox{\hyperlink{threadlocal_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}}));}
\DoxyCodeLine{00306\ \ \ \ \ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00309\ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{Ptr}}\ \mbox{\hyperlink{class_c_o_w_acedef9a1098c617ad7cce08beda367d5}{get\_ptr}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_aa0844a1c7ef409ff7301a0e805b097f4}{Ptr}}(\mbox{\hyperlink{class_c_o_w_a0a8a1ca0391807c6e9ef4a742c617dc4}{derived}}());\ \}}
\DoxyCodeLine{00310\ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{MutablePtr}}\ \mbox{\hyperlink{class_c_o_w_a8c0a81f654bf5a407ac29dd0edb27bb5}{get\_ptr}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_adfc3e84da89b27b9efa22c1e0691fa87}{MutablePtr}}(\mbox{\hyperlink{class_c_o_w_a0a8a1ca0391807c6e9ef4a742c617dc4}{derived}}());\ \}}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00313\ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{MutablePtr}}\ \mbox{\hyperlink{class_c_o_w_ad047853e449e6932f2bc7b8020e1b273}{shallow\_mutate}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>\mbox{\hyperlink{class_c_o_w_aace49c45a99318b57d3a1600635b8e89}{use\_count}}()\ >\ 1)\ \{}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_a0a8a1ca0391807c6e9ef4a742c617dc4}{derived}}()-\/>clone();}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_ade206b8984a3bec01eb7412e6076e813}{assume\_mutable}}();}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00319\ \ \ \ \ \}}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00322\ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{MutablePtr}}\ \mbox{\hyperlink{class_c_o_w_a8b5fe4e17cc0aefcc974d3af422918d1}{mutate}}()\ const\&\&\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_ad047853e449e6932f2bc7b8020e1b273}{shallow\_mutate}}();\ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1mutable__ptr}{MutablePtr}}\ \mbox{\hyperlink{class_c_o_w_ade206b8984a3bec01eb7412e6076e813}{assume\_mutable}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{class_c_o_w}{COW}}*\textcolor{keyword}{>}(\textcolor{keyword}{this})-\/>\mbox{\hyperlink{class_c_o_w_acedef9a1098c617ad7cce08beda367d5}{get\_ptr}}();\ \}}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ Derived\&\ \mbox{\hyperlink{class_c_o_w_a99c0ad5c2ddd8b7522956be31b953aba}{assume\_mutable\_ref}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}Derived\&\textcolor{keyword}{>}(*\mbox{\hyperlink{class_c_o_w_a0a8a1ca0391807c6e9ef4a742c617dc4}{derived}}());\ \}}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr}{chameleon\_ptr}}\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr<T>}}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}};}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_af4c58dfd0f56bc2b3819f2413ea931c8}{chameleon\_ptr}}(Args\&\&...\ \mbox{\hyperlink{structargs}{args}})\ :\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}}(std::forward<Args>(\mbox{\hyperlink{structargs}{args}})...)\ \{\}}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ U>}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a1824c09be8a6dd94fbad699bd8d85dc7}{chameleon\_ptr}}(std::initializer\_list<U>\&\&\ \mbox{\hyperlink{threadlocal_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}})}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}}(std::forward<std::initializer\_list<U>>(\mbox{\hyperlink{threadlocal_8cc_a9ce2ec4812a92cb6ab39f6e81e9173a9}{arg}}))\ \{\}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_aebf515b783686e5302b6e52f4ed35981}{get}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}}.get();\ \}}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a04ddccce7102c0f434702f33f534a87c}{get}}()\ \{\ \textcolor{keywordflow}{return}\ \&\mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}}-\/>assume\_mutable\_ref();\ \}}
\DoxyCodeLine{00345\ }
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_abaade5c780b539b94de660e314cb0c90}{operator-\/>}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_aebf515b783686e5302b6e52f4ed35981}{get}}();\ \}}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}*\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a4442b1b9eab40e7939e1e01cdedcb7ae}{operator-\/>}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_aebf515b783686e5302b6e52f4ed35981}{get}}();\ \}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a241c04e3ce86e1fd5a946eb2aa8b1f22}{operator*}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}};\ \}}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3f534efce0b043d603eb8f5653268e7d}{operator*}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}}-\/>assume\_mutable\_ref();\ \}}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr<T>}}\&()\ \textcolor{keyword}{const}\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}};\ \}}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ \mbox{\hyperlink{class_c_o_w_1_1immutable__ptr}{immutable\_ptr<T>}}\&()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}};\ \}}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ bool()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}}\ !=\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a61efd4196a96540ee018fee8791f3f10}{operator!}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}}\ ==\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a5cfc2b9426bb635f8fa7b5fd3b802d82}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr}{chameleon\_ptr}}\&\ rhs)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}}\ ==\ rhs.\mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}};\ \}}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a511a51cff715090b9d2942630aea9769}{operator!=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr}{chameleon\_ptr}}\&\ rhs)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}}\ !=\ rhs.\mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr_a3369ec235aa2be5c15afe5f5e60db382}{value}};\ \}}
\DoxyCodeLine{00360\ \ \ \ \ \};}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00362\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr}{WrappedPtr}}\ =\ \mbox{\hyperlink{class_c_o_w_1_1chameleon__ptr}{chameleon\_ptr<Derived>}};}
\DoxyCodeLine{00377\ \};}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00404\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Base,\ \textcolor{keyword}{typename}\ Derived>}
\DoxyCodeLine{00405\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_c_o_w_helper}{COWHelper}}\ :\ \textcolor{keyword}{public}\ Base\ \{}
\DoxyCodeLine{00406\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_c_o_w_helper_a1856c9e7bc739cede88bb132c680ceb5}{Ptr}}\ =\ \textcolor{keyword}{typename}\ Base::template\ immutable\_ptr<Derived>;}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_c_o_w_helper_a2f75f23217033d3e71f2f8a4d1bc28f2}{MutablePtr}}\ =\ \textcolor{keyword}{typename}\ Base::template\ mutable\_ptr<Derived>;}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_c_o_w_helper_a2f75f23217033d3e71f2f8a4d1bc28f2}{MutablePtr}}\ \mbox{\hyperlink{class_c_o_w_helper_aa14023f47995d24ce0ea777e90a4cb23}{create}}(Args\&\&...\ \mbox{\hyperlink{structargs}{args}})\ \{}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_helper_a2f75f23217033d3e71f2f8a4d1bc28f2}{MutablePtr}}(\textcolor{keyword}{new}\ Derived(std::forward<Args>(\mbox{\hyperlink{structargs}{args}})...));}
\DoxyCodeLine{00413\ \ \ \ \ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \ \ \ \ \textcolor{keyword}{typename}\ Base::MutablePtr\ \mbox{\hyperlink{class_c_o_w_helper_aeb7255b2cd975080d84a4e9bb4cb06e7}{clone}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{typename}\ Base::MutablePtr(\textcolor{keyword}{new}\ Derived(\textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }Derived\&\textcolor{keyword}{>}(*\textcolor{keyword}{this})));}
\DoxyCodeLine{00417\ \ \ \ \ \}}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00420\ \ \ \ \ \mbox{\hyperlink{class_c_o_w_helper_a2f75f23217033d3e71f2f8a4d1bc28f2}{MutablePtr}}\ \mbox{\hyperlink{class_c_o_w_helper_ad047853e449e6932f2bc7b8020e1b273}{shallow\_mutate}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_c_o_w_helper_a2f75f23217033d3e71f2f8a4d1bc28f2}{MutablePtr}}(\textcolor{keyword}{static\_cast<}Derived*\textcolor{keyword}{>}(Base::shallow\_mutate().get()));}
\DoxyCodeLine{00422\ \ \ \ \ \}}
\DoxyCodeLine{00423\ \};}

\end{DoxyCode}
