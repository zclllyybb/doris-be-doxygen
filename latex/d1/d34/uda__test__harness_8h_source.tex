\hypertarget{uda__test__harness_8h_source}{}\doxysection{uda\+\_\+test\+\_\+harness.\+h}
\label{uda__test__harness_8h_source}\index{/Users/dabowang/be\_all/udf/uda\_test\_harness.h@{/Users/dabowang/be\_all/udf/uda\_test\_harness.h}}
\mbox{\hyperlink{uda__test__harness_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ This\ file\ is\ copied\ from}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ https://github.com/apache/impala/blob/branch-\/2.9.0/be/src/udf/uda-\/test-\/harness.h}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ and\ modified\ by\ Doris}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{udf_8h}{udf/udf.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{udf__debug_8h}{udf/udf\_debug.h}}"{}}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris__udf}{doris\_udf}}\ \{}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895b}{UdaExecutionMode}}\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895bab1d5eac4b1dca480c8056eaea7663b7a}{ALL}}\ =\ 0,}
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895ba12b201c9d629173ab9233f911d22330d}{SINGLE\_NODE}}\ =\ 1,}
\DoxyCodeLine{00035\ \ \ \ \ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895baf903fa02276fd31c3c41b458fa3a95b5}{ONE\_LEVEL}}\ =\ 2,}
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895ba654cef2ce80e95d6413870d6eeda3512}{TWO\_LEVEL}}\ =\ 3,}
\DoxyCodeLine{00037\ \};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RESULT,\ \textcolor{keyword}{typename}\ INTERMEDIATE>}
\DoxyCodeLine{00040\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{UdaTestHarnessBase}}\ \{}
\DoxyCodeLine{00041\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{typedef}\ void\ (*\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a88f3e984bbf5e72597f3a3d3f223914d}{InitFn}})(\mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ INTERMEDIATE*\ result);}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{typedef}\ void\ (*\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a71b744089813ebc2ac5886ee04c8191d}{MergeFn}})(\mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ \textcolor{keyword}{const}\ INTERMEDIATE\&\ src,\ INTERMEDIATE*\ dst);}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{const}\ INTERMEDIATE\ (*\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_accc447a57fd72e96f3f2d92990a91ba6}{SerializeFn}})(\mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ \textcolor{keyword}{const}\ INTERMEDIATE\&\ type);}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{typedef}\ RESULT\ (*\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a166c496537c014aa16adfb5ffa91d7a4}{FinalizeFn}})(\mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ \textcolor{keyword}{const}\ INTERMEDIATE\&\ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}});}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{comment}{//\ UDA\ test\ harness\ allows\ for\ custom\ comparator\ to\ validate\ results.\ UDAs}}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ can\ specify\ a\ custom\ comparator\ to,\ for\ example,\ tolerate\ numerical\ imprecision.}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ x\ and\ y\ should\ be\ treated\ as\ equal.}}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{typedef}\ bool\ (*\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ac14cf2db784a8b3aec17fe5239e1daef}{ResultComparator}})(\textcolor{keyword}{const}\ RESULT\&\ x,\ \textcolor{keyword}{const}\ RESULT\&\ y);}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a273e8b1025b5f0a61e0ea1e3659733cf}{set\_result\_comparator}}(\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ac14cf2db784a8b3aec17fe5239e1daef}{ResultComparator}}\ fn)\ \{\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a30476fac1a2139c526db15f882fa5d75}{\_result\_comparator\_fn}}\ =\ fn;\ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ This\ must\ be\ called\ if\ the\ INTERMEDIATE\ is\ TYPE\_FIXED\_BUFFER}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_aff1f27b4bf767cc9479a9c5301183ca4}{set\_intermediate\_size}}(\textcolor{keywordtype}{int}\ byte\_size)\ \{\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a45e487034004aac74b2a1a1ab6fcbc86}{\_fixed\_buffer\_byte\_size}}\ =\ byte\_size;\ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ Returns\ the\ failure\ string\ if\ any.}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ac22eb80bbaaf0f7c2da31d68aa0d4d0c}{get\_error\_msg}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a39a03621f91d77541a5f89806d11b35f}{\_error\_msg}};\ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a3fe1948b219dff1ca21a7ea860e9822f}{UdaTestHarnessBase}}(\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a88f3e984bbf5e72597f3a3d3f223914d}{InitFn}}\ init\_fn,\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a71b744089813ebc2ac5886ee04c8191d}{MergeFn}}\ merge\_fn,\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_accc447a57fd72e96f3f2d92990a91ba6}{SerializeFn}}\ serialize\_fn,}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a166c496537c014aa16adfb5ffa91d7a4}{FinalizeFn}}\ finalize\_fn)}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ae3fbb5232baa0718793936d92229ac91}{\_init\_fn}}(init\_fn),}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a18ce60d4f98d34fe5796da3fe21e3494}{\_merge\_fn}}(merge\_fn),}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ac6d544e3c17e5096abbb52d27db0d402}{\_serialize\_fn}}(serialize\_fn),}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a6e5987dcf900296a9dc5f376e92cd6c0}{\_finalize\_fn}}(finalize\_fn),}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a30476fac1a2139c526db15f882fa5d75}{\_result\_comparator\_fn}}(nullptr),}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a9a65a1d5ab6fdf09b48e1be3ef5fa5f1}{\_num\_input\_values}}(0)\ \{\}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA\ in\ all\ the\ modes,\ validating\ the\ result\ is\ 'expected'\ each\ time.}}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ac91d478ecc5fc53d2bfdfd5bc779d413}{execute}}(\textcolor{keyword}{const}\ RESULT\&\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895b}{UdaExecutionMode}}\ mode);}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ Returns\ false\ if\ there\ is\ an\ error\ set\ in\ the\ context.}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a1daea0cf8f86a0a6991e2c22698c7504}{check\_context}}(\mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context);}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{comment}{//\ Verifies\ x\ ==\ y,\ using\ the\ custom\ comparator\ if\ set.}}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a72b9d0e1e11e4604341ef62da000db61}{check\_result}}(\textcolor{keyword}{const}\ RESULT\&\ x,\ \textcolor{keyword}{const}\ RESULT\&\ y);}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA\ on\ a\ single\ node.\ The\ entire\ execution\ happens\ in\ 1\ context.}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{//\ The\ UDA\ does\ a\ update\ on\ all\ the\ input\ values\ and\ then\ a\ finalize.}}
\DoxyCodeLine{00084\ \ \ \ \ RESULT\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a776a8e8eefad9a855a0795918b2f3c5b}{execute\_single\_node}}();}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA,\ simulating\ a\ single\ level\ aggregation.\ The\ values\ are\ processed}}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{//\ on\ num\_nodes\ +\ 1\ contexts.\ There\ are\ num\_nodes\ that\ do\ update\ and\ serialize.}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ There\ is\ a\ final\ context\ that\ does\ merge\ and\ finalize.}}
\DoxyCodeLine{00089\ \ \ \ \ RESULT\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a4c7e782b79d70664cc097da2b6a51322}{execute\_one\_level}}(\textcolor{keywordtype}{int}\ num\_nodes);}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA,\ simulating\ a\ two\ level\ aggregation\ with\ num1\ in\ the\ first\ level\ and}}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{comment}{//\ num2\ in\ the\ second.\ The\ values\ are\ processed\ in\ num1\ +\ num2\ contexts.}}
\DoxyCodeLine{00093\ \ \ \ \ RESULT\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_aa1fe5682203f2dcfd8fa9ed05ff17328}{execute\_two\_level}}(\textcolor{keywordtype}{int}\ num1,\ \textcolor{keywordtype}{int}\ num2);}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ac3ab9e8650c2c57838e1876cb86fd3e4}{update}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{rowset__tree_8cpp_ae40354a1051342eb5a9db005715dcfa9}{idx}},\ \mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ INTERMEDIATE*\ dst)\ =\ 0;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{comment}{//\ UDA\ functions}}
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a88f3e984bbf5e72597f3a3d3f223914d}{InitFn}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ae3fbb5232baa0718793936d92229ac91}{\_init\_fn}};}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a71b744089813ebc2ac5886ee04c8191d}{MergeFn}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a18ce60d4f98d34fe5796da3fe21e3494}{\_merge\_fn}};}
\DoxyCodeLine{00101\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_accc447a57fd72e96f3f2d92990a91ba6}{SerializeFn}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ac6d544e3c17e5096abbb52d27db0d402}{\_serialize\_fn}};}
\DoxyCodeLine{00102\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a166c496537c014aa16adfb5ffa91d7a4}{FinalizeFn}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a6e5987dcf900296a9dc5f376e92cd6c0}{\_finalize\_fn}};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{comment}{//\ Customer\ comparator,\ nullptr\ if\ default\ ==\ should\ be\ used.}}
\DoxyCodeLine{00105\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ac14cf2db784a8b3aec17fe5239e1daef}{ResultComparator}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a30476fac1a2139c526db15f882fa5d75}{\_result\_comparator\_fn}};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{comment}{//\ Set\ during\ execute()\ by\ subclass}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a9a65a1d5ab6fdf09b48e1be3ef5fa5f1}{\_num\_input\_values}};}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{//\ Buffer\ len\ for\ intermediate\ results\ if\ the\ type\ is\ TYPE\_FIXED\_BUFFER}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a45e487034004aac74b2a1a1ab6fcbc86}{\_fixed\_buffer\_byte\_size}};}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{comment}{//\ Error\ message\ if\ anything\ went\ wrong\ during\ the\ execution.}}
\DoxyCodeLine{00114\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a39a03621f91d77541a5f89806d11b35f}{\_error\_msg}};}
\DoxyCodeLine{00115\ \};}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RESULT,\ \textcolor{keyword}{typename}\ INTERMEDIATE,\ \textcolor{keyword}{typename}\ INPUT>}
\DoxyCodeLine{00118\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness}{UdaTestHarness}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{UdaTestHarnessBase}}<RESULT,\ INTERMEDIATE>\ \{}
\DoxyCodeLine{00119\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keyword}{typedef}\ void\ (*\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_ae60ded5f9d72a53d4a9aa7db69f73ba3}{UpdateFn}})(\mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ \textcolor{keyword}{const}\ INPUT\&\ input,\ INTERMEDIATE*\ result);}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{UdaTestHarnessBase<RESULT,\ INTERMEDIATE>}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a3f57471242dacf5ab97d93225d8455a8}{BaseClass}};}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_aa0c766d9ed425ba770ce7c5b74d72a36}{UdaTestHarness}}(\textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a88f3e984bbf5e72597f3a3d3f223914d}{BaseClass::InitFn}}\ init\_fn,\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_ae60ded5f9d72a53d4a9aa7db69f73ba3}{UpdateFn}}\ update\_fn,}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a71b744089813ebc2ac5886ee04c8191d}{BaseClass::MergeFn}}\ merge\_fn,}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_accc447a57fd72e96f3f2d92990a91ba6}{BaseClass::SerializeFn}}\ serialize\_fn,}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a166c496537c014aa16adfb5ffa91d7a4}{BaseClass::FinalizeFn}}\ finalize\_fn)}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{BaseClass}}(init\_fn,\ merge\_fn,\ serialize\_fn,\ finalize\_fn),\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_aa703788249562df673549273298a0d4f}{\_update\_fn}}(update\_fn)\ \{\}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a9f718f1d1495a708e1b4915df308ed72}{execute}}(\textcolor{keyword}{const}\ std::vector<INPUT>\&\ values,\ \textcolor{keyword}{const}\ RESULT\&\ expected)\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a9f718f1d1495a708e1b4915df308ed72}{execute}}(values,\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895bab1d5eac4b1dca480c8056eaea7663b7a}{ALL}});}
\DoxyCodeLine{00132\ \ \ \ \ \}}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA\ in\ all\ the\ modes,\ validating\ the\ result\ is\ 'expected'\ each\ time.}}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_accb32e3ca06ad6a89fe2d5df88341717}{execute}}(\textcolor{keyword}{const}\ std::vector<INPUT>\&\ values,\ \textcolor{keyword}{const}\ RESULT\&\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895b}{UdaExecutionMode}}\ mode);}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA\ in\ all\ the\ modes,\ validating\ the\ result\ is\ 'expected'\ each\ time.}}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{comment}{//\ T\ needs\ to\ be\ compatible\ (i.e.\ castable\ to)\ with\ INPUT}}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a500c6b1704bfca15598df9f1183738f7}{execute}}(\textcolor{keyword}{const}\ std::vector<T>\&\ values,\ \textcolor{keyword}{const}\ RESULT\&\ expected)\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a9f718f1d1495a708e1b4915df308ed72}{execute}}(values,\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895bab1d5eac4b1dca480c8056eaea7663b7a}{ALL}});}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a7cf34103e8d3e3f2121678e81c5ab2a0}{execute}}(\textcolor{keyword}{const}\ std::vector<T>\&\ values,\ \textcolor{keyword}{const}\ RESULT\&\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895b}{UdaExecutionMode}}\ mode)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a2d1ef3cd2cf55eae253022547622573b}{\_input}}.resize(values.size());}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a9a65a1d5ab6fdf09b48e1be3ef5fa5f1}{BaseClass::\_num\_input\_values}}\ =\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a2d1ef3cd2cf55eae253022547622573b}{\_input}}.size();}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ values.size();\ ++i)\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a2d1ef3cd2cf55eae253022547622573b}{\_input}}[i]\ =\ \&values[i];}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_ac91d478ecc5fc53d2bfdfd5bc779d413}{BaseClass::execute}}(expected,\ mode);}
\DoxyCodeLine{00152\ \ \ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a5ae3abd4958c581e92ae9d2904bc1c03}{update}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{rowset__tree_8cpp_ae40354a1051342eb5a9db005715dcfa9}{idx}},\ \mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ INTERMEDIATE*\ dst);}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00158\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_ae60ded5f9d72a53d4a9aa7db69f73ba3}{UpdateFn}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_aa703788249562df673549273298a0d4f}{\_update\_fn}};}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{comment}{//\ Set\ during\ execute()}}
\DoxyCodeLine{00160\ \ \ \ \ std::vector<const\ INPUT*>\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_a2d1ef3cd2cf55eae253022547622573b}{\_input}};}
\DoxyCodeLine{00161\ \};}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RESULT,\ \textcolor{keyword}{typename}\ INTERMEDIATE,\ \textcolor{keyword}{typename}\ INPUT1,\ \textcolor{keyword}{typename}\ INPUT2>}
\DoxyCodeLine{00164\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2}{UdaTestHarness2}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{UdaTestHarnessBase}}<RESULT,\ INTERMEDIATE>\ \{}
\DoxyCodeLine{00165\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{typedef}\ void\ (*\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_ae488cbdaca5fbb0209b5431b9ff45e45}{UpdateFn}})(\mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ \textcolor{keyword}{const}\ INPUT1\&\ input1,\ \textcolor{keyword}{const}\ INPUT2\&\ input2,}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ INTERMEDIATE*\ result);}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{UdaTestHarnessBase<RESULT,\ INTERMEDIATE>}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_a3f57471242dacf5ab97d93225d8455a8}{BaseClass}};}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_ac871e7ec10d9e67987b94715546fabd0}{\string~UdaTestHarness2}}()\ \{\}}
\DoxyCodeLine{00172\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_a2090824a2989bb3efe28c505b1f516b6}{UdaTestHarness2}}(\textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a88f3e984bbf5e72597f3a3d3f223914d}{BaseClass::InitFn}}\ init\_fn,\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_ae488cbdaca5fbb0209b5431b9ff45e45}{UpdateFn}}\ update\_fn,}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a71b744089813ebc2ac5886ee04c8191d}{BaseClass::MergeFn}}\ merge\_fn,}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_accc447a57fd72e96f3f2d92990a91ba6}{BaseClass::SerializeFn}}\ serialize\_fn,}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a166c496537c014aa16adfb5ffa91d7a4}{BaseClass::FinalizeFn}}\ finalize\_fn)}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{BaseClass}}(init\_fn,\ merge\_fn,\ serialize\_fn,\ finalize\_fn),\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_aa703788249562df673549273298a0d4f}{\_update\_fn}}(update\_fn)\ \{\}}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA\ in\ all\ the\ modes,\ validating\ the\ result\ is\ 'expected'\ each\ time.}}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_aa74c20afa132e4f2b2e91963452d1d32}{execute}}(\textcolor{keyword}{const}\ std::vector<INPUT1>\&\ values1,\ \textcolor{keyword}{const}\ std::vector<INPUT2>\&\ values2,}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ RESULT\&\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895b}{UdaExecutionMode}}\ mode);}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_afde90c79d03f424e51efb8d65ef0d366}{execute}}(\textcolor{keyword}{const}\ std::vector<INPUT1>\&\ values1,\ \textcolor{keyword}{const}\ std::vector<INPUT2>\&\ values2,}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ RESULT\&\ expected)\ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_aa74c20afa132e4f2b2e91963452d1d32}{execute}}(values1,\ values2,\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895bab1d5eac4b1dca480c8056eaea7663b7a}{ALL}});}
\DoxyCodeLine{00185\ \ \ \ \ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_a5ae3abd4958c581e92ae9d2904bc1c03}{update}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{rowset__tree_8cpp_ae40354a1051342eb5a9db005715dcfa9}{idx}},\ \mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ INTERMEDIATE*\ dst);}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00191\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_ae488cbdaca5fbb0209b5431b9ff45e45}{UpdateFn}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_aa703788249562df673549273298a0d4f}{\_update\_fn}};}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT1>*\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_ade9f260c278d65a9395dcfef84df1881}{\_input1}};}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT2>*\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness2_aff84d3625176f920c06aba37272f83ff}{\_input2}};}
\DoxyCodeLine{00194\ \};}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RESULT,\ \textcolor{keyword}{typename}\ INTERMEDIATE,\ \textcolor{keyword}{typename}\ INPUT1,\ \textcolor{keyword}{typename}\ INPUT2,\ \textcolor{keyword}{typename}\ INPUT3>}
\DoxyCodeLine{00197\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3}{UdaTestHarness3}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{UdaTestHarnessBase}}<RESULT,\ INTERMEDIATE>\ \{}
\DoxyCodeLine{00198\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keyword}{typedef}\ void\ (*\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_a0da5d19f2779776ac82664e8d10a4576}{UpdateFn}})(\mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ \textcolor{keyword}{const}\ INPUT1\&\ input1,\ \textcolor{keyword}{const}\ INPUT2\&\ input2,}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ INPUT3\&\ input3,\ INTERMEDIATE*\ result);}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{UdaTestHarnessBase<RESULT,\ INTERMEDIATE>}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_a3f57471242dacf5ab97d93225d8455a8}{BaseClass}};}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_a6a6de6293bab4de4bd6e431e34378675}{\string~UdaTestHarness3}}()\ \{\}}
\DoxyCodeLine{00205\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_aeccffcef9333008543d4b633275471e5}{UdaTestHarness3}}(\textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a88f3e984bbf5e72597f3a3d3f223914d}{BaseClass::InitFn}}\ init\_fn,\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_a0da5d19f2779776ac82664e8d10a4576}{UpdateFn}}\ update\_fn,}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a71b744089813ebc2ac5886ee04c8191d}{BaseClass::MergeFn}}\ merge\_fn,}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_accc447a57fd72e96f3f2d92990a91ba6}{BaseClass::SerializeFn}}\ serialize\_fn,}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a166c496537c014aa16adfb5ffa91d7a4}{BaseClass::FinalizeFn}}\ finalize\_fn)}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{BaseClass}}(init\_fn,\ merge\_fn,\ serialize\_fn,\ finalize\_fn),\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_aa703788249562df673549273298a0d4f}{\_update\_fn}}(update\_fn)\ \{\}}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA\ in\ all\ the\ modes,\ validating\ the\ result\ is\ 'expected'\ each\ time.}}
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_ad0501559e156e03318233d031b95cc83}{execute}}(\textcolor{keyword}{const}\ std::vector<INPUT1>\&\ values1,\ \textcolor{keyword}{const}\ std::vector<INPUT2>\&\ values2,}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT3>\&\ values3,\ \textcolor{keyword}{const}\ RESULT\&\ expected)\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_ad0501559e156e03318233d031b95cc83}{execute}}(values1,\ values2,\ values3,\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895bab1d5eac4b1dca480c8056eaea7663b7a}{ALL}});}
\DoxyCodeLine{00215\ \ \ \ \ \}}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA\ in\ all\ the\ modes,\ validating\ the\ result\ is\ 'expected'\ each\ time.}}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_a1a6ee634e19ad992525b1926e44e4c85}{execute}}(\textcolor{keyword}{const}\ std::vector<INPUT1>\&\ values1,\ \textcolor{keyword}{const}\ std::vector<INPUT2>\&\ values2,}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT3>\&\ values3,\ \textcolor{keyword}{const}\ RESULT\&\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895b}{UdaExecutionMode}}\ mode);}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_a5ae3abd4958c581e92ae9d2904bc1c03}{update}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{rowset__tree_8cpp_ae40354a1051342eb5a9db005715dcfa9}{idx}},\ \mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ INTERMEDIATE*\ dst);}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00224\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_a0da5d19f2779776ac82664e8d10a4576}{UpdateFn}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_aa703788249562df673549273298a0d4f}{\_update\_fn}};}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT1>*\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_ade9f260c278d65a9395dcfef84df1881}{\_input1}};}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT2>*\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_aff84d3625176f920c06aba37272f83ff}{\_input2}};}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT3>*\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness3_aa53bc48168554134761b6d54c04c49a0}{\_input3}};}
\DoxyCodeLine{00228\ \};}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RESULT,\ \textcolor{keyword}{typename}\ INTERMEDIATE,\ \textcolor{keyword}{typename}\ INPUT1,\ \textcolor{keyword}{typename}\ INPUT2,\ \textcolor{keyword}{typename}\ INPUT3,}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ INPUT4>}
\DoxyCodeLine{00232\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4}{UdaTestHarness4}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{UdaTestHarnessBase}}<RESULT,\ INTERMEDIATE>\ \{}
\DoxyCodeLine{00233\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keyword}{typedef}\ void\ (*\mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a580eebb8f422ffad60c8779b4db3381e}{UpdateFn}})(\mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ \textcolor{keyword}{const}\ INPUT1\&\ input1,\ \textcolor{keyword}{const}\ INPUT2\&\ input2,}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ INPUT3\&\ input3,\ \textcolor{keyword}{const}\ INPUT4\&\ input4,\ INTERMEDIATE*\ result);}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{UdaTestHarnessBase<RESULT,\ INTERMEDIATE>}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a3f57471242dacf5ab97d93225d8455a8}{BaseClass}};}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a04801a8e713818513e74763a8667b370}{\string~UdaTestHarness4}}()\ \{\}}
\DoxyCodeLine{00240\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a68247a85e742d79e95c5ae75867911c2}{UdaTestHarness4}}(\textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a88f3e984bbf5e72597f3a3d3f223914d}{BaseClass::InitFn}}\ init\_fn,\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a580eebb8f422ffad60c8779b4db3381e}{UpdateFn}}\ update\_fn,}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a71b744089813ebc2ac5886ee04c8191d}{BaseClass::MergeFn}}\ merge\_fn,}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_accc447a57fd72e96f3f2d92990a91ba6}{BaseClass::SerializeFn}}\ serialize\_fn,}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base_a166c496537c014aa16adfb5ffa91d7a4}{BaseClass::FinalizeFn}}\ finalize\_fn)}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness_base}{BaseClass}}(init\_fn,\ merge\_fn,\ serialize\_fn,\ finalize\_fn),\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_aa703788249562df673549273298a0d4f}{\_update\_fn}}(update\_fn)\ \{\}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA\ in\ all\ the\ modes,\ validating\ the\ result\ is\ 'expected'\ each\ time.}}
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a7fe46b25e92dd98519bccad4b5d9645f}{execute}}(\textcolor{keyword}{const}\ std::vector<INPUT1>\&\ values1,\ \textcolor{keyword}{const}\ std::vector<INPUT2>\&\ values2,}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT3>\&\ values3,\ \textcolor{keyword}{const}\ std::vector<INPUT4>\&\ values4,}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ RESULT\&\ expected)\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a7fe46b25e92dd98519bccad4b5d9645f}{execute}}(values1,\ values2,\ values3,\ values4,\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895bab1d5eac4b1dca480c8056eaea7663b7a}{ALL}});}
\DoxyCodeLine{00251\ \ \ \ \ \}}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{comment}{//\ Runs\ the\ UDA\ in\ all\ the\ modes,\ validating\ the\ result\ is\ 'expected'\ each\ time.}}
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a7d319635d00f6242876735be9050f7c6}{execute}}(\textcolor{keyword}{const}\ std::vector<INPUT1>\&\ values1,\ \textcolor{keyword}{const}\ std::vector<INPUT2>\&\ values2,}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT3>\&\ values3,\ \textcolor{keyword}{const}\ std::vector<INPUT4>\&\ values4,}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ RESULT\&\ expected,\ \mbox{\hyperlink{namespacedoris__udf_a93bf3792d1006a8555209db39ee4895b}{UdaExecutionMode}}\ mode);}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a5ae3abd4958c581e92ae9d2904bc1c03}{update}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{rowset__tree_8cpp_ae40354a1051342eb5a9db005715dcfa9}{idx}},\ \mbox{\hyperlink{classdoris__udf_1_1_function_context}{FunctionContext}}*\ context,\ INTERMEDIATE*\ dst);}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00260\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00261\ \ \ \ \ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a580eebb8f422ffad60c8779b4db3381e}{UpdateFn}}\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_aa703788249562df673549273298a0d4f}{\_update\_fn}};}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT1>*\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_ade9f260c278d65a9395dcfef84df1881}{\_input1}};}
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT2>*\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_aff84d3625176f920c06aba37272f83ff}{\_input2}};}
\DoxyCodeLine{00264\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT3>*\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_aa53bc48168554134761b6d54c04c49a0}{\_input3}};}
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<INPUT4>*\ \mbox{\hyperlink{classdoris__udf_1_1_uda_test_harness4_a41b91c3c67121c24237023e003d72327}{\_input4}};}
\DoxyCodeLine{00266\ \};}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \}\ \textcolor{comment}{//\ namespace\ doris\_udf}}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \textcolor{preprocessor}{\#include\ "{}udf/uda\_test\_harness\_impl.hpp"{}}}

\end{DoxyCode}
