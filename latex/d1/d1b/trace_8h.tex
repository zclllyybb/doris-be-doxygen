\hypertarget{trace_8h}{}\doxysection{/\+Users/dabowang/be\+\_\+all/util/trace.h 文件参考}
\label{trace_8h}\index{/Users/dabowang/be\_all/util/trace.h@{/Users/dabowang/be\_all/util/trace.h}}
{\ttfamily \#include $<$rapidjson/writer.\+h$>$}\newline
{\ttfamily \#include $<$iosfwd$>$}\newline
{\ttfamily \#include $<$memory$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$utility$>$}\newline
{\ttfamily \#include \char`\"{}gutil/macros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gutil/ref\+\_\+counted.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gutil/strings/stringpiece.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gutil/strings/substitute.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gutil/threading/thread\+\_\+collision\+\_\+warner.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}util/spinlock.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}util/time.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}util/trace\+\_\+metrics.\+h\char`\"{}}\newline
trace.\+h 的引用(Include)关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dc/d8d/trace_8h__incl}
\end{center}
\end{figure}
此图展示该文件直接或间接的被哪些文件引用了\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/dda/trace_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classdoris_1_1_trace}{Trace}}
\item 
class \mbox{\hyperlink{classdoris_1_1_scoped_adopt_trace}{Scoped\+Adopt\+Trace}}
\item 
class \mbox{\hyperlink{classdoris_1_1_scoped_trace_latency_counter}{Scoped\+Trace\+Latency\+Counter}}
\end{DoxyCompactItemize}
\doxysubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespacedoris}{doris}}
\begin{DoxyCompactList}\small\item\em Utilities for collecting timings. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{trace_8h_a008f07118cf803a3246d5c14a788bfa3}{ADOPT\+\_\+\+TRACE}}(t)~\mbox{\hyperlink{classdoris_1_1_scoped_adopt_trace}{doris\+::\+Scoped\+Adopt\+Trace}} \+\_\+adopt\+\_\+trace(t);
\item 
\#define \mbox{\hyperlink{trace_8h_ae174754f504f2b5fae861c0fca42373f}{TRACE}}(format,  substitutions...)
\item 
\#define \mbox{\hyperlink{trace_8h_a42e05c336c9cfe220b988dd8ba32933d}{TRACE\+\_\+\+TO}}(trace,  format,  substitutions...)~    (trace)-\/$>$Substitute\+And\+Trace(\+\_\+\+\_\+\+FILE\+\_\+\+\_\+, \+\_\+\+\_\+\+LINE\+\_\+\+\_\+, (format), \#\#substitutions)
\item 
\#define \mbox{\hyperlink{trace_8h_a8d97947505b1ca143deae09f2664176b}{TRACE\+\_\+\+COUNTER\+\_\+\+INCREMENT}}(counter\+\_\+name,  val)
\item 
\#define \mbox{\hyperlink{trace_8h_a3a288830b3149bdec01c412f1fa33207}{TRACE\+\_\+\+COUNTER\+\_\+\+SCOPE\+\_\+\+LATENCY\+\_\+\+US}}(counter\+\_\+name)~    \mbox{\hyperlink{classdoris_1_1_scoped_trace_latency_counter}{\+::doris\+::\+Scoped\+Trace\+Latency\+Counter}} \+\_\+scoped\+\_\+latency(counter\+\_\+name)
\item 
\#define \mbox{\hyperlink{trace_8h_a2690cf676c251ce9361fed248509262e}{BUCKETED\+\_\+\+COUNTER\+\_\+\+NAME}}(prefix,  duration\+\_\+us)
\end{DoxyCompactItemize}


\doxysubsection{宏定义说明}
\mbox{\Hypertarget{trace_8h_a008f07118cf803a3246d5c14a788bfa3}\label{trace_8h_a008f07118cf803a3246d5c14a788bfa3}} 
\index{trace.h@{trace.h}!ADOPT\_TRACE@{ADOPT\_TRACE}}
\index{ADOPT\_TRACE@{ADOPT\_TRACE}!trace.h@{trace.h}}
\doxysubsubsection{\texorpdfstring{ADOPT\_TRACE}{ADOPT\_TRACE}}
{\footnotesize\ttfamily \#define ADOPT\+\_\+\+TRACE(\begin{DoxyParamCaption}\item[{}]{t }\end{DoxyParamCaption})~\mbox{\hyperlink{classdoris_1_1_scoped_adopt_trace}{doris\+::\+Scoped\+Adopt\+Trace}} \+\_\+adopt\+\_\+trace(t);}

\mbox{\Hypertarget{trace_8h_ae174754f504f2b5fae861c0fca42373f}\label{trace_8h_ae174754f504f2b5fae861c0fca42373f}} 
\index{trace.h@{trace.h}!TRACE@{TRACE}}
\index{TRACE@{TRACE}!trace.h@{trace.h}}
\doxysubsubsection{\texorpdfstring{TRACE}{TRACE}}
{\footnotesize\ttfamily \#define TRACE(\begin{DoxyParamCaption}\item[{}]{format,  }\item[{}]{substitutions... }\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{do}\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_trace}{doris::Trace}}*\ \_trace\ =\ \mbox{\hyperlink{classdoris_1_1_trace_a63de7c332adb51176aa6ac591765247d}{doris::Trace::CurrentTrace}}();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (\_trace)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \_trace-\/>\mbox{\hyperlink{classdoris_1_1_trace_a0d5a5c3c96c40855227d4b049cf89ddd}{SubstituteAndTrace}}(\_\_FILE\_\_,\ \_\_LINE\_\_,\ (format),\ \#\#substitutions);\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}\ \textcolor{keywordflow}{while}\ (0)}

\end{DoxyCode}
\mbox{\Hypertarget{trace_8h_a42e05c336c9cfe220b988dd8ba32933d}\label{trace_8h_a42e05c336c9cfe220b988dd8ba32933d}} 
\index{trace.h@{trace.h}!TRACE\_TO@{TRACE\_TO}}
\index{TRACE\_TO@{TRACE\_TO}!trace.h@{trace.h}}
\doxysubsubsection{\texorpdfstring{TRACE\_TO}{TRACE\_TO}}
{\footnotesize\ttfamily \#define TRACE\+\_\+\+TO(\begin{DoxyParamCaption}\item[{}]{trace,  }\item[{}]{format,  }\item[{}]{substitutions... }\end{DoxyParamCaption})~    (trace)-\/$>$Substitute\+And\+Trace(\+\_\+\+\_\+\+FILE\+\_\+\+\_\+, \+\_\+\+\_\+\+LINE\+\_\+\+\_\+, (format), \#\#substitutions)}

\mbox{\Hypertarget{trace_8h_a8d97947505b1ca143deae09f2664176b}\label{trace_8h_a8d97947505b1ca143deae09f2664176b}} 
\index{trace.h@{trace.h}!TRACE\_COUNTER\_INCREMENT@{TRACE\_COUNTER\_INCREMENT}}
\index{TRACE\_COUNTER\_INCREMENT@{TRACE\_COUNTER\_INCREMENT}!trace.h@{trace.h}}
\doxysubsubsection{\texorpdfstring{TRACE\_COUNTER\_INCREMENT}{TRACE\_COUNTER\_INCREMENT}}
{\footnotesize\ttfamily \#define TRACE\+\_\+\+COUNTER\+\_\+\+INCREMENT(\begin{DoxyParamCaption}\item[{}]{counter\+\_\+name,  }\item[{}]{val }\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{do}\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_trace}{doris::Trace}}*\ \_trace\ =\ \mbox{\hyperlink{classdoris_1_1_trace_a63de7c332adb51176aa6ac591765247d}{doris::Trace::CurrentTrace}}();\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (\_trace)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \_trace-\/>\mbox{\hyperlink{classdoris_1_1_trace_a993517af428638a6e41325d365314294}{metrics}}()-\/>\mbox{\hyperlink{classdoris_1_1_trace_metrics_a946777f3fd93ef77da80ad81e512a8ca}{Increment}}(counter\_name,\ val);\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}\ \textcolor{keywordflow}{while}\ (0)}

\end{DoxyCode}
\mbox{\Hypertarget{trace_8h_a3a288830b3149bdec01c412f1fa33207}\label{trace_8h_a3a288830b3149bdec01c412f1fa33207}} 
\index{trace.h@{trace.h}!TRACE\_COUNTER\_SCOPE\_LATENCY\_US@{TRACE\_COUNTER\_SCOPE\_LATENCY\_US}}
\index{TRACE\_COUNTER\_SCOPE\_LATENCY\_US@{TRACE\_COUNTER\_SCOPE\_LATENCY\_US}!trace.h@{trace.h}}
\doxysubsubsection{\texorpdfstring{TRACE\_COUNTER\_SCOPE\_LATENCY\_US}{TRACE\_COUNTER\_SCOPE\_LATENCY\_US}}
{\footnotesize\ttfamily \#define TRACE\+\_\+\+COUNTER\+\_\+\+SCOPE\+\_\+\+LATENCY\+\_\+\+US(\begin{DoxyParamCaption}\item[{}]{counter\+\_\+name }\end{DoxyParamCaption})~    \mbox{\hyperlink{classdoris_1_1_scoped_trace_latency_counter}{\+::doris\+::\+Scoped\+Trace\+Latency\+Counter}} \+\_\+scoped\+\_\+latency(counter\+\_\+name)}

\mbox{\Hypertarget{trace_8h_a2690cf676c251ce9361fed248509262e}\label{trace_8h_a2690cf676c251ce9361fed248509262e}} 
\index{trace.h@{trace.h}!BUCKETED\_COUNTER\_NAME@{BUCKETED\_COUNTER\_NAME}}
\index{BUCKETED\_COUNTER\_NAME@{BUCKETED\_COUNTER\_NAME}!trace.h@{trace.h}}
\doxysubsubsection{\texorpdfstring{BUCKETED\_COUNTER\_NAME}{BUCKETED\_COUNTER\_NAME}}
{\footnotesize\ttfamily \#define BUCKETED\+\_\+\+COUNTER\+\_\+\+NAME(\begin{DoxyParamCaption}\item[{}]{prefix,  }\item[{}]{duration\+\_\+us }\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ []()\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (duration\_us\ >=\ 100\ *\ 1000)\ \{\ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ prefix\ \textcolor{stringliteral}{"{}\_gt\_100\_ms"{}};\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (duration\_us\ >=\ 10\ *\ 1000)\ \{\ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ prefix\ \textcolor{stringliteral}{"{}\_10-\/100\_ms"{}};\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (duration\_us\ >=\ 1000)\ \{\ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ prefix\ \textcolor{stringliteral}{"{}\_1-\/10\_ms"{}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ prefix\ \textcolor{stringliteral}{"{}\_lt\_1ms"{}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}()}

\end{DoxyCode}
