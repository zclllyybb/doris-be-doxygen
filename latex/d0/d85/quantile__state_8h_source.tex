\hypertarget{quantile__state_8h_source}{}\doxysection{quantile\+\_\+state.\+h}
\label{quantile__state_8h_source}\index{/Users/dabowang/doris/be/src/util/quantile\_state.h@{/Users/dabowang/doris/be/src/util/quantile\_state.h}}
\mbox{\hyperlink{quantile__state_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{slice_8h}{slice.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tdigest_8h}{tdigest.h}}"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{struct\ }Slice;}
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }TDigest;}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacedoris_ae0a387cfa6d61ce9535c4f9ac98ac9cf}{QUANTILE\_STATE\_EXPLICIT\_NUM}}\ =\ 2048;}
\DoxyCodeLine{00033\ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacedoris_a82a1890da3184f5d666014c3ba5f7022}{QUANTILE\_STATE\_COMPRESSION\_MIN}}\ =\ 2048;}
\DoxyCodeLine{00034\ \textcolor{keyword}{const}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacedoris_aa32acc693b06569acc5ef8c599594bcc}{QUANTILE\_STATE\_COMPRESSION\_MAX}}\ =\ 10000;}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{namespacedoris_a2fc789b514350a9b548b2e314b1c194d}{QuantileStateType}}\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a2fc789b514350a9b548b2e314b1c194da2f0d18fc0d0fa4a6cd92dc328501874d}{EMPTY}}\ =\ 0,}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a2fc789b514350a9b548b2e314b1c194da3388f7110f6f25a54e215eb75d5d7516}{SINGLE}}\ =\ 1,\ \ \ \textcolor{comment}{//\ single\ element}}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a2fc789b514350a9b548b2e314b1c194da7f031ffdae5d487b66c1d411c54f61ab}{EXPLICIT}}\ =\ 2,\ \textcolor{comment}{//\ more\ than\ one\ elements,stored\ in\ vector}}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a2fc789b514350a9b548b2e314b1c194da353425919925f8a40bbfb44e68541f33}{TDIGEST}}\ =\ 3\ \ \ \textcolor{comment}{//\ TDIGEST\ object}}
\DoxyCodeLine{00041\ \};}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00044\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_quantile_state}{QuantileState}}\ \{}
\DoxyCodeLine{00045\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_quantile_state_a309932d6eb9460a1b7eed9aad85b1753}{QuantileState}}();}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a309932d6eb9460a1b7eed9aad85b1753}{QuantileState}}(\textcolor{keywordtype}{float}\ compression);}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a309932d6eb9460a1b7eed9aad85b1753}{QuantileState}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}});}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_aaeec4f7f2915564351366377d5f51daa}{set\_compression}}(\textcolor{keywordtype}{float}\ compression);}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a1f41f7f1683d985ffe04e2e8d5cde80c}{deserialize}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}});}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_add25f3a0d610584aa01a2488d8e2ab9b}{serialize}}(uint8\_t*\ dst)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a83431c0222e713b9a28e123a5ec83554}{merge}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_quantile_state}{QuantileState<T>}}\&\ other);}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_abf3d17d1096ea293dd0d01cd111ef210}{add\_value}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\&\ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}});}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_ac8bb3912a3ce86b15842e79d0b421204}{clear}}();}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a2c0309ba9b0f648e53770bf1fcb0bb58}{is\_valid}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}});}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a8be8474a7a2278bf929dac42dd77d32d}{get\_serialized\_size}}();}
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_afc6bee4de9ad952265616a55401b6ab0}{get\_value\_by\_percentile}}(\textcolor{keywordtype}{float}\ percentile)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_ad4059023f99940a16d290f0bef93d889}{get\_explicit\_value\_by\_percentile}}(\textcolor{keywordtype}{float}\ percentile)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_quantile_state_adb7c798e09b1d155a25487e5b1f9a409}{\string~QuantileState}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a2fc789b514350a9b548b2e314b1c194d}{QuantileStateType}}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a6f30a61c6a1ccf4b2f39aadb0c2a0d6e}{\_type}}\ =\ \mbox{\hyperlink{namespacedoris_a2fc789b514350a9b548b2e314b1c194da2f0d18fc0d0fa4a6cd92dc328501874d}{EMPTY}};}
\DoxyCodeLine{00063\ \ \ \ \ std::shared\_ptr<TDigest>\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a5c46039d7c36ba50211ea8cdca06f86f}{\_tdigest\_ptr}};}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a488b6f279f8cb7dc6c605eeacf7ce694}{\_single\_data}};}
\DoxyCodeLine{00065\ \ \ \ \ std::vector<T>\ \mbox{\hyperlink{classdoris_1_1_quantile_state_aaa810c7357331c942cc565b7c27c20e9}{\_explicit\_data}};}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{classdoris_1_1_quantile_state_a2db73bdb2b8f0b2fbe52f963dc4fd298}{\_compression}};}
\DoxyCodeLine{00067\ \};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{using\ }\mbox{\hyperlink{classdoris_1_1_quantile_state}{QuantileStateDouble}}\ =\ \mbox{\hyperlink{classdoris_1_1_quantile_state}{QuantileState<double>}};}
\DoxyCodeLine{00070\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
