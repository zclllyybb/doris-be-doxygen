\hypertarget{indexed__column__reader_8h_source}{}\doxysection{indexed\+\_\+column\+\_\+reader.\+h}
\label{indexed__column__reader_8h_source}\index{/Users/dabowang/doris/be/src/olap/rowset/segment\_v2/indexed\_column\_reader.h@{/Users/dabowang/doris/be/src/olap/rowset/segment\_v2/indexed\_column\_reader.h}}
\mbox{\hyperlink{indexed__column__reader_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{status_8h}{common/status.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}gen\_cpp/segment\_v2.pb.h"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{file__reader_8h}{io/fs/file\_reader.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{file__system_8h}{io/fs/file\_system.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{common_8h}{olap/rowset/segment\_v2/common.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{index__page_8h}{olap/rowset/segment\_v2/index\_page.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{page__handle_8h}{olap/rowset/segment\_v2/page\_handle.h}}"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{page__pointer_8h}{olap/rowset/segment\_v2/page\_pointer.h}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{parsed__page_8h}{olap/rowset/segment\_v2/parsed\_page.h}}"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{block__compression_8h}{util/block\_compression.h}}"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{slice_8h}{util/slice.h}}"{}}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{class\ }KeyCoder;}
\DoxyCodeLine{00038\ \textcolor{keyword}{class\ }TypeInfo;}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{namespace\ }segment\_v2\ \{}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{class\ }EncodingInfo;}
\DoxyCodeLine{00043\ \textcolor{keyword}{class\ }IndexedColumnIterator;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{comment}{//\ thread-\/safe\ reader\ for\ IndexedColumn\ (see\ comments\ of\ `IndexedColumnWriter`\ to\ understand\ what\ IndexedColumn\ is)}}
\DoxyCodeLine{00046\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader}{IndexedColumnReader}}\ \{}
\DoxyCodeLine{00047\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a0146bd549e6d64c3dcb62c9ff3b158cc}{IndexedColumnReader}}(\mbox{\hyperlink{namespacedoris_1_1io_a4fab59e5f39ac7c318b993fa0c5265ee}{io::FileReaderSPtr}}\ file\_reader,\ \textcolor{keyword}{const}\ IndexedColumnMetaPB\&\ meta)}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a0c94b8447f79ad7c6166e0b4e50c5cf8}{\_file\_reader}}(std::move(file\_reader)),\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a413ba714ef7084aba694bde0fefc4477}{\_meta}}(meta)\ \{\}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a3f9e9debec7dfe6a44dbc41b67565dfd}{load}}(\textcolor{keywordtype}{bool}\ use\_page\_cache,\ \textcolor{keywordtype}{bool}\ kept\_in\_memory);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{comment}{//\ read\ a\ page\ specified\ by\ `pp'\ from\ `file'\ into\ `handle'}}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_ad3dd3566eeefd7a072af72edd61beeb6}{read\_page}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1segment__v2_1_1_page_pointer}{PagePointer}}\&\ pp,\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_page_handle}{PageHandle}}*\ handle,\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}*\ body,\ PageFooterPB*\ footer,}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PageTypePB\ type,\ \mbox{\hyperlink{classdoris_1_1_block_compression_codec}{BlockCompressionCodec}}*\ codec,\ \textcolor{keywordtype}{bool}\ pre\_decode)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ int64\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a8962d4be96e16aeb40dbfade046f2ad5}{num\_values}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a90599a7d695d7f44696f1302764aaee2}{\_num\_values}};\ \}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_encoding_info}{EncodingInfo}}*\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a8efa1aa7a4b5d556cf59c4fa9fe3dd97}{encoding\_info}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a93c7f48a8f3fa7bba228df3545db1d6a}{\_encoding\_info}};\ \}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_type_info}{TypeInfo}}*\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a568a34e6334bb56b8c8830fc652ca12c}{type\_info}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a5470e7cf07424f6d2b0ea995e366556a}{\_type\_info}};\ \}}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_ada0f4d8dc6f2366b3534eb659661e946}{support\_ordinal\_seek}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a413ba714ef7084aba694bde0fefc4477}{\_meta}}.has\_ordinal\_index\_meta();\ \}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_ad778a91d9642b3e4b0df31bb0613c329}{support\_value\_seek}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a413ba714ef7084aba694bde0fefc4477}{\_meta}}.has\_value\_index\_meta();\ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ CompressionTypePB\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a47006a75fd484da50e29e472dff7a394}{get\_compression}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a413ba714ef7084aba694bde0fefc4477}{\_meta}}.compression();\ \}}
\DoxyCodeLine{00064\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_ac6aa62d19db398c141e6d6d5a0f3f057}{get\_memory\_size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_adf8b9eabdde2661956db071fa066d962}{\_mem\_size}};\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a8060ecc035af31aeaaadf7645af7b536}{load\_index\_page}}(\textcolor{keyword}{const}\ PagePointerPB\&\ pp,\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_page_handle}{PageHandle}}*\ handle,\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_index_page_reader}{IndexPageReader}}*\ reader);}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator}{IndexedColumnIterator}};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1io_a4fab59e5f39ac7c318b993fa0c5265ee}{io::FileReaderSPtr}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a0c94b8447f79ad7c6166e0b4e50c5cf8}{\_file\_reader}};}
\DoxyCodeLine{00072\ \ \ \ \ IndexedColumnMetaPB\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a413ba714ef7084aba694bde0fefc4477}{\_meta}};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_aac4a3b332e28f005f2d26eb5c6144b0e}{\_use\_page\_cache}};}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_ab428acbccc0c0527ca3183dcb13683ce}{\_kept\_in\_memory}};}
\DoxyCodeLine{00076\ \ \ \ \ int64\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a90599a7d695d7f44696f1302764aaee2}{\_num\_values}}\ =\ 0;}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ whether\ this\ column\ contains\ any\ index\ page.}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{comment}{//\ could\ be\ false\ when\ the\ column\ contains\ only\ one\ data\ page.}}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a6aaf3f2f751665f87a264b206a9ebcff}{\_has\_index\_page}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ valid\ only\ when\ the\ column\ contains\ only\ one\ data\ page}}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1segment__v2_1_1_page_pointer}{PagePointer}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_ad1d2c1e0a51c2b6486121871da796d1b}{\_sole\_data\_page}};}
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_index_page_reader}{IndexPageReader}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a8e6f865ac44aabd830a39eec1871d944}{\_ordinal\_index\_reader}};}
\DoxyCodeLine{00083\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_index_page_reader}{IndexPageReader}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_ad7e871df0417ced8f3833dfd0c12891b}{\_value\_index\_reader}};}
\DoxyCodeLine{00084\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_page_handle}{PageHandle}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a156e13d1652c151335fdbdacb8a97944}{\_ordinal\_index\_page\_handle}};}
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_page_handle}{PageHandle}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_ada54ff5dd4ab97122dc154f54b81321b}{\_value\_index\_page\_handle}};}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_type_info}{TypeInfo}}*\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a5470e7cf07424f6d2b0ea995e366556a}{\_type\_info}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_encoding_info}{EncodingInfo}}*\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_a93c7f48a8f3fa7bba228df3545db1d6a}{\_encoding\_info}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_key_coder}{KeyCoder}}*\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_aa5fe311eefaea8b99db2ca0b08a27afd}{\_value\_key\_coder}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00090\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader_adf8b9eabdde2661956db071fa066d962}{\_mem\_size}}\ =\ 0;}
\DoxyCodeLine{00091\ \};}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator}{IndexedColumnIterator}}\ \{}
\DoxyCodeLine{00094\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_af24c32de0cdacfa514497bb125390a55}{IndexedColumnIterator}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader}{IndexedColumnReader}}*\ reader)}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_ac76b917ff982edbe9cefae0e9a753467}{\_reader}}(reader),}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a1d96208476d8f47d6f09c401834a9d5f}{\_ordinal\_iter}}(\&reader-\/>\_ordinal\_index\_reader),}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a39b3c4f3b51a6adb1a58d805960402b4}{\_value\_iter}}(\&reader-\/>\_value\_index\_reader)\ \{\}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ Seek\ to\ the\ given\ ordinal\ entry.\ Entry\ 0\ is\ the\ first\ entry.}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{comment}{//\ Return\ NotFound\ if\ provided\ seek\ point\ is\ past\ the\ end.}}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{comment}{//\ Return\ NotSupported\ for\ column\ without\ ordinal\ index.}}
\DoxyCodeLine{00103\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a06c2914d57e81a8a95aaa3ea2a8ade8c}{seek\_to\_ordinal}}(\mbox{\hyperlink{namespacedoris_1_1segment__v2_a6304ee7c492e3553f47385124238bf8e}{ordinal\_t}}\ \mbox{\hyperlink{rowset__tree_8cpp_ae40354a1051342eb5a9db005715dcfa9}{idx}});}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{comment}{//\ Seek\ the\ index\ to\ the\ given\ key,\ or\ to\ the\ index\ entry\ immediately}}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{comment}{//\ before\ it.\ Then\ seek\ the\ data\ block\ to\ the\ value\ matching\ value\ or\ to}}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{comment}{//\ the\ value\ immediately\ after\ it.}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{comment}{//\ Sets\ *exact\_match\ to\ indicate\ whether\ the\ seek\ found\ the\ exact}}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{comment}{//\ key\ requested.}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{comment}{//\ Return\ NotFound\ if\ the\ given\ key\ is\ greater\ than\ all\ keys\ in\ this\ column.}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{comment}{//\ Return\ NotSupported\ for\ column\ without\ value\ index.}}
\DoxyCodeLine{00114\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a9ace29257402bbf7108193190064ac91}{seek\_at\_or\_after}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ key,\ \textcolor{keywordtype}{bool}*\ exact\_match);}
\DoxyCodeLine{00115\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a50cbdb2bb7247775f3017d7c539e3589}{seek\_at\_or\_after}}(\textcolor{keyword}{const}\ std::string*\ key,\ \textcolor{keywordtype}{bool}*\ exact\_match)\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}(key-\/>data(),\ key-\/>size());}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a9ace29257402bbf7108193190064ac91}{seek\_at\_or\_after}}(\textcolor{keyword}{static\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{void}*\textcolor{keyword}{>}(\&\mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}),\ exact\_match);}
\DoxyCodeLine{00118\ \ \ \ \ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ ordinal\ index\ that\ the\ iterator\ is\ currently\ pointed\ to.}}
\DoxyCodeLine{00121\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1segment__v2_a6304ee7c492e3553f47385124238bf8e}{ordinal\_t}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a38c1eb0c53c557ccb520c3746e67e2ff}{get\_current\_ordinal}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ DCHECK(\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a8074f22ebd1830dff2d8e3257cb70f7b}{\_seeked}});}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_ae6c13b3f7be7016c2042c2d91f163ac5}{\_current\_ordinal}};}
\DoxyCodeLine{00124\ \ \ \ \ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{comment}{//\ After\ one\ seek,\ we\ can\ only\ call\ this\ function\ once\ to\ read\ data}}
\DoxyCodeLine{00127\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a995d4792ee7f31526e7a387d35106c61}{next\_batch}}(\textcolor{keywordtype}{size\_t}*\ n,\ \mbox{\hyperlink{namespacedoris_1_1vectorized_ac01d3bf9792b1f5f19e8acb2a08553a3}{vectorized::MutableColumnPtr}}\&\ dst);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00130\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a3bba8a3bc380551aa774bb2078bd1778}{\_read\_data\_page}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1segment__v2_1_1_page_pointer}{PagePointer}}\&\ pp);}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_reader}{IndexedColumnReader}}*\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_ac76b917ff982edbe9cefae0e9a753467}{\_reader}};}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{comment}{//\ iterator\ for\ ordinal\ index\ page}}
\DoxyCodeLine{00134\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_index_page_iterator}{IndexPageIterator}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a1d96208476d8f47d6f09c401834a9d5f}{\_ordinal\_iter}};}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{//\ iterator\ for\ value\ index\ page}}
\DoxyCodeLine{00136\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_index_page_iterator}{IndexPageIterator}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a39b3c4f3b51a6adb1a58d805960402b4}{\_value\_iter}};}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a8074f22ebd1830dff2d8e3257cb70f7b}{\_seeked}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{comment}{//\ current\ in-\/use\ index\ iterator,\ could\ be\ `\&\_ordinal\_iter`\ or\ `\&\_value\_iter`\ or\ null}}
\DoxyCodeLine{00140\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_index_page_iterator}{IndexPageIterator}}*\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a7b6e398e0c4e61465dc8e754d68c4632}{\_current\_iter}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{comment}{//\ seeked\ data\ page,\ containing\ value\ at\ `\_current\_ordinal`}}
\DoxyCodeLine{00142\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1segment__v2_1_1_parsed_page}{ParsedPage}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a45dddf1d0b8bf16b18b268d86e9c47d8}{\_data\_page}};}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{comment}{//\ next\_batch()\ will\ read\ from\ this\ position}}
\DoxyCodeLine{00144\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1segment__v2_a6304ee7c492e3553f47385124238bf8e}{ordinal\_t}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_ae6c13b3f7be7016c2042c2d91f163ac5}{\_current\_ordinal}}\ =\ 0;}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{comment}{//\ iterator\ owned\ compress\ codec,\ should\ NOT\ be\ shared\ by\ threads,\ initialized\ before\ used}}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_block_compression_codec}{BlockCompressionCodec}}*\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_indexed_column_iterator_a6265a2da4d087124fb6dcedf63120663}{\_compress\_codec}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00147\ \};}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \}\ \textcolor{comment}{//\ namespace\ segment\_v2}}
\DoxyCodeLine{00150\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
