\hypertarget{mysql__row__buffer_8h_source}{}\doxysection{mysql\+\_\+row\+\_\+buffer.\+h}
\label{mysql__row__buffer_8h_source}\index{/Users/dabowang/be\_all/util/mysql\_row\_buffer.h@{/Users/dabowang/be\_all/util/mysql\_row\_buffer.h}}
\mbox{\hyperlink{mysql__row__buffer_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacedoris_a811ec3b3c805bfd6b8ec302d59fc5a94}{int128\_t}}\ =\ \_\_int128;}
\DoxyCodeLine{00051\ \textcolor{keyword}{class\ }DateTimeValue;}
\DoxyCodeLine{00052\ \textcolor{keyword}{class\ }DecimalV2Value;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ is\_binary\_format\ =\ false>}
\DoxyCodeLine{00055\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_mysql_row_buffer}{MysqlRowBuffer}}\ \{}
\DoxyCodeLine{00056\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_af780e3b0ac04e64fc95db322417cc5b3}{MysqlRowBuffer}}();}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a24ecd5e50f21f49c82246c2d1f6cc300}{\string~MysqlRowBuffer}}();}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ad20897c5c8bd47f5d4005989bead0e55}{reset}}()\ \{\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ac9c718b783ab6c56c5b8572ba94a6cb3}{\_pos}}\ =\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a171b0ba0bac75f8ed2daaf76db929931}{\_buf}};\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ Prepare\ for\ binary\ row\ buffer}}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{comment}{//\ init\ bitmap}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a6891ca4f4013a1713f9a9e06a50209e2}{start\_binary\_row}}(uint32\_t\ num\_cols);}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{comment}{//\ TODO(zhaochun):\ add\ signed/unsigned\ support}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_aef71d0e6c823c72c1cbaf54ef342b8ae}{push\_tinyint}}(int8\_t\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a76a989248c9f55bd2d1636dca494c02f}{push\_smallint}}(int16\_t\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ac508c34eae2fc9425dc8fe16485d5413}{push\_int}}(int32\_t\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a1e9335c43c669f7b178f108757fc2757}{push\_bigint}}(int64\_t\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a98150a720dedb68ae8467adf9bea96bb}{push\_unsigned\_bigint}}(uint64\_t\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_afdc64d3556fb0ebd5e23af5a07a627e3}{push\_largeint}}(\mbox{\hyperlink{namespacedoris_a811ec3b3c805bfd6b8ec302d59fc5a94}{int128\_t}}\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_aa747566f0e4c90189ea2a4670ace31fa}{push\_float}}(\textcolor{keywordtype}{float}\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ae3becb89383913641fb396b255b4dec3}{push\_double}}(\textcolor{keywordtype}{double}\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a76527a7b844248387835deebde87b7ba}{push\_time}}(\textcolor{keywordtype}{double}\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a960d695c6e322a8877e309a4117dd6f8}{push\_datetime}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_date_time_value}{DateTimeValue}}\&\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_aebd3d9a2d563fddec65002e999c0d042}{push\_decimal}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_decimal_v2_value}{DecimalV2Value}}\&\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ \textcolor{keywordtype}{int}\ round\_scale);}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a1d2abe25b9456c729de416feb368573d}{push\_string}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ int64\_t\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_adb9b687d08e8f61bb80148e6893c09db}{length}});}
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a8cf28f554e75280a35f7f7c4c9be54bc}{push\_null}}();}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ DateType>}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a14d38e860db53e405f511c0394b2df22}{push\_vec\_datetime}}(DateType\&\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{//\ this\ function\ reserved\ size,\ change\ the\ pos\ step\ size,\ return\ old\ pos}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{//\ Becareful\ when\ use\ the\ returned\ pointer.}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_aad210b24b2a4d7b7a73e31ea5cbe463b}{reserved}}(int64\_t\ size);}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a06a50ce4f424dca9b91bdd4b6acdebe7}{buf}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a171b0ba0bac75f8ed2daaf76db929931}{\_buf}};\ \}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_af8c52d038d11f2abc4cd56412417749c}{pos}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ac9c718b783ab6c56c5b8572ba94a6cb3}{\_pos}};\ \}}
\DoxyCodeLine{00090\ \ \ \ \ int64\_t\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_adb9b687d08e8f61bb80148e6893c09db}{length}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ac9c718b783ab6c56c5b8572ba94a6cb3}{\_pos}}\ -\/\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a171b0ba0bac75f8ed2daaf76db929931}{\_buf}};\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ab454fd42403f69a994b20699cc1d37a1}{open\_dynamic\_mode}}();}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a9cc9ff58a5c749bcdbb1861edbd8914a}{close\_dynamic\_mode}}();}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ae4b90adee87061b394f362ee557b1349}{reserve}}(int64\_t\ size);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{comment}{//\ append\ data\ into\ buffer}}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ab95c28c77991765e784e2f548440ddf1}{append}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ int64\_t\ len);}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ the\ same\ as\ mysql\ net\_store\_data}}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{comment}{//\ the\ first\ few\ bytes\ is\ length,\ followed\ by\ data}}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ab71f606245a5db766d6dd065429dff1c}{append\_var\_string}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ int64\_t\ len);}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ac9c718b783ab6c56c5b8572ba94a6cb3}{\_pos}};}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a171b0ba0bac75f8ed2daaf76db929931}{\_buf}};}
\DoxyCodeLine{00137\ \ \ \ \ int64\_t\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ac21a13396b685fd4da5864fe2b1592bb}{\_buf\_size}};}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ac39ae80d6a882d13e71f0ae0042c77a4}{\_default\_buf}}[4096];}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a72886f6989d76d10fe6c844797cd8e68}{\_dynamic\_mode}};}
\DoxyCodeLine{00141\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a8bf10488c40538ae3a8bd3f6cedfc85c}{\_len\_pos}};}
\DoxyCodeLine{00142\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_a6546f081d9adadb1a891f12d7bb9b4c7}{\_field\_pos}}\ =\ 0;}
\DoxyCodeLine{00143\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1_mysql_row_buffer_ae500c57eff5345516140cf8709d89b11}{\_field\_count}}\ =\ 0;}
\DoxyCodeLine{00144\ \};}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
