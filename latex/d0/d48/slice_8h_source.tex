\hypertarget{slice_8h_source}{}\doxysection{slice.\+h}
\label{slice_8h_source}\index{/Users/dabowang/doris/be/src/util/slice.h@{/Users/dabowang/doris/be/src/util/slice.h}}
\mbox{\hyperlink{slice_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <assert.h>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <stddef.h>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{class\ }faststring;}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\ \{}
\DoxyCodeLine{00046\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}};}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}};}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{comment}{//\ Intentionally\ copyable}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00052\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_aa4483b2ec0b48ea218f6cba6134558f7}{Slice}}()\ :\ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}(const\_cast<char*>(\textcolor{stringliteral}{"{}"{}})),\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}(0)\ \{\}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a79367f6e2c2f46336ff367cc272c3763}{Slice}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ d,\ \textcolor{keywordtype}{size\_t}\ n)\ :\ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}(const\_cast<char*>(d)),\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}(n)\ \{\}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ Create\ a\ slice\ that\ refers\ to\ a\ @c\ uint8\_t\ byte\ array.}}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{comment}{//\ @param\ [in]\ d}}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ \ \ The\ input\ array.}}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ @param\ [in]\ n}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ \ \ Number\ of\ bytes\ in\ the\ array.}}
\DoxyCodeLine{00063\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a5c1dbcf42c0b9e94a2826a976cb4402e}{Slice}}(\textcolor{keyword}{const}\ uint8\_t*\ s,\ \textcolor{keywordtype}{size\_t}\ n)}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}(const\_cast<char*>(reinterpret\_cast<const\ char*>(s))),\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}(n)\ \{\}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a50dee4f641749ea68456247c024d7c95}{Slice}}(\textcolor{keyword}{const}\ std::string\&\ s)}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{comment}{//\ NOLINT(runtime/explicit)}}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}(const\_cast<char*>(s.\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}())),}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}(s.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}())\ \{\}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_aa4483b2ec0b48ea218f6cba6134558f7}{Slice}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1faststring}{faststring}}\&\ s);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a8e09a3450c69ee4bd636f78d3115380e}{Slice}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s)}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \textcolor{comment}{//\ NOLINT(runtime/explicit)}}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}(const\_cast<char*>(s)),}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}(strlen(s))\ \{\}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{structdoris_1_1_slice_a30578fc3dd9ac76530995b2ddd902a84}{get\_data}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}};\ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{structdoris_1_1_slice_aae02cd55fd1199e66c2c6c06499f0c5b}{mutable\_data}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}});\ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structdoris_1_1_slice_adeac1643dd75193bb87fe54485a32600}{get\_size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}};\ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_slice_a644718bb2fb240de962dc3c9a1fdf0dc}{empty}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ ==\ 0;\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\&\ \mbox{\hyperlink{structdoris_1_1_slice_a43a5f923cd0531df99bf2a894894299a}{operator[]}}(\textcolor{keywordtype}{size\_t}\ n)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ assert(n\ <\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}});}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}[n];}
\DoxyCodeLine{00096\ \ \ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1_slice_ac8bb3912a3ce86b15842e79d0b421204}{clear}}()\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}\ =\ \textcolor{keyword}{const\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ =\ 0;}
\DoxyCodeLine{00102\ \ \ \ \ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1_slice_ad51651afef0ae59bf122b1cd9df2facb}{remove\_prefix}}(\textcolor{keywordtype}{size\_t}\ n)\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ assert(n\ <=\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}});}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}\ +=\ n;}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ -\/=\ n;}
\DoxyCodeLine{00117\ \ \ \ \ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1_slice_adf3400bff381f878ca66b1ca9df6e794}{truncate}}(\textcolor{keywordtype}{size\_t}\ n)\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ assert(n\ <=\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}});}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ =\ n;}
\DoxyCodeLine{00131\ \ \ \ \ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00134\ \ \ \ \ std::string\ \mbox{\hyperlink{structdoris_1_1_slice_aac993ecccd3d88aafefb6b8e3caa1dee}{to\_string}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ std::string(\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}},\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}});\ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structdoris_1_1_slice_af01d06b2bc3ce61d3eadbda4ccec16cf}{compare}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ b)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_slice_a01ffdccb08e2a1c1425614a23174089a}{starts\_with}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ x)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ >=\ x.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}})\ \&\&\ (\mbox{\hyperlink{structdoris_1_1_slice_a63e7cc06cd62dceec3f947a4716dc22f}{mem\_equal}}(\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}},\ x.\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}},\ x.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}})));}
\DoxyCodeLine{00142\ \ \ \ \ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_slice_a5db1fefc06f08837ae7554898b0f4120}{ends\_with}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ x)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ >=\ x.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}})\ \&\&\ \mbox{\hyperlink{structdoris_1_1_slice_a63e7cc06cd62dceec3f947a4716dc22f}{mem\_equal}}(\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}\ +\ (\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ -\/\ x.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}),\ x.\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}},\ x.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}));}
\DoxyCodeLine{00146\ \ \ \ \ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1_slice_1_1_comparator}{Comparator}}\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_slice_1_1_comparator_aab95823061c12d33c8160bd7ae8a590f}{operator()}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ b)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}}.compare(b)\ <\ 0;\ \}}
\DoxyCodeLine{00158\ \ \ \ \ \};}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1_slice_a8c299edb52594be3e1d048b41231b71a}{relocate}}(\textcolor{keywordtype}{char}*\ d)\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}\ !=\ d)\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{memcpy__aarch64_8cpp_a156c5821f16ed93be8c7d315303f7b2a}{memcpy}}(d,\ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}},\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}});}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}\ =\ d;}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00171\ \ \ \ \ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_slice_a1323493265790d022203af0d8b31fd9c}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ x,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ y);}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keyword}{friend}\ std::ostream\&\ \mbox{\hyperlink{structdoris_1_1_slice_aaf67eed72c84fc9d80cdf12df1a3a469}{operator<<}}(std::ostream\&\ os,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}});}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_slice_a63e7cc06cd62dceec3f947a4716dc22f}{mem\_equal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ b,\ \textcolor{keywordtype}{size\_t}\ n)\ \{\ \textcolor{keywordflow}{return}\ memcmp(\mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}},\ b,\ n)\ ==\ 0;\ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structdoris_1_1_slice_a06bdfec5d6ded86ec120cbaad063a49e}{mem\_compare}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ b,\ \textcolor{keywordtype}{size\_t}\ n)\ \{\ \textcolor{keywordflow}{return}\ memcmp(\mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}},\ b,\ n);\ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structdoris_1_1_slice_ace80696f691737ab717623c59a5532d7}{compute\_total\_size}}(\textcolor{keyword}{const}\ std::vector<Slice>\&\ slices)\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ total\_size\ =\ 0;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}\ :\ slices)\ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ total\_size\ +=\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}.size;}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ total\_size;}
\DoxyCodeLine{00187\ \ \ \ \ \}}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{structdoris_1_1_slice_a652f7dbd820d44b7a1916af75ee1831a}{to\_string}}(\textcolor{keyword}{const}\ std::vector<Slice>\&\ slices)\ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ std::string\ buf;}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}\ :\ slices)\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ buf.append(\mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}.data,\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}.size);}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ buf;}
\DoxyCodeLine{00195\ \ \ \ \ \}}
\DoxyCodeLine{00196\ \};}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \textcolor{keyword}{inline}\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}})\ \{}
\DoxyCodeLine{00199\ \ \ \ \ os\ <<\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}.\mbox{\hyperlink{structdoris_1_1_slice_aac993ecccd3d88aafefb6b8e3caa1dee}{to\_string}}();}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keywordflow}{return}\ os;}
\DoxyCodeLine{00201\ \}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00204\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacedoris_ab33f0267de6136a1a92580b078686834}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ x,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ y)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \textcolor{keywordflow}{return}\ ((x.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ ==\ y.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}})\ \&\&\ (\mbox{\hyperlink{structdoris_1_1_slice_a63e7cc06cd62dceec3f947a4716dc22f}{Slice::mem\_equal}}(x.\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}},\ y.\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}},\ x.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}})));}
\DoxyCodeLine{00206\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00209\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacedoris_add089166736fe96b6cac4397c5223cfb}{operator!=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ x,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ y)\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordflow}{return}\ !(x\ ==\ y);}
\DoxyCodeLine{00211\ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structdoris_1_1_slice_af01d06b2bc3ce61d3eadbda4ccec16cf}{Slice::compare}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ b)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ min\_len\ =\ (\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ <\ b.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}})\ ?\ \mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ :\ b.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}};}
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{keywordtype}{int}\ r\ =\ \mbox{\hyperlink{structdoris_1_1_slice_a06bdfec5d6ded86ec120cbaad063a49e}{mem\_compare}}(\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}},\ b.\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}},\ min\_len);}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordflow}{if}\ (r\ ==\ 0)\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ <\ b.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}})}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ -\/1;}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}}\ >\ b.\mbox{\hyperlink{structdoris_1_1_slice_a854352f53b148adc24983a58a1866d66}{size}})}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ +1;}
\DoxyCodeLine{00221\ \ \ \ \ \}}
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keywordflow}{return}\ r;}
\DoxyCodeLine{00223\ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00240\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00241\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1_slice_map}{SliceMap}}\ \{}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keyword}{typedef}\ std::map<Slice,\ T,\ Slice::Comparator>\ \mbox{\hyperlink{structdoris_1_1_slice_map_ae11ce2bd9c92eb6d2aa42f51ef7632c6}{type}};}
\DoxyCodeLine{00244\ \};}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \textcolor{comment}{//\ A\ move-\/only\ type\ which\ manage\ the\ lifecycle\ of\ externally\ allocated\ data.}}
\DoxyCodeLine{00247\ \textcolor{comment}{//\ Unlike\ std::unique\_ptr<uint8\_t[]>,\ OwnedSlice\ remembers\ the\ size\ of\ data\ so\ that\ clients\ can\ access}}
\DoxyCodeLine{00248\ \textcolor{comment}{//\ the\ underlying\ buffer\ as\ a\ Slice.}}
\DoxyCodeLine{00249\ \textcolor{comment}{//}}
\DoxyCodeLine{00250\ \textcolor{comment}{//\ Usage\ example:}}
\DoxyCodeLine{00251\ \textcolor{comment}{//\ \ \ OwnedSlice\ read\_page(PagePointer\ pp);}}
\DoxyCodeLine{00252\ \textcolor{comment}{//\ \ \ \{}}
\DoxyCodeLine{00253\ \textcolor{comment}{//\ \ \ \ \ OwnedSlice\ page\_data(new\ uint8\_t[pp.size],\ pp.size);}}
\DoxyCodeLine{00254\ \textcolor{comment}{//\ \ \ \ \ Status\ s\ =\ \_file.read\_at(pp.offset,\ owned.slice());}}
\DoxyCodeLine{00255\ \textcolor{comment}{//\ \ \ \ \ if\ (!s.ok())\ \{}}
\DoxyCodeLine{00256\ \textcolor{comment}{//\ \ \ \ \ \ \ return\ s;\ //\ `page\_data`\ destructs,\ deallocate\ underlying\ buffer}}
\DoxyCodeLine{00257\ \textcolor{comment}{//\ \ \ \ \ \}}}
\DoxyCodeLine{00258\ \textcolor{comment}{//\ \ \ \ \ return\ page\_data;\ //\ transfer\ ownership\ of\ buffer\ into\ the\ caller}}
\DoxyCodeLine{00259\ \textcolor{comment}{//\ \ \ \}}}
\DoxyCodeLine{00260\ \textcolor{comment}{//}}
\DoxyCodeLine{00261\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_owned_slice}{OwnedSlice}}\ \{}
\DoxyCodeLine{00262\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00263\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_owned_slice_acf851438e12677ea8e3aaa05af3ca8c0}{OwnedSlice}}()\ :\ \mbox{\hyperlink{classdoris_1_1_owned_slice_a50928b7e403d2933c48500900c639dcc}{\_slice}}((uint8\_t*)nullptr,\ 0)\ \{\}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_owned_slice_a03d2551748da2aae4984d48b5929be23}{OwnedSlice}}(uint8\_t*\ \_data,\ \textcolor{keywordtype}{size\_t}\ size)\ :\ \mbox{\hyperlink{classdoris_1_1_owned_slice_a50928b7e403d2933c48500900c639dcc}{\_slice}}(\_data,\ size)\ \{\}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_owned_slice_a86945921ac76dd6ef59b3c75a56222b3}{OwnedSlice}}(\mbox{\hyperlink{classdoris_1_1_owned_slice}{OwnedSlice}}\&\&\ src)\ :\ \mbox{\hyperlink{classdoris_1_1_owned_slice_a50928b7e403d2933c48500900c639dcc}{\_slice}}(src.\mbox{\hyperlink{classdoris_1_1_owned_slice_a50928b7e403d2933c48500900c639dcc}{\_slice}})\ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ src.\_slice.\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ src.\_slice.size\ =\ 0;}
\DoxyCodeLine{00270\ \ \ \ \ \}}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_owned_slice}{OwnedSlice}}\&\ \mbox{\hyperlink{classdoris_1_1_owned_slice_ab33176ae23dbe1c27040c35d267ae07a}{operator=}}(\mbox{\hyperlink{classdoris_1_1_owned_slice}{OwnedSlice}}\&\&\ src)\ \{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{this}\ !=\ \&src)\ \{}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ std::swap(\mbox{\hyperlink{classdoris_1_1_owned_slice_a50928b7e403d2933c48500900c639dcc}{\_slice}},\ src.\_slice);}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00277\ \ \ \ \ \}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00279\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_owned_slice_a42a5f3d74c7db1f4345ebcb36c48b7fb}{\string~OwnedSlice}}()\ \{\ \textcolor{keyword}{delete}[]\ \mbox{\hyperlink{classdoris_1_1_owned_slice_a50928b7e403d2933c48500900c639dcc}{\_slice}}.\mbox{\hyperlink{structdoris_1_1_slice_a91a70b77df95bd8b0830b49a094c2acb}{data}};\ \}}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ \mbox{\hyperlink{classdoris_1_1_owned_slice_a77d86aa3e0373dba1c5e9ca9638583fb}{slice}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_owned_slice_a50928b7e403d2933c48500900c639dcc}{\_slice}};\ \}}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{comment}{//\ disable\ copy\ constructor\ and\ copy\ assignment}}
\DoxyCodeLine{00285\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_owned_slice_a5107bfcb8a1eeca34c0a3698ccc8ddbb}{OwnedSlice}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_owned_slice}{OwnedSlice}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_owned_slice_a83b8e61ac39601aedbcc580163107327}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_owned_slice}{OwnedSlice}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\ \mbox{\hyperlink{classdoris_1_1_owned_slice_a50928b7e403d2933c48500900c639dcc}{\_slice}};}
\DoxyCodeLine{00289\ \};}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00291\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
