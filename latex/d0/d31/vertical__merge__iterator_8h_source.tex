\hypertarget{vertical__merge__iterator_8h_source}{}\doxysection{vertical\+\_\+merge\+\_\+iterator.\+h}
\label{vertical__merge__iterator_8h_source}\index{/Users/dabowang/doris/be/src/vec/olap/vertical\_merge\_iterator.h@{/Users/dabowang/doris/be/src/vec/olap/vertical\_merge\_iterator.h}}
\mbox{\hyperlink{vertical__merge__iterator_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{status_8h}{common/status.h}}"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{io__common_8h}{io/io\_common.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{iterators_8h}{olap/iterators.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{schema_8h}{olap/schema.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{columns__number_8h}{vec/columns/columns\_number.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{block_8h}{vec/core/block.h}}"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{namespace\ }vectorized\ \{}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{//\ Row\ source\ represent\ row\ location\ in\ multi-\/segments}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ use\ a\ uint16\_t\ to\ store\ info}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ the\ lower\ 15\ bits\ means\ segment\_id\ in\ segment\ pool,\ and\ the\ higher\ 1\ bits\ means\ agg\ flag.}}
\DoxyCodeLine{00034\ \textcolor{comment}{//\ In\ unique-\/key,\ agg\ flags\ means\ this\ key\ should\ be\ deleted,\ this\ comes\ from\ two\ way:\ old\ version}}
\DoxyCodeLine{00035\ \textcolor{comment}{//\ key\ or\ delete\_sign.}}
\DoxyCodeLine{00036\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source}{RowSource}}\ \{}
\DoxyCodeLine{00037\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_a23c148a0486079c1de3e839d7479bfae}{RowSource}}(uint16\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_a1726ab17bbaff47421d389a0fc715b4a}{data}})\ :\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_af81789d2912a09f1052e0687667c1e96}{\_data}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_a1726ab17bbaff47421d389a0fc715b4a}{data}})\ \{\}}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source}{RowSource}}(uint16\_t\ source\_num,\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_aba7caf56fc07762f110fa047b91dad77}{agg\_flag}});}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_a2e28e17918384a47f482be086880a036}{get\_source\_num}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_aba7caf56fc07762f110fa047b91dad77}{agg\_flag}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_a7503a5e9f54c3a77fdd44e2d2ea4f4c2}{set\_agg\_flag}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_aba7caf56fc07762f110fa047b91dad77}{agg\_flag}});}
\DoxyCodeLine{00044\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_a1726ab17bbaff47421d389a0fc715b4a}{data}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00047\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_af81789d2912a09f1052e0687667c1e96}{\_data}};}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint16\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_a45c29925b28b2868563c7688e686ef93}{SOURCE\_FLAG}}\ =\ 0x7FFF;}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ uint16\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source_af3b3ccc1c8b653428d676f8a52e019ae}{AGG\_FLAG}}\ =\ 0x8000;}
\DoxyCodeLine{00050\ \};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{comment}{/*\ rows\ source\ buffer}}
\DoxyCodeLine{00053\ \textcolor{comment}{this\ buffer\ should\ have\ a\ memory\ limit,\ once\ reach\ memory\ limit,\ write}}
\DoxyCodeLine{00054\ \textcolor{comment}{buffer\ data\ to\ tmp\ file.}}
\DoxyCodeLine{00055\ \textcolor{comment}{usage:}}
\DoxyCodeLine{00056\ \textcolor{comment}{\ \ \ \ RowSourcesBuffer\ buffer(tablet\_id,\ tablet\_storage\_path,\ reader\_type);}}
\DoxyCodeLine{00057\ \textcolor{comment}{\ \ \ \ buffer.append()}}
\DoxyCodeLine{00058\ \textcolor{comment}{\ \ \ \ buffer.append()}}
\DoxyCodeLine{00059\ \textcolor{comment}{\ \ \ \ buffer.flush()}}
\DoxyCodeLine{00060\ \textcolor{comment}{\ \ \ \ buffer.seek\_to\_begin()}}
\DoxyCodeLine{00061\ \textcolor{comment}{\ \ \ \ while\ (buffer.has\_remaining().ok())\ \{}}
\DoxyCodeLine{00062\ \textcolor{comment}{\ \ \ \ \ \ \ \ auto\ cur\ =\ buffer.current().get\_source\_num();}}
\DoxyCodeLine{00063\ \textcolor{comment}{\ \ \ \ \ \ \ \ auto\ same\ =\ buffer.same\_source\_count(cur,\ limit);}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ \ \ \ \ \ \ \ //\ do\ copy\ block\ data}}
\DoxyCodeLine{00065\ \textcolor{comment}{\ \ \ \ \ \ \ \ buffer.advance(same);}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ \ \ \ \}}}
\DoxyCodeLine{00067\ \textcolor{comment}{*/}}
\DoxyCodeLine{00068\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer}{RowSourcesBuffer}}\ \{}
\DoxyCodeLine{00069\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a89f9b6a058989a9efba042759ad60cfa}{RowSourcesBuffer}}(int64\_t\ tablet\_id,\ \textcolor{keyword}{const}\ std::string\&\ tablet\_path,\ \mbox{\hyperlink{namespacedoris_a678aadae72e7347a5756e370a2978a15}{ReaderType}}\ reader\_type)}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a8c64882809994d5a843169369bd4277e}{\_tablet\_id}}(tablet\_id),}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ada8ccb7d07c927bf7e95c9cf8fcc881a}{\_tablet\_path}}(tablet\_path),}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a5529491da89e0b6a41eff66f1026c36f}{\_reader\_type}}(reader\_type),}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a17c982d153672eb1d0fcda42f1158bf5}{\_buffer}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_vector}{ColumnUInt16}}::create())\ \{\}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a4275a5ddc29704b16bb26745cce0d196}{\string~RowSourcesBuffer}}()\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a8b0faea363016ca664ab0a6028577593}{\_reset\_buffer}}();}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a8a78a7e56615ccca60bdfdfce3251b36}{\_fd}}\ >\ 0)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ ::close(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a8a78a7e56615ccca60bdfdfce3251b36}{\_fd}});}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00081\ \ \ \ \ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{//\ write\ batch\ row\ source}}
\DoxyCodeLine{00084\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a4a8bd14979b986d193b3d0a577a7ccdb}{append}}(\textcolor{keyword}{const}\ std::vector<RowSource>\&\ row\_sources);}
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a9538544d9aeadf8c4ea33231fe825eb2}{flush}}();}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source}{RowSource}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a20f7054dfb29a34494a20c249e6081fa}{current}}()\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ DCHECK(\_buf\_idx\ <\ \_buffer-\/>size());}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_source}{RowSource}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a17c982d153672eb1d0fcda42f1158bf5}{\_buffer}}-\/>get\_element(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ac4e5596c4922f4282922fef1d94f7674}{\_buf\_idx}}));}
\DoxyCodeLine{00090\ \ \ \ \ \}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a3bd03b204db8c64fde8cf7727d56f641}{advance}}(int32\_t\ step\ =\ 1)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ DCHECK(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ac4e5596c4922f4282922fef1d94f7674}{\_buf\_idx}}\ +\ step\ <=\ \_buffer-\/>size());}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ac4e5596c4922f4282922fef1d94f7674}{\_buf\_idx}}\ +=\ step;}
\DoxyCodeLine{00094\ \ \ \ \ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_acc04c35c4e65e71ee0442784bd1cfdce}{buf\_idx}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ac4e5596c4922f4282922fef1d94f7674}{\_buf\_idx}};\ \}}
\DoxyCodeLine{00097\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_af010873d741979a04257faf7c69144d7}{total\_size}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a24c1f1b40a73e72840fd8ed277215ab8}{\_total\_size}};\ \}}
\DoxyCodeLine{00098\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_abfad6999d91572cea6b0e8776865bc91}{buffered\_size}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a17c982d153672eb1d0fcda42f1158bf5}{\_buffer}}-\/>size();\ \}}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a01887584c32425bfe80f5e170ea08b98}{set\_agg\_flag}}(uint64\_t\ \mbox{\hyperlink{column__vector_8cpp_a9d57133bec333a3eac9e3c1693a5ee38}{index}},\ \textcolor{keywordtype}{bool}\ agg);}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a9d6795a1f742149340dfae8a857055b5}{has\_remaining}}();}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a0cf549a0fa56033dc61c34220f7bf288}{seek\_to\_begin}}();}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a3bfefcec216477c1584f3b19df0ef0c6}{same\_source\_count}}(uint16\_t\ source,\ \textcolor{keywordtype}{size\_t}\ limit);}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{comment}{//\ return\ continous\ agg\_flag=true\ count\ from\ index}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ac65ef01eb0bcece900c1d152e6089df9}{continuous\_agg\_count}}(uint64\_t\ \mbox{\hyperlink{column__vector_8cpp_a9d57133bec333a3eac9e3c1693a5ee38}{index}});}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00111\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_aac6636bc61f0bd31806cb0e9dc75faeb}{\_create\_buffer\_file}}();}
\DoxyCodeLine{00112\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a80ba2d1b9158bb9ba35954b2039d3779}{\_serialize}}();}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ac2bc2a7c16b6c58d8fe4c0b8f79748ea}{\_deserialize}}();}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a8b0faea363016ca664ab0a6028577593}{\_reset\_buffer}}()\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a17c982d153672eb1d0fcda42f1158bf5}{\_buffer}}-\/>clear();}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ac4e5596c4922f4282922fef1d94f7674}{\_buf\_idx}}\ =\ 0;}
\DoxyCodeLine{00117\ \ \ \ \ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00120\ \ \ \ \ int64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a8c64882809994d5a843169369bd4277e}{\_tablet\_id}};}
\DoxyCodeLine{00121\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ada8ccb7d07c927bf7e95c9cf8fcc881a}{\_tablet\_path}};}
\DoxyCodeLine{00122\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a678aadae72e7347a5756e370a2978a15}{ReaderType}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a5529491da89e0b6a41eff66f1026c36f}{\_reader\_type}};}
\DoxyCodeLine{00123\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_ac4e5596c4922f4282922fef1d94f7674}{\_buf\_idx}}\ =\ 0;}
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a8a78a7e56615ccca60bdfdfce3251b36}{\_fd}}\ =\ -\/1;}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{class_c_o_w_helper_a2f75f23217033d3e71f2f8a4d1bc28f2}{ColumnUInt16::MutablePtr}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a17c982d153672eb1d0fcda42f1158bf5}{\_buffer}};}
\DoxyCodeLine{00126\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer_a24c1f1b40a73e72840fd8ed277215ab8}{\_total\_size}}\ =\ 0;}
\DoxyCodeLine{00127\ \};}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ VerticalMergeIteratorContext\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{00130\ \textcolor{comment}{//\ takes\ ownership\ of\ rowwise\ iterator}}
\DoxyCodeLine{00131\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}\ \{}
\DoxyCodeLine{00132\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00133\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_abc66381a903ded7bd2b8cc7a569261cf}{VerticalMergeIteratorContext}}(\mbox{\hyperlink{namespacedoris_a0f759e113f7a0ef0224093aeaf1f2f45}{RowwiseIteratorUPtr}}\&\&\ iter,\ \mbox{\hyperlink{structdoris_1_1_rowset_id}{RowsetId}}\ rowset\_id,}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ ori\_return\_cols,\ uint32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a3b8ad8b12433df5d300de1a35c5692b3}{order}},\ uint32\_t\ seq\_col\_idx)}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ab3c546a20377d02881eabf59afc135b8}{\_iter}}(std::move(iter)),}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a420b7994585cc3552792a3e411e201d3}{\_rowset\_id}}(rowset\_id),}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a898ea8fc9bfd0bfcce5cfdbf95c7e95d}{\_ori\_return\_cols}}(ori\_return\_cols),}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a713e30dab42509ee78a6fed70d092ce3}{\_order}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a3b8ad8b12433df5d300de1a35c5692b3}{order}}),}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a7837b2d8b2909e13277c6c8d8f1fab29}{\_seq\_col\_idx}}(seq\_col\_idx),}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a8474dbea719d10a1f30939d8e6f8f3e3}{\_num\_key\_columns}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ab3c546a20377d02881eabf59afc135b8}{\_iter}}-\/>schema().num\_key\_columns())\ \{\}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a6ed1fbe879c079ce41f745875596fd24}{VerticalMergeIteratorContext}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00143\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a4459e6dc67ca08e83b946cd858e81e3d}{VerticalMergeIteratorContext}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00144\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_acc129088df38e0fb7918604ae82e09d5}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00145\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a271def95d30d85440e962a40e63ffd16}{operator=}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_abb8299e5133c61b2d39c32c5d4498a7f}{\string~VerticalMergeIteratorContext}}()\ \{\}}
\DoxyCodeLine{00148\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a71503b39e950a24dc590984d55f306c3}{block\_reset}}(\textcolor{keyword}{const}\ std::shared\_ptr<Block>\&\ block);}
\DoxyCodeLine{00149\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a845b95d8c6ae4d4f2bd83c2ce067c693}{init}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_storage_read_options}{StorageReadOptions}}\&\ opts);}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ab3d23850730f67eb12574b238856bddd}{compare}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}\&\ rhs)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a13b4eded49f563a945f0c5707f5aa566}{copy\_rows}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block,\ \textcolor{keywordtype}{bool}\ advanced\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a13b4eded49f563a945f0c5707f5aa566}{copy\_rows}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block,\ \textcolor{keywordtype}{size\_t}\ count);}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a0b6a43453f1251450f9a119202d9cd05}{advance}}();}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{comment}{//\ Return\ if\ it\ has\ remaining\ data\ in\ this\ context.}}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{comment}{//\ Only\ when\ this\ function\ return\ true,\ current\_row()}}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{comment}{//\ will\ return\ a\ valid\ row}}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a315419f26d3c59fa143b49b90a019049}{valid}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ae923f1f1af45226b3de4dd97f4d64c2c}{\_valid}};\ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a3b8ad8b12433df5d300de1a35c5692b3}{order}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a713e30dab42509ee78a6fed70d092ce3}{\_order}};\ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_af657330101f6cbda4aeacad3bdd51525}{set\_is\_same}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ae49d92f127c9e5787ac83ab0c41720fc}{is\_same}})\textcolor{keyword}{\ const\ }\{\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a3e04b2f0d3dfa0027d17eee74d4e34d0}{\_is\_same}}\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ae49d92f127c9e5787ac83ab0c41720fc}{is\_same}};\ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ae49d92f127c9e5787ac83ab0c41720fc}{is\_same}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a3e04b2f0d3dfa0027d17eee74d4e34d0}{\_is\_same}};\ \}}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ab6dbcd2c69f1ab425fda88d18b7788aa}{add\_cur\_batch}}()\ \{\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ae8cbf1b4c173f894169581b7a4b41f23}{\_cur\_batch\_num}}++;\ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a4f2c2b3876097d5a667dab362da40866}{is\_cur\_block\_finished}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a433596b895af650dd98abf83eb10bb29}{\_index\_in\_block}}\ ==\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a6127c405d0e3f884f93d1e5d28dbf393}{\_block}}-\/>rows()\ -\/\ 1;\ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a9c0635c76c67c3bbedaf3cbc06a2358d}{remain\_rows}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a6127c405d0e3f884f93d1e5d28dbf393}{\_block}}-\/>rows()\ -\/\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a433596b895af650dd98abf83eb10bb29}{\_index\_in\_block}};\ \}}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a121320c2b83bfaca2d43e4693071e5f6}{is\_first\_row}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a15ccd5be6aebf3eaf6f5a5ce77440257}{\_is\_first\_row}};\ \}}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a647af56e2fb8970584f8419b43348f71}{set\_is\_first\_row}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a121320c2b83bfaca2d43e4693071e5f6}{is\_first\_row}})\ \{\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a15ccd5be6aebf3eaf6f5a5ce77440257}{\_is\_first\_row}}\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a121320c2b83bfaca2d43e4693071e5f6}{is\_first\_row}};\ \}}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_aaa97433418885be9ab309ffb14ff2908}{set\_cur\_row\_ref}}(\mbox{\hyperlink{structdoris_1_1vectorized_1_1_iterator_row_ref}{vectorized::IteratorRowRef}}*\ ref)\ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ ref-\/>\mbox{\hyperlink{structdoris_1_1vectorized_1_1_iterator_row_ref_af32484a3dd07c432b3feb11232c649cc}{block}}\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a6127c405d0e3f884f93d1e5d28dbf393}{\_block}};}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ ref-\/>\mbox{\hyperlink{structdoris_1_1vectorized_1_1_iterator_row_ref_a15d746d07adcc9299a701efa03baba59}{row\_pos}}\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a433596b895af650dd98abf83eb10bb29}{\_index\_in\_block}};}
\DoxyCodeLine{00178\ \ \ \ \ \}}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_aabe9e894a9a0fe0a6f7b2dd51a9a7523}{inited}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a1a1154efc273bb7a5c2eb672fe357e0a}{\_inited}};\ \}}
\DoxyCodeLine{00180\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_row_location}{RowLocation}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a953f47d24ac2475853ad80c71ae0bab4}{current\_row\_location}}()\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ DCHECK(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a8aff3ad2d6ea1d3015d602bc70e66cf8}{\_record\_rowids}});}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a8d7bc984b841db4dc5e56b4fc16baa4c}{\_block\_row\_locations}}[\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a433596b895af650dd98abf83eb10bb29}{\_index\_in\_block}}];}
\DoxyCodeLine{00183\ \ \ \ \ \}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{comment}{//\ Load\ next\ block\ into\ \_block}}
\DoxyCodeLine{00187\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a3b508fa0a4e0a1253c7e468b3f31eba3}{\_load\_next\_block}}();}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a0f759e113f7a0ef0224093aeaf1f2f45}{RowwiseIteratorUPtr}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ab3c546a20377d02881eabf59afc135b8}{\_iter}};}
\DoxyCodeLine{00190\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_rowset_id}{RowsetId}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a420b7994585cc3552792a3e411e201d3}{\_rowset\_id}};}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a898ea8fc9bfd0bfcce5cfdbf95c7e95d}{\_ori\_return\_cols}}\ =\ 0;}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{comment}{//\ segment\ order,\ used\ to\ compare\ key}}
\DoxyCodeLine{00194\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a713e30dab42509ee78a6fed70d092ce3}{\_order}}\ =\ 0;}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a7837b2d8b2909e13277c6c8d8f1fab29}{\_seq\_col\_idx}}\ =\ -\/1;}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ae923f1f1af45226b3de4dd97f4d64c2c}{\_valid}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a1a1154efc273bb7a5c2eb672fe357e0a}{\_inited}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keyword}{mutable}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a3e04b2f0d3dfa0027d17eee74d4e34d0}{\_is\_same}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00201\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a433596b895af650dd98abf83eb10bb29}{\_index\_in\_block}}\ =\ -\/1;}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_af556fe49a3f44305eb62837e82b14e5b}{\_block\_row\_max}}\ =\ 0;}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a8474dbea719d10a1f30939d8e6f8f3e3}{\_num\_key\_columns}};}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ae8cbf1b4c173f894169581b7a4b41f23}{\_cur\_batch\_num}}\ =\ 0;}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{comment}{//\ used\ to\ store\ data\ load\ from\ iterator-\/>next\_batch(Block*)}}
\DoxyCodeLine{00207\ \ \ \ \ std::shared\_ptr<Block>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a6127c405d0e3f884f93d1e5d28dbf393}{\_block}};}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{comment}{//\ used\ to\ store\ data\ still\ on\ block\ view}}
\DoxyCodeLine{00209\ \ \ \ \ std::list<std::shared\_ptr<Block>>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a787af951cf54155be43cead12873c03f}{\_block\_list}};}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{comment}{//\ use\ to\ identify\ whether\ it's\ first\ block\ load\ from\ RowwiseIterator}}
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a15ccd5be6aebf3eaf6f5a5ce77440257}{\_is\_first\_row}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a8aff3ad2d6ea1d3015d602bc70e66cf8}{\_record\_rowids}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00213\ \ \ \ \ std::vector<RowLocation>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_a8d7bc984b841db4dc5e56b4fc16baa4c}{\_block\_row\_locations}};}
\DoxyCodeLine{00214\ \};}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ VerticalHeapMergeIterator\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{00217\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator}{VerticalHeapMergeIterator}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdoris_1_1_rowwise_iterator}{RowwiseIterator}}\ \{}
\DoxyCodeLine{00218\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{comment}{//\ VerticalMergeIterator\ takes\ the\ ownership\ of\ input\ iterators}}
\DoxyCodeLine{00220\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a80e328c6a6ad87e1da13903b1c07223d}{VerticalHeapMergeIterator}}(std::vector<RowwiseIteratorUPtr>\&\&\ iters,}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<bool>\ iterator\_init\_flags,}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<RowsetId>\ rowset\_ids,\ \textcolor{keywordtype}{size\_t}\ ori\_return\_cols,}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ KeysType\ keys\_type,\ int32\_t\ seq\_col\_idx,}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer}{RowSourcesBuffer}}*\ row\_sources\_buf)}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a0696674eef91bbb772e7df06167bdcfe}{\_origin\_iters}}(std::move(iters)),}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a7e4b95d513a7a43ae02592300dc253d8}{\_iterator\_init\_flags}}(iterator\_init\_flags),}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_ae55a945970a2753227261f8622ff0400}{\_rowset\_ids}}(rowset\_ids),}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a898ea8fc9bfd0bfcce5cfdbf95c7e95d}{\_ori\_return\_cols}}(ori\_return\_cols),}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a30b58649b1b80ed51d6e98381dd1da3d}{\_keys\_type}}(keys\_type),}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a7837b2d8b2909e13277c6c8d8f1fab29}{\_seq\_col\_idx}}(seq\_col\_idx),}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_afcb32a95c5fa1903f836885ca18a61c6}{\_row\_sources\_buf}}(row\_sources\_buf)\ \{\}}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_ae6247f8ce04e434d4d3072ef06f43f1c}{\string~VerticalHeapMergeIterator}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_acd4dc3a0060e4a4be6ac8a791a537f1b}{\_merge\_heap}}.empty())\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ ctx\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_acd4dc3a0060e4a4be6ac8a791a537f1b}{\_merge\_heap}}.top();}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_acd4dc3a0060e4a4be6ac8a791a537f1b}{\_merge\_heap}}.pop();}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ ctx;}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00239\ \ \ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a0199e90e530c5abab0e86913560f42db}{init}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_storage_read_options}{StorageReadOptions}}\&\ opts)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00242\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a2dfce20ac655e0c232480a2ccdb6d8d4}{next\_batch}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a200eaee8b62f4e0fb0a2956d13d3f1d4}{schema}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a756a11838517375695fd8ddc33307da7}{\_schema}};\ \}}
\DoxyCodeLine{00244\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_ab92b1b33f89145f2044d00463181fdb0}{merged\_rows}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a9e02700fcce1681fd8666150aba258be}{\_merged\_rows}};\ \}}
\DoxyCodeLine{00245\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a90543ae7ae975b287ae5bdb218d366d5}{current\_block\_row\_locations}}(std::vector<RowLocation>*\ block\_row\_locations)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ DCHECK(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a8aff3ad2d6ea1d3015d602bc70e66cf8}{\_record\_rowids}});}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ *block\_row\_locations\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a8d7bc984b841db4dc5e56b4fc16baa4c}{\_block\_row\_locations}};}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_status_a6ec1a217f203269ab53d2290d602db24}{Status::OK}}();}
\DoxyCodeLine{00249\ \ \ \ \ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a03601f14b8b8b9af87a0ecb525a2db03}{\_get\_size}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block)\ \{\ \textcolor{keywordflow}{return}\ block-\/>\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block_a9be86262d8ec3739dba5e0910c2339ad}{rows}}();\ \}}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{comment}{//\ It\ will\ be\ released\ after\ '\_merge\_heap'\ has\ been\ built.}}
\DoxyCodeLine{00256\ \ \ \ \ std::vector<RowwiseIteratorUPtr>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a0696674eef91bbb772e7df06167bdcfe}{\_origin\_iters}};}
\DoxyCodeLine{00257\ \ \ \ \ std::vector<bool>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a7e4b95d513a7a43ae02592300dc253d8}{\_iterator\_init\_flags}};}
\DoxyCodeLine{00258\ \ \ \ \ std::vector<RowsetId>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_ae55a945970a2753227261f8622ff0400}{\_rowset\_ids}};}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a898ea8fc9bfd0bfcce5cfdbf95c7e95d}{\_ori\_return\_cols}};}
\DoxyCodeLine{00260\ }
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a756a11838517375695fd8ddc33307da7}{\_schema}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_1_1_vertical_merge_context_comparator}{VerticalMergeContextComparator}}\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_1_1_vertical_merge_context_comparator_a4cab6547bec6f9f95119ca8b5158057c}{operator()}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}*\ lhs,}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}*\ rhs)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ lhs-\/>\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context_ab3d23850730f67eb12574b238856bddd}{compare}}(*rhs);}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00268\ \ \ \ \ \};}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a9feb81ac6422eda595d4196532e74f09}{VMergeHeap}}\ =\ std::priority\_queue<\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_merge_iterator_context}{VerticalMergeIteratorContext}}*,}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<VerticalMergeIteratorContext*>,}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_1_1_vertical_merge_context_comparator}{VerticalMergeContextComparator}}>;}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a9feb81ac6422eda595d4196532e74f09}{VMergeHeap}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_acd4dc3a0060e4a4be6ac8a791a537f1b}{\_merge\_heap}};}
\DoxyCodeLine{00275\ \ \ \ \ std::vector<VerticalMergeIteratorContext*>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_ae3e452029743c856f5a02734c8b95b17}{\_ori\_iter\_ctx}};}
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_ae52f7e2bd719b8b7cad36c9a324a0137}{\_block\_row\_max}}\ =\ 0;}
\DoxyCodeLine{00277\ \ \ \ \ KeysType\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a30b58649b1b80ed51d6e98381dd1da3d}{\_keys\_type}};}
\DoxyCodeLine{00278\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a7837b2d8b2909e13277c6c8d8f1fab29}{\_seq\_col\_idx}}\ =\ -\/1;}
\DoxyCodeLine{00279\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer}{RowSourcesBuffer}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_afcb32a95c5fa1903f836885ca18a61c6}{\_row\_sources\_buf}};}
\DoxyCodeLine{00280\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a9e02700fcce1681fd8666150aba258be}{\_merged\_rows}}\ =\ 0;}
\DoxyCodeLine{00281\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_storage_read_options}{StorageReadOptions}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a795134e80022ff889f9f64d7a3614f47}{\_opts}};}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a8aff3ad2d6ea1d3015d602bc70e66cf8}{\_record\_rowids}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00283\ \ \ \ \ std::vector<RowLocation>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_heap_merge_iterator_a8d7bc984b841db4dc5e56b4fc16baa4c}{\_block\_row\_locations}};}
\DoxyCodeLine{00284\ \};}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ VerticalMaskMergeIterator\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ //}}
\DoxyCodeLine{00287\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator}{VerticalMaskMergeIterator}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdoris_1_1_rowwise_iterator}{RowwiseIterator}}\ \{}
\DoxyCodeLine{00288\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{comment}{//\ VerticalMaskMergeIterator\ takes\ the\ ownership\ of\ input\ iterators}}
\DoxyCodeLine{00290\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a9cacbe6523b6dee50fd07af1ab78033b}{VerticalMaskMergeIterator}}(std::vector<RowwiseIteratorUPtr>\&\&\ iters,\ \textcolor{keywordtype}{size\_t}\ ori\_return\_cols,}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer}{RowSourcesBuffer}}*\ row\_sources\_buf)}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a0696674eef91bbb772e7df06167bdcfe}{\_origin\_iters}}(std::move(iters)),}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a898ea8fc9bfd0bfcce5cfdbf95c7e95d}{\_ori\_return\_cols}}(ori\_return\_cols),}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_afcb32a95c5fa1903f836885ca18a61c6}{\_row\_sources\_buf}}(row\_sources\_buf)\ \{\}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a55928a9b82efd562e7a89409783e73bf}{\string~VerticalMaskMergeIterator}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ iter\ :\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a89e93192f0477f98cf02bb51b7ab61f8}{\_origin\_iter\_ctx}})\ \{}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ iter;}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00300\ \ \ \ \ \}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a0199e90e530c5abab0e86913560f42db}{init}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_storage_read_options}{StorageReadOptions}}\&\ opts)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a2dfce20ac655e0c232480a2ccdb6d8d4}{next\_batch}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a200eaee8b62f4e0fb0a2956d13d3f1d4}{schema}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a756a11838517375695fd8ddc33307da7}{\_schema}};\ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_ad75b315937d6f488e2940e6593f9af21}{next\_row}}(\mbox{\hyperlink{structdoris_1_1vectorized_1_1_iterator_row_ref}{IteratorRowRef}}*\ ref)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a2b587a52829304c6921d04ec7e869e21}{unique\_key\_next\_row}}(\mbox{\hyperlink{structdoris_1_1vectorized_1_1_iterator_row_ref}{IteratorRowRef}}*\ ref)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00313\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a03601f14b8b8b9af87a0ecb525a2db03}{\_get\_size}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}}*\ block)\ \{\ \textcolor{keywordflow}{return}\ block-\/>\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block_a9be86262d8ec3739dba5e0910c2339ad}{rows}}();\ \}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a6f74fe432609692368361c3e422be3a2}{check\_all\_iter\_finished}}();}
\DoxyCodeLine{00316\ }
\DoxyCodeLine{00317\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{comment}{//\ released\ after\ build\ ctx}}
\DoxyCodeLine{00319\ \ \ \ \ std::vector<RowwiseIteratorUPtr>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a0696674eef91bbb772e7df06167bdcfe}{\_origin\_iters}};}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a898ea8fc9bfd0bfcce5cfdbf95c7e95d}{\_ori\_return\_cols}}\ =\ 0;}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ std::vector<VerticalMergeIteratorContext*>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a89e93192f0477f98cf02bb51b7ab61f8}{\_origin\_iter\_ctx}};}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a756a11838517375695fd8ddc33307da7}{\_schema}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_ae52f7e2bd719b8b7cad36c9a324a0137}{\_block\_row\_max}}\ =\ 0;}
\DoxyCodeLine{00327\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer}{RowSourcesBuffer}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_afcb32a95c5fa1903f836885ca18a61c6}{\_row\_sources\_buf}};}
\DoxyCodeLine{00328\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_storage_read_options}{StorageReadOptions}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_vertical_mask_merge_iterator_a795134e80022ff889f9f64d7a3614f47}{\_opts}};}
\DoxyCodeLine{00329\ \};}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \textcolor{comment}{//\ segment\ merge\ iterator}}
\DoxyCodeLine{00332\ std::shared\_ptr<RowwiseIterator>\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a61817e15a2bd2df26b24dda54545442a}{new\_vertical\_heap\_merge\_iterator}}(}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ std::vector<RowwiseIteratorUPtr>\&\&\ inputs,\ \textcolor{keyword}{const}\ std::vector<bool>\&\ iterator\_init\_flag,}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::vector<RowsetId>\&\ rowset\_ids,\ \textcolor{keywordtype}{size\_t}\ \_ori\_return\_cols,\ KeysType\ key\_type,}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ uint32\_t\ seq\_col\_idx,\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer}{RowSourcesBuffer}}*\ row\_sources\_buf);}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ std::shared\_ptr<RowwiseIterator>\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a10a2b30a1d5eec82b07c305356c4a49e}{new\_vertical\_mask\_merge\_iterator}}(}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ std::vector<RowwiseIteratorUPtr>\&\&\ inputs,\ \textcolor{keywordtype}{size\_t}\ ori\_return\_cols,}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_row_sources_buffer}{RowSourcesBuffer}}*\ row\_sources\_buf);}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \}\ \textcolor{comment}{//\ namespace\ vectorized}}
\DoxyCodeLine{00342\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
