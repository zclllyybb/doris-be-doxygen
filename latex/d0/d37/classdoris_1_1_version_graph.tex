\hypertarget{classdoris_1_1_version_graph}{}\doxysection{Version\+Graph类 参考}
\label{classdoris_1_1_version_graph}\index{VersionGraph@{VersionGraph}}


{\ttfamily \#include $<$version\+\_\+graph.\+h$>$}

\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classdoris_1_1_version_graph_add8c5ff93af5a20377fd396e46744f52}{construct\+\_\+version\+\_\+graph}} (const std\+::vector$<$ \mbox{\hyperlink{namespacedoris_a8e1aa733e7ffe7bd29887ebdf7c1303d}{Rowset\+Meta\+Shared\+Ptr}} $>$ \&rs\+\_\+metas, int64\+\_\+t $\ast$max\+\_\+version)
\item 
void \mbox{\hyperlink{classdoris_1_1_version_graph_ae4f8c2f76841a5166ba6a69a4ca6ec4d}{reconstruct\+\_\+version\+\_\+graph}} (const std\+::vector$<$ \mbox{\hyperlink{namespacedoris_a8e1aa733e7ffe7bd29887ebdf7c1303d}{Rowset\+Meta\+Shared\+Ptr}} $>$ \&rs\+\_\+metas, int64\+\_\+t $\ast$max\+\_\+version)
\begin{DoxyCompactList}\small\item\em Reconstruct the graph, begin construction the vertex vec and edges list will be cleared. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classdoris_1_1_version_graph_a4f590e7163b01eff9ebe1e5d415f2d3c}{add\+\_\+version\+\_\+to\+\_\+graph}} (const \mbox{\hyperlink{structdoris_1_1_version}{Version}} \&\mbox{\hyperlink{file__helper_8h_acd99bb05ca015e7d74448acb1deba7ca}{version}})
\begin{DoxyCompactList}\small\item\em Add a version to this graph, graph will add the version and edge in version. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classdoris_1_1_status}{Status}} \mbox{\hyperlink{classdoris_1_1_version_graph_ab90ac5d9d849636bcc551d6116a3895a}{delete\+\_\+version\+\_\+from\+\_\+graph}} (const \mbox{\hyperlink{structdoris_1_1_version}{Version}} \&\mbox{\hyperlink{file__helper_8h_acd99bb05ca015e7d74448acb1deba7ca}{version}})
\item 
\mbox{\hyperlink{classdoris_1_1_status}{Status}} \mbox{\hyperlink{classdoris_1_1_version_graph_a94ab67a25c8b6994b01b65da2fa27550}{capture\+\_\+consistent\+\_\+versions}} (const \mbox{\hyperlink{structdoris_1_1_version}{Version}} \&spec\+\_\+version, std\+::vector$<$ \mbox{\hyperlink{structdoris_1_1_version}{Version}} $>$ $\ast$version\+\_\+path) const
\item 
double \mbox{\hyperlink{classdoris_1_1_version_graph_aa57202365d6e158acbcddbaf35913861}{get\+\_\+orphan\+\_\+vertex\+\_\+ratio}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classdoris_1_1_version_graph_ad067dd3f3debb1ab145bdbbf2aac6a03}{\+\_\+add\+\_\+vertex\+\_\+to\+\_\+graph}} (int64\+\_\+t vertex\+\_\+value)
\begin{DoxyCompactList}\small\item\em Private method add a version to graph. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \mbox{\hyperlink{structdoris_1_1_vertex}{Vertex}} $>$ \mbox{\hyperlink{classdoris_1_1_version_graph_a57c0465e057924c8722652f2014da36b}{\+\_\+version\+\_\+graph}}
\item 
std\+::unordered\+\_\+map$<$ int64\+\_\+t, int64\+\_\+t $>$ \mbox{\hyperlink{classdoris_1_1_version_graph_a39c4d34613c0064d086e278bbfdceb3e}{\+\_\+vertex\+\_\+index\+\_\+map}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\mbox{\hyperlink{classdoris_1_1_version_graph}{Version\+Graph}} class which is implemented to build and maintain total versions of rowsets. This class use adjacency-\/matrix represent rowsets version and links. A vertex is a version and a link is the \+\_\+version object of a rowset (from start version to end version + 1). Use this class, when given a spec\+\_\+version, we can get a version path which is the shortest path in the graph. 

\doxysubsection{成员函数说明}
\mbox{\Hypertarget{classdoris_1_1_version_graph_add8c5ff93af5a20377fd396e46744f52}\label{classdoris_1_1_version_graph_add8c5ff93af5a20377fd396e46744f52}} 
\index{VersionGraph@{VersionGraph}!construct\_version\_graph@{construct\_version\_graph}}
\index{construct\_version\_graph@{construct\_version\_graph}!VersionGraph@{VersionGraph}}
\doxysubsubsection{\texorpdfstring{construct\_version\_graph()}{construct\_version\_graph()}}
{\footnotesize\ttfamily void construct\+\_\+version\+\_\+graph (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{namespacedoris_a8e1aa733e7ffe7bd29887ebdf7c1303d}{Rowset\+Meta\+Shared\+Ptr}} $>$ \&}]{rs\+\_\+metas,  }\item[{int64\+\_\+t $\ast$}]{max\+\_\+version }\end{DoxyParamCaption})}

Use rs\+\_\+metas to construct the graph including vertex and edges, and return the max\+\_\+version in metas. 函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_add8c5ff93af5a20377fd396e46744f52_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_add8c5ff93af5a20377fd396e46744f52_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_version_graph_ae4f8c2f76841a5166ba6a69a4ca6ec4d}\label{classdoris_1_1_version_graph_ae4f8c2f76841a5166ba6a69a4ca6ec4d}} 
\index{VersionGraph@{VersionGraph}!reconstruct\_version\_graph@{reconstruct\_version\_graph}}
\index{reconstruct\_version\_graph@{reconstruct\_version\_graph}!VersionGraph@{VersionGraph}}
\doxysubsubsection{\texorpdfstring{reconstruct\_version\_graph()}{reconstruct\_version\_graph()}}
{\footnotesize\ttfamily void reconstruct\+\_\+version\+\_\+graph (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ \mbox{\hyperlink{namespacedoris_a8e1aa733e7ffe7bd29887ebdf7c1303d}{Rowset\+Meta\+Shared\+Ptr}} $>$ \&}]{rs\+\_\+metas,  }\item[{int64\+\_\+t $\ast$}]{max\+\_\+version }\end{DoxyParamCaption})}



Reconstruct the graph, begin construction the vertex vec and edges list will be cleared. 

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_ae4f8c2f76841a5166ba6a69a4ca6ec4d_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_ae4f8c2f76841a5166ba6a69a4ca6ec4d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_version_graph_a4f590e7163b01eff9ebe1e5d415f2d3c}\label{classdoris_1_1_version_graph_a4f590e7163b01eff9ebe1e5d415f2d3c}} 
\index{VersionGraph@{VersionGraph}!add\_version\_to\_graph@{add\_version\_to\_graph}}
\index{add\_version\_to\_graph@{add\_version\_to\_graph}!VersionGraph@{VersionGraph}}
\doxysubsubsection{\texorpdfstring{add\_version\_to\_graph()}{add\_version\_to\_graph()}}
{\footnotesize\ttfamily void add\+\_\+version\+\_\+to\+\_\+graph (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structdoris_1_1_version}{Version}} \&}]{version }\end{DoxyParamCaption})}



Add a version to this graph, graph will add the version and edge in version. 

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=341pt]{d0/d37/classdoris_1_1_version_graph_a4f590e7163b01eff9ebe1e5d415f2d3c_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_a4f590e7163b01eff9ebe1e5d415f2d3c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_version_graph_ab90ac5d9d849636bcc551d6116a3895a}\label{classdoris_1_1_version_graph_ab90ac5d9d849636bcc551d6116a3895a}} 
\index{VersionGraph@{VersionGraph}!delete\_version\_from\_graph@{delete\_version\_from\_graph}}
\index{delete\_version\_from\_graph@{delete\_version\_from\_graph}!VersionGraph@{VersionGraph}}
\doxysubsubsection{\texorpdfstring{delete\_version\_from\_graph()}{delete\_version\_from\_graph()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_status}{Status}} delete\+\_\+version\+\_\+from\+\_\+graph (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structdoris_1_1_version}{Version}} \&}]{version }\end{DoxyParamCaption})}

Delete a version from graph. Notice that this del operation only remove this edges and remain the vertex. 函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_ab90ac5d9d849636bcc551d6116a3895a_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_ab90ac5d9d849636bcc551d6116a3895a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_version_graph_a94ab67a25c8b6994b01b65da2fa27550}\label{classdoris_1_1_version_graph_a94ab67a25c8b6994b01b65da2fa27550}} 
\index{VersionGraph@{VersionGraph}!capture\_consistent\_versions@{capture\_consistent\_versions}}
\index{capture\_consistent\_versions@{capture\_consistent\_versions}!VersionGraph@{VersionGraph}}
\doxysubsubsection{\texorpdfstring{capture\_consistent\_versions()}{capture\_consistent\_versions()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_status}{Status}} capture\+\_\+consistent\+\_\+versions (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structdoris_1_1_version}{Version}} \&}]{spec\+\_\+version,  }\item[{std\+::vector$<$ \mbox{\hyperlink{structdoris_1_1_version}{Version}} $>$ $\ast$}]{version\+\_\+path }\end{DoxyParamCaption}) const}

Given a spec\+\_\+version, this method can find a version path which is the shortest path in the graph. The version paths are added to version\+\_\+path as return info. 函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_a94ab67a25c8b6994b01b65da2fa27550_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_a94ab67a25c8b6994b01b65da2fa27550_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_version_graph_aa57202365d6e158acbcddbaf35913861}\label{classdoris_1_1_version_graph_aa57202365d6e158acbcddbaf35913861}} 
\index{VersionGraph@{VersionGraph}!get\_orphan\_vertex\_ratio@{get\_orphan\_vertex\_ratio}}
\index{get\_orphan\_vertex\_ratio@{get\_orphan\_vertex\_ratio}!VersionGraph@{VersionGraph}}
\doxysubsubsection{\texorpdfstring{get\_orphan\_vertex\_ratio()}{get\_orphan\_vertex\_ratio()}}
{\footnotesize\ttfamily double get\+\_\+orphan\+\_\+vertex\+\_\+ratio (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_aa57202365d6e158acbcddbaf35913861_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_version_graph_ad067dd3f3debb1ab145bdbbf2aac6a03}\label{classdoris_1_1_version_graph_ad067dd3f3debb1ab145bdbbf2aac6a03}} 
\index{VersionGraph@{VersionGraph}!\_add\_vertex\_to\_graph@{\_add\_vertex\_to\_graph}}
\index{\_add\_vertex\_to\_graph@{\_add\_vertex\_to\_graph}!VersionGraph@{VersionGraph}}
\doxysubsubsection{\texorpdfstring{\_add\_vertex\_to\_graph()}{\_add\_vertex\_to\_graph()}}
{\footnotesize\ttfamily void \+\_\+add\+\_\+vertex\+\_\+to\+\_\+graph (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{vertex\+\_\+value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Private method add a version to graph. 

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d0/d37/classdoris_1_1_version_graph_ad067dd3f3debb1ab145bdbbf2aac6a03_icgraph}
\end{center}
\end{figure}


\doxysubsection{类成员变量说明}
\mbox{\Hypertarget{classdoris_1_1_version_graph_a57c0465e057924c8722652f2014da36b}\label{classdoris_1_1_version_graph_a57c0465e057924c8722652f2014da36b}} 
\index{VersionGraph@{VersionGraph}!\_version\_graph@{\_version\_graph}}
\index{\_version\_graph@{\_version\_graph}!VersionGraph@{VersionGraph}}
\doxysubsubsection{\texorpdfstring{\_version\_graph}{\_version\_graph}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{structdoris_1_1_vertex}{Vertex}}$>$ \+\_\+version\+\_\+graph\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1_version_graph_a39c4d34613c0064d086e278bbfdceb3e}\label{classdoris_1_1_version_graph_a39c4d34613c0064d086e278bbfdceb3e}} 
\index{VersionGraph@{VersionGraph}!\_vertex\_index\_map@{\_vertex\_index\_map}}
\index{\_vertex\_index\_map@{\_vertex\_index\_map}!VersionGraph@{VersionGraph}}
\doxysubsubsection{\texorpdfstring{\_vertex\_index\_map}{\_vertex\_index\_map}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$int64\+\_\+t, int64\+\_\+t$>$ \+\_\+vertex\+\_\+index\+\_\+map\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
/\+Users/dabowang/be\+\_\+all/olap/\mbox{\hyperlink{version__graph_8h}{version\+\_\+graph.\+h}}\item 
/\+Users/dabowang/be\+\_\+all/olap/\mbox{\hyperlink{version__graph_8cpp}{version\+\_\+graph.\+cpp}}\end{DoxyCompactItemize}
