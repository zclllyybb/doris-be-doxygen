\hypertarget{like__column__predicate_8h_source}{}\doxysection{like\+\_\+column\+\_\+predicate.\+h}
\label{like__column__predicate_8h_source}\index{/Users/dabowang/doris/be/src/olap/like\_column\_predicate.h@{/Users/dabowang/doris/be/src/olap/like\_column\_predicate.h}}
\mbox{\hyperlink{like__column__predicate_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{column__predicate_8h}{olap/column\_predicate.h}}"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{udf_8h}{udf/udf.h}}"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{column__dictionary_8h}{vec/columns/column\_dictionary.h}}"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{string__ref_8h}{vec/common/string\_ref.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vec_2core_2types_8h}{vec/core/types.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{like_8h}{vec/functions/like.h}}"{}}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_like_column_predicate}{LikeColumnPredicate}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdoris_1_1_column_predicate}{ColumnPredicate}}\ \{}
\DoxyCodeLine{00029\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00030\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_like_column_predicate}{LikeColumnPredicate}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_column_predicate_a8a53faec58b065334afd609300e60fea}{opposite}},\ uint32\_t\ \mbox{\hyperlink{classdoris_1_1_column_predicate_a1dc741e0ee4ae02d671b288213c01fc3}{column\_id}},\ \mbox{\hyperlink{classdoris_1_1_function_context}{doris::FunctionContext}}*\ fn\_ctx,}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{doris::StringRef}}\ val);}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a1f42401db40dc57163f07f48628fd12e}{\string~LikeColumnPredicate}}()\ \textcolor{keyword}{override}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a74200fe7b3fc40cf1385f05359608667}{PredicateType}}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a352c565b57bc1155b4d9b43436dec0ca}{type}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacedoris_a74200fe7b3fc40cf1385f05359608667a2dcbad7477fd40561e8b8198f173bd47}{PredicateType::EQ}};\ \}}
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_afa930f14a0484f1c60a6a85ce2471339}{evaluate\_vec}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_column}{vectorized::IColumn}}\&\ column,\ uint16\_t\ size,\ \textcolor{keywordtype}{bool}*\ flags)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_aca995153c948370847f2f27be8db2784}{evaluate}}(\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_bitmap_index_iterator}{BitmapIndexIterator}}*\ iterator,\ uint32\_t\ num\_rows,}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ roaring::Roaring*\ roaring)\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_status_a6ec1a217f203269ab53d2290d602db24}{Status::OK}}();}
\DoxyCodeLine{00040\ \ \ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_aca995153c948370847f2f27be8db2784}{evaluate}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_column}{vectorized::IColumn}}\&\ column,\ uint16\_t*\ sel,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t\ size)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a9b2fcad1bc9260f75d85dfb8a8caec73}{evaluate\_and\_vec}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_column}{vectorized::IColumn}}\&\ column,\ uint16\_t\ size,}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}*\ flags)\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_abf5550de45f17822de405b304be76997}{get\_search\_str}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::string(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\mbox{\hyperlink{classdoris_1_1_like_column_predicate_a23e134b6e4a59e17da9dc275cf6bb7cd}{pattern}}.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}}),\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a23e134b6e4a59e17da9dc275cf6bb7cd}{pattern}}.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}});}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a39031974b4594cb3c85b5df7c54caee1}{is\_opposite}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_column_predicate_a3d4dbf9b82944c74134bd48aa074778b}{\_opposite}};\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_aa92f156713c56891e18fc60b3b38f40e}{set\_page\_ng\_bf}}(std::unique\_ptr<segment\_v2::BloomFilter>\ src)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_ad1ed4220940badd6bc5ca7bb0dc05fa5}{\_page\_ng\_bf}}\ =\ std::move(src);}
\DoxyCodeLine{00055\ \ \ \ \ \}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a25e9932030485c4d27e97ae8a88a9c70}{evaluate\_and}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_bloom_filter}{BloomFilter}}*\ bf)\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1_like_column_predicate_ad1ed4220940badd6bc5ca7bb0dc05fa5}{\_page\_ng\_bf}})\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bf-\/>contains(*\mbox{\hyperlink{classdoris_1_1_like_column_predicate_ad1ed4220940badd6bc5ca7bb0dc05fa5}{\_page\_ng\_bf}});}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a36554c6b452251bb0ae9417226ba0c67}{can\_do\_bloom\_filter}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ is\_and>}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_ad181a772259a9ca82b726684094d1289}{\_evaluate\_vec}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_column}{vectorized::IColumn}}\&\ column,\ uint16\_t\ size,\ \textcolor{keywordtype}{bool}*\ flags)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (column.\mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_column_adf7bb7bb5661fd4437db8a5c333444b2}{is\_nullable}}())\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ nullable\_col\ =}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vectorized::check\_and\_get\_column<vectorized::ColumnNullable>(column);}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ null\_map\_data\ =\ nullable\_col-\/>get\_null\_map\_column().get\_data();}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ nested\_col\ =\ nullable\_col-\/>get\_nested\_column();}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (nested\_col.is\_column\_dictionary())\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ nested\_col\_ptr\ =\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a843f4a4b1795a64d05252b3ef036d904}{vectorized::check\_and\_get\_column}}<}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_dictionary}{vectorized::ColumnDictionary<vectorized::Int32>}}>(nested\_col);}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ data\_array\ =\ nested\_col\_ptr-\/>\mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_dictionary_a3206c08675c03058605f3a6e5a452b5c}{get\_data}}();}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint16\_t\ i\ =\ 0;\ i\ <\ size;\ i++)\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (null\_map\_data[i])\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (is\_and)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ flags[i]\ \&=\ \mbox{\hyperlink{classdoris_1_1_column_predicate_a3d4dbf9b82944c74134bd48aa074778b}{\_opposite}};}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ flags[i]\ =\ \mbox{\hyperlink{classdoris_1_1_column_predicate_a3d4dbf9b82944c74134bd48aa074778b}{\_opposite}};}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ cell\_value\ =\ nested\_col\_ptr-\/>get\_shrink\_value(data\_array[i]);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (is\_and)\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}}\ =\ 0;}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classdoris_1_1_like_column_predicate_a541844e5b90ae461f46c586e6196b5a2}{\_state}}-\/>\mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_state_a21fd60e7f2f75698b8d2d854ddda5eb3}{scalar\_function}})(}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_search_state}{vectorized::LikeSearchState}}*\textcolor{keyword}{>}(\&\mbox{\hyperlink{classdoris_1_1_like_column_predicate_a595db5a817b5e926a2e6c7644de18602}{\_like\_state}}),}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}(cell\_value.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ cell\_value.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}),\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a23e134b6e4a59e17da9dc275cf6bb7cd}{pattern}},\ \&\mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}});}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ flags[i]\ \&=\ \mbox{\hyperlink{classdoris_1_1_column_predicate_a3d4dbf9b82944c74134bd48aa074778b}{\_opposite}}\ \string^\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}}\ =\ 0;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classdoris_1_1_like_column_predicate_a541844e5b90ae461f46c586e6196b5a2}{\_state}}-\/>\mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_state_a21fd60e7f2f75698b8d2d854ddda5eb3}{scalar\_function}})(}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_search_state}{vectorized::LikeSearchState}}*\textcolor{keyword}{>}(\&\mbox{\hyperlink{classdoris_1_1_like_column_predicate_a595db5a817b5e926a2e6c7644de18602}{\_like\_state}}),}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}(cell\_value.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ cell\_value.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}),\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a23e134b6e4a59e17da9dc275cf6bb7cd}{pattern}},\ \&\mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}});}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ flags[i]\ =\ \mbox{\hyperlink{classdoris_1_1_column_predicate_a3d4dbf9b82944c74134bd48aa074778b}{\_opposite}}\ \string^\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}};}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LOG(FATAL)\ <<\ \textcolor{stringliteral}{"{}vectorized\ (not)\ like\ predicates\ should\ be\ dict\ column"{}};}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (column.\mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_column_a38df4218ad9893243f04885c99b8da73}{is\_column\_dictionary}}())\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ nested\_col\_ptr\ =\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a843f4a4b1795a64d05252b3ef036d904}{vectorized::check\_and\_get\_column}}<}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_dictionary}{vectorized::ColumnDictionary<vectorized::Int32>}}>(column);}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ data\_array\ =\ nested\_col\_ptr-\/>\mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_dictionary_a3206c08675c03058605f3a6e5a452b5c}{get\_data}}();}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint16\_t\ i\ =\ 0;\ i\ <\ size;\ i++)\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ cell\_value\ =\ nested\_col\_ptr-\/>get\_shrink\_value(data\_array[i]);}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (is\_and)\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}}\ =\ 0;}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classdoris_1_1_like_column_predicate_a541844e5b90ae461f46c586e6196b5a2}{\_state}}-\/>\mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_state_a21fd60e7f2f75698b8d2d854ddda5eb3}{scalar\_function}})(}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_search_state}{vectorized::LikeSearchState}}*\textcolor{keyword}{>}(\&\mbox{\hyperlink{classdoris_1_1_like_column_predicate_a595db5a817b5e926a2e6c7644de18602}{\_like\_state}}),}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}(cell\_value.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ cell\_value.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}),\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a23e134b6e4a59e17da9dc275cf6bb7cd}{pattern}},\ \&\mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}});}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ flags[i]\ \&=\ \mbox{\hyperlink{classdoris_1_1_column_predicate_a3d4dbf9b82944c74134bd48aa074778b}{\_opposite}}\ \string^\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}};}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}}\ =\ 0;}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\mbox{\hyperlink{classdoris_1_1_like_column_predicate_a541844e5b90ae461f46c586e6196b5a2}{\_state}}-\/>\mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_state_a21fd60e7f2f75698b8d2d854ddda5eb3}{scalar\_function}})(}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const\_cast<}\mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_search_state}{vectorized::LikeSearchState}}*\textcolor{keyword}{>}(\&\mbox{\hyperlink{classdoris_1_1_like_column_predicate_a595db5a817b5e926a2e6c7644de18602}{\_like\_state}}),}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}(cell\_value.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ cell\_value.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}),\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a23e134b6e4a59e17da9dc275cf6bb7cd}{pattern}},\ \&\mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}});}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ flags[i]\ =\ \mbox{\hyperlink{classdoris_1_1_column_predicate_a3d4dbf9b82944c74134bd48aa074778b}{\_opposite}}\ \string^\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}};}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LOG(FATAL)\ <<\ \textcolor{stringliteral}{"{}vectorized\ (not)\ like\ predicates\ should\ be\ dict\ column"{}};}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_ab675b0be49cab2cb7b4b431ec91ef000}{\_debug\_string}}()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ std::string\ info\ =\ \textcolor{stringliteral}{"{}LikeColumnPredicate"{}};}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ info;}
\DoxyCodeLine{00134\ \ \ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_af758ad14a0696097de914cada9ed6869}{\_origin}};}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{comment}{//\ lifetime\ controlled\ by\ scan\ node}}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_state}{StateType}}\ =\ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_state}{vectorized::LikeState}};}
\DoxyCodeLine{00139\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a23e134b6e4a59e17da9dc275cf6bb7cd}{pattern}};}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_state}{StateType}}*\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a541844e5b90ae461f46c586e6196b5a2}{\_state}};}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{comment}{//\ A\ separate\ scratch\ region\ is\ required\ for\ every\ concurrent\ caller\ of\ the}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//\ Hyperscan\ API.\ So\ here\ \_like\_state\ is\ separate\ for\ each\ instance\ of}}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{comment}{//\ LikeColumnPredicate.}}
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_like_search_state}{vectorized::LikeSearchState}}\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_a595db5a817b5e926a2e6c7644de18602}{\_like\_state}};}
\DoxyCodeLine{00147\ \ \ \ \ std::unique\_ptr<segment\_v2::BloomFilter>\ \mbox{\hyperlink{classdoris_1_1_like_column_predicate_ad1ed4220940badd6bc5ca7bb0dc05fa5}{\_page\_ng\_bf}};\ \textcolor{comment}{//\ for\ ngram-\/bf\ index}}
\DoxyCodeLine{00148\ \};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
