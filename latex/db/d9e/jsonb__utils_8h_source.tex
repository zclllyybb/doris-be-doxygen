\hypertarget{jsonb__utils_8h_source}{}\doxysection{jsonb\+\_\+utils.\+h}
\label{jsonb__utils_8h_source}\index{/Users/dabowang/doris/be/src/util/jsonb\_utils.h@{/Users/dabowang/doris/be/src/util/jsonb\_utils.h}}
\mbox{\hyperlink{jsonb__utils_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ \ Copyright\ (c)\ 2014,\ Facebook,\ Inc.}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ \ All\ rights\ reserved.}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ \ This\ source\ code\ is\ licensed\ under\ the\ BSD-\/style\ license\ found\ in\ the}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ \ LICENSE\ file\ in\ the\ root\ directory\ of\ this\ source\ tree.\ An\ additional\ grant}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ \ of\ patent\ rights\ can\ be\ found\ in\ the\ PATENTS\ file\ in\ the\ same\ directory.}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{comment}{/*}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ This\ header\ file\ defines\ miscellaneous\ utility\ classes.}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ *\ @author\ Tian\ Xia\ <tianx@fb.com>}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ *\ \ this\ file\ is\ copied\ from\ }}
\DoxyCodeLine{00017\ \textcolor{comment}{\ *\ https://github.com/facebook/mysql-\/5.6/blob/fb-\/mysql-\/5.6.35/fbson/FbsonUtil.h}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ *\ and\ modified\ by\ Doris}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifndef\ JSONB\_JSONBUTIL\_H}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#define\ JSONB\_JSONBUTIL\_H}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <sstream>}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{jsonb__document_8h}{jsonb\_document.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{jsonb__stream_8h}{jsonb\_stream.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{jsonb__writer_8h}{jsonb\_writer.h}}"{}}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#define\ OUT\_BUF\_SIZE\ 1024}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{comment}{/*}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ *\ JsonbToJson\ converts\ an\ JsonbValue\ object\ to\ a\ JSON\ string.}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00037\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_jsonb_to_json}{JsonbToJson}}\ \{}
\DoxyCodeLine{00038\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a1000e149218dcdc7846e2028a7109abd}{JsonbToJson}}()\ :\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}(\mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a9d978ae06723d97188789507b30643a4}{buffer\_}},\ \mbox{\hyperlink{jsonb__utils_8h_a8abd3ebb6e18277a43604c06f41e77a8}{OUT\_BUF\_SIZE}})\ \{\}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{//\ get\ json\ string}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a268019d7ad5af5acf02a160f3b3eedba}{to\_json\_string}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ \textcolor{keywordtype}{size\_t}\ size)\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{doris::JsonbValue}}*\ pval\ =\ \mbox{\hyperlink{classdoris_1_1_jsonb_document_a6f3d6d8641e307033b92fc8a13385afb}{doris::JsonbDocument::createDocument}}(\mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ size)-\/>getValue();}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a268019d7ad5af5acf02a160f3b3eedba}{to\_json\_string}}(pval);}
\DoxyCodeLine{00045\ \ \ \ \ \}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_ab3aee010753633df5d9c2a0b69ab8528}{to\_json\_string}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ val)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.clear();}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_ab7c601ee9f5738373027856ddad011fb}{seekp}}(0);}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (val)\ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a03fbfcf1955ed3fae28c8d3c7ffd0527}{intern\_json}}(val);}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(0);}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ std::string\ json\_string\ \{\mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a3ae764a1c27814cb7a08d5ad46afdb0d}{getBuffer}}()\};}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ json\_string;}
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ std::string\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a54c6b55e0bf144712eb6817af88409e1}{jsonb\_to\_json\_string}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ \textcolor{keywordtype}{size\_t}\ size)\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json}{JsonbToJson}}\ jsonb\_to\_json;}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ jsonb\_to\_json.\mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a268019d7ad5af5acf02a160f3b3eedba}{to\_json\_string}}(\mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ size);}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{comment}{//\ recursively\ convert\ JsonbValue}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a03fbfcf1955ed3fae28c8d3c7ffd0527}{intern\_json}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ val)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (val-\/>\mbox{\hyperlink{classdoris_1_1_jsonb_value_a552abcd9b973a92d97588cacbe8da1e3}{type}}())\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa613ef02b207b70979529fcc17f5fd315}{JsonbType::T\_Null}}:\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(\textcolor{stringliteral}{"{}null"{}},\ 4);}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa9bfaede0afa1be49140472b2650d02bc}{JsonbType::T\_True}}:\ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(\textcolor{stringliteral}{"{}true"{}},\ 4);}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fad15e3ab09e20a41c57b14ea4583d0fee}{JsonbType::T\_False}}:\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(\textcolor{stringliteral}{"{}false"{}},\ 5);}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa45059cf611d6cd3c6564e2cb6685276b}{JsonbType::T\_Int8}}:\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(((\mbox{\hyperlink{classdoris_1_1_number_val_t}{JsonbInt8Val}}*)val)-\/>val());}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa18f0cfeb0feeef1f58a2181ade5cab42}{JsonbType::T\_Int16}}:\ \{}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(((\mbox{\hyperlink{classdoris_1_1_number_val_t}{JsonbInt16Val}}*)val)-\/>val());}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa1416be1d14a1c85d289129c8b0affb14}{JsonbType::T\_Int32}}:\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(((\mbox{\hyperlink{classdoris_1_1_number_val_t}{JsonbInt32Val}}*)val)-\/>val());}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365faf55d3e56b3b305b58556a48197459986}{JsonbType::T\_Int64}}:\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(((\mbox{\hyperlink{classdoris_1_1_number_val_t}{JsonbInt64Val}}*)val)-\/>val());}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa5beee66ad57faf1b6484a60cb204f6f3}{JsonbType::T\_Double}}:\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(((\mbox{\hyperlink{classdoris_1_1_number_val_t}{JsonbDoubleVal}}*)val)-\/>val());}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa6c90b26ab7419d7000403f943256e489}{JsonbType::T\_Float}}:\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(((\mbox{\hyperlink{classdoris_1_1_number_val_t}{JsonbFloatVal}}*)val)-\/>val());}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fac4bcbad3e1e51f2ebc38f1ac3742673d}{JsonbType::T\_Int128}}:\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(((\mbox{\hyperlink{classdoris_1_1_number_val_t}{JsonbInt128Val}}*)val)-\/>val());}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa9e90ba6f8aad5f047fa1000475fdcbfa}{JsonbType::T\_String}}:\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a202a0bfd4eb8321d3c8552d985b0a7e4}{string\_to\_json}}(((\mbox{\hyperlink{classdoris_1_1_jsonb_string_val}{JsonbStringVal}}*)val)-\/>getBlob(),\ ((\mbox{\hyperlink{classdoris_1_1_jsonb_string_val}{JsonbStringVal}}*)val)-\/>length());}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa59880eb1e285cd40c9ef6f71950ad9a7}{JsonbType::T\_Binary}}:\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(\textcolor{stringliteral}{"{}\(\backslash\)"{}<BINARY>"{}},\ 9);}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(((\mbox{\hyperlink{classdoris_1_1_jsonb_binary_val}{JsonbBinaryVal}}*)val)-\/>getBlob(),\ ((\mbox{\hyperlink{classdoris_1_1_jsonb_binary_val}{JsonbBinaryVal}}*)val)-\/>getBlobLen());}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(\textcolor{stringliteral}{"{}<BINARY>\(\backslash\)"{}"{}},\ 9);}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fa18eebd0bd47fdcbc8ee9c2014126829c}{JsonbType::T\_Object}}:\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a1a770950d33f4fc704c4f387eea92c42}{object\_to\_json}}((\mbox{\hyperlink{classdoris_1_1_object_val}{ObjectVal}}*)val);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespacedoris_ae00cc6f3123141cbf2a954d88f50365fac839497e51fd3569658ed3736ac13242}{JsonbType::T\_Array}}:\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a48e34a4284107543cd81ceb68e59bd76}{array\_to\_json}}((\mbox{\hyperlink{classdoris_1_1_array_val}{ArrayVal}}*)val);}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00131\ \ \ \ \ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a202a0bfd4eb8321d3c8552d985b0a7e4}{string\_to\_json}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{size\_t}\ len)\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'"{}'});}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{nullptr}\ ==\ str)\ \{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'"{}'});}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ char\_buffer[16];}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ ptr\ =\ str;\ ptr\ !=\ str\ +\ len\ \&\&\ *ptr;\ ++ptr)\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})*ptr\ >\ 31\ \&\&\ *ptr\ !=\ \textcolor{charliteral}{'\(\backslash\)"{}'}\ \&\&\ *ptr\ !=\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'})}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(*ptr);}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ token;}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (token\ =\ *ptr)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)"{}'}:}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'\(\backslash\)"{}'});}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)b'}:}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'b'});}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)f'}:}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'f'});}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)n'}:}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'n'});}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)r'}:}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'r'});}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)t'}:}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'t'});}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ char\_num\ =\ snprintf(char\_buffer,\ \textcolor{keyword}{sizeof}(char\_buffer),\ \textcolor{stringliteral}{"{}u\%04x"{}},\ token);}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(char\_buffer,\ char\_num);}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'"{}'});}
\DoxyCodeLine{00177\ \ \ \ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{comment}{//\ convert\ object}}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a1a770950d33f4fc704c4f387eea92c42}{object\_to\_json}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_object_val}{ObjectVal}}*\ val)\ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'\{'});}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ iter\ =\ val-\/>\mbox{\hyperlink{classdoris_1_1_object_val_ad69bd11391be1a1dba5c8202259664f8}{begin}}();}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ iter\_fence\ =\ val-\/>\mbox{\hyperlink{classdoris_1_1_object_val_acad38d52497a975bfb6f2f6acd76631f}{end}}();}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (iter\ <\ iter\_fence)\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ write\ key}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (iter-\/>klen())\ \{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a202a0bfd4eb8321d3c8552d985b0a7e4}{string\_to\_json}}(iter-\/>getKeyStr(),\ iter-\/>klen());}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a7c6fe8e47e742b1304dbaeccc238913a}{write}}(iter-\/>getKeyId());}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{':'});}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ convert\ value}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a03fbfcf1955ed3fae28c8d3c7ffd0527}{intern\_json}}(iter-\/>value());}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ ++iter;}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (iter\ !=\ iter\_fence)\ \{}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{','});}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ assert(iter\ ==\ iter\_fence);}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'\}'});}
\DoxyCodeLine{00207\ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{comment}{//\ convert\ array\ to\ json}}
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a48e34a4284107543cd81ceb68e59bd76}{array\_to\_json}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_array_val}{ArrayVal}}*\ val)\ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{'['});}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ iter\ =\ val-\/>\mbox{\hyperlink{classdoris_1_1_array_val_ad69bd11391be1a1dba5c8202259664f8}{begin}}();}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ iter\_fence\ =\ val-\/>\mbox{\hyperlink{classdoris_1_1_array_val_acad38d52497a975bfb6f2f6acd76631f}{end}}();}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (iter\ !=\ iter\_fence)\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ convert\ value}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a03fbfcf1955ed3fae28c8d3c7ffd0527}{intern\_json}}((\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*)iter);}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ ++iter;}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (iter\ !=\ iter\_fence)\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{','});}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ assert(iter\ ==\ iter\_fence);}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}}.\mbox{\hyperlink{classdoris_1_1_jsonb_out_stream_a30ac9d6ab47903731da84bf97172b0d0}{put}}(\textcolor{charliteral}{']'});}
\DoxyCodeLine{00228\ \ \ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00231\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_out_stream}{JsonbOutStream}}\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a910159eeeb40fcb12236ee9277964bca}{os\_}};}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{classdoris_1_1_jsonb_to_json_a9d978ae06723d97188789507b30643a4}{buffer\_}}[\mbox{\hyperlink{jsonb__utils_8h_a8abd3ebb6e18277a43604c06f41e77a8}{OUT\_BUF\_SIZE}}];}
\DoxyCodeLine{00233\ \};}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \textcolor{comment}{//\ This\ class\ is\ a\ utility\ to\ create\ a\ JsonbValue.}}
\DoxyCodeLine{00236\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ OS\_TYPE>}
\DoxyCodeLine{00237\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t}{JsonbValueCreaterT}}\ \{}
\DoxyCodeLine{00238\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00239\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_a5f221654ad83077d450bcf5772ea8b90}{operator()}}(int32\_t\ val)\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_a5f221654ad83077d450bcf5772ea8b90}{operator()}}((int64\_t)val);\ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_a059bed712e3c67a78668060320d95681}{operator()}}(int64\_t\ val)\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.reset();}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeStartArray();}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeInt(val);}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeEndArray();}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_acb503020ffce209c9d1ceabe8ade6c59}{extractValue}}();}
\DoxyCodeLine{00247\ \ \ \ \ \}}
\DoxyCodeLine{00248\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_a05d74d2470c10bf8d51a9e4902db37df}{operator()}}(\textcolor{keywordtype}{double}\ val)\ \{}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.reset();}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeStartArray();}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeDouble(val);}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeEndArray();}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_acb503020ffce209c9d1ceabe8ade6c59}{extractValue}}();}
\DoxyCodeLine{00254\ \ \ \ \ \}}
\DoxyCodeLine{00255\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_a1e3db81097fca88412056f1dadf6b558}{operator()}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str)\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_a1e3db81097fca88412056f1dadf6b558}{operator()}}(str,\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int})strlen(str));\ \}}
\DoxyCodeLine{00256\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_a45a8077bb996926941e6c734c9c64409}{operator()}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ str\_len)\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.reset();}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeStartArray();}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeStartString();}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeString(str,\ str\_len);}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeEndString();}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeEndArray();}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_acb503020ffce209c9d1ceabe8ade6c59}{extractValue}}();}
\DoxyCodeLine{00264\ \ \ \ \ \}}
\DoxyCodeLine{00265\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_a7dbfd8c9377b0377cead1431cb49f97f}{operator()}}(\textcolor{keywordtype}{bool}\ val)\ \{}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.reset();}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeStartArray();}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeBool(val);}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeEndArray();}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_acb503020ffce209c9d1ceabe8ade6c59}{extractValue}}();}
\DoxyCodeLine{00271\ \ \ \ \ \}}
\DoxyCodeLine{00272\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_a86bb5edf2f9094acb129221b46a9b7c1}{operator()}}()\ \{}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.reset();}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeStartArray();}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeNull();}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.writeEndArray();}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_acb503020ffce209c9d1ceabe8ade6c59}{extractValue}}();}
\DoxyCodeLine{00278\ \ \ \ \ \}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00281\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_value}{JsonbValue}}*\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_acb503020ffce209c9d1ceabe8ade6c59}{extractValue}}()\ \{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{classdoris_1_1_array_val}{ArrayVal}}*\textcolor{keyword}{>}(}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_document_a944f6721536b96e961eb8e1f3dab71af}{JsonbDocument::createValue}}(\mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.getOutput()-\/>getBuffer(),}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (\textcolor{keywordtype}{int})\mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}}.getOutput()-\/>getSize()))}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>get(0);}
\DoxyCodeLine{00286\ \ \ \ \ \}}
\DoxyCodeLine{00287\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_jsonb_writer_t}{JsonbWriterT<OS\_TYPE>}}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t_ae8abd6fc4846c732398a1ecbecb820ed}{writer\_}};}
\DoxyCodeLine{00288\ \};}
\DoxyCodeLine{00289\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classdoris_1_1_jsonb_value_creater_t}{JsonbValueCreaterT<JsonbOutStream>}}\ \mbox{\hyperlink{namespacedoris_a73c4009060d1a6d1ad193c1d9182ffa1}{JsonbValueCreater}};}
\DoxyCodeLine{00290\ \}\ \textcolor{comment}{//\ namespace\ doris}}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ JSONB\_JSONBUTIL\_H}}

\end{DoxyCode}
