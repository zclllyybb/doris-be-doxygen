\hypertarget{classdoris_1_1io_1_1_file_block}{}\doxysection{File\+Block类 参考}
\label{classdoris_1_1io_1_1_file_block}\index{FileBlock@{FileBlock}}


{\ttfamily \#include $<$block\+\_\+file\+\_\+segment.\+h$>$}



File\+Block 的协作图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d1a/classdoris_1_1io_1_1_file_block__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{类}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structdoris_1_1io_1_1_file_block_1_1_range}{Range}}
\begin{DoxyCompactList}\small\item\em Represents an interval \mbox{[}left, right\mbox{]} including both boundaries. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{State}} \{ \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8a17b20a73bf43ede53fda134f16f2a75e}{DOWNLOADED}}
, \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8aba2b45bdc11e2a4a6e86aab2ac693cbb}{EMPTY}}
, \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8a35045f0a8eec8847a85db7df2624c390}{DOWNLOADING}}
, \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8af0fb839bd6f5c01540bffebcfa597f6f}{SKIP\+\_\+\+CACHE}}
 \}
\item 
using \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}{Key}} = \mbox{\hyperlink{structdoris_1_1io_1_1_i_file_cache_1_1_key}{IFile\+Cache\+::\+Key}}
\item 
using \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a02754cd52024a143c223ebfb193e7f92}{Local\+Writer\+Ptr}} = std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classdoris_1_1io_1_1_file_writer}{File\+Writer}} $>$
\item 
using \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_aee93bf93baa07715431b3c7aeb969e62}{Local\+Reader\+Ptr}} = std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classdoris_1_1io_1_1_file_reader}{File\+Reader}} $>$
\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a63f30f82d219b3296770694041f83f66}{File\+Block}} (size\+\_\+t offset\+\_\+, size\+\_\+t size\+\_\+, const \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}{Key}} \&key\+\_\+, \mbox{\hyperlink{classdoris_1_1io_1_1_i_file_cache}{IFile\+Cache}} $\ast$cache\+\_\+, \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{State}} download\+\_\+state\+\_\+, bool \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a692564f4f6bc1e846193af7a5608cc34}{is\+\_\+persistent}})
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a6cfad4d9a89cf5ece6d885bd811a7c90}{$\sim$\+File\+Block}} ()
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{State}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a41b9d35863618059da5d2066b753325d}{state}} () const
\item 
const \mbox{\hyperlink{structdoris_1_1io_1_1_file_block_1_1_range}{Range}} \& \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a7f64bbe0fc0fbedada0f827b36bc0adc}{range}} () const
\item 
const \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}{Key}} \& \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ac08bec26397305de58d0d17659780606}{key}} () const
\item 
size\+\_\+t \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ac8ec3479d32f236af2d973aae6790f66}{offset}} () const
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{State}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a3c6378257911e1b2448fb43edc77a7f8}{wait}} ()
\item 
\mbox{\hyperlink{classdoris_1_1_status}{Status}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a62ac44cb61310089052b134cf3fcfe6c}{append}} (\mbox{\hyperlink{structdoris_1_1_slice}{Slice}} \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}})
\item 
\mbox{\hyperlink{classdoris_1_1_status}{Status}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_aaaca4a1339077e4e77280b171d7eb26b}{read\+\_\+at}} (\mbox{\hyperlink{structdoris_1_1_slice}{Slice}} buffer, size\+\_\+t offset\+\_\+)
\item 
\mbox{\hyperlink{classdoris_1_1_status}{Status}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a7daa01ba417d42053f2b3d79e7bbb427}{finalize\+\_\+write}} ()
\item 
std\+::string \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a6bb3190ff637168fe4f2ed766578a090}{get\+\_\+or\+\_\+set\+\_\+downloader}} ()
\item 
std\+::string \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a9af144a258528debeb4998dc3f0c2293}{get\+\_\+downloader}} () const
\item 
void \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ab6bc56c5800c63c3fc8c9dbd41ae68c8}{reset\+\_\+downloader}} (std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&segment\+\_\+lock)
\item 
bool \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a582a3f895e27efe96f4f7bc05ac19ddc}{is\+\_\+downloader}} () const
\item 
bool \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_acf7a1157a05eb708f4b4f7c465d20506}{is\+\_\+downloaded}} () const
\item 
bool \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a692564f4f6bc1e846193af7a5608cc34}{is\+\_\+persistent}} () const
\item 
size\+\_\+t \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a08c063aebcc79284acfdf4604a1f8677}{get\+\_\+download\+\_\+offset}} () const
\item 
size\+\_\+t \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ac1e5756abf280cda9c003b98d87d7107}{get\+\_\+downloaded\+\_\+size}} () const
\item 
std\+::string \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_acc51e2a7db9dc17a57d1548b7be8a1ab}{get\+\_\+info\+\_\+for\+\_\+log}} () const
\item 
std\+::string \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a502c550f2259bb527280440c711eea5b}{get\+\_\+path\+\_\+in\+\_\+local\+\_\+cache}} () const
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block}{File\+Block}} \& \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a6a127351fdf36789260dfde86a112ab9}{operator=}} (const \mbox{\hyperlink{classdoris_1_1io_1_1_file_block}{File\+Block}} \&)=delete
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ae36025a7b501dd769e6c2916c24f3f7b}{File\+Block}} (const \mbox{\hyperlink{classdoris_1_1io_1_1_file_block}{File\+Block}} \&)=delete
\end{DoxyCompactItemize}
\doxysubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static std\+::string \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_af91906f6fd32668cc94f470e18c8d0dc}{state\+\_\+to\+\_\+string}} (\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{File\+Block\+::\+State}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a41b9d35863618059da5d2066b753325d}{state}})
\item 
static std\+::string \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ad06fe2663f03c71746e476a3abdd9fb3}{get\+\_\+caller\+\_\+id}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
size\+\_\+t \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a9372c33ab076e2f5cd59746d94657504}{get\+\_\+downloaded\+\_\+size}} (std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&segment\+\_\+lock) const
\item 
std\+::string \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a0ab040c547d02eb6d771ce4967602886}{get\+\_\+info\+\_\+for\+\_\+log\+\_\+impl}} (std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&segment\+\_\+lock) const
\item 
bool \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a8b8adab283c5f8f82ed18afabfc87830}{has\+\_\+finalized\+\_\+state}} () const
\item 
\mbox{\hyperlink{classdoris_1_1_status}{Status}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ac9628431e71ae50c17952d3066f72c91}{set\+\_\+downloaded}} (std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&segment\+\_\+lock)
\item 
bool \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a2dd67a7f9b7a4fadf70426177e9b43e3}{is\+\_\+downloader\+\_\+impl}} (std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&segment\+\_\+lock) const
\item 
void \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a78eba78fc62277745c4c59b6c28dd201}{complete}} (std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&cache\+\_\+lock)
\item 
void \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a4872910d4a54bbcbe4cecf82b3323c1b}{complete\+\_\+unlocked}} (std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&cache\+\_\+lock, std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&segment\+\_\+lock)
\item 
void \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a62a1292a82f5e77a85f888a40e42cdd2}{reset\+\_\+downloader\+\_\+impl}} (std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&segment\+\_\+lock)
\end{DoxyCompactItemize}
\doxysubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{structdoris_1_1io_1_1_file_block_1_1_range}{Range}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a993640311424a1ffc2d57f582b8a970f}{\+\_\+segment\+\_\+range}}
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{State}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_af4a661dc3222a17b6a75716948d1c07d}{\+\_\+download\+\_\+state}}
\item 
std\+::string \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ae1445320ef700a3791d9fd90b0c95614}{\+\_\+downloader\+\_\+id}}
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a02754cd52024a143c223ebfb193e7f92}{Local\+Writer\+Ptr}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a7d1ae87f2954656855fe5024dcc57f99}{\+\_\+cache\+\_\+writer}}
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_aee93bf93baa07715431b3c7aeb969e62}{Local\+Reader\+Ptr}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_af914330c00109b0b416c7de53c369191}{\+\_\+cache\+\_\+reader}}
\item 
size\+\_\+t \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a59db91e5c9ac7088d36d147ca300aeba}{\+\_\+downloaded\+\_\+size}} = 0
\item 
std\+::mutex \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a3f0b4c278cb19f9c2b2dbdb065f51e14}{\+\_\+mutex}}
\item 
std\+::condition\+\_\+variable \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_af56bf411a50a75827bda31c148e9d0ee}{\+\_\+cv}}
\item 
std\+::mutex \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a0978f7784df6af094b42d6c7af9a3ff1}{\+\_\+download\+\_\+mutex}}
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}{Key}} \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a17a1a261261a0b8d65391886d1be0996}{\+\_\+file\+\_\+key}}
\item 
\mbox{\hyperlink{classdoris_1_1io_1_1_i_file_cache}{IFile\+Cache}} $\ast$ \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ab9fee95e6591bdeb001e458e2297ff0d}{\+\_\+cache}}
\item 
std\+::atomic$<$ bool $>$ \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a8ee66fa6b7e9802d48f4c25ed5ecea6b}{\+\_\+is\+\_\+downloaded}} \{false\}
\item 
bool \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a6fd5e93077e2e64a6253211947088a91}{\+\_\+is\+\_\+persistent}} = false
\end{DoxyCompactItemize}
\doxysubsection*{友元}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_ac9154cb000cf2296695cd58664794bad}{LRUFile\+Cache}}
\item 
struct \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_af2afbba87b00d7e347dc99079c18295c}{File\+Blocks\+Holder}}
\end{DoxyCompactItemize}


\doxysubsection{成员类型定义说明}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}\label{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}} 
\index{FileBlock@{FileBlock}!Key@{Key}}
\index{Key@{Key}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{Key}{Key}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}{Key}} =  \mbox{\hyperlink{structdoris_1_1io_1_1_i_file_cache_1_1_key}{IFile\+Cache\+::\+Key}}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a02754cd52024a143c223ebfb193e7f92}\label{classdoris_1_1io_1_1_file_block_a02754cd52024a143c223ebfb193e7f92}} 
\index{FileBlock@{FileBlock}!LocalWriterPtr@{LocalWriterPtr}}
\index{LocalWriterPtr@{LocalWriterPtr}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{LocalWriterPtr}{LocalWriterPtr}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a02754cd52024a143c223ebfb193e7f92}{Local\+Writer\+Ptr}} =  std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classdoris_1_1io_1_1_file_writer}{File\+Writer}}$>$}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_aee93bf93baa07715431b3c7aeb969e62}\label{classdoris_1_1io_1_1_file_block_aee93bf93baa07715431b3c7aeb969e62}} 
\index{FileBlock@{FileBlock}!LocalReaderPtr@{LocalReaderPtr}}
\index{LocalReaderPtr@{LocalReaderPtr}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{LocalReaderPtr}{LocalReaderPtr}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_aee93bf93baa07715431b3c7aeb969e62}{Local\+Reader\+Ptr}} =  std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classdoris_1_1io_1_1_file_reader}{File\+Reader}}$>$}



\doxysubsection{成员枚举类型说明}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}\label{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}} 
\index{FileBlock@{FileBlock}!State@{State}}
\index{State@{State}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{State}{State}}
{\footnotesize\ttfamily enum class \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{State}}\hspace{0.3cm}{\ttfamily [strong]}}

\begin{DoxyEnumFields}{枚举值}
\raisebox{\heightof{T}}[0pt][0pt]{\index{DOWNLOADED@{DOWNLOADED}!FileBlock@{FileBlock}}\index{FileBlock@{FileBlock}!DOWNLOADED@{DOWNLOADED}}}\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8a17b20a73bf43ede53fda134f16f2a75e}\label{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8a17b20a73bf43ede53fda134f16f2a75e}} 
DOWNLOADED&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{EMPTY@{EMPTY}!FileBlock@{FileBlock}}\index{FileBlock@{FileBlock}!EMPTY@{EMPTY}}}\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8aba2b45bdc11e2a4a6e86aab2ac693cbb}\label{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8aba2b45bdc11e2a4a6e86aab2ac693cbb}} 
EMPTY&When file segment is first created and returned to user, it has state EMPTY. EMPTY state can become DOWNLOADING when get\+Or\+Set\+Downaloder is called successfully by any owner of EMPTY state file segment. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{DOWNLOADING@{DOWNLOADING}!FileBlock@{FileBlock}}\index{FileBlock@{FileBlock}!DOWNLOADING@{DOWNLOADING}}}\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8a35045f0a8eec8847a85db7df2624c390}\label{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8a35045f0a8eec8847a85db7df2624c390}} 
DOWNLOADING&A newly created file segment never has DOWNLOADING state until call to get\+Or\+Set\+Downloader because each cache user might acquire multiple file segments and reads them one by one, so only user which actually needs to read this segment earlier than others -\/ becomes a downloader. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{SKIP\_CACHE@{SKIP\_CACHE}!FileBlock@{FileBlock}}\index{FileBlock@{FileBlock}!SKIP\_CACHE@{SKIP\_CACHE}}}\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8af0fb839bd6f5c01540bffebcfa597f6f}\label{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8af0fb839bd6f5c01540bffebcfa597f6f}} 
SKIP\+\_\+\+CACHE&\\
\hline

\end{DoxyEnumFields}


\doxysubsection{构造及析构函数说明}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a63f30f82d219b3296770694041f83f66}\label{classdoris_1_1io_1_1_file_block_a63f30f82d219b3296770694041f83f66}} 
\index{FileBlock@{FileBlock}!FileBlock@{FileBlock}}
\index{FileBlock@{FileBlock}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{FileBlock()}{FileBlock()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_file_block}{File\+Block}} (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{offset\+\_\+,  }\item[{size\+\_\+t}]{size\+\_\+,  }\item[{const \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}{Key}} \&}]{key\+\_\+,  }\item[{\mbox{\hyperlink{classdoris_1_1io_1_1_i_file_cache}{IFile\+Cache}} $\ast$}]{cache\+\_\+,  }\item[{\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{State}}}]{download\+\_\+state\+\_\+,  }\item[{bool}]{is\+\_\+persistent }\end{DoxyParamCaption})}

On creation, file segment state can be EMPTY, DOWNLOADED, DOWNLOADING.

EMPTY is used when file segment is not in cache and someone will {\itshape potentially} want to download it (after calling get\+Or\+Set\+Downloader()).

DOWNLOADED is used either on initial cache metadata load into memory on server startup or on reduce\+Size\+To\+Downloaded() -- when file segment object is updated.

DOWNLOADING is used only for write-\/through caching (e.\+g. get\+Or\+Set\+Downloader() is not needed, downloader is set on file segment creation).函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{db/d15/classdoris_1_1io_1_1_file_block_a63f30f82d219b3296770694041f83f66_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a6cfad4d9a89cf5ece6d885bd811a7c90}\label{classdoris_1_1io_1_1_file_block_a6cfad4d9a89cf5ece6d885bd811a7c90}} 
\index{FileBlock@{FileBlock}!````~FileBlock@{$\sim$FileBlock}}
\index{````~FileBlock@{$\sim$FileBlock}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{$\sim$FileBlock()}{~FileBlock()}}
{\footnotesize\ttfamily $\sim$\mbox{\hyperlink{classdoris_1_1io_1_1_file_block}{File\+Block}} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ae36025a7b501dd769e6c2916c24f3f7b}\label{classdoris_1_1io_1_1_file_block_ae36025a7b501dd769e6c2916c24f3f7b}} 
\index{FileBlock@{FileBlock}!FileBlock@{FileBlock}}
\index{FileBlock@{FileBlock}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{FileBlock()}{FileBlock()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_file_block}{File\+Block}} (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1io_1_1_file_block}{File\+Block}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



\doxysubsection{成员函数说明}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a41b9d35863618059da5d2066b753325d}\label{classdoris_1_1io_1_1_file_block_a41b9d35863618059da5d2066b753325d}} 
\index{FileBlock@{FileBlock}!state@{state}}
\index{state@{state}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{state()}{state()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{File\+Block\+::\+State}} state (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a41b9d35863618059da5d2066b753325d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_af91906f6fd32668cc94f470e18c8d0dc}\label{classdoris_1_1io_1_1_file_block_af91906f6fd32668cc94f470e18c8d0dc}} 
\index{FileBlock@{FileBlock}!state\_to\_string@{state\_to\_string}}
\index{state\_to\_string@{state\_to\_string}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{state\_to\_string()}{state\_to\_string()}}
{\footnotesize\ttfamily std\+::string state\+\_\+to\+\_\+string (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{File\+Block\+::\+State}}}]{state }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=235pt]{db/d15/classdoris_1_1io_1_1_file_block_af91906f6fd32668cc94f470e18c8d0dc_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_af91906f6fd32668cc94f470e18c8d0dc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a7f64bbe0fc0fbedada0f827b36bc0adc}\label{classdoris_1_1io_1_1_file_block_a7f64bbe0fc0fbedada0f827b36bc0adc}} 
\index{FileBlock@{FileBlock}!range@{range}}
\index{range@{range}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{range()}{range()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{structdoris_1_1io_1_1_file_block_1_1_range}{Range}} \& range (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a7f64bbe0fc0fbedada0f827b36bc0adc_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ac08bec26397305de58d0d17659780606}\label{classdoris_1_1io_1_1_file_block_ac08bec26397305de58d0d17659780606}} 
\index{FileBlock@{FileBlock}!key@{key}}
\index{key@{key}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{key()}{key()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}{Key}} \& key (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_ac08bec26397305de58d0d17659780606_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ac8ec3479d32f236af2d973aae6790f66}\label{classdoris_1_1io_1_1_file_block_ac8ec3479d32f236af2d973aae6790f66}} 
\index{FileBlock@{FileBlock}!offset@{offset}}
\index{offset@{offset}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{offset()}{offset()}}
{\footnotesize\ttfamily size\+\_\+t offset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=198pt]{db/d15/classdoris_1_1io_1_1_file_block_ac8ec3479d32f236af2d973aae6790f66_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_ac8ec3479d32f236af2d973aae6790f66_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a3c6378257911e1b2448fb43edc77a7f8}\label{classdoris_1_1io_1_1_file_block_a3c6378257911e1b2448fb43edc77a7f8}} 
\index{FileBlock@{FileBlock}!wait@{wait}}
\index{wait@{wait}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{wait()}{wait()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{File\+Block\+::\+State}} wait (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=222pt]{db/d15/classdoris_1_1io_1_1_file_block_a3c6378257911e1b2448fb43edc77a7f8_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a62ac44cb61310089052b134cf3fcfe6c}\label{classdoris_1_1io_1_1_file_block_a62ac44cb61310089052b134cf3fcfe6c}} 
\index{FileBlock@{FileBlock}!append@{append}}
\index{append@{append}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{append()}{append()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_status}{Status}} append (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdoris_1_1_slice}{Slice}}}]{data }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a62ac44cb61310089052b134cf3fcfe6c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_aaaca4a1339077e4e77280b171d7eb26b}\label{classdoris_1_1io_1_1_file_block_aaaca4a1339077e4e77280b171d7eb26b}} 
\index{FileBlock@{FileBlock}!read\_at@{read\_at}}
\index{read\_at@{read\_at}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{read\_at()}{read\_at()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_status}{Status}} read\+\_\+at (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdoris_1_1_slice}{Slice}}}]{buffer,  }\item[{size\+\_\+t}]{offset\+\_\+ }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_aaaca4a1339077e4e77280b171d7eb26b_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a7daa01ba417d42053f2b3d79e7bbb427}\label{classdoris_1_1io_1_1_file_block_a7daa01ba417d42053f2b3d79e7bbb427}} 
\index{FileBlock@{FileBlock}!finalize\_write@{finalize\_write}}
\index{finalize\_write@{finalize\_write}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{finalize\_write()}{finalize\_write()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_status}{Status}} finalize\+\_\+write (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a7daa01ba417d42053f2b3d79e7bbb427_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a6bb3190ff637168fe4f2ed766578a090}\label{classdoris_1_1io_1_1_file_block_a6bb3190ff637168fe4f2ed766578a090}} 
\index{FileBlock@{FileBlock}!get\_or\_set\_downloader@{get\_or\_set\_downloader}}
\index{get\_or\_set\_downloader@{get\_or\_set\_downloader}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{get\_or\_set\_downloader()}{get\_or\_set\_downloader()}}
{\footnotesize\ttfamily std\+::string get\+\_\+or\+\_\+set\+\_\+downloader (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=331pt]{db/d15/classdoris_1_1io_1_1_file_block_a6bb3190ff637168fe4f2ed766578a090_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a9af144a258528debeb4998dc3f0c2293}\label{classdoris_1_1io_1_1_file_block_a9af144a258528debeb4998dc3f0c2293}} 
\index{FileBlock@{FileBlock}!get\_downloader@{get\_downloader}}
\index{get\_downloader@{get\_downloader}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{get\_downloader()}{get\_downloader()}}
{\footnotesize\ttfamily std\+::string get\+\_\+downloader (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ab6bc56c5800c63c3fc8c9dbd41ae68c8}\label{classdoris_1_1io_1_1_file_block_ab6bc56c5800c63c3fc8c9dbd41ae68c8}} 
\index{FileBlock@{FileBlock}!reset\_downloader@{reset\_downloader}}
\index{reset\_downloader@{reset\_downloader}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{reset\_downloader()}{reset\_downloader()}}
{\footnotesize\ttfamily void reset\+\_\+downloader (\begin{DoxyParamCaption}\item[{std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&}]{segment\+\_\+lock }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_ab6bc56c5800c63c3fc8c9dbd41ae68c8_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_ab6bc56c5800c63c3fc8c9dbd41ae68c8_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a582a3f895e27efe96f4f7bc05ac19ddc}\label{classdoris_1_1io_1_1_file_block_a582a3f895e27efe96f4f7bc05ac19ddc}} 
\index{FileBlock@{FileBlock}!is\_downloader@{is\_downloader}}
\index{is\_downloader@{is\_downloader}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{is\_downloader()}{is\_downloader()}}
{\footnotesize\ttfamily bool is\+\_\+downloader (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=266pt]{db/d15/classdoris_1_1io_1_1_file_block_a582a3f895e27efe96f4f7bc05ac19ddc_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_acf7a1157a05eb708f4b4f7c465d20506}\label{classdoris_1_1io_1_1_file_block_acf7a1157a05eb708f4b4f7c465d20506}} 
\index{FileBlock@{FileBlock}!is\_downloaded@{is\_downloaded}}
\index{is\_downloaded@{is\_downloaded}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{is\_downloaded()}{is\_downloaded()}}
{\footnotesize\ttfamily bool is\+\_\+downloaded (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a692564f4f6bc1e846193af7a5608cc34}\label{classdoris_1_1io_1_1_file_block_a692564f4f6bc1e846193af7a5608cc34}} 
\index{FileBlock@{FileBlock}!is\_persistent@{is\_persistent}}
\index{is\_persistent@{is\_persistent}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{is\_persistent()}{is\_persistent()}}
{\footnotesize\ttfamily bool is\+\_\+persistent (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ad06fe2663f03c71746e476a3abdd9fb3}\label{classdoris_1_1io_1_1_file_block_ad06fe2663f03c71746e476a3abdd9fb3}} 
\index{FileBlock@{FileBlock}!get\_caller\_id@{get\_caller\_id}}
\index{get\_caller\_id@{get\_caller\_id}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{get\_caller\_id()}{get\_caller\_id()}}
{\footnotesize\ttfamily std\+::string get\+\_\+caller\+\_\+id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_ad06fe2663f03c71746e476a3abdd9fb3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a08c063aebcc79284acfdf4604a1f8677}\label{classdoris_1_1io_1_1_file_block_a08c063aebcc79284acfdf4604a1f8677}} 
\index{FileBlock@{FileBlock}!get\_download\_offset@{get\_download\_offset}}
\index{get\_download\_offset@{get\_download\_offset}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{get\_download\_offset()}{get\_download\_offset()}}
{\footnotesize\ttfamily size\+\_\+t get\+\_\+download\+\_\+offset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=333pt]{db/d15/classdoris_1_1io_1_1_file_block_a08c063aebcc79284acfdf4604a1f8677_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ac1e5756abf280cda9c003b98d87d7107}\label{classdoris_1_1io_1_1_file_block_ac1e5756abf280cda9c003b98d87d7107}} 
\index{FileBlock@{FileBlock}!get\_downloaded\_size@{get\_downloaded\_size}}
\index{get\_downloaded\_size@{get\_downloaded\_size}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{get\_downloaded\_size()}{get\_downloaded\_size()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily size\+\_\+t get\+\_\+downloaded\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=190pt]{db/d15/classdoris_1_1io_1_1_file_block_ac1e5756abf280cda9c003b98d87d7107_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_ac1e5756abf280cda9c003b98d87d7107_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_acc51e2a7db9dc17a57d1548b7be8a1ab}\label{classdoris_1_1io_1_1_file_block_acc51e2a7db9dc17a57d1548b7be8a1ab}} 
\index{FileBlock@{FileBlock}!get\_info\_for\_log@{get\_info\_for\_log}}
\index{get\_info\_for\_log@{get\_info\_for\_log}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{get\_info\_for\_log()}{get\_info\_for\_log()}}
{\footnotesize\ttfamily std\+::string get\+\_\+info\+\_\+for\+\_\+log (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_acc51e2a7db9dc17a57d1548b7be8a1ab_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a502c550f2259bb527280440c711eea5b}\label{classdoris_1_1io_1_1_file_block_a502c550f2259bb527280440c711eea5b}} 
\index{FileBlock@{FileBlock}!get\_path\_in\_local\_cache@{get\_path\_in\_local\_cache}}
\index{get\_path\_in\_local\_cache@{get\_path\_in\_local\_cache}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{get\_path\_in\_local\_cache()}{get\_path\_in\_local\_cache()}}
{\footnotesize\ttfamily std\+::string get\+\_\+path\+\_\+in\+\_\+local\+\_\+cache (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a502c550f2259bb527280440c711eea5b_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=289pt]{db/d15/classdoris_1_1io_1_1_file_block_a502c550f2259bb527280440c711eea5b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a6a127351fdf36789260dfde86a112ab9}\label{classdoris_1_1io_1_1_file_block_a6a127351fdf36789260dfde86a112ab9}} 
\index{FileBlock@{FileBlock}!operator=@{operator=}}
\index{operator=@{operator=}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_file_block}{File\+Block}} \& operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1io_1_1_file_block}{File\+Block}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a9372c33ab076e2f5cd59746d94657504}\label{classdoris_1_1io_1_1_file_block_a9372c33ab076e2f5cd59746d94657504}} 
\index{FileBlock@{FileBlock}!get\_downloaded\_size@{get\_downloaded\_size}}
\index{get\_downloaded\_size@{get\_downloaded\_size}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{get\_downloaded\_size()}{get\_downloaded\_size()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily size\+\_\+t get\+\_\+downloaded\+\_\+size (\begin{DoxyParamCaption}\item[{std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&}]{segment\+\_\+lock }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a0ab040c547d02eb6d771ce4967602886}\label{classdoris_1_1io_1_1_file_block_a0ab040c547d02eb6d771ce4967602886}} 
\index{FileBlock@{FileBlock}!get\_info\_for\_log\_impl@{get\_info\_for\_log\_impl}}
\index{get\_info\_for\_log\_impl@{get\_info\_for\_log\_impl}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{get\_info\_for\_log\_impl()}{get\_info\_for\_log\_impl()}}
{\footnotesize\ttfamily std\+::string get\+\_\+info\+\_\+for\+\_\+log\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&}]{segment\+\_\+lock }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a0ab040c547d02eb6d771ce4967602886_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=311pt]{db/d15/classdoris_1_1io_1_1_file_block_a0ab040c547d02eb6d771ce4967602886_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a8b8adab283c5f8f82ed18afabfc87830}\label{classdoris_1_1io_1_1_file_block_a8b8adab283c5f8f82ed18afabfc87830}} 
\index{FileBlock@{FileBlock}!has\_finalized\_state@{has\_finalized\_state}}
\index{has\_finalized\_state@{has\_finalized\_state}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{has\_finalized\_state()}{has\_finalized\_state()}}
{\footnotesize\ttfamily bool has\+\_\+finalized\+\_\+state (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ac9628431e71ae50c17952d3066f72c91}\label{classdoris_1_1io_1_1_file_block_ac9628431e71ae50c17952d3066f72c91}} 
\index{FileBlock@{FileBlock}!set\_downloaded@{set\_downloaded}}
\index{set\_downloaded@{set\_downloaded}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{set\_downloaded()}{set\_downloaded()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_status}{Status}} set\+\_\+downloaded (\begin{DoxyParamCaption}\item[{std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&}]{segment\+\_\+lock }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_ac9628431e71ae50c17952d3066f72c91_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_ac9628431e71ae50c17952d3066f72c91_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a2dd67a7f9b7a4fadf70426177e9b43e3}\label{classdoris_1_1io_1_1_file_block_a2dd67a7f9b7a4fadf70426177e9b43e3}} 
\index{FileBlock@{FileBlock}!is\_downloader\_impl@{is\_downloader\_impl}}
\index{is\_downloader\_impl@{is\_downloader\_impl}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{is\_downloader\_impl()}{is\_downloader\_impl()}}
{\footnotesize\ttfamily bool is\+\_\+downloader\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&}]{segment\+\_\+lock }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=289pt]{db/d15/classdoris_1_1io_1_1_file_block_a2dd67a7f9b7a4fadf70426177e9b43e3_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a2dd67a7f9b7a4fadf70426177e9b43e3_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a78eba78fc62277745c4c59b6c28dd201}\label{classdoris_1_1io_1_1_file_block_a78eba78fc62277745c4c59b6c28dd201}} 
\index{FileBlock@{FileBlock}!complete@{complete}}
\index{complete@{complete}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{complete()}{complete()}}
{\footnotesize\ttfamily void complete (\begin{DoxyParamCaption}\item[{std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&}]{cache\+\_\+lock }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a78eba78fc62277745c4c59b6c28dd201}{complete()}} without any completion state is called from destructor of \mbox{\hyperlink{structdoris_1_1io_1_1_file_blocks_holder}{File\+Blocks\+Holder}}. \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a78eba78fc62277745c4c59b6c28dd201}{complete()}} might check if the caller of the method is the last alive holder of the segment. Therefore, \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a78eba78fc62277745c4c59b6c28dd201}{complete()}} and destruction of the file segment pointer must be done under the same cache mutex. 函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a78eba78fc62277745c4c59b6c28dd201_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a4872910d4a54bbcbe4cecf82b3323c1b}\label{classdoris_1_1io_1_1_file_block_a4872910d4a54bbcbe4cecf82b3323c1b}} 
\index{FileBlock@{FileBlock}!complete\_unlocked@{complete\_unlocked}}
\index{complete\_unlocked@{complete\_unlocked}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{complete\_unlocked()}{complete\_unlocked()}}
{\footnotesize\ttfamily void complete\+\_\+unlocked (\begin{DoxyParamCaption}\item[{std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&}]{cache\+\_\+lock,  }\item[{std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&}]{segment\+\_\+lock }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a4872910d4a54bbcbe4cecf82b3323c1b_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=273pt]{db/d15/classdoris_1_1io_1_1_file_block_a4872910d4a54bbcbe4cecf82b3323c1b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a62a1292a82f5e77a85f888a40e42cdd2}\label{classdoris_1_1io_1_1_file_block_a62a1292a82f5e77a85f888a40e42cdd2}} 
\index{FileBlock@{FileBlock}!reset\_downloader\_impl@{reset\_downloader\_impl}}
\index{reset\_downloader\_impl@{reset\_downloader\_impl}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{reset\_downloader\_impl()}{reset\_downloader\_impl()}}
{\footnotesize\ttfamily void reset\+\_\+downloader\+\_\+impl (\begin{DoxyParamCaption}\item[{std\+::lock\+\_\+guard$<$ std\+::mutex $>$ \&}]{segment\+\_\+lock }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a62a1292a82f5e77a85f888a40e42cdd2_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/d15/classdoris_1_1io_1_1_file_block_a62a1292a82f5e77a85f888a40e42cdd2_icgraph}
\end{center}
\end{figure}


\doxysubsection{友元及相关函数文档}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ac9154cb000cf2296695cd58664794bad}\label{classdoris_1_1io_1_1_file_block_ac9154cb000cf2296695cd58664794bad}} 
\index{FileBlock@{FileBlock}!LRUFileCache@{LRUFileCache}}
\index{LRUFileCache@{LRUFileCache}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{LRUFileCache}{LRUFileCache}}
{\footnotesize\ttfamily friend class \mbox{\hyperlink{classdoris_1_1io_1_1_l_r_u_file_cache}{LRUFile\+Cache}}\hspace{0.3cm}{\ttfamily [friend]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_af2afbba87b00d7e347dc99079c18295c}\label{classdoris_1_1io_1_1_file_block_af2afbba87b00d7e347dc99079c18295c}} 
\index{FileBlock@{FileBlock}!FileBlocksHolder@{FileBlocksHolder}}
\index{FileBlocksHolder@{FileBlocksHolder}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{FileBlocksHolder}{FileBlocksHolder}}
{\footnotesize\ttfamily friend struct \mbox{\hyperlink{structdoris_1_1io_1_1_file_blocks_holder}{File\+Blocks\+Holder}}\hspace{0.3cm}{\ttfamily [friend]}}



\doxysubsection{类成员变量说明}
\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a993640311424a1ffc2d57f582b8a970f}\label{classdoris_1_1io_1_1_file_block_a993640311424a1ffc2d57f582b8a970f}} 
\index{FileBlock@{FileBlock}!\_segment\_range@{\_segment\_range}}
\index{\_segment\_range@{\_segment\_range}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_segment\_range}{\_segment\_range}}
{\footnotesize\ttfamily const \mbox{\hyperlink{structdoris_1_1io_1_1_file_block_1_1_range}{Range}} \+\_\+segment\+\_\+range\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_af4a661dc3222a17b6a75716948d1c07d}\label{classdoris_1_1io_1_1_file_block_af4a661dc3222a17b6a75716948d1c07d}} 
\index{FileBlock@{FileBlock}!\_download\_state@{\_download\_state}}
\index{\_download\_state@{\_download\_state}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_download\_state}{\_download\_state}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a5d74787dedbc4e11c1ab15bf487e61f8}{State}} \+\_\+download\+\_\+state\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ae1445320ef700a3791d9fd90b0c95614}\label{classdoris_1_1io_1_1_file_block_ae1445320ef700a3791d9fd90b0c95614}} 
\index{FileBlock@{FileBlock}!\_downloader\_id@{\_downloader\_id}}
\index{\_downloader\_id@{\_downloader\_id}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_downloader\_id}{\_downloader\_id}}
{\footnotesize\ttfamily std\+::string \+\_\+downloader\+\_\+id\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a7d1ae87f2954656855fe5024dcc57f99}\label{classdoris_1_1io_1_1_file_block_a7d1ae87f2954656855fe5024dcc57f99}} 
\index{FileBlock@{FileBlock}!\_cache\_writer@{\_cache\_writer}}
\index{\_cache\_writer@{\_cache\_writer}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_cache\_writer}{\_cache\_writer}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a02754cd52024a143c223ebfb193e7f92}{Local\+Writer\+Ptr}} \+\_\+cache\+\_\+writer\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_af914330c00109b0b416c7de53c369191}\label{classdoris_1_1io_1_1_file_block_af914330c00109b0b416c7de53c369191}} 
\index{FileBlock@{FileBlock}!\_cache\_reader@{\_cache\_reader}}
\index{\_cache\_reader@{\_cache\_reader}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_cache\_reader}{\_cache\_reader}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_aee93bf93baa07715431b3c7aeb969e62}{Local\+Reader\+Ptr}} \+\_\+cache\+\_\+reader\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a59db91e5c9ac7088d36d147ca300aeba}\label{classdoris_1_1io_1_1_file_block_a59db91e5c9ac7088d36d147ca300aeba}} 
\index{FileBlock@{FileBlock}!\_downloaded\_size@{\_downloaded\_size}}
\index{\_downloaded\_size@{\_downloaded\_size}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_downloaded\_size}{\_downloaded\_size}}
{\footnotesize\ttfamily size\+\_\+t \+\_\+downloaded\+\_\+size = 0\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a3f0b4c278cb19f9c2b2dbdb065f51e14}\label{classdoris_1_1io_1_1_file_block_a3f0b4c278cb19f9c2b2dbdb065f51e14}} 
\index{FileBlock@{FileBlock}!\_mutex@{\_mutex}}
\index{\_mutex@{\_mutex}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_mutex}{\_mutex}}
{\footnotesize\ttfamily std\+::mutex \+\_\+mutex\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}

global locking order rule\+:
\begin{DoxyEnumerate}
\item cache lock
\item segment lock 
\end{DoxyEnumerate}\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_af56bf411a50a75827bda31c148e9d0ee}\label{classdoris_1_1io_1_1_file_block_af56bf411a50a75827bda31c148e9d0ee}} 
\index{FileBlock@{FileBlock}!\_cv@{\_cv}}
\index{\_cv@{\_cv}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_cv}{\_cv}}
{\footnotesize\ttfamily std\+::condition\+\_\+variable \+\_\+cv\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a0978f7784df6af094b42d6c7af9a3ff1}\label{classdoris_1_1io_1_1_file_block_a0978f7784df6af094b42d6c7af9a3ff1}} 
\index{FileBlock@{FileBlock}!\_download\_mutex@{\_download\_mutex}}
\index{\_download\_mutex@{\_download\_mutex}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_download\_mutex}{\_download\_mutex}}
{\footnotesize\ttfamily std\+::mutex \+\_\+download\+\_\+mutex\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}

Protects downloaded\+\_\+size access with actual write into fs. downloaded\+\_\+size is not protected by download\+\_\+mutex in methods which can never be run in parallel to File\+Block\+::write() method as downloaded\+\_\+size is updated only in File\+Block\+::write() method. Such methods are identified by is\+Downloader() check at their start, e.\+g. they are executed strictly by the same thread, sequentially. \mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a17a1a261261a0b8d65391886d1be0996}\label{classdoris_1_1io_1_1_file_block_a17a1a261261a0b8d65391886d1be0996}} 
\index{FileBlock@{FileBlock}!\_file\_key@{\_file\_key}}
\index{\_file\_key@{\_file\_key}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_file\_key}{\_file\_key}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_file_block_a1e6e38161681b1768c9409088de74950}{Key}} \+\_\+file\+\_\+key\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_ab9fee95e6591bdeb001e458e2297ff0d}\label{classdoris_1_1io_1_1_file_block_ab9fee95e6591bdeb001e458e2297ff0d}} 
\index{FileBlock@{FileBlock}!\_cache@{\_cache}}
\index{\_cache@{\_cache}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_cache}{\_cache}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1io_1_1_i_file_cache}{IFile\+Cache}}$\ast$ \+\_\+cache\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a8ee66fa6b7e9802d48f4c25ed5ecea6b}\label{classdoris_1_1io_1_1_file_block_a8ee66fa6b7e9802d48f4c25ed5ecea6b}} 
\index{FileBlock@{FileBlock}!\_is\_downloaded@{\_is\_downloaded}}
\index{\_is\_downloaded@{\_is\_downloaded}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_is\_downloaded}{\_is\_downloaded}}
{\footnotesize\ttfamily std\+::atomic$<$bool$>$ \+\_\+is\+\_\+downloaded \{false\}\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1io_1_1_file_block_a6fd5e93077e2e64a6253211947088a91}\label{classdoris_1_1io_1_1_file_block_a6fd5e93077e2e64a6253211947088a91}} 
\index{FileBlock@{FileBlock}!\_is\_persistent@{\_is\_persistent}}
\index{\_is\_persistent@{\_is\_persistent}!FileBlock@{FileBlock}}
\doxysubsubsection{\texorpdfstring{\_is\_persistent}{\_is\_persistent}}
{\footnotesize\ttfamily bool \+\_\+is\+\_\+persistent = false\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
/\+Users/dabowang/be\+\_\+all/io/cache/block/\mbox{\hyperlink{block__file__segment_8h}{block\+\_\+file\+\_\+segment.\+h}}\item 
/\+Users/dabowang/be\+\_\+all/io/cache/block/\mbox{\hyperlink{block__file__segment_8cpp}{block\+\_\+file\+\_\+segment.\+cpp}}\end{DoxyCompactItemize}
