\hypertarget{segment__iterator_8h_source}{}\doxysection{segment\+\_\+iterator.\+h}
\label{segment__iterator_8h_source}\index{/Users/dabowang/be\_all/olap/rowset/segment\_v2/segment\_iterator.h@{/Users/dabowang/be\_all/olap/rowset/segment\_v2/segment\_iterator.h}}
\mbox{\hyperlink{segment__iterator_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <roaring/roaring.hh>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{status_8h}{common/status.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{fs_2file__reader_8h}{io/fs/file\_reader.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{file__system_8h}{io/fs/file\_system.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{olap_2olap__common_8h}{olap/olap\_common.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{row__cursor_8h}{olap/row\_cursor.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{common_8h}{olap/rowset/segment\_v2/common.h}}"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{inverted__index__reader_8h}{olap/rowset/segment\_v2/inverted\_index\_reader.h}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{row__ranges_8h}{olap/rowset/segment\_v2/row\_ranges.h}}"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{segment_8h}{olap/rowset/segment\_v2/segment.h}}"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{schema_8h}{olap/schema.h}}"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{util_2file__cache_8h}{util/file\_cache.h}}"{}}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vexpr_8h}{vec/exprs/vexpr.h}}"{}}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{class\ }RowCursor;}
\DoxyCodeLine{00040\ \textcolor{keyword}{class\ }ShortKeyIndexIterator;}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{namespace\ }fs\ \{}
\DoxyCodeLine{00043\ \textcolor{keyword}{class\ }ReadableBlock;}
\DoxyCodeLine{00044\ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{namespace\ }segment\_v2\ \{}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_bitmap_index_iterator}{BitmapIndexIterator}};}
\DoxyCodeLine{00049\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_bitmap_index_reader}{BitmapIndexReader}};}
\DoxyCodeLine{00050\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_column_iterator}{ColumnIterator}};}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1segment__v2_1_1_column_predicate_info}{ColumnPredicateInfo}}\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1segment__v2_1_1_column_predicate_info_afb0e12bcd028234945e1e0e4e3c64024}{ColumnPredicateInfo}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00054\ \ \ \ \ std::string\ \mbox{\hyperlink{structdoris_1_1segment__v2_1_1_column_predicate_info_a418a457a1123a2f29218bc0f252fe0fc}{column\_name}};}
\DoxyCodeLine{00055\ \ \ \ \ std::string\ \mbox{\hyperlink{structdoris_1_1segment__v2_1_1_column_predicate_info_a8f3ff2207edcff56d12fd24e92f0148f}{query\_value}};}
\DoxyCodeLine{00056\ \ \ \ \ std::string\ \mbox{\hyperlink{structdoris_1_1segment__v2_1_1_column_predicate_info_add637e9ddc35cbabf1cd64e3301bb437}{query\_op}};}
\DoxyCodeLine{00057\ \};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator}{SegmentIterator}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classdoris_1_1_rowwise_iterator}{RowwiseIterator}}\ \{}
\DoxyCodeLine{00060\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator}{SegmentIterator}}(std::shared\_ptr<Segment>\ segment,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\&\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a3ee72595bbc67054675f15079ff60125}{\_schema}});}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a08995c9901905fcb9c73f3a11adf2cdc}{\string~SegmentIterator}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a0199e90e530c5abab0e86913560f42db}{init}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_storage_read_options}{StorageReadOptions}}\&\ opts)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a2170c68d68be4b5b3ecd64e7ed93a021}{next\_batch}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ block)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{comment}{//\ Get\ current\ block\ row\ locations.\ This\ function\ should\ be\ called}}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ after\ the\ `next\_batch`\ function.}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//\ Only\ vectorized\ version\ is\ supported.}}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a90543ae7ae975b287ae5bdb218d366d5}{current\_block\_row\_locations}}(std::vector<RowLocation>*\ block\_row\_locations)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\&\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a200eaee8b62f4e0fb0a2956d13d3f1d4}{schema}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a3ee72595bbc67054675f15079ff60125}{\_schema}};\ \}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_af6ffa10d1a91b5b8f495c7db87040323}{is\_lazy\_materialization\_read}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_aeb2d5770da53b01f726e312d914e4a2b}{\_lazy\_materialization\_read}};\ \}}
\DoxyCodeLine{00074\ \ \ \ \ uint64\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_af5491dbb0f8330adbe17f504c20a6520}{data\_id}}()\textcolor{keyword}{\ const\ override\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a65d1ffbbbeee0b5fa7ba8c033607430c}{\_segment}}-\/>id();\ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ab3e413b100fc461a38662739219b0456}{update\_profile}}(\mbox{\hyperlink{classdoris_1_1_runtime_profile}{RuntimeProfile}}*\ profile)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ updated\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ updated\ |=\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ab102293daa30ce4dbdbd049ca8f411bb}{\_update\_profile}}(profile,\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a355f14894902874325c0b316fe3b9caf}{\_short\_cir\_eval\_predicate}},\ \textcolor{stringliteral}{"{}ShortCircuitPredicates"{}});}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ updated\ |=\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ab102293daa30ce4dbdbd049ca8f411bb}{\_update\_profile}}(profile,\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a7370458dfcd9205102ca0eb4f3b77f35}{\_pre\_eval\_block\_predicate}},\ \textcolor{stringliteral}{"{}PreEvaluatePredicates"{}});}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a795134e80022ff889f9f64d7a3614f47}{\_opts}}.\mbox{\hyperlink{classdoris_1_1_storage_read_options_ac08bf5152b08e15797def04577882bfa}{delete\_condition\_predicates}}\ !=\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ std::set<const\ ColumnPredicate*>\ delete\_predicate\_set;}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a795134e80022ff889f9f64d7a3614f47}{\_opts}}.\mbox{\hyperlink{classdoris_1_1_storage_read_options_ac08bf5152b08e15797def04577882bfa}{delete\_condition\_predicates}}-\/>get\_all\_column\_predicate(delete\_predicate\_set);}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ updated\ |=\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ab102293daa30ce4dbdbd049ca8f411bb}{\_update\_profile}}(profile,\ delete\_predicate\_set,\ \textcolor{stringliteral}{"{}DeleteConditionPredicates"{}});}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ updated;}
\DoxyCodeLine{00088\ \ \ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Container>}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ab102293daa30ce4dbdbd049ca8f411bb}{\_update\_profile}}(\mbox{\hyperlink{classdoris_1_1_runtime_profile}{RuntimeProfile}}*\ profile,\ \textcolor{keyword}{const}\ Container\&\ predicates,}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ title)\ \{}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (predicates.empty())\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ std::string\ info;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ pred\ :\ predicates)\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ info\ +=\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}\ +\ pred-\/>debug\_string();}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ profile-\/>\mbox{\hyperlink{classdoris_1_1_runtime_profile_a1e8e7e6f95a43d0ccef31386313685e5}{add\_info\_string}}(title,\ info);}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00103\ \ \ \ \ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a3806c3b24a834a10d748689d4139ab1c}{\_init}}();}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a29065112679563cbbb77331642f5897a}{\_init\_return\_column\_iterators}}();}
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_aedd5a9252faed38d6f7cd9dfdc54f5db}{\_init\_bitmap\_index\_iterators}}();}
\DoxyCodeLine{00109\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a07231c5ee0dc1d59d57aa48bbb6e964d}{\_init\_inverted\_index\_iterators}}();}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//\ calculate\ row\ ranges\ that\ fall\ into\ requested\ key\ ranges\ using\ short\ key\ index}}
\DoxyCodeLine{00112\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a7202bb1fcd353113772d25ebe8ecd388}{\_get\_row\_ranges\_by\_keys}}();}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a99f0549e714bf7c735752892270f01c0}{\_prepare\_seek}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_storage_read_options_1_1_key_range}{StorageReadOptions::KeyRange}}\&\ key\_range);}
\DoxyCodeLine{00114\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ad45ff41408b05085d356cf118a337f74}{\_lookup\_ordinal}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_row_cursor}{RowCursor}}\&\ key,\ \textcolor{keywordtype}{bool}\ is\_include,\ \mbox{\hyperlink{namespacedoris_1_1segment__v2_ab2f57641d7ff60f0cdd275edc29f9dc2}{rowid\_t}}\ upper\_bound,}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1segment__v2_ab2f57641d7ff60f0cdd275edc29f9dc2}{rowid\_t}}*\ rowid);}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{comment}{//\ lookup\ the\ ordinal\ of\ given\ key\ from\ short\ key\ index}}
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a3de0851c2df9413858adcaaadf22ca9e}{\_lookup\_ordinal\_from\_sk\_index}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_row_cursor}{RowCursor}}\&\ key,\ \textcolor{keywordtype}{bool}\ is\_include,\ \mbox{\hyperlink{namespacedoris_1_1segment__v2_ab2f57641d7ff60f0cdd275edc29f9dc2}{rowid\_t}}\ upper\_bound,}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1segment__v2_ab2f57641d7ff60f0cdd275edc29f9dc2}{rowid\_t}}*\ rowid);}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{comment}{//\ lookup\ the\ ordinal\ of\ given\ key\ from\ primary\ key\ index}}
\DoxyCodeLine{00120\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_afe7316d017f354ea866123a9c01b0ccc}{\_lookup\_ordinal\_from\_pk\_index}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_row_cursor}{RowCursor}}\&\ key,\ \textcolor{keywordtype}{bool}\ is\_include,\ \mbox{\hyperlink{namespacedoris_1_1segment__v2_ab2f57641d7ff60f0cdd275edc29f9dc2}{rowid\_t}}*\ rowid);}
\DoxyCodeLine{00121\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a3c02871490f86748bbb036b54306b6dd}{\_seek\_and\_peek}}(\mbox{\hyperlink{namespacedoris_1_1segment__v2_ab2f57641d7ff60f0cdd275edc29f9dc2}{rowid\_t}}\ rowid);}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{comment}{//\ calculate\ row\ ranges\ that\ satisfy\ requested\ column\ conditions\ using\ various\ column\ index}}
\DoxyCodeLine{00124\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_aad4518b5b7aa8b8a6c1c28f12a29e1c9}{\_get\_row\_ranges\_by\_column\_conditions}}();}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a12d76f7b550ef51d43fd52e38560f393}{\_get\_row\_ranges\_from\_conditions}}(\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_row_ranges}{RowRanges}}*\ condition\_row\_ranges);}
\DoxyCodeLine{00126\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae4b2ac7a64998254845048922c1f6685}{\_apply\_bitmap\_index}}();}
\DoxyCodeLine{00127\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_aa57502dc0fb3fa450505ab7cb08ee170}{\_apply\_inverted\_index}}();}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_abbdd2ca7d1b272cb4a0615ca4a48880a}{\_apply\_index\_except\_leafnode\_of\_andnode}}();}
\DoxyCodeLine{00130\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a28f8ef9b8dce24fe2d5728797f68ce87}{\_apply\_bitmap\_index\_except\_leafnode\_of\_andnode}}(\mbox{\hyperlink{classdoris_1_1_column_predicate}{ColumnPredicate}}*\ pred,}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ roaring::Roaring*\ output\_result);}
\DoxyCodeLine{00132\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae9696775d7ee15e687fa3994aeabeffa}{\_apply\_inverted\_index\_except\_leafnode\_of\_andnode}}(\mbox{\hyperlink{classdoris_1_1_column_predicate}{ColumnPredicate}}*\ pred,}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ roaring::Roaring*\ output\_result);}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a3282ee6695bea17ecc73c28278199a9a}{\_is\_handle\_predicate\_by\_fulltext}}(\mbox{\hyperlink{classdoris_1_1_column_predicate}{ColumnPredicate}}*\ predicate);}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ade6b9ff85fb1203fba28d6513aab4af1}{\_can\_filter\_by\_preds\_except\_leafnode\_of\_andnode}}();}
\DoxyCodeLine{00136\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae6db791fc2c5d9728a9571502990ae50}{\_execute\_predicates\_except\_leafnode\_of\_andnode}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_expr}{vectorized::VExpr}}*\ expr);}
\DoxyCodeLine{00137\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ad0f803dc6f5db5e092fd3df46da99ef7}{\_execute\_compound\_fn}}(\textcolor{keyword}{const}\ std::string\&\ function\_name);}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_af1d00595618e6bf1e3f5225003500e6e}{\_is\_literal\_node}}(\textcolor{keyword}{const}\ TExprNodeType::type\&\ node\_type);}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a9166ae9b56fd23dd77fda75b1ab3f061}{\_init\_lazy\_materialization}}();}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ac6107a7bfb06186350b85a13f877a2d9}{\_vec\_init\_lazy\_materialization}}();}
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{//\ TODO:\ Fix\ Me}}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{comment}{//\ CHAR\ type\ in\ storage\ layer\ padding\ the\ 0\ in\ length.\ But\ query\ engine\ need\ ignore\ the\ padding\ 0.}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{comment}{//\ so\ segment\ iterator\ need\ to\ shrink\ char\ column\ before\ output\ it.\ only\ use\ in\ vec\ query\ engine.}}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae927d4ef629f148e3c73e8b0a9c438bd}{\_vec\_init\_char\_column\_id}}();}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_af2c3c815df5253855bb494e6d2ac62de}{segment\_id}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a65d1ffbbbeee0b5fa7ba8c033607430c}{\_segment}}-\/>id();\ \}}
\DoxyCodeLine{00148\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a42a7f7e3318640396313f48694226f2d}{num\_rows}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a65d1ffbbbeee0b5fa7ba8c033607430c}{\_segment}}-\/>num\_rows();\ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ab01d872c6806cae1bd6d80aa901cf493}{\_seek\_columns}}(\textcolor{keyword}{const}\ std::vector<ColumnId>\&\ column\_ids,\ \mbox{\hyperlink{namespacedoris_1_1segment__v2_ab2f57641d7ff60f0cdd275edc29f9dc2}{rowid\_t}}\ pos);}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{comment}{//\ read\ `nrows`\ of\ columns\ specified\ by\ `column\_ids`\ into\ `block`\ at\ `row\_offset`.}}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{comment}{//\ for\ vectorization\ implementation}}
\DoxyCodeLine{00153\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a56b2bf9fe23464eb1564097a2bab0430}{\_read\_columns}}(\textcolor{keyword}{const}\ std::vector<ColumnId>\&\ column\_ids,}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a3904a5cfbe6dcfc82d31783ef44b8f9c}{vectorized::MutableColumns}}\&\ column\_block,\ \textcolor{keywordtype}{size\_t}\ nrows);}
\DoxyCodeLine{00155\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a931bf8886ee310c087b81148fce203c3}{\_read\_columns\_by\_index}}(uint32\_t\ nrows\_read\_limit,\ uint32\_t\&\ nrows\_read,}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ set\_block\_rowid);}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a187ee9b7ab3a524628ca9d024f5b4def}{\_init\_current\_block}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ block,}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<vectorized::MutableColumnPtr>\&\ non\_pred\_vector);}
\DoxyCodeLine{00159\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a08e37ce51a49036d1937e113df16cac4}{\_evaluate\_vectorization\_predicate}}(uint16\_t*\ sel\_rowid\_idx,\ uint16\_t\ selected\_size);}
\DoxyCodeLine{00160\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_adf787c377ac2b75013ba5fd2e1aa7fa6}{\_evaluate\_short\_circuit\_predicate}}(uint16\_t*\ sel\_rowid\_idx,\ uint16\_t\ selected\_size);}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a554a3f23f003f4bd6c08d4607f304d09}{\_output\_non\_pred\_columns}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ block);}
\DoxyCodeLine{00162\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_abc63f2f9a7a2dd46679fd65de34c293e}{\_read\_columns\_by\_rowids}}(std::vector<ColumnId>\&\ read\_column\_ids,}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<rowid\_t>\&\ rowid\_vector,\ uint16\_t*\ sel\_rowid\_idx,}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ select\_size);}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Container>}
\DoxyCodeLine{00167\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a413d03bc63140080412da2e085bbd5be}{\_output\_column\_by\_sel\_idx}}(\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ block,\ \textcolor{keyword}{const}\ Container\&\ column\_ids,}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint16\_t*\ sel\_rowid\_idx,\ uint16\_t\ select\_size)\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_aaf031eb453aeee708e6e627425844795}{SCOPED\_RAW\_TIMER}}(\&\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a795134e80022ff889f9f64d7a3614f47}{\_opts}}.\mbox{\hyperlink{classdoris_1_1_storage_read_options_ac963dd6093bb0abb6ad25d40ec6ea014}{stats}}-\/>\mbox{\hyperlink{structdoris_1_1_olap_reader_statistics_a2327a2b8a61c8e839402784a7151e51e}{output\_col\_ns}});}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ cid\ :\ column\_ids)\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ block\_cid\ =\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a42324aa895fd440a29892a43118b09f5}{\_schema\_block\_id\_map}}[cid];}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{status_8h_a85f7d0e774e15eb35b74f53264305e16}{RETURN\_IF\_ERROR}}(block-\/>\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block_aeb4c6a5859a2fb6dd8aa25408871ad86}{copy\_column\_data\_to\_block}}(\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a5fb984d4ea41fc90920bc969c3bb9a29}{\_current\_return\_columns}}[cid].get(),}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sel\_rowid\_idx,\ select\_size,\ block\_cid,}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a795134e80022ff889f9f64d7a3614f47}{\_opts}}.\mbox{\hyperlink{classdoris_1_1_storage_read_options_ad825bfa41758aa2c88540eb8868146c8}{block\_row\_max}}));}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_status_a6ec1a217f203269ab53d2290d602db24}{Status::OK}}();}
\DoxyCodeLine{00177\ \ \ \ \ \}}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a0275e1e27789cfd7655db5164420e8e7}{\_can\_evaluated\_by\_vectorized}}(\mbox{\hyperlink{classdoris_1_1_column_predicate}{ColumnPredicate}}*\ predicate);}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ Dictionary\ column\ should\ do\ something\ to\ initial.}}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae05942fce8d2a024ee51ccc33904f78f}{\_convert\_dict\_code\_for\_predicate\_if\_necessary}}();}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae05f0fa62cc71e89440ea8af494b6fd2}{\_convert\_dict\_code\_for\_predicate\_if\_necessary\_impl}}(\mbox{\hyperlink{classdoris_1_1_column_predicate}{ColumnPredicate}}*\ predicate);}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a329bd8a2d73543209ad95d0aabfcace3}{\_update\_max\_row}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ block);}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a7e39caa8d3edd1f773a19169f9a38581}{\_check\_apply\_by\_bitmap\_index}}(\mbox{\hyperlink{classdoris_1_1_column_predicate}{ColumnPredicate}}*\ pred);}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a656a5242327238b95fc6f8bd054fdcdb}{\_check\_apply\_by\_inverted\_index}}(\mbox{\hyperlink{classdoris_1_1_column_predicate}{ColumnPredicate}}*\ pred);}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a4ec8d1bdfd011f9b1be0c91234bb7697}{\_gen\_predicate\_result\_sign}}(\mbox{\hyperlink{classdoris_1_1_column_predicate}{ColumnPredicate}}*\ predicate);}
\DoxyCodeLine{00192\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a4ec8d1bdfd011f9b1be0c91234bb7697}{\_gen\_predicate\_result\_sign}}(\mbox{\hyperlink{structdoris_1_1segment__v2_1_1_column_predicate_info}{ColumnPredicateInfo}}*\ predicate\_info);}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a24f5808d92450f934439f035a8542f8b}{\_build\_index\_result\_column}}(uint16\_t*\ sel\_rowid\_idx,\ uint16\_t\ select\_size,}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ block,\ \textcolor{keyword}{const}\ std::string\&\ pred\_result\_sign,}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ roaring::Roaring\&\ index\_result);}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a6c4a7d6ef2372d9f2888ed733b72f058}{\_output\_index\_result\_column}}(uint16\_t*\ sel\_rowid\_idx,\ uint16\_t\ select\_size,}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{vectorized::Block}}*\ block);}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{comment}{//\ todo(wb)\ remove\ this\ method\ after\ RowCursor\ is\ removed}}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a5ba5e29e5b4e719b680557bd6d8a8728}{\_convert\_rowcursor\_to\_short\_key}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_row_cursor}{RowCursor}}\&\ key,\ \textcolor{keywordtype}{size\_t}\ num\_keys)\ \{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}.capacity()\ ==\ 0)\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}.resize(num\_keys);}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ cid\ =\ 0;\ cid\ <\ num\_keys;\ cid++)\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ field\ =\ key.\mbox{\hyperlink{classdoris_1_1_row_cursor_a758cb5fcf82c7cba2e64f721f9701275}{schema}}()-\/>\mbox{\hyperlink{classdoris_1_1_schema_ad168f43170837b2bfc3aaec369b076eb}{column}}(cid);}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}[cid]\ =\ \mbox{\hyperlink{classdoris_1_1_schema_a8dcf00a6b1f7055d9f9fe70d7eebea6e}{Schema::get\_column\_by\_field}}(*field);}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (field-\/>type()\ ==\ \mbox{\hyperlink{namespacedoris_aa01498a3ceb2fa74dc9536c16caef1daa288f71bb99e599441ea900898cef17cc}{OLAP\_FIELD\_TYPE\_DATE}})\ \{}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}[cid]-\/>set\_date\_type();}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (field-\/>type()\ ==\ \mbox{\hyperlink{namespacedoris_aa01498a3ceb2fa74dc9536c16caef1daa82e92d1d490ea5aab4f104b33c60aa03}{OLAP\_FIELD\_TYPE\_DATETIME}})\ \{}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}[cid]-\/>set\_datetime\_type();}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ num\_keys;\ i++)\ \{}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}[i]-\/>clear();}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ cid\ =\ 0;\ cid\ <\ num\_keys;\ cid++)\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ field\ =\ key.\mbox{\hyperlink{classdoris_1_1_row_cursor_a758cb5fcf82c7cba2e64f721f9701275}{schema}}()-\/>\mbox{\hyperlink{classdoris_1_1_schema_ad168f43170837b2bfc3aaec369b076eb}{column}}(cid);}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (field\ ==\ \textcolor{keyword}{nullptr})\ \{}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ cell\ =\ key.\mbox{\hyperlink{classdoris_1_1_row_cursor_aa82c6061dc90e35f8a2551d7b16cd403}{cell}}(cid);}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cell.is\_null())\ \{}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}[cid]-\/>insert\_default();}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (field-\/>type()\ ==\ \mbox{\hyperlink{namespacedoris_aa01498a3ceb2fa74dc9536c16caef1daae6974dbd443985ccd653599ed8101e25}{OLAP\_FIELD\_TYPE\_VARCHAR}}\ ||}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ field-\/>type()\ ==\ \mbox{\hyperlink{namespacedoris_aa01498a3ceb2fa74dc9536c16caef1daa9617b640db17fdbfdd8fb871e30dd3bd}{OLAP\_FIELD\_TYPE\_CHAR}}\ ||}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ field-\/>type()\ ==\ \mbox{\hyperlink{namespacedoris_aa01498a3ceb2fa74dc9536c16caef1daa81695ed4681aa3d0f2e70b2634f9f134}{OLAP\_FIELD\_TYPE\_STRING}})\ \{}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}*\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{structdoris_1_1_slice}{Slice}}*\textcolor{keyword}{>}(cell.cell\_ptr());}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}[cid]-\/>insert\_data(\mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}-\/>data,\ \mbox{\hyperlink{rowset__tree_8cpp_adfb801ca1a73fc9fd701cbb7297497f1}{slice}}-\/>size);}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}[cid]-\/>insert\_many\_fix\_len\_data(}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(cell.cell\_ptr()),\ 1);}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00241\ \ \ \ \ \}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_acf0c3b77dfc71014518a91302c3e1f49}{\_compare\_short\_key\_with\_seek\_block}}(\textcolor{keyword}{const}\ std::vector<ColumnId>\&\ col\_ids)\ \{}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ cid\ :\ col\_ids)\ \{}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ todo(wb)\ simd\ compare\ when\ memory\ layout\ in\ row}}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ res\ =\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}}[cid]-\/>compare\_at(0,\ 0,\ *\mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a15b07b343619de1196eb48ddd6784e2b}{\_seek\_block}}[cid],\ -\/1);}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ !=\ 0)\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00252\ \ \ \ \ \}}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keyword}{class\ }BitmapRangeIterator;}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keyword}{class\ }BackwardBitmapRangeIterator;}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \ \ std::shared\_ptr<Segment>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a65d1ffbbbeee0b5fa7ba8c033607430c}{\_segment}};}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\&\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a3ee72595bbc67054675f15079ff60125}{\_schema}};}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{comment}{//\ \_column\_iterators\_map.size()\ ==\ \_schema.num\_columns()}}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{comment}{//\ map<unique\_id,\ ColumnIterator*>\ \_column\_iterators\_map/\_bitmap\_index\_iterators;}}
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{comment}{//\ can\ use\ \_schema\ get\ unique\_id\ by\ cid}}
\DoxyCodeLine{00262\ \ \ \ \ std::map<int32\_t,\ ColumnIterator*>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ac8aceb135396a00d3e9abd179c1e57f0}{\_column\_iterators}};}
\DoxyCodeLine{00263\ \ \ \ \ std::map<int32\_t,\ BitmapIndexIterator*>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a603c8c236949195ea561f62373810e9c}{\_bitmap\_index\_iterators}};}
\DoxyCodeLine{00264\ \ \ \ \ std::map<int32\_t,\ InvertedIndexIterator*>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_add81a815c298f0d6f6ff2cd4cd468778}{\_inverted\_index\_iterators}};}
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{comment}{//\ after\ init(),\ `\_row\_bitmap`\ contains\ all\ rowid\ to\ scan}}
\DoxyCodeLine{00266\ \ \ \ \ roaring::Roaring\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_aedc573e2e9471ade39fe628117417a36}{\_row\_bitmap}};}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{comment}{//\ "{}column\_name+operator+value-\/>\ <in\_compound\_query,\ rowid\_result>}}
\DoxyCodeLine{00268\ \ \ \ \ std::unordered\_map<std::string,\ std::pair<bool,\ roaring::Roaring>>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_aad22660a2014f722c6ae3b27b770a252}{\_rowid\_result\_for\_index}};}
\DoxyCodeLine{00269\ \ \ \ \ std::vector<std::pair<uint32\_t,\ uint32\_t>>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_aadef99cce238e111706abd3f9dc8da54}{\_split\_row\_ranges}};}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{comment}{//\ an\ iterator\ for\ `\_row\_bitmap`\ that\ can\ be\ used\ to\ extract\ row\ range\ to\ scan}}
\DoxyCodeLine{00271\ \ \ \ \ std::unique\_ptr<BitmapRangeIterator>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a65574602e71499138d2605296bda47b4}{\_range\_iter}};}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{comment}{//\ the\ next\ rowid\ to\ read}}
\DoxyCodeLine{00273\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1segment__v2_ab2f57641d7ff60f0cdd275edc29f9dc2}{rowid\_t}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ad19f23ec14fb7fa65d6875b776d62ccf}{\_cur\_rowid}};}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ members\ related\ to\ lazy\ materialization\ read}}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00276\ \ \ \ \ \textcolor{comment}{//\ whether\ lazy\ materialization\ read\ should\ be\ used.}}
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_aeb2d5770da53b01f726e312d914e4a2b}{\_lazy\_materialization\_read}};}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{comment}{//\ columns\ to\ read\ before\ predicate\ evaluation}}
\DoxyCodeLine{00279\ \ \ \ \ std::vector<ColumnId>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a9feb22989d29464764c5868c4bdaa44b}{\_predicate\_columns}};}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{comment}{//\ columns\ to\ read\ after\ predicate\ evaluation}}
\DoxyCodeLine{00281\ \ \ \ \ std::vector<ColumnId>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a23411989dab0688ba6031f33c05b3e5b}{\_non\_predicate\_columns}};}
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{comment}{//\ remember\ the\ rowids\ we've\ read\ for\ the\ current\ row\ block.}}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{comment}{//\ could\ be\ a\ local\ variable\ of\ next\_batch(),\ kept\ here\ to\ reuse\ vector\ memory}}
\DoxyCodeLine{00284\ \ \ \ \ std::vector<rowid\_t>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a450ab27371097aa83078276cd70f5414}{\_block\_rowids}};}
\DoxyCodeLine{00285\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a21a23d5fb0e3ba944fb96c9362453de8}{\_is\_need\_vec\_eval}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00286\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a9e7599834981c92292d31fca67b8072e}{\_is\_need\_short\_eval}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{comment}{//\ fields\ for\ vectorization\ execution}}
\DoxyCodeLine{00289\ \ \ \ \ std::vector<ColumnId>}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a0b20bdf8efe995736cb40880caa9df1a}{\_vec\_pred\_column\_ids}};\ \textcolor{comment}{//\ keep\ columnId\ of\ columns\ for\ vectorized\ predicate\ evaluation}}
\DoxyCodeLine{00291\ \ \ \ \ std::vector<ColumnId>}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a3a73437683e6034e471f537921a09435}{\_short\_cir\_pred\_column\_ids}};\ \textcolor{comment}{//\ keep\ columnId\ of\ columns\ for\ short\ circuit\ predicate\ evaluation}}
\DoxyCodeLine{00293\ \ \ \ \ std::vector<bool>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a9213cec9294cad5511e90a057a66ecd7}{\_is\_pred\_column}};\ \textcolor{comment}{//\ columns\ hold\ by\ segmentIter}}
\DoxyCodeLine{00294\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a3904a5cfbe6dcfc82d31783ef44b8f9c}{vectorized::MutableColumns}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a5fb984d4ea41fc90920bc969c3bb9a29}{\_current\_return\_columns}};}
\DoxyCodeLine{00295\ \ \ \ \ std::vector<ColumnPredicate*>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a7370458dfcd9205102ca0eb4f3b77f35}{\_pre\_eval\_block\_predicate}};}
\DoxyCodeLine{00296\ \ \ \ \ std::vector<ColumnPredicate*>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a355f14894902874325c0b316fe3b9caf}{\_short\_cir\_eval\_predicate}};}
\DoxyCodeLine{00297\ \ \ \ \ std::vector<uint32\_t>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a57738c8725b4502bf1b4356e6215a280}{\_delete\_range\_column\_ids}};}
\DoxyCodeLine{00298\ \ \ \ \ std::vector<uint32\_t>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ac570fd06ca01755cf117c04d25e462aa}{\_delete\_bloom\_filter\_column\_ids}};}
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{comment}{//\ when\ lazy\ materialization\ is\ enabled,\ segmentIter\ need\ to\ read\ data\ at\ least\ twice}}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{comment}{//\ first,\ read\ predicate\ columns\ by\ various\ index}}
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{comment}{//\ second,\ read\ non-\/predicate\ columns}}
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{comment}{//\ so\ we\ need\ a\ field\ to\ stand\ for\ columns\ first\ time\ to\ read}}
\DoxyCodeLine{00303\ \ \ \ \ std::vector<ColumnId>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a3a78811b706d7655cf60c832a553c180}{\_first\_read\_column\_ids}};}
\DoxyCodeLine{00304\ \ \ \ \ std::vector<int>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a42324aa895fd440a29892a43118b09f5}{\_schema\_block\_id\_map}};\ \textcolor{comment}{//\ map\ from\ schema\ column\ id\ to\ column\ idx\ in\ Block}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{comment}{//\ the\ actual\ init\ process\ is\ delayed\ to\ the\ first\ call\ to\ next\_batch()}}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a1a1154efc273bb7a5c2eb672fe357e0a}{\_inited}};}
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a48a1db05510809474def11229993adbe}{\_estimate\_row\_size}};}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_storage_read_options}{StorageReadOptions}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a795134e80022ff889f9f64d7a3614f47}{\_opts}};}
\DoxyCodeLine{00311\ \ \ \ \ \textcolor{comment}{//\ make\ a\ copy\ of\ `\_opts.column\_predicates`\ in\ order\ to\ make\ local\ changes}}
\DoxyCodeLine{00312\ \ \ \ \ std::vector<ColumnPredicate*>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a7a7e090137c46ce95ade26ec641851c1}{\_col\_predicates}};}
\DoxyCodeLine{00313\ \ \ \ \ std::vector<ColumnPredicate*>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a673c6be05840bb6488a8182d5acbb74e}{\_col\_preds\_except\_leafnode\_of\_andnode}};}
\DoxyCodeLine{00314\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_v_expr}{doris::vectorized::VExpr}}*\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_afd7094929d8f076a60c6d5ab14ad1c15}{\_remaining\_vconjunct\_root}};}
\DoxyCodeLine{00315\ \ \ \ \ std::vector<roaring::Roaring>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_acf459c28169439c342449995c04466b9}{\_pred\_except\_leafnode\_of\_andnode\_evaluate\_result}};}
\DoxyCodeLine{00316\ \ \ \ \ std::unique\_ptr<ColumnPredicateInfo>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a694e75f8956b1dd9c7ba79f0caaa81ef}{\_column\_predicate\_info}};}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00318\ \ \ \ \ std::shared\_ptr<ColumnPredicate>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a00b5dd73c62c54e38a289267c5968129}{\_runtime\_predicate}}\ \{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{comment}{//\ row\ schema\ of\ the\ key\ to\ seek}}
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{comment}{//\ only\ used\ in\ `\_get\_row\_ranges\_by\_keys`}}
\DoxyCodeLine{00322\ \ \ \ \ std::unique\_ptr<Schema>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a8529509ca35bf8edf5e33cd6c6a87fb6}{\_seek\_schema}};}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{comment}{//\ used\ to\ binary\ search\ the\ rowid\ for\ a\ given\ key}}
\DoxyCodeLine{00324\ \ \ \ \ \textcolor{comment}{//\ only\ used\ in\ `\_get\_row\_ranges\_by\_keys`}}
\DoxyCodeLine{00325\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a3904a5cfbe6dcfc82d31783ef44b8f9c}{vectorized::MutableColumns}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a15b07b343619de1196eb48ddd6784e2b}{\_seek\_block}};}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{comment}{//todo(wb)\ remove\ this\ field\ after\ Rowcursor\ is\ removed}}
\DoxyCodeLine{00328\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a3904a5cfbe6dcfc82d31783ef44b8f9c}{vectorized::MutableColumns}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ae2e8bd43b67d1dd2908f4b02523ae5f9}{\_short\_key}};}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00330\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1io_a4fab59e5f39ac7c318b993fa0c5265ee}{io::FileReaderSPtr}}\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a0c94b8447f79ad7c6166e0b4e50c5cf8}{\_file\_reader}};}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \ \ \ \ \textcolor{comment}{//\ char\_type\ or\ array<char>\ type\ columns\ cid}}
\DoxyCodeLine{00333\ \ \ \ \ std::vector<size\_t>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a489988b37ec8f6146b43c2263b48367f}{\_char\_type\_idx}};}
\DoxyCodeLine{00334\ }
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{comment}{//\ number\ of\ rows\ read\ in\ the\ current\ batch}}
\DoxyCodeLine{00336\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_ac00a074824e53eedcc46176b57b7e204}{\_current\_batch\_rows\_read}}\ =\ 0;}
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{comment}{//\ used\ for\ compaction,\ record\ selectd\ rowids\ of\ current\ batch}}
\DoxyCodeLine{00338\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a1207577a1b24de3a99e7f73ea1318795}{\_selected\_size}};}
\DoxyCodeLine{00339\ \ \ \ \ vector<uint16\_t>\ \mbox{\hyperlink{classdoris_1_1segment__v2_1_1_segment_iterator_a2239dba77490b053e3c6bb3e77db65a0}{\_sel\_rowid\_idx}};}
\DoxyCodeLine{00340\ \};}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ \}\ \textcolor{comment}{//\ namespace\ segment\_v2}}
\DoxyCodeLine{00343\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
