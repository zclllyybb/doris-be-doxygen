\hypertarget{classdoris_1_1_delete_bitmap}{}\doxysection{Delete\+Bitmap类 参考}
\label{classdoris_1_1_delete_bitmap}\index{DeleteBitmap@{DeleteBitmap}}


{\ttfamily \#include $<$tablet\+\_\+meta.\+h$>$}

\doxysubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classdoris_1_1_delete_bitmap_1_1_agg_cache}{Agg\+Cache}}
\end{DoxyCompactItemize}
\doxysubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a1f09522fffcf4e52bd8cadd2a5d80134}{Segment\+Id}} = uint32\+\_\+t
\item 
using \mbox{\hyperlink{classdoris_1_1_delete_bitmap_af87ef29fb7d130cb11d3812bbcc94451}{Version}} = uint64\+\_\+t
\item 
using \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} = std\+::tuple$<$ \mbox{\hyperlink{structdoris_1_1_rowset_id}{Rowset\+Id}}, \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a1f09522fffcf4e52bd8cadd2a5d80134}{Segment\+Id}}, \mbox{\hyperlink{classdoris_1_1_delete_bitmap_af87ef29fb7d130cb11d3812bbcc94451}{Version}} $>$
\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdoris_1_1_delete_bitmap_a6a40044165be211e4f0bf7338351c927}{Delete\+Bitmap}} (int64\+\_\+t tablet\+\_\+id)
\item 
\mbox{\hyperlink{classdoris_1_1_delete_bitmap_a8be78810923c4af056d6413c5d7d66c4}{Delete\+Bitmap}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&r)
\item 
\mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \& \mbox{\hyperlink{classdoris_1_1_delete_bitmap_adb4232f1f5a93761c45601375824a3d6}{operator=}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&r)
\item 
\mbox{\hyperlink{classdoris_1_1_delete_bitmap_abf2e07f37af06745eb15e79cf6a43a24}{Delete\+Bitmap}} (\mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&\&r)
\item 
\mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \& \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ad602caccfc5a39362ad55a35cd1a4e5f}{operator=}} (\mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&\&r)
\item 
\mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \mbox{\hyperlink{classdoris_1_1_delete_bitmap_af86f59235c176fb08e24b068c1844057}{snapshot}} () const
\item 
\mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a1414126e6a39987ed4bef63d5176f81a}{snapshot}} (\mbox{\hyperlink{classdoris_1_1_delete_bitmap_af87ef29fb7d130cb11d3812bbcc94451}{Version}} \mbox{\hyperlink{file__helper_8h_acd99bb05ca015e7d74448acb1deba7ca}{version}}) const
\item 
void \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a4e5a9ce73e8cbaca59f453c1341e6f28}{add}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&bmk, uint32\+\_\+t row\+\_\+id)
\item 
int \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a55f3b0d6799a2debdf0943c52bc6c342}{remove}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&bmk, uint32\+\_\+t row\+\_\+id)
\item 
void \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a4cfc1c6dc2c9ca30581939838af1b10e}{remove}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&lower\+\_\+key, const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&upper\+\_\+key)
\item 
bool \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac3ae4e863fc566cfeb05bff4cbc5f952}{contains}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&bmk, uint32\+\_\+t row\+\_\+id) const
\item 
int \mbox{\hyperlink{classdoris_1_1_delete_bitmap_adb325ccb7a72cda8a9c900b2e63e097a}{set}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&bmk, const roaring\+::\+Roaring \&segment\+\_\+delete\+\_\+bitmap)
\item 
int \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a8f4ef674338ccf35f616d2c34d6a685a}{get}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&bmk, roaring\+::\+Roaring $\ast$segment\+\_\+delete\+\_\+bitmap) const
\item 
const roaring\+::\+Roaring $\ast$ \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a4dc4ec8c021954022be45f3db4725eb1}{get}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&bmk) const
\item 
void \mbox{\hyperlink{classdoris_1_1_delete_bitmap_abc09ddfe5ec798f4041895a549c3a819}{subset}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&start, const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&end, \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} $\ast$subset\+\_\+delete\+\_\+map) const
\item 
void \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a25e5f8ec45071a6f98820a0f596d0bea}{merge}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&other)
\item 
bool \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a80d5bf15f752e0501bda6f74833d8c02}{contains\+\_\+agg}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&bitmap, uint32\+\_\+t row\+\_\+id) const
\item 
std\+::shared\+\_\+ptr$<$ roaring\+::\+Roaring $>$ \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ae569379a0d665fe3b520696000f4dde9}{get\+\_\+agg}} (const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&bmk) const
\end{DoxyCompactItemize}
\doxysubsection*{Public 属性}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+mutex \mbox{\hyperlink{classdoris_1_1_delete_bitmap_af40eb81400ba119f112df5c19b60617f}{lock}}
\item 
std\+::map$<$ \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}}, roaring\+::\+Roaring $>$ \mbox{\hyperlink{classdoris_1_1_delete_bitmap_afdf332eb4a6e399664fedf72d78ea272}{delete\+\_\+bitmap}}
\end{DoxyCompactItemize}
\doxysubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classdoris_1_1_delete_bitmap_1_1_agg_cache}{Agg\+Cache}} $>$ \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac270f743723579eaa1353d904fb567af}{\+\_\+agg\+\_\+cache}}
\item 
int64\+\_\+t \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a8c64882809994d5a843169369bd4277e}{\+\_\+tablet\+\_\+id}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
Wraps multiple bitmaps for recording rows (row id) that are deleted or overwritten. For now, it\textquotesingle{}s only used when unique key merge-\/on-\/write property enabled.

\mbox{\hyperlink{structdoris_1_1_rowset_id}{Rowset\+Id}} and Segment\+Id are for locating segment, \mbox{\hyperlink{structdoris_1_1_version}{Version}} here is a single uint32\+\_\+t means that at which \char`\"{}version\char`\"{} of the load causes the delete or overwrite.

The start and end version of a load is the same, it\textquotesingle{}s ok and straightforward to use a single uint32\+\_\+t.

e.\+g. There is a key \char`\"{}key1\char`\"{} in rowset id 1, version \mbox{[}1,1\mbox{]}, segment id 1, row id 1. A new load also contains \char`\"{}key1\char`\"{}, the rowset id 2, version \mbox{[}2,2\mbox{]}, segment id 1 the delete bitmap will be {\ttfamily \{1,1,2\} -\/\texorpdfstring{$>$}{>} 1}, which means the \char`\"{}row id 1\char`\"{} in \char`\"{}rowset id 1, segment id 1\char`\"{} is deleted/overitten by some loads at \char`\"{}version 2\char`\"{} 

\doxysubsection{成员类型定义说明}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a1f09522fffcf4e52bd8cadd2a5d80134}\label{classdoris_1_1_delete_bitmap_a1f09522fffcf4e52bd8cadd2a5d80134}} 
\index{DeleteBitmap@{DeleteBitmap}!SegmentId@{SegmentId}}
\index{SegmentId@{SegmentId}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{SegmentId}{SegmentId}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a1f09522fffcf4e52bd8cadd2a5d80134}{Segment\+Id}} =  uint32\+\_\+t}

\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_af87ef29fb7d130cb11d3812bbcc94451}\label{classdoris_1_1_delete_bitmap_af87ef29fb7d130cb11d3812bbcc94451}} 
\index{DeleteBitmap@{DeleteBitmap}!Version@{Version}}
\index{Version@{Version}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{Version}{Version}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classdoris_1_1_delete_bitmap_af87ef29fb7d130cb11d3812bbcc94451}{Version}} =  uint64\+\_\+t}

\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}\label{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}} 
\index{DeleteBitmap@{DeleteBitmap}!BitmapKey@{BitmapKey}}
\index{BitmapKey@{BitmapKey}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{BitmapKey}{BitmapKey}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} =  std\+::tuple$<$\mbox{\hyperlink{structdoris_1_1_rowset_id}{Rowset\+Id}}, \mbox{\hyperlink{classdoris_1_1_delete_bitmap_a1f09522fffcf4e52bd8cadd2a5d80134}{Segment\+Id}}, \mbox{\hyperlink{classdoris_1_1_delete_bitmap_af87ef29fb7d130cb11d3812bbcc94451}{Version}}$>$}



\doxysubsection{构造及析构函数说明}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a6a40044165be211e4f0bf7338351c927}\label{classdoris_1_1_delete_bitmap_a6a40044165be211e4f0bf7338351c927}} 
\index{DeleteBitmap@{DeleteBitmap}!DeleteBitmap@{DeleteBitmap}}
\index{DeleteBitmap@{DeleteBitmap}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{DeleteBitmap()}{DeleteBitmap()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{tablet\+\_\+id }\end{DoxyParamCaption})}


\begin{DoxyParams}{参数}
{\em tablet\+\_\+id} & the tablet which this delete bitmap associates with \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a8be78810923c4af056d6413c5d7d66c4}\label{classdoris_1_1_delete_bitmap_a8be78810923c4af056d6413c5d7d66c4}} 
\index{DeleteBitmap@{DeleteBitmap}!DeleteBitmap@{DeleteBitmap}}
\index{DeleteBitmap@{DeleteBitmap}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{DeleteBitmap()}{DeleteBitmap()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&}]{r }\end{DoxyParamCaption})}

Copy c-\/tor for making delete bitmap snapshot on read path \mbox{\Hypertarget{classdoris_1_1_delete_bitmap_abf2e07f37af06745eb15e79cf6a43a24}\label{classdoris_1_1_delete_bitmap_abf2e07f37af06745eb15e79cf6a43a24}} 
\index{DeleteBitmap@{DeleteBitmap}!DeleteBitmap@{DeleteBitmap}}
\index{DeleteBitmap@{DeleteBitmap}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{DeleteBitmap()}{DeleteBitmap()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&\&}]{r }\end{DoxyParamCaption})}

Move c-\/tor for making delete bitmap snapshot on read path 

\doxysubsection{成员函数说明}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_adb4232f1f5a93761c45601375824a3d6}\label{classdoris_1_1_delete_bitmap_adb4232f1f5a93761c45601375824a3d6}} 
\index{DeleteBitmap@{DeleteBitmap}!operator=@{operator=}}
\index{operator=@{operator=}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \& operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&}]{r }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_ad602caccfc5a39362ad55a35cd1a4e5f}\label{classdoris_1_1_delete_bitmap_ad602caccfc5a39362ad55a35cd1a4e5f}} 
\index{DeleteBitmap@{DeleteBitmap}!operator=@{operator=}}
\index{operator=@{operator=}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \& operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&\&}]{r }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_af86f59235c176fb08e24b068c1844057}\label{classdoris_1_1_delete_bitmap_af86f59235c176fb08e24b068c1844057}} 
\index{DeleteBitmap@{DeleteBitmap}!snapshot@{snapshot}}
\index{snapshot@{snapshot}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{snapshot()}{snapshot()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} snapshot (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}

Makes a snapshot of delete bimap, read lock will be acquired in this process 这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d6/d6d/classdoris_1_1_delete_bitmap_af86f59235c176fb08e24b068c1844057_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a1414126e6a39987ed4bef63d5176f81a}\label{classdoris_1_1_delete_bitmap_a1414126e6a39987ed4bef63d5176f81a}} 
\index{DeleteBitmap@{DeleteBitmap}!snapshot@{snapshot}}
\index{snapshot@{snapshot}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{snapshot()}{snapshot()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} snapshot (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classdoris_1_1_delete_bitmap_af87ef29fb7d130cb11d3812bbcc94451}{Version}}}]{version }\end{DoxyParamCaption}) const}

Makes a snapshot of delete bimap on given version, read lock will be acquired temporary in this process 函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{d6/d6d/classdoris_1_1_delete_bitmap_a1414126e6a39987ed4bef63d5176f81a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a4e5a9ce73e8cbaca59f453c1341e6f28}\label{classdoris_1_1_delete_bitmap_a4e5a9ce73e8cbaca59f453c1341e6f28}} 
\index{DeleteBitmap@{DeleteBitmap}!add@{add}}
\index{add@{add}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{add()}{add()}}
{\footnotesize\ttfamily void add (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{bmk,  }\item[{uint32\+\_\+t}]{row\+\_\+id }\end{DoxyParamCaption})}

Marks the specific row deleted 这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=260pt]{d6/d6d/classdoris_1_1_delete_bitmap_a4e5a9ce73e8cbaca59f453c1341e6f28_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a55f3b0d6799a2debdf0943c52bc6c342}\label{classdoris_1_1_delete_bitmap_a55f3b0d6799a2debdf0943c52bc6c342}} 
\index{DeleteBitmap@{DeleteBitmap}!remove@{remove}}
\index{remove@{remove}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{remove()}{remove()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int remove (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{bmk,  }\item[{uint32\+\_\+t}]{row\+\_\+id }\end{DoxyParamCaption})}

Clears the deletetion mark specific row

\begin{DoxyReturn}{返回}
non-\/zero if the associated delete bimap does not exist 
\end{DoxyReturn}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=275pt]{d6/d6d/classdoris_1_1_delete_bitmap_a55f3b0d6799a2debdf0943c52bc6c342_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a4cfc1c6dc2c9ca30581939838af1b10e}\label{classdoris_1_1_delete_bitmap_a4cfc1c6dc2c9ca30581939838af1b10e}} 
\index{DeleteBitmap@{DeleteBitmap}!remove@{remove}}
\index{remove@{remove}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{remove()}{remove()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void remove (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{lower\+\_\+key,  }\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{upper\+\_\+key }\end{DoxyParamCaption})}

Clears bitmaps in range \mbox{[}lower\+\_\+key, upper\+\_\+key) \mbox{\Hypertarget{classdoris_1_1_delete_bitmap_ac3ae4e863fc566cfeb05bff4cbc5f952}\label{classdoris_1_1_delete_bitmap_ac3ae4e863fc566cfeb05bff4cbc5f952}} 
\index{DeleteBitmap@{DeleteBitmap}!contains@{contains}}
\index{contains@{contains}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{contains()}{contains()}}
{\footnotesize\ttfamily bool contains (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{bmk,  }\item[{uint32\+\_\+t}]{row\+\_\+id }\end{DoxyParamCaption}) const}

Checks if the given row is marked deleted

\begin{DoxyReturn}{返回}
true if marked deleted 
\end{DoxyReturn}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_adb325ccb7a72cda8a9c900b2e63e097a}\label{classdoris_1_1_delete_bitmap_adb325ccb7a72cda8a9c900b2e63e097a}} 
\index{DeleteBitmap@{DeleteBitmap}!set@{set}}
\index{set@{set}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{set()}{set()}}
{\footnotesize\ttfamily int set (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{bmk,  }\item[{const roaring\+::\+Roaring \&}]{segment\+\_\+delete\+\_\+bitmap }\end{DoxyParamCaption})}

Sets the bitmap of specific segment, it\textquotesingle{}s may be insertion or replacement

\begin{DoxyReturn}{返回}
1 if the insertion took place, 0 if the assignment took place 
\end{DoxyReturn}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=340pt]{d6/d6d/classdoris_1_1_delete_bitmap_adb325ccb7a72cda8a9c900b2e63e097a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a8f4ef674338ccf35f616d2c34d6a685a}\label{classdoris_1_1_delete_bitmap_a8f4ef674338ccf35f616d2c34d6a685a}} 
\index{DeleteBitmap@{DeleteBitmap}!get@{get}}
\index{get@{get}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{get()}{get()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily int get (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{bmk,  }\item[{roaring\+::\+Roaring $\ast$}]{segment\+\_\+delete\+\_\+bitmap }\end{DoxyParamCaption}) const}

Gets a copy of specific delete bmk


\begin{DoxyParams}{参数}
{\em segment\+\_\+delete\+\_\+bitmap} & output param \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{返回}
non-\/zero if the associated delete bimap does not exist 
\end{DoxyReturn}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a4dc4ec8c021954022be45f3db4725eb1}\label{classdoris_1_1_delete_bitmap_a4dc4ec8c021954022be45f3db4725eb1}} 
\index{DeleteBitmap@{DeleteBitmap}!get@{get}}
\index{get@{get}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{get()}{get()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily const roaring\+::\+Roaring $\ast$ get (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{bmk }\end{DoxyParamCaption}) const}

Gets reference to a specific delete map, DO NOT use this function on a mutable \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} object \begin{DoxyReturn}{返回}
nullptr if the given bitmap does not exist 
\end{DoxyReturn}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_abc09ddfe5ec798f4041895a549c3a819}\label{classdoris_1_1_delete_bitmap_abc09ddfe5ec798f4041895a549c3a819}} 
\index{DeleteBitmap@{DeleteBitmap}!subset@{subset}}
\index{subset@{subset}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{subset()}{subset()}}
{\footnotesize\ttfamily void subset (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{start,  }\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{end,  }\item[{\mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} $\ast$}]{subset\+\_\+delete\+\_\+map }\end{DoxyParamCaption}) const}

Gets subset of delete\+\_\+bitmap with given range \mbox{[}start, end)

@parma start start @parma end end @parma subset\+\_\+delete\+\_\+map output param 函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=192pt]{d6/d6d/classdoris_1_1_delete_bitmap_abc09ddfe5ec798f4041895a549c3a819_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=274pt]{d6/d6d/classdoris_1_1_delete_bitmap_abc09ddfe5ec798f4041895a549c3a819_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a25e5f8ec45071a6f98820a0f596d0bea}\label{classdoris_1_1_delete_bitmap_a25e5f8ec45071a6f98820a0f596d0bea}} 
\index{DeleteBitmap@{DeleteBitmap}!merge@{merge}}
\index{merge@{merge}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{merge()}{merge()}}
{\footnotesize\ttfamily void merge (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap}{Delete\+Bitmap}} \&}]{other }\end{DoxyParamCaption})}

Merges the given delete bitmap into $\ast$this


\begin{DoxyParams}{参数}
{\em other} & \\
\hline
\end{DoxyParams}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=272pt]{d6/d6d/classdoris_1_1_delete_bitmap_a25e5f8ec45071a6f98820a0f596d0bea_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a80d5bf15f752e0501bda6f74833d8c02}\label{classdoris_1_1_delete_bitmap_a80d5bf15f752e0501bda6f74833d8c02}} 
\index{DeleteBitmap@{DeleteBitmap}!contains\_agg@{contains\_agg}}
\index{contains\_agg@{contains\_agg}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{contains\_agg()}{contains\_agg()}}
{\footnotesize\ttfamily bool contains\+\_\+agg (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{bitmap,  }\item[{uint32\+\_\+t}]{row\+\_\+id }\end{DoxyParamCaption}) const}

Checks if the given row is marked deleted in bitmap with the condition\+: all the bitmaps that \mbox{\hyperlink{structdoris_1_1_rowset_id}{Rowset\+Id}} and Segment\+Id are the same as the given ones, and \mbox{\hyperlink{structdoris_1_1_version}{Version}} \texorpdfstring{$<$}{<}= the given \mbox{\hyperlink{structdoris_1_1_version}{Version}}

Note\+: aggregation cache may be used.

\begin{DoxyReturn}{返回}
true if marked deleted 
\end{DoxyReturn}
函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d6/d6d/classdoris_1_1_delete_bitmap_a80d5bf15f752e0501bda6f74833d8c02_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_ae569379a0d665fe3b520696000f4dde9}\label{classdoris_1_1_delete_bitmap_ae569379a0d665fe3b520696000f4dde9}} 
\index{DeleteBitmap@{DeleteBitmap}!get\_agg@{get\_agg}}
\index{get\_agg@{get\_agg}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{get\_agg()}{get\_agg()}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$ roaring\+::\+Roaring $>$ get\+\_\+agg (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}} \&}]{bmk }\end{DoxyParamCaption}) const}

Gets aggregated delete\+\_\+bitmap on rowset\+\_\+id and version, the same effect\+: {\ttfamily select sum(roaring\+::\+Roaring) where \mbox{\hyperlink{structdoris_1_1_rowset_id}{Rowset\+Id}}=rowset\+\_\+id and Segment\+Id=seg\+\_\+id and \mbox{\hyperlink{structdoris_1_1_version}{Version}} \texorpdfstring{$<$}{<}= version}

\begin{DoxyReturn}{返回}
shared\+\_\+ptr to a bitmap, which may be empty 
\end{DoxyReturn}
函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=279pt]{d6/d6d/classdoris_1_1_delete_bitmap_ae569379a0d665fe3b520696000f4dde9_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d6/d6d/classdoris_1_1_delete_bitmap_ae569379a0d665fe3b520696000f4dde9_icgraph}
\end{center}
\end{figure}


\doxysubsection{类成员变量说明}
\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_af40eb81400ba119f112df5c19b60617f}\label{classdoris_1_1_delete_bitmap_af40eb81400ba119f112df5c19b60617f}} 
\index{DeleteBitmap@{DeleteBitmap}!lock@{lock}}
\index{lock@{lock}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{lock}{lock}}
{\footnotesize\ttfamily std\+::shared\+\_\+mutex lock\hspace{0.3cm}{\ttfamily [mutable]}}

\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_afdf332eb4a6e399664fedf72d78ea272}\label{classdoris_1_1_delete_bitmap_afdf332eb4a6e399664fedf72d78ea272}} 
\index{DeleteBitmap@{DeleteBitmap}!delete\_bitmap@{delete\_bitmap}}
\index{delete\_bitmap@{delete\_bitmap}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{delete\_bitmap}{delete\_bitmap}}
{\footnotesize\ttfamily std\+::map$<$\mbox{\hyperlink{classdoris_1_1_delete_bitmap_ac88235435a3b4a824762dc3691f86573}{Bitmap\+Key}}, roaring\+::\+Roaring$>$ delete\+\_\+bitmap}

\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_ac270f743723579eaa1353d904fb567af}\label{classdoris_1_1_delete_bitmap_ac270f743723579eaa1353d904fb567af}} 
\index{DeleteBitmap@{DeleteBitmap}!\_agg\_cache@{\_agg\_cache}}
\index{\_agg\_cache@{\_agg\_cache}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{\_agg\_cache}{\_agg\_cache}}
{\footnotesize\ttfamily std\+::shared\+\_\+ptr$<$\mbox{\hyperlink{classdoris_1_1_delete_bitmap_1_1_agg_cache}{Agg\+Cache}}$>$ \+\_\+agg\+\_\+cache\hspace{0.3cm}{\ttfamily [mutable]}, {\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1_delete_bitmap_a8c64882809994d5a843169369bd4277e}\label{classdoris_1_1_delete_bitmap_a8c64882809994d5a843169369bd4277e}} 
\index{DeleteBitmap@{DeleteBitmap}!\_tablet\_id@{\_tablet\_id}}
\index{\_tablet\_id@{\_tablet\_id}!DeleteBitmap@{DeleteBitmap}}
\doxysubsubsection{\texorpdfstring{\_tablet\_id}{\_tablet\_id}}
{\footnotesize\ttfamily int64\+\_\+t \+\_\+tablet\+\_\+id\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
/\+Users/dabowang/be\+\_\+all/olap/\mbox{\hyperlink{tablet__meta_8h}{tablet\+\_\+meta.\+h}}\item 
/\+Users/dabowang/be\+\_\+all/olap/\mbox{\hyperlink{tablet__meta_8cpp}{tablet\+\_\+meta.\+cpp}}\end{DoxyCompactItemize}
