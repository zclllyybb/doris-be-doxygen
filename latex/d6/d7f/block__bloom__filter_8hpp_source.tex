\hypertarget{block__bloom__filter_8hpp_source}{}\doxysection{block\+\_\+bloom\+\_\+filter.\+hpp}
\label{block__bloom__filter_8hpp_source}\index{/Users/dabowang/doris/be/src/exprs/block\_bloom\_filter.hpp@{/Users/dabowang/doris/be/src/exprs/block\_bloom\_filter.hpp}}
\mbox{\hyperlink{block__bloom__filter_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ This\ file\ is\ copied\ from}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ https://github.com/apache/kudu/blob/master/src/kudu/util/block\_bloom\_filter.h}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ and\ modified\ by\ Doris}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#ifdef\ \_\_AVX2\_\_}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <immintrin.h>}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{macros_8h}{gutil/macros.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{status_8h}{common/status.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}fmt/format.h"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{hash__util_8hpp}{util/hash\_util.hpp}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{slice_8h}{util/slice.h}}"{}}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacebutil}{butil}}\ \{}
\DoxyCodeLine{00034\ \textcolor{keyword}{class\ }IOBufAsZeroCopyInputStream;}
\DoxyCodeLine{00035\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{comment}{//\ https://github.com/apache/kudu/blob/master/src/kudu/util/block\_bloom\_filter.h}}
\DoxyCodeLine{00040\ \textcolor{comment}{//\ BlockBloomFilter\ is\ modified\ based\ on\ Impala's\ BlockBloomFilter.}}
\DoxyCodeLine{00041\ \textcolor{comment}{//\ For\ general\ Bloomfilter\ implementations,\ this\ implementation\ is}}
\DoxyCodeLine{00042\ \textcolor{comment}{//\ more\ friendly\ to\ CPU\ Cache,\ and\ it\ is\ easier\ to\ use\ SIMD\ instructions\ to}}
\DoxyCodeLine{00043\ \textcolor{comment}{//\ speed\ up\ the\ implementation.}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{comment}{//\ BlockBloomFilter\ will\ not\ store\ null\ values,\ and\ will\ always\ return\ a\ false\ if\ the\ input\ is\ null.}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{comment}{//\ Some\ constants\ used\ in\ hashing.\ \#defined\ for\ efficiency\ reasons.}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#define\ BLOOM\_HASH\_CONSTANTS\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\ \ \ \ 0x47b6137bU,\ 0x44974d91U,\ 0x8824ad5bU,\ 0xa2b7289dU,\ 0x705495c7U,\ 0x2df1424bU,\ 0x9efc4947U,\ \(\backslash\)}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ 0x5c6bfb31U}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_block_bloom_filter}{BlockBloomFilter}}\ \{}
\DoxyCodeLine{00053\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_ab47518e5dbd9bbb9f734e17d238df58b}{BlockBloomFilter}}();}
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a94f11827de7c83b03ae2fb6da2f1fdf2}{\string~BlockBloomFilter}}();}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_ad496ea62c6e69bfdaa63814389571246}{BlockBloomFilter}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter}{BlockBloomFilter}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter}{BlockBloomFilter}}\&\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a99e92d306fdf274642c504907a3e0a25}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter}{BlockBloomFilter}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a5d6511529ebadb41d27ebaaf73f16353}{init}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_aacb1f753a4447fdb1de792075e13deda}{log\_space\_bytes}},\ uint32\_t\ hash\_seed);}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ Initialize\ the\ BlockBloomFilter\ from\ a\ populated\ "{}directory"{}\ structure.}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{//\ Useful\ for\ initializing\ the\ BlockBloomFilter\ by\ de-\/serializing\ a\ custom\ protobuf\ message.}}
\DoxyCodeLine{00063\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_aa498fd0f93c1d8add0c89f393cde097a}{init\_from\_directory}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_aacb1f753a4447fdb1de792075e13deda}{log\_space\_bytes}},\ butil::IOBufAsZeroCopyInputStream*\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ data\_size,\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a42c01dbd2f91c73db362ad5c67b46f74}{always\_false}},\ uint32\_t\ hash\_seed);}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a5ae591df94fc66ccb85cbb6565368bca}{close}}();}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{comment}{//\ Adds\ an\ element\ to\ the\ BloomFilter.\ The\ function\ used\ to\ generate\ 'hash'\ need\ not}}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//\ have\ good\ uniformity,\ but\ it\ should\ have\ low\ collision\ probability.\ For\ instance,\ if}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{comment}{//\ the\ set\ of\ values\ is\ 32-\/bit\ ints,\ the\ identity\ function\ is\ a\ valid\ hash\ function\ for}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ this\ Bloom\ filter,\ since\ the\ collision\ probability\ (the\ probability\ that\ two}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{comment}{//\ non-\/equal\ values\ will\ have\ the\ same\ hash\ value)\ is\ 0.}}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_aafadbb7b3a0755519cd47aced9ef521e}{insert}}(uint32\_t\ hash)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ Same\ as\ above\ with\ convenience\ of\ hashing\ the\ key.}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_aa3fb42cee487a0a35d0692d85f111eae}{insert}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ key)\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (key.data)\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_aafadbb7b3a0755519cd47aced9ef521e}{insert}}(\mbox{\hyperlink{classdoris_1_1_hash_util_a647e4fde948e33c989d31843feeae7ea}{HashUtil::murmur\_hash3\_32}}(key.data,\ key.size,\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_ad7324cddfec0b7486c01e233c22c412c}{\_hash\_seed}}));}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00079\ \ \ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \textcolor{preprocessor}{\#ifdef\ \_\_AVX2\_\_}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{port_8h_a85be4e2784c7c6a0a4f86a79cd8ea6f8}{ATTRIBUTE\_ALWAYS\_INLINE}}\ \mbox{\hyperlink{namespacedoris_ac94a4f420e9be2395a84d23a78a82341}{\_\_attribute\_\_}}((\_\_target\_\_(\textcolor{stringliteral}{"{}avx2"{}})))\ \_\_m256i\ make\_mark(}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ const\ uint32\_t\ hash)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \_\_m256i\ ones\ =\ \_mm256\_set1\_epi32(1);}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \_\_m256i\ rehash\ =\ \_mm256\_setr\_epi32(\mbox{\hyperlink{block__bloom__filter_8hpp_a9a0f5647e0f1c7575aec6da11a6c4461}{BLOOM\_HASH\_CONSTANTS}});}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Load\ hash\ into\ a\ YMM\ register,\ repeated\ eight\ times}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \_\_m256i\ hash\_data\ =\ \_mm256\_set1\_epi32(hash);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Multiply-\/shift\ hashing\ ala\ Dietzfelbinger\ et\ al.:\ multiply\ 'hash'\ by\ eight\ different}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ odd\ constants,\ then\ keep\ the\ 5\ most\ significant\ bits\ from\ each\ product.}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ hash\_data\ =\ \_mm256\_mullo\_epi32(rehash,\ hash\_data);}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ hash\_data\ =\ \_mm256\_srli\_epi32(hash\_data,\ 27);}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ these\ 5\ bits\ to\ shift\ a\ single\ bit\ to\ a\ location\ in\ each\ 32-\/bit\ lane}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_mm256\_sllv\_epi32(ones,\ hash\_data);}
\DoxyCodeLine{00095\ \ \ \ \ \}}
\DoxyCodeLine{00096\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//\ Finds\ an\ element\ in\ the\ BloomFilter,\ returning\ true\ if\ it\ is\ found\ and\ false\ (with}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{comment}{//\ high\ probability)\ if\ it\ is\ not.}}
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a8791f531bb5557f5e65eb5feef5ba175}{find}}(uint32\_t\ hash)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a8dd1915172ff1e5ae445449ebe83759e}{\_always\_false}})\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ uint32\_t\ bucket\_idx\ =\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a1120ec5ca6db0a03ac329a781ba431d4}{rehash32to32}}(hash)\ \&\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a6d8884e1da7ea1dd8da0a511c4daf494}{\_directory\_mask}};}
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\#ifdef\ \_\_AVX2\_\_}}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \_\_m256i\ mask\ =\ make\_mark(hash);}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \_\_m256i\ bucket\ =\ \textcolor{keyword}{reinterpret\_cast<}\_\_m256i*\textcolor{keyword}{>}(\mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a6bebf35b712a77d9ce68954dca87b652}{\_directory}})[bucket\_idx];}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ should\ return\ true\ if\ 'bucket'\ has\ a\ one\ wherever\ 'mask'\ does.\ \_mm256\_testc\_si256}}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ takes\ the\ negation\ of\ its\ first\ argument\ and\ ands\ that\ with\ its\ second\ argument.\ In}}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ our\ case,\ the\ result\ is\ zero\ everywhere\ iff\ there\ is\ a\ one\ in\ 'bucket'\ wherever}}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 'mask'\ is\ one.\ testc\ returns\ 1\ if\ the\ result\ is\ 0\ everywhere\ and\ returns\ 0\ otherwise.}}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ result\ =\ \_mm256\_testc\_si256(bucket,\ mask);}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \_mm256\_zeroupper();}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00114\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a283a902dd33fd63cdb8c3bfd8c0b1b75}{bucket\_find}}(bucket\_idx,\ hash);}
\DoxyCodeLine{00116\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00117\ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{comment}{//\ Same\ as\ above\ with\ convenience\ of\ hashing\ the\ key.}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_adb789246e8b2c53af062ad01ab92353a}{find}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ key)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept}\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (key.data)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a8791f531bb5557f5e65eb5feef5ba175}{find}}(\mbox{\hyperlink{classdoris_1_1_hash_util_a647e4fde948e33c989d31843feeae7ea}{HashUtil::murmur\_hash3\_32}}(key.data,\ key.size,\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_ad7324cddfec0b7486c01e233c22c412c}{\_hash\_seed}}));}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00125\ \ \ \ \ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{comment}{//\ Computes\ the\ logical\ OR\ of\ this\ filter\ with\ 'other'\ and\ stores\ the\ result\ in\ this}}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{comment}{//\ filter.}}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{comment}{//\ Notes:}}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{comment}{//\ -\/\ The\ directory\ sizes\ of\ the\ Bloom\ filters\ must\ match.}}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ -\/\ Or'ing\ with\ kAlwaysTrueFilter\ is\ disallowed.}}
\DoxyCodeLine{00132\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a9c337d1ed433937a4cbe45c370b808c8}{merge}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter}{BlockBloomFilter}}\&\ other);}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{comment}{//\ Computes\ out[i]\ |=\ in[i]\ for\ the\ arrays\ 'in'\ and\ 'out'\ of\ length\ 'n'\ bytes\ where\ 'n'}}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{//\ is\ multiple\ of\ 32-\/bytes.}}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a798a18b7fd430fa60a4bc7a67c3cc4f5}{or\_equal\_array}}(\textcolor{keywordtype}{size\_t}\ n,\ \textcolor{keyword}{const}\ uint8\_t*\ \_\_restrict\_\_\ in,}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ \_\_restrict\_\_\ out);}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{comment}{//\ Returns\ whether\ the\ Bloom\ filter\ is\ empty\ and\ hence\ would\ return\ false\ for\ all\ lookups.}}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a42c01dbd2f91c73db362ad5c67b46f74}{always\_false}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a8dd1915172ff1e5ae445449ebe83759e}{\_always\_false}};\ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{comment}{//\ Returns\ amount\ of\ space\ used\ in\ log2\ bytes.}}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_aacb1f753a4447fdb1de792075e13deda}{log\_space\_bytes}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a6ae832512f883a81c6e69bb8f1ff512a}{\_log\_num\_buckets}}\ +\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a18d957a3c48c6752e84618cff32ca869}{kLogBucketByteSize}};\ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{comment}{//\ Returns\ the\ directory\ structure.\ Useful\ for\ serializing\ the\ BlockBloomFilter\ to}}
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{comment}{//\ a\ custom\ protobuf\ message.}}
\DoxyCodeLine{00147\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a743de9435db979c1794a9aebfae2454f}{directory}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }uint8\_t*\textcolor{keyword}{>}(\mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a6bebf35b712a77d9ce68954dca87b652}{\_directory}}),\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a1c7c9f86294db72a1e282e6925931975}{directory\_size}}());}
\DoxyCodeLine{00149\ \ \ \ \ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{comment}{//\ Representation\ of\ a\ filter\ which\ allows\ all\ elements\ to\ pass.}}
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter}{BlockBloomFilter}}*\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a119e1e78f1f9d3c0e180194eb39702f3}{kAlwaysTrueFilter}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{comment}{//\ \_always\_false\ is\ true\ when\ the\ bloom\ filter\ hasn't\ had\ any\ elements\ inserted.}}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a8dd1915172ff1e5ae445449ebe83759e}{\_always\_false}};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{comment}{//\ The\ BloomFilter\ is\ divided\ up\ into\ Buckets\ and\ each\ Bucket\ comprises\ of\ 8\ BucketWords\ of}}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{comment}{//\ 4\ bytes\ each.}}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint64\_t\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a54b585a2a534c3b785c16540ae1e270a}{kBucketWords}}\ =\ 8;}
\DoxyCodeLine{00161\ \ \ \ \ \textcolor{keyword}{typedef}\ uint32\_t\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a06671aedfcbbf18eb3d767e89729ebb3}{BucketWord}};}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{comment}{//\ log2(number\ of\ bits\ in\ a\ BucketWord)}}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_af8270ec359ad59561dd575108386e7cb}{kLogBucketWordBits}}\ =\ 5;}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a06671aedfcbbf18eb3d767e89729ebb3}{BucketWord}}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a0e1bae53abe6c45e447f81a2e063478c}{kBucketWordMask}}\ =\ (1\ <<\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_af8270ec359ad59561dd575108386e7cb}{kLogBucketWordBits}})\ -\/\ 1;}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{comment}{//\ log2(number\ of\ bytes\ in\ a\ bucket)}}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a18d957a3c48c6752e84618cff32ca869}{kLogBucketByteSize}}\ =\ 5;}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{comment}{//\ Bucket\ size\ in\ bytes.}}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a53a110dac8a617634ef88dca46371219}{kBucketByteSize}}\ =\ 1UL\ <<\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a18d957a3c48c6752e84618cff32ca869}{kLogBucketByteSize}};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keyword}{static\_assert}(}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ (1\ <<\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_af8270ec359ad59561dd575108386e7cb}{kLogBucketWordBits}})\ ==\ std::numeric\_limits<BucketWord>::digits,}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}BucketWord\ must\ have\ a\ bit-\/width\ that\ is\ be\ a\ power\ of\ 2,\ like\ 64\ for\ uint64\_t."{}});}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a06671aedfcbbf18eb3d767e89729ebb3}{BucketWord}}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_ab57f14ec4a67d3d85408d675b7335927}{Bucket}}[\mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a54b585a2a534c3b785c16540ae1e270a}{kBucketWords}}];}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{comment}{//\ log\_num\_buckets\_\ is\ the\ log\ (base\ 2)\ of\ the\ number\ of\ buckets\ in\ the\ directory.}}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a6ae832512f883a81c6e69bb8f1ff512a}{\_log\_num\_buckets}};}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ \_directory\_mask\ is\ (1\ <<\ log\_num\_buckets\_)\ -\/\ 1.\ It\ is\ precomputed\ for}}
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{comment}{//\ efficiency\ reasons.}}
\DoxyCodeLine{00183\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a6d8884e1da7ea1dd8da0a511c4daf494}{\_directory\_mask}};}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_ab57f14ec4a67d3d85408d675b7335927}{Bucket}}*\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a6bebf35b712a77d9ce68954dca87b652}{\_directory}};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{comment}{//\ Seed\ used\ with\ hash\ algorithm.}}
\DoxyCodeLine{00188\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_ad7324cddfec0b7486c01e233c22c412c}{\_hash\_seed}};}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{comment}{//\ Helper\ function\ for\ public\ Init()\ variants.}}
\DoxyCodeLine{00191\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_ae650e4a3f9c1f9f6865108ecfd7c0480}{init\_internal}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_aacb1f753a4447fdb1de792075e13deda}{log\_space\_bytes}},\ uint32\_t\ hash\_seed);}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{comment}{//\ Same\ as\ Insert(),\ but\ skips\ the\ CPU\ check\ and\ assumes\ that\ AVX2\ is\ not\ available.}}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a38b9b57c2a504d4cd699efa1ddafb4ec}{insert\_no\_avx2}}(uint32\_t\ hash)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{comment}{//\ Does\ the\ actual\ work\ of\ Insert().\ bucket\_idx\ is\ the\ index\ of\ the\ bucket\ to\ insert}}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{comment}{//\ into\ and\ 'hash'\ is\ the\ value\ passed\ to\ Insert().}}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_abac98ad4f320adfe63959c0a22ceb983}{bucket\_insert}}(uint32\_t\ bucket\_idx,\ uint32\_t\ hash)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a283a902dd33fd63cdb8c3bfd8c0b1b75}{bucket\_find}}(uint32\_t\ bucket\_idx,\ uint32\_t\ hash)\ \textcolor{keyword}{const}\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{comment}{//\ Computes\ out[i]\ |=\ in[i]\ for\ the\ arrays\ 'in'\ and\ 'out'\ of\ length\ 'n'\ without\ using\ AVX2}}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{comment}{//\ operations.}}
\DoxyCodeLine{00204\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a1921a85e3f0c3f045bec2bd3015bec4b}{or\_equal\_array\_no\_avx2}}(\textcolor{keywordtype}{size\_t}\ n,\ \textcolor{keyword}{const}\ uint8\_t*\ \_\_restrict\_\_\ in,}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ \_\_restrict\_\_\ out);}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{comment}{//\ Helper\ function\ for\ OrEqualArray\ functions\ that\ encapsulates\ AVX2\ v/s\ non-\/AVX2\ logic\ to}}
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{comment}{//\ invoke\ the\ right\ function.}}
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a7bb9f6b08592f221a52608c9517fc664}{or\_equal\_array\_internal}}(\textcolor{keywordtype}{size\_t}\ n,\ \textcolor{keyword}{const}\ uint8\_t*\ \_\_restrict\_\_\ in,}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ \_\_restrict\_\_\ out);}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \textcolor{preprocessor}{\#ifdef\ \_\_AVX2\_\_}}
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{comment}{//\ Same\ as\ Insert(),\ but\ skips\ the\ CPU\ check\ and\ assumes\ that\ AVX2\ is\ available.}}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keywordtype}{void}\ insert\_avx2(uint32\_t\ hash)\ \textcolor{keyword}{noexcept}\ \mbox{\hyperlink{namespacedoris_ac94a4f420e9be2395a84d23a78a82341}{\_\_attribute\_\_}}((\_\_target\_\_(\textcolor{stringliteral}{"{}avx2"{}})));}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \ \ \textcolor{comment}{//\ A\ faster\ SIMD\ version\ of\ BucketInsert().}}
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keywordtype}{void}\ bucket\_insert\_avx2(uint32\_t\ bucket\_idx,\ uint32\_t\ hash)\ \textcolor{keyword}{noexcept}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_ac94a4f420e9be2395a84d23a78a82341}{\_\_attribute\_\_}}((\_\_target\_\_(\textcolor{stringliteral}{"{}avx2"{}})));}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{comment}{//\ Computes\ out[i]\ |=\ in[i]\ for\ the\ arrays\ 'in'\ and\ 'out'\ of\ length\ 'n'\ using\ AVX2}}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{comment}{//\ instructions.\ 'n'\ must\ be\ a\ multiple\ of\ 32.}}
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ or\_equal\_array\_avx2(\textcolor{keywordtype}{size\_t}\ n,\ \textcolor{keyword}{const}\ uint8\_t*\ \_\_restrict\_\_\ in,}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ uint8\_t*\ \_\_restrict\_\_\ out)\ \mbox{\hyperlink{namespacedoris_ac94a4f420e9be2395a84d23a78a82341}{\_\_attribute\_\_}}((target(\textcolor{stringliteral}{"{}avx2"{}})));}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{comment}{//\ Size\ of\ the\ internal\ directory\ structure\ in\ bytes.}}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a1c7c9f86294db72a1e282e6925931975}{directory\_size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ 1ULL\ <<\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_aacb1f753a4447fdb1de792075e13deda}{log\_space\_bytes}}();\ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{comment}{//\ kRehash\ is\ used\ as\ 8\ odd\ 32-\/bit\ unsigned\ ints.\ \ See\ Dietzfelbinger\ et\ al.'s\ "{}A}}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{comment}{//\ reliable\ randomized\ algorithm\ for\ the\ closest-\/pair\ problem"{}.}}
\DoxyCodeLine{00230\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint32\_t\ kRehash[8]\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_af4270d0bb7cf1be5dece71fa701a0726}{\_\_attribute\_\_}}((aligned(32)))\ =\ \{\mbox{\hyperlink{block__bloom__filter_8hpp_a9a0f5647e0f1c7575aec6da11a6c4461}{BLOOM\_HASH\_CONSTANTS}}\};}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{comment}{//\ Get\ 32\ more\ bits\ of\ randomness\ from\ a\ 32-\/bit\ hash:}}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ uint32\_t\ \mbox{\hyperlink{classdoris_1_1_block_bloom_filter_a1120ec5ca6db0a03ac329a781ba431d4}{rehash32to32}}(\textcolor{keyword}{const}\ uint32\_t\ hash)\ \{}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Constants\ generated\ by\ uuidgen(1)\ with\ the\ -\/r\ flag}}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint64\_t\ m\ =\ 0x7850f11ec6d14889ULL;}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ uint64\_t\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}}\ =\ 0x6773610597ca4c63ULL;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ strongly\ universal\ hashing\ following\ Dietzfelbinger's\ "{}Universal\ hashing}}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ and\ k-\/wise\ independent\ random\ variables\ via\ integer\ arithmetic\ without\ primes"{}.\ As}}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ such,\ for\ any\ two\ distinct\ uint32\_t's\ hash1\ and\ hash2,\ the\ probability\ (over\ the}}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ randomness\ of\ the\ constants)\ that\ any\ subset\ of\ bit\ positions\ of}}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Rehash32to32(hash1)\ is\ equal\ to\ the\ same\ subset\ of\ bit\ positions}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Rehash32to32(hash2)\ is\ minimal.}}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keyword}{static\_cast<}uint64\_t\textcolor{keyword}{>}(hash)\ *\ m\ +\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}})\ >>\ 32U;}
\DoxyCodeLine{00244\ \ \ \ \ \}}
\DoxyCodeLine{00245\ \};}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
