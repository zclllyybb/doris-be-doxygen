\hypertarget{configbase_8cpp}{}\doxysection{/\+Users/dabowang/doris/be/src/common/configbase.cpp 文件参考}
\label{configbase_8cpp}\index{/Users/dabowang/doris/be/src/common/configbase.cpp@{/Users/dabowang/doris/be/src/common/configbase.cpp}}
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$cerrno$>$}\newline
{\ttfamily \#include $<$cstring$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$list$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include \char`\"{}common/config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}common/status.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gutil/strings/substitute.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}io/fs/file\+\_\+writer.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}io/fs/local\+\_\+file\+\_\+system.\+h\char`\"{}}\newline
configbase.\+cpp 的引用(Include)关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/d7b/configbase_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespacedoris}{doris}}
\begin{DoxyCompactList}\small\item\em Utilities for collecting timings. \end{DoxyCompactList}\item 
namespace \mbox{\hyperlink{namespacedoris_1_1config}{doris\+::config}}
\end{DoxyCompactItemize}
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{configbase_8cpp_a07277eb334f142e0f51180404c82eb68}{\+\_\+\+\_\+\+IN\+\_\+\+CONFIGBASE\+\_\+\+CPP\+\_\+\+\_\+}}
\item 
\#define \mbox{\hyperlink{configbase_8cpp_ab4450a4d02b43ff221ca1326b07eac9b}{SET\+\_\+\+FIELD}}(FIELD,  TYPE,  FILL\+\_\+\+CONF\+\_\+\+MAP,  SET\+\_\+\+TO\+\_\+\+DEFAULT)
\item 
\#define \mbox{\hyperlink{configbase_8cpp_a25e202a5f139199cfd836bef59f46191}{UPDATE\+\_\+\+FIELD}}(FIELD,  VALUE,  TYPE,  PERSIST)
\end{DoxyCompactItemize}
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
std\+::string \& \mbox{\hyperlink{namespacedoris_1_1config_a2f5675a2d3427386aa008515830a25f9}{trim}} (std\+::string \&s)
\item 
void \mbox{\hyperlink{namespacedoris_1_1config_a3142eb0f61eae707efe1566abaacc9de}{splitkv}} (const std\+::string \&s, std\+::string \&k, std\+::string \&v)
\item 
bool \mbox{\hyperlink{namespacedoris_1_1config_a3b7b862e8b5841ebbf18c88b25fd05cc}{replaceenv}} (std\+::string \&s)
\item 
bool \mbox{\hyperlink{namespacedoris_1_1config_a66f83e04d8a69e0cda449ebb3b3e7127}{strtox}} (const std\+::string \&valstr, bool \&\mbox{\hyperlink{legacy__hash_8h_a09c17276b90fb1fcf8997e6d1f2d1ac9}{retval}})
\item 
bool \mbox{\hyperlink{namespacedoris_1_1config_a46738430b784118954f5e87780be6013}{strtox}} (const std\+::string \&valstr, int16\+\_\+t \&\mbox{\hyperlink{legacy__hash_8h_a09c17276b90fb1fcf8997e6d1f2d1ac9}{retval}})
\item 
bool \mbox{\hyperlink{namespacedoris_1_1config_a1a6c2d44e43c58b1913994509daed047}{strtox}} (const std\+::string \&valstr, int32\+\_\+t \&\mbox{\hyperlink{legacy__hash_8h_a09c17276b90fb1fcf8997e6d1f2d1ac9}{retval}})
\item 
bool \mbox{\hyperlink{namespacedoris_1_1config_a50159000e83f30f1588f9313192ca824}{strtox}} (const std\+::string \&valstr, int64\+\_\+t \&\mbox{\hyperlink{legacy__hash_8h_a09c17276b90fb1fcf8997e6d1f2d1ac9}{retval}})
\item 
bool \mbox{\hyperlink{namespacedoris_1_1config_aae7e3279d6738fc66e5c34def0768e92}{strtox}} (const std\+::string \&valstr, double \&\mbox{\hyperlink{legacy__hash_8h_a09c17276b90fb1fcf8997e6d1f2d1ac9}{retval}})
\item 
bool \mbox{\hyperlink{namespacedoris_1_1config_a6e754d53ec649deb59cc0cb929ce04e3}{strtox}} (const std\+::string \&valstr, std\+::string \&\mbox{\hyperlink{legacy__hash_8h_a09c17276b90fb1fcf8997e6d1f2d1ac9}{retval}})
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $>$ }\\bool \mbox{\hyperlink{namespacedoris_1_1config_a03c088e58afe0ec74d0beca9cfbdaa63}{strtox}} (const std\+::string \&valstr, std\+::vector$<$ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $>$ \&\mbox{\hyperlink{legacy__hash_8h_a09c17276b90fb1fcf8997e6d1f2d1ac9}{retval}})
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $>$ }\\bool \mbox{\hyperlink{namespacedoris_1_1config_a34cf6c26e09525db3500825d59d51070}{strtointeger}} (const std\+::string \&valstr, \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} \&\mbox{\hyperlink{legacy__hash_8h_a09c17276b90fb1fcf8997e6d1f2d1ac9}{retval}})
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $>$ }\\bool \mbox{\hyperlink{namespacedoris_1_1config_ab7a942c65e3e806f7d822b201c1b5510}{convert}} (const std\+::string \&\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}, \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} \&\mbox{\hyperlink{legacy__hash_8h_a09c17276b90fb1fcf8997e6d1f2d1ac9}{retval}})
\item 
{\footnotesize template$<$typename \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $>$ }\\std\+::ostream \& \mbox{\hyperlink{namespacedoris_1_1config_a9e4ea0ca899f97b1680d4193d7372c71}{operator$<$$<$}} (std\+::ostream \&out, const std\+::vector$<$ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $>$ \&v)
\item 
bool \mbox{\hyperlink{namespacedoris_1_1config_a6db1d706b4f6e924872e9607f0a53d4a}{init}} (const char $\ast$conf\+\_\+file, bool fill\+\_\+conf\+\_\+map, bool must\+\_\+exist, bool set\+\_\+to\+\_\+default)
\item 
Status \mbox{\hyperlink{namespacedoris_1_1config_aa6c74f4f89d0aaf40ec233a1af59a0f8}{persist\+\_\+config}} (const std\+::string \&field, const std\+::string \&\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}})
\item 
Status \mbox{\hyperlink{namespacedoris_1_1config_a632230d7f5f3379e9fbb488c13bf3f8c}{set\+\_\+config}} (const std\+::string \&field, const std\+::string \&\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}, bool need\+\_\+persist, bool force)
\item 
Status \mbox{\hyperlink{namespacedoris_1_1config_a5969482b0cd18e8136f21e622e44472b}{set\+\_\+fuzzy\+\_\+config}} (const std\+::string \&field, const std\+::string \&\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}})
\item 
void \mbox{\hyperlink{namespacedoris_1_1config_aa26ddff409accf359ff6cbebb7774ea0}{set\+\_\+fuzzy\+\_\+configs}} ()
\item 
std\+::mutex $\ast$ \mbox{\hyperlink{namespacedoris_1_1config_af60331284ec6d527d941b03e60ecae38}{get\+\_\+mutable\+\_\+string\+\_\+config\+\_\+lock}} ()
\item 
std\+::vector$<$ std\+::vector$<$ std\+::string $>$ $>$ \mbox{\hyperlink{namespacedoris_1_1config_a1523a044166ffac527b56613a5a9a99a}{get\+\_\+config\+\_\+info}} ()
\end{DoxyCompactItemize}
\doxysubsection*{变量}
\begin{DoxyCompactItemize}
\item 
std\+::map$<$ std\+::string, std\+::string $>$ $\ast$ \mbox{\hyperlink{namespacedoris_1_1config_a2528e7d23d225430c8d87873159176de}{full\+\_\+conf\+\_\+map}} = nullptr
\item 
std\+::mutex \mbox{\hyperlink{namespacedoris_1_1config_a78a90dade9f4b93ec38921f7c144ecb0}{custom\+\_\+conf\+\_\+lock}}
\item 
std\+::mutex \mbox{\hyperlink{namespacedoris_1_1config_ac79f45781b77297876c01744d60ab932}{mutable\+\_\+string\+\_\+config\+\_\+lock}}
\end{DoxyCompactItemize}


\doxysubsection{宏定义说明}
\mbox{\Hypertarget{configbase_8cpp_a07277eb334f142e0f51180404c82eb68}\label{configbase_8cpp_a07277eb334f142e0f51180404c82eb68}} 
\index{configbase.cpp@{configbase.cpp}!\_\_IN\_CONFIGBASE\_CPP\_\_@{\_\_IN\_CONFIGBASE\_CPP\_\_}}
\index{\_\_IN\_CONFIGBASE\_CPP\_\_@{\_\_IN\_CONFIGBASE\_CPP\_\_}!configbase.cpp@{configbase.cpp}}
\doxysubsubsection{\texorpdfstring{\_\_IN\_CONFIGBASE\_CPP\_\_}{\_\_IN\_CONFIGBASE\_CPP\_\_}}
{\footnotesize\ttfamily \#define \+\_\+\+\_\+\+IN\+\_\+\+CONFIGBASE\+\_\+\+CPP\+\_\+\+\_\+}

\mbox{\Hypertarget{configbase_8cpp_ab4450a4d02b43ff221ca1326b07eac9b}\label{configbase_8cpp_ab4450a4d02b43ff221ca1326b07eac9b}} 
\index{configbase.cpp@{configbase.cpp}!SET\_FIELD@{SET\_FIELD}}
\index{SET\_FIELD@{SET\_FIELD}!configbase.cpp@{configbase.cpp}}
\doxysubsubsection{\texorpdfstring{SET\_FIELD}{SET\_FIELD}}
{\footnotesize\ttfamily \#define SET\+\_\+\+FIELD(\begin{DoxyParamCaption}\item[{}]{FIELD,  }\item[{}]{TYPE,  }\item[{}]{FILL\+\_\+\+CONF\+\_\+\+MAP,  }\item[{}]{SET\+\_\+\+TO\+\_\+\+DEFAULT }\end{DoxyParamCaption})}

\mbox{\Hypertarget{configbase_8cpp_a25e202a5f139199cfd836bef59f46191}\label{configbase_8cpp_a25e202a5f139199cfd836bef59f46191}} 
\index{configbase.cpp@{configbase.cpp}!UPDATE\_FIELD@{UPDATE\_FIELD}}
\index{UPDATE\_FIELD@{UPDATE\_FIELD}!configbase.cpp@{configbase.cpp}}
\doxysubsubsection{\texorpdfstring{UPDATE\_FIELD}{UPDATE\_FIELD}}
{\footnotesize\ttfamily \#define UPDATE\+\_\+\+FIELD(\begin{DoxyParamCaption}\item[{}]{FIELD,  }\item[{}]{VALUE,  }\item[{}]{TYPE,  }\item[{}]{PERSIST }\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (strcmp((FIELD).type,\ \#TYPE)\ ==\ 0)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ TYPE\ new\_value;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (!convert((VALUE),\ new\_value))\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Status::InvalidArgument(\textcolor{stringliteral}{"{}convert\ '\{\}'\ as\ \{\}\ failed"{}},\ VALUE,\ \#TYPE);\ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ TYPE\&\ ref\_conf\_value\ =\ *\textcolor{keyword}{reinterpret\_cast<}TYPE*\textcolor{keyword}{>}((FIELD).storage);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ TYPE\ old\_value\ =\ ref\_conf\_value;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (RegisterConfValidator::\_s\_field\_validator\ !=\ \textcolor{keyword}{nullptr})\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ validator\ =\ RegisterConfValidator::\_s\_field\_validator-\/>find((FIELD).\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}});\ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ if\ (validator\ !=\ RegisterConfValidator::\_s\_field\_validator-\/>end()\ \&\&\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ !(validator-\/>second)())\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ref\_conf\_value\ =\ old\_value;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Status::InvalidArgument(\textcolor{stringliteral}{"{}validate\ \{\}=\{\}\ failed"{}},\ (FIELD).\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}},\ new\_value);\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ref\_conf\_value\ =\ new\_value;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (full\_conf\_map\ !=\ \textcolor{keyword}{nullptr})\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ std::ostringstream\ oss;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ oss\ <<\ new\_value;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ (*full\_conf\_map)[(FIELD).\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}}]\ =\ oss.str();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (PERSIST)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ RETURN\_IF\_ERROR(\mbox{\hyperlink{namespacedoris_1_1config_aa6c74f4f89d0aaf40ec233a1af59a0f8}{persist\_config}}(std::string((FIELD).\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}}),\ VALUE));\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Status::OK();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}}

\end{DoxyCode}
