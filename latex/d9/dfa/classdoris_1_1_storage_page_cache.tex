\hypertarget{classdoris_1_1_storage_page_cache}{}\doxysection{Storage\+Page\+Cache类 参考}
\label{classdoris_1_1_storage_page_cache}\index{StoragePageCache@{StoragePageCache}}


{\ttfamily \#include $<$page\+\_\+cache.\+h$>$}



Storage\+Page\+Cache 的协作图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=255pt]{dd/d84/classdoris_1_1_storage_page_cache__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{类}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structdoris_1_1_storage_page_cache_1_1_cache_key}{Cache\+Key}}
\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdoris_1_1_storage_page_cache_a68f027492b3d0ec0fa32882022448ee1}{Storage\+Page\+Cache}} (size\+\_\+t capacity, int32\+\_\+t index\+\_\+cache\+\_\+percentage, uint32\+\_\+t num\+\_\+shards)
\item 
bool \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a7ccbdb22719e8c3c98d9447771c10068}{lookup}} (const \mbox{\hyperlink{structdoris_1_1_storage_page_cache_1_1_cache_key}{Cache\+Key}} \&key, \mbox{\hyperlink{classdoris_1_1_page_cache_handle}{Page\+Cache\+Handle}} $\ast$handle, segment\+\_\+v2\+::\+Page\+Type\+PB page\+\_\+type)
\item 
void \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a0c53e884428857cb2736f25e8406fb5d}{insert}} (const \mbox{\hyperlink{structdoris_1_1_storage_page_cache_1_1_cache_key}{Cache\+Key}} \&key, const \mbox{\hyperlink{structdoris_1_1_slice}{Slice}} \&\mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}}, \mbox{\hyperlink{classdoris_1_1_page_cache_handle}{Page\+Cache\+Handle}} $\ast$handle, segment\+\_\+v2\+::\+Page\+Type\+PB page\+\_\+type, bool in\+\_\+memory=false)
\item 
bool \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a827350155df2332414c6bde8d887cd6a}{is\+\_\+cache\+\_\+available}} (segment\+\_\+v2\+::\+Page\+Type\+PB page\+\_\+type)
\item 
void \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a4c3bbee4ca4e67b7cd8d8ac1c77410b4}{prune}} (segment\+\_\+v2\+::\+Page\+Type\+PB page\+\_\+type)
\item 
int64\+\_\+t \mbox{\hyperlink{classdoris_1_1_storage_page_cache_ac7c75cdf8befca00196ea5b8bd937526}{get\+\_\+page\+\_\+cache\+\_\+mem\+\_\+consumption}} (segment\+\_\+v2\+::\+Page\+Type\+PB page\+\_\+type)
\end{DoxyCompactItemize}
\doxysubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{classdoris_1_1_storage_page_cache_ac4d21317161fb0bc22ab8e206e07102e}{create\+\_\+global\+\_\+cache}} (size\+\_\+t capacity, int32\+\_\+t index\+\_\+cache\+\_\+percentage, uint32\+\_\+t num\+\_\+shards=\mbox{\hyperlink{classdoris_1_1_storage_page_cache_a195b1f6a2c95ead87586187857dc798c}{k\+Default\+Num\+Shards}})
\item 
static \mbox{\hyperlink{classdoris_1_1_storage_page_cache}{Storage\+Page\+Cache}} $\ast$ \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a5b11862af09a805ee9f63bc902c2a795}{instance}} ()
\end{DoxyCompactItemize}
\doxysubsection*{静态 Public 属性}
\begin{DoxyCompactItemize}
\item 
static constexpr uint32\+\_\+t \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a195b1f6a2c95ead87586187857dc798c}{k\+Default\+Num\+Shards}} = 16
\end{DoxyCompactItemize}
\doxysubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdoris_1_1_storage_page_cache_ac799f7cec7cf12eb83cea0dedd2d0969}{Storage\+Page\+Cache}} ()
\item 
\mbox{\hyperlink{classdoris_1_1_cache}{Cache}} $\ast$ \mbox{\hyperlink{classdoris_1_1_storage_page_cache_ae52825b5ca039948b3d3af762642b000}{\+\_\+get\+\_\+page\+\_\+cache}} (segment\+\_\+v2\+::\+Page\+Type\+PB page\+\_\+type)
\end{DoxyCompactItemize}
\doxysubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
int32\+\_\+t \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a5f140605e669331a29232c6ae68abf08}{\+\_\+index\+\_\+cache\+\_\+percentage}} = 0
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classdoris_1_1_cache}{Cache}} $>$ \mbox{\hyperlink{classdoris_1_1_storage_page_cache_aa82b7f647889333eb6e4a0bf8d056572}{\+\_\+data\+\_\+page\+\_\+cache}} = nullptr
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classdoris_1_1_cache}{Cache}} $>$ \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a2dbb589b863860ade43385ba556e338c}{\+\_\+index\+\_\+page\+\_\+cache}} = nullptr
\end{DoxyCompactItemize}
\doxysubsection*{静态 Private 属性}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{classdoris_1_1_storage_page_cache}{Storage\+Page\+Cache}} $\ast$ \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a19432c1c3df585dc4165c3b8c3295c97}{\+\_\+s\+\_\+instance}} = nullptr
\end{DoxyCompactItemize}


\doxysubsection{构造及析构函数说明}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a68f027492b3d0ec0fa32882022448ee1}\label{classdoris_1_1_storage_page_cache_a68f027492b3d0ec0fa32882022448ee1}} 
\index{StoragePageCache@{StoragePageCache}!StoragePageCache@{StoragePageCache}}
\index{StoragePageCache@{StoragePageCache}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{StoragePageCache()}{StoragePageCache()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_storage_page_cache}{Storage\+Page\+Cache}} (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{capacity,  }\item[{int32\+\_\+t}]{index\+\_\+cache\+\_\+percentage,  }\item[{uint32\+\_\+t}]{num\+\_\+shards }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=326pt]{d9/dfa/classdoris_1_1_storage_page_cache_a68f027492b3d0ec0fa32882022448ee1_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_ac799f7cec7cf12eb83cea0dedd2d0969}\label{classdoris_1_1_storage_page_cache_ac799f7cec7cf12eb83cea0dedd2d0969}} 
\index{StoragePageCache@{StoragePageCache}!StoragePageCache@{StoragePageCache}}
\index{StoragePageCache@{StoragePageCache}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{StoragePageCache()}{StoragePageCache()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_storage_page_cache}{Storage\+Page\+Cache}} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



\doxysubsection{成员函数说明}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_ac4d21317161fb0bc22ab8e206e07102e}\label{classdoris_1_1_storage_page_cache_ac4d21317161fb0bc22ab8e206e07102e}} 
\index{StoragePageCache@{StoragePageCache}!create\_global\_cache@{create\_global\_cache}}
\index{create\_global\_cache@{create\_global\_cache}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{create\_global\_cache()}{create\_global\_cache()}}
{\footnotesize\ttfamily void create\+\_\+global\+\_\+cache (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{capacity,  }\item[{int32\+\_\+t}]{index\+\_\+cache\+\_\+percentage,  }\item[{uint32\+\_\+t}]{num\+\_\+shards = {\ttfamily \mbox{\hyperlink{classdoris_1_1_storage_page_cache_a195b1f6a2c95ead87586187857dc798c}{k\+Default\+Num\+Shards}}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=275pt]{d9/dfa/classdoris_1_1_storage_page_cache_ac4d21317161fb0bc22ab8e206e07102e_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/dfa/classdoris_1_1_storage_page_cache_ac4d21317161fb0bc22ab8e206e07102e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a5b11862af09a805ee9f63bc902c2a795}\label{classdoris_1_1_storage_page_cache_a5b11862af09a805ee9f63bc902c2a795}} 
\index{StoragePageCache@{StoragePageCache}!instance@{instance}}
\index{instance@{instance}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{instance()}{instance()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{classdoris_1_1_storage_page_cache}{Storage\+Page\+Cache}} $\ast$ instance (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/dfa/classdoris_1_1_storage_page_cache_a5b11862af09a805ee9f63bc902c2a795_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a7ccbdb22719e8c3c98d9447771c10068}\label{classdoris_1_1_storage_page_cache_a7ccbdb22719e8c3c98d9447771c10068}} 
\index{StoragePageCache@{StoragePageCache}!lookup@{lookup}}
\index{lookup@{lookup}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{lookup()}{lookup()}}
{\footnotesize\ttfamily bool lookup (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structdoris_1_1_storage_page_cache_1_1_cache_key}{Cache\+Key}} \&}]{key,  }\item[{\mbox{\hyperlink{classdoris_1_1_page_cache_handle}{Page\+Cache\+Handle}} $\ast$}]{handle,  }\item[{segment\+\_\+v2\+::\+Page\+Type\+PB}]{page\+\_\+type }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=289pt]{d9/dfa/classdoris_1_1_storage_page_cache_a7ccbdb22719e8c3c98d9447771c10068_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a0c53e884428857cb2736f25e8406fb5d}\label{classdoris_1_1_storage_page_cache_a0c53e884428857cb2736f25e8406fb5d}} 
\index{StoragePageCache@{StoragePageCache}!insert@{insert}}
\index{insert@{insert}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{insert()}{insert()}}
{\footnotesize\ttfamily void insert (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structdoris_1_1_storage_page_cache_1_1_cache_key}{Cache\+Key}} \&}]{key,  }\item[{const \mbox{\hyperlink{structdoris_1_1_slice}{Slice}} \&}]{data,  }\item[{\mbox{\hyperlink{classdoris_1_1_page_cache_handle}{Page\+Cache\+Handle}} $\ast$}]{handle,  }\item[{segment\+\_\+v2\+::\+Page\+Type\+PB}]{page\+\_\+type,  }\item[{bool}]{in\+\_\+memory = {\ttfamily false} }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=285pt]{d9/dfa/classdoris_1_1_storage_page_cache_a0c53e884428857cb2736f25e8406fb5d_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a827350155df2332414c6bde8d887cd6a}\label{classdoris_1_1_storage_page_cache_a827350155df2332414c6bde8d887cd6a}} 
\index{StoragePageCache@{StoragePageCache}!is\_cache\_available@{is\_cache\_available}}
\index{is\_cache\_available@{is\_cache\_available}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{is\_cache\_available()}{is\_cache\_available()}}
{\footnotesize\ttfamily bool is\+\_\+cache\+\_\+available (\begin{DoxyParamCaption}\item[{segment\+\_\+v2\+::\+Page\+Type\+PB}]{page\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=308pt]{d9/dfa/classdoris_1_1_storage_page_cache_a827350155df2332414c6bde8d887cd6a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a4c3bbee4ca4e67b7cd8d8ac1c77410b4}\label{classdoris_1_1_storage_page_cache_a4c3bbee4ca4e67b7cd8d8ac1c77410b4}} 
\index{StoragePageCache@{StoragePageCache}!prune@{prune}}
\index{prune@{prune}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{prune()}{prune()}}
{\footnotesize\ttfamily void prune (\begin{DoxyParamCaption}\item[{segment\+\_\+v2\+::\+Page\+Type\+PB}]{page\+\_\+type }\end{DoxyParamCaption})}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=250pt]{d9/dfa/classdoris_1_1_storage_page_cache_a4c3bbee4ca4e67b7cd8d8ac1c77410b4_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/dfa/classdoris_1_1_storage_page_cache_a4c3bbee4ca4e67b7cd8d8ac1c77410b4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_ac7c75cdf8befca00196ea5b8bd937526}\label{classdoris_1_1_storage_page_cache_ac7c75cdf8befca00196ea5b8bd937526}} 
\index{StoragePageCache@{StoragePageCache}!get\_page\_cache\_mem\_consumption@{get\_page\_cache\_mem\_consumption}}
\index{get\_page\_cache\_mem\_consumption@{get\_page\_cache\_mem\_consumption}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{get\_page\_cache\_mem\_consumption()}{get\_page\_cache\_mem\_consumption()}}
{\footnotesize\ttfamily int64\+\_\+t get\+\_\+page\+\_\+cache\+\_\+mem\+\_\+consumption (\begin{DoxyParamCaption}\item[{segment\+\_\+v2\+::\+Page\+Type\+PB}]{page\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/dfa/classdoris_1_1_storage_page_cache_ac7c75cdf8befca00196ea5b8bd937526_cgraph}
\end{center}
\end{figure}
这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/dfa/classdoris_1_1_storage_page_cache_ac7c75cdf8befca00196ea5b8bd937526_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_ae52825b5ca039948b3d3af762642b000}\label{classdoris_1_1_storage_page_cache_ae52825b5ca039948b3d3af762642b000}} 
\index{StoragePageCache@{StoragePageCache}!\_get\_page\_cache@{\_get\_page\_cache}}
\index{\_get\_page\_cache@{\_get\_page\_cache}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{\_get\_page\_cache()}{\_get\_page\_cache()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_cache}{Cache}} $\ast$ \+\_\+get\+\_\+page\+\_\+cache (\begin{DoxyParamCaption}\item[{segment\+\_\+v2\+::\+Page\+Type\+PB}]{page\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d9/dfa/classdoris_1_1_storage_page_cache_ae52825b5ca039948b3d3af762642b000_icgraph}
\end{center}
\end{figure}


\doxysubsection{类成员变量说明}
\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a195b1f6a2c95ead87586187857dc798c}\label{classdoris_1_1_storage_page_cache_a195b1f6a2c95ead87586187857dc798c}} 
\index{StoragePageCache@{StoragePageCache}!kDefaultNumShards@{kDefaultNumShards}}
\index{kDefaultNumShards@{kDefaultNumShards}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{kDefaultNumShards}{kDefaultNumShards}}
{\footnotesize\ttfamily constexpr uint32\+\_\+t k\+Default\+Num\+Shards = 16\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}

\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a19432c1c3df585dc4165c3b8c3295c97}\label{classdoris_1_1_storage_page_cache_a19432c1c3df585dc4165c3b8c3295c97}} 
\index{StoragePageCache@{StoragePageCache}!\_s\_instance@{\_s\_instance}}
\index{\_s\_instance@{\_s\_instance}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{\_s\_instance}{\_s\_instance}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_storage_page_cache}{Storage\+Page\+Cache}} $\ast$ \+\_\+s\+\_\+instance = nullptr\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a5f140605e669331a29232c6ae68abf08}\label{classdoris_1_1_storage_page_cache_a5f140605e669331a29232c6ae68abf08}} 
\index{StoragePageCache@{StoragePageCache}!\_index\_cache\_percentage@{\_index\_cache\_percentage}}
\index{\_index\_cache\_percentage@{\_index\_cache\_percentage}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{\_index\_cache\_percentage}{\_index\_cache\_percentage}}
{\footnotesize\ttfamily int32\+\_\+t \+\_\+index\+\_\+cache\+\_\+percentage = 0\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_aa82b7f647889333eb6e4a0bf8d056572}\label{classdoris_1_1_storage_page_cache_aa82b7f647889333eb6e4a0bf8d056572}} 
\index{StoragePageCache@{StoragePageCache}!\_data\_page\_cache@{\_data\_page\_cache}}
\index{\_data\_page\_cache@{\_data\_page\_cache}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{\_data\_page\_cache}{\_data\_page\_cache}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classdoris_1_1_cache}{Cache}}$>$ \+\_\+data\+\_\+page\+\_\+cache = nullptr\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1_storage_page_cache_a2dbb589b863860ade43385ba556e338c}\label{classdoris_1_1_storage_page_cache_a2dbb589b863860ade43385ba556e338c}} 
\index{StoragePageCache@{StoragePageCache}!\_index\_page\_cache@{\_index\_page\_cache}}
\index{\_index\_page\_cache@{\_index\_page\_cache}!StoragePageCache@{StoragePageCache}}
\doxysubsubsection{\texorpdfstring{\_index\_page\_cache}{\_index\_page\_cache}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classdoris_1_1_cache}{Cache}}$>$ \+\_\+index\+\_\+page\+\_\+cache = nullptr\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
/\+Users/dabowang/be\+\_\+all/olap/\mbox{\hyperlink{page__cache_8h}{page\+\_\+cache.\+h}}\item 
/\+Users/dabowang/be\+\_\+all/olap/\mbox{\hyperlink{page__cache_8cpp}{page\+\_\+cache.\+cpp}}\end{DoxyCompactItemize}
