\hypertarget{string__parser_8hpp_source}{}\doxysection{string\+\_\+parser.\+hpp}
\label{string__parser_8hpp_source}\index{/Users/dabowang/be\_all/util/string\_parser.hpp@{/Users/dabowang/be\_all/util/string\_parser.hpp}}
\mbox{\hyperlink{string__parser_8hpp}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ This\ file\ is\ copied\ from}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ https://github.com/apache/impala/blob/branch-\/2.9.0/be/src/util/string-\/parser.hpp}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ and\ modified\ by\ Doris}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <fast\_float/fast\_float.h>}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <cstring>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{compiler__util_8h}{common/compiler\_util.h}}"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{status_8h}{common/status.h}}"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{primitive__type_8h}{runtime/primitive\_type.h}}"{}}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{comment}{//\ Utility\ functions\ for\ doing\ atoi/atof\ on\ non-\/null\ terminated\ strings.\ \ On\ micro\ benchmarks,}}
\DoxyCodeLine{00039\ \textcolor{comment}{//\ this\ is\ significantly\ faster\ than\ libc\ (atoi/strtol\ and\ atof/strtod).}}
\DoxyCodeLine{00040\ \textcolor{comment}{//}}
\DoxyCodeLine{00041\ \textcolor{comment}{//\ Strings\ with\ leading\ and\ trailing\ whitespaces\ are\ accepted.}}
\DoxyCodeLine{00042\ \textcolor{comment}{//\ Branching\ is\ heavily\ optimized\ for\ the\ non-\/whitespace\ successful\ case.}}
\DoxyCodeLine{00043\ \textcolor{comment}{//\ All\ the\ StringTo*\ functions\ first\ parse\ the\ input\ string\ assuming\ it\ has\ no\ leading\ whitespace.}}
\DoxyCodeLine{00044\ \textcolor{comment}{//\ If\ that\ first\ attempt\ was\ unsuccessful,\ these\ functions\ retry\ the\ parsing\ after\ removing}}
\DoxyCodeLine{00045\ \textcolor{comment}{//\ whitespace.\ Therefore,\ strings\ with\ whitespace\ take\ a\ perf\ hit\ on\ branch\ mis-\/prediction.}}
\DoxyCodeLine{00046\ \textcolor{comment}{//}}
\DoxyCodeLine{00047\ \textcolor{comment}{//\ For\ overflows,\ we\ are\ following\ the\ mysql\ behavior,\ to\ cap\ values\ at\ the\ max/min\ value\ for\ that}}
\DoxyCodeLine{00048\ \textcolor{comment}{//\ data\ type.\ \ This\ is\ different\ from\ hive,\ which\ returns\ NULL\ for\ overflow\ slots\ for\ int\ types}}
\DoxyCodeLine{00049\ \textcolor{comment}{//\ and\ inf/-\/inf\ for\ float\ types.}}
\DoxyCodeLine{00050\ \textcolor{comment}{//}}
\DoxyCodeLine{00051\ \textcolor{comment}{//\ Things\ we\ tried\ that\ did\ not\ work:}}
\DoxyCodeLine{00052\ \textcolor{comment}{//\ \ -\/\ lookup\ table\ for\ converting\ character\ to\ digit}}
\DoxyCodeLine{00053\ \textcolor{comment}{//\ Improvements\ (TODO):}}
\DoxyCodeLine{00054\ \textcolor{comment}{//\ \ -\/\ Validate\ input\ using\ \_sidd\_compare\_ranges}}
\DoxyCodeLine{00055\ \textcolor{comment}{//\ \ -\/\ Since\ we\ know\ the\ length,\ we\ can\ parallelize\ this:\ i.e.\ result\ =\ 100*s[0]\ +\ 10*s[1]\ +\ s[2]}}
\DoxyCodeLine{00056\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_string_parser}{StringParser}}\ \{}
\DoxyCodeLine{00057\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}\ \{\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}}\ =\ 0,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}},\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da5c84bb540febe57525dff853b167f72d}{PARSE\_OVERFLOW}},\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da68b3442dbd88dd85816cd366a882dda4}{PARSE\_UNDERFLOW}}\ \};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits}{StringParseTraits}}\ \{}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{max\_ascii\_len}}();}
\DoxyCodeLine{00066\ \ \ \ \ \};}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a05c966689f3c3cb24b813864e6a23e30}{numeric\_limits}}(\textcolor{keywordtype}{bool}\ negative);}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac88b69b6e23684770b281729e649a2fa}{get\_scale\_multiplier}}(\textcolor{keywordtype}{int}\ scale);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ This\ is\ considerably\ faster\ than\ glibc's\ implementation\ (25x).}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{comment}{//\ In\ the\ case\ of\ overflow,\ the\ max/min\ value\ for\ the\ data\ type\ will\ be\ returned.}}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{comment}{//\ Assumes\ s\ represents\ a\ decimal\ number.}}
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ad938f3fba04025d983fa9f5c1d5d12fd}{string\_to\_int}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ ans\ =\ string\_to\_int\_internal<T>(s,\ len,\ result);}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(*result\ ==\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}}))\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ans;}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_aaa645f72cfd57b55de070d1d966c2124}{skip\_leading\_whitespace}}(s,\ len);}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ string\_to\_int\_internal<T>(s\ +\ i,\ len\ -\/\ i,\ result);}
\DoxyCodeLine{00086\ \ \ \ \ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ This\ is\ considerably\ faster\ than\ glibc's\ implementation.}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ In\ the\ case\ of\ overflow,\ the\ max/min\ value\ for\ the\ data\ type\ will\ be\ returned.}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{comment}{//\ Assumes\ s\ represents\ a\ decimal\ number.}}
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a2761d7192b24f92ae8b4a6be4709b2d4}{string\_to\_unsigned\_int}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ ans\ =\ string\_to\_unsigned\_int\_internal<T>(s,\ len,\ result);}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(*result\ ==\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}}))\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ans;}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_aaa645f72cfd57b55de070d1d966c2124}{skip\_leading\_whitespace}}(s,\ len);}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ string\_to\_unsigned\_int\_internal<T>(s\ +\ i,\ len\ -\/\ i,\ result);}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{comment}{//\ Convert\ a\ string\ s\ representing\ a\ number\ in\ given\ base\ into\ a\ decimal\ number.}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a5a4d8edcfb0ff800863cb7cc99ad01c1}{string\_to\_int}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacebase}{base}},\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ ans\ =\ string\_to\_int\_internal<T>(s,\ len,\ \mbox{\hyperlink{namespacebase}{base}},\ result);}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(*result\ ==\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}}))\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ans;}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_aaa645f72cfd57b55de070d1d966c2124}{skip\_leading\_whitespace}}(s,\ len);}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ string\_to\_int\_internal<T>(s\ +\ i,\ len\ -\/\ i,\ \mbox{\hyperlink{namespacebase}{base}},\ result);}
\DoxyCodeLine{00112\ \ \ \ \ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a30c13aca60e7f03078152d9cbb73ab1e}{string\_to\_float}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ string\_to\_float\_internal<T>(s,\ len,\ result);}
\DoxyCodeLine{00117\ \ \ \ \ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{comment}{//\ Parses\ a\ string\ for\ 'true'\ or\ 'false',\ case\ insensitive.}}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a1b2ed61e80085b73ee2b20c92c7aea7c}{string\_to\_bool}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ ans\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_a93569b3ed686520ed837aa05300f8b43}{string\_to\_bool\_internal}}(s,\ len,\ result);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(*result\ ==\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}}))\ \{}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ans;}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_aaa645f72cfd57b55de070d1d966c2124}{skip\_leading\_whitespace}}(s,\ len);}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a93569b3ed686520ed837aa05300f8b43}{string\_to\_bool\_internal}}(s\ +\ i,\ len\ -\/\ i,\ result);}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ab9e88a40e0cafb694d78a20ed99b86dc}{string\_to\_decimal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \textcolor{keywordtype}{int}\ type\_precision,\ \textcolor{keywordtype}{int}\ type\_scale,}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result);}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ab47cc6aae1873477f5c6832902e0cb76}{split\_string\_to\_map}}(\textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{namespacebase}{base}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ element\_separator,}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ key\_value\_separator,}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::map<std::string,\ std::string>*\ result)\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ key\_pos\ =\ 0;}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ key\_end;}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ val\_pos;}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ val\_end;}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ ((key\_end\ =\ \mbox{\hyperlink{namespacebase}{base}}.find(key\_value\_separator,\ key\_pos))\ !=\ std::string::npos)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((val\_pos\ =\ \mbox{\hyperlink{namespacebase}{base}}.find\_first\_not\_of(key\_value\_separator,\ key\_end))\ ==}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string::npos)\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((val\_end\ =\ \mbox{\hyperlink{namespacebase}{base}}.find(element\_separator,\ val\_pos))\ ==\ std::string::npos)\ \{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ val\_end\ =\ \mbox{\hyperlink{namespacebase}{base}}.size();}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ result-\/>insert(std::make\_pair(\mbox{\hyperlink{namespacebase}{base}}.substr(key\_pos,\ key\_end\ -\/\ key\_pos),}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacebase}{base}}.substr(val\_pos,\ val\_end\ -\/\ val\_pos)));}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ key\_pos\ =\ val\_end;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (key\_pos\ !=\ std::string::npos)\ \{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++key\_pos;}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_status_a6ec1a217f203269ab53d2290d602db24}{Status::OK}}();}
\DoxyCodeLine{00160\ \ \ \ \ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{comment}{//\ This\ is\ considerably\ faster\ than\ glibc's\ implementation.}}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{comment}{//\ In\ the\ case\ of\ overflow,\ the\ max/min\ value\ for\ the\ data\ type\ will\ be\ returned.}}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{comment}{//\ Assumes\ s\ represents\ a\ decimal\ number.}}
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{comment}{//\ Return\ PARSE\_FAILURE\ on\ leading\ whitespace.\ Trailing\ whitespace\ is\ allowed.}}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac370a4490d58ed7401bbd06616b6a7bd}{string\_to\_int\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result);}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{//\ This\ is\ considerably\ faster\ than\ glibc's\ implementation.}}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{comment}{//\ In\ the\ case\ of\ overflow,\ the\ max/min\ value\ for\ the\ data\ type\ will\ be\ returned.}}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{comment}{//\ Assumes\ s\ represents\ a\ decimal\ number.}}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{comment}{//\ Return\ PARSE\_FAILURE\ on\ leading\ whitespace.\ Trailing\ whitespace\ is\ allowed.}}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_adbdefd71854ca20feab49855135cc46e}{string\_to\_unsigned\_int\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result);}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{comment}{//\ Convert\ a\ string\ s\ representing\ a\ number\ in\ given\ base\ into\ a\ decimal\ number.}}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{comment}{//\ Return\ PARSE\_FAILURE\ on\ leading\ whitespace.\ Trailing\ whitespace\ is\ allowed.}}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac370a4490d58ed7401bbd06616b6a7bd}{string\_to\_int\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacebase}{base}},\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result);}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \textcolor{comment}{//\ Converts\ an\ ascii\ string\ to\ an\ integer\ of\ type\ T\ assuming\ it\ cannot\ overflow}}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{comment}{//\ and\ the\ number\ is\ positive.}}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{comment}{//\ Leading\ whitespace\ is\ not\ allowed.\ Trailing\ whitespace\ will\ be\ skipped.}}
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_aae36119fcd8159e5f3e95847463e439f}{string\_to\_int\_no\_overflow}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result);}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{comment}{//\ This\ is\ considerably\ faster\ than\ glibc's\ implementation\ (>100x\ why???)}}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{comment}{//\ No\ special\ case\ handling\ needs\ to\ be\ done\ for\ overflows,\ the\ floating\ point\ spec}}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{comment}{//\ already\ does\ it\ and\ will\ cap\ the\ values\ to\ -\/inf/inf}}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{comment}{//\ To\ avoid\ inaccurate\ conversions\ this\ function\ falls\ back\ to\ strtod\ for}}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{comment}{//\ scientific\ notation.}}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{comment}{//\ Return\ PARSE\_FAILURE\ on\ leading\ whitespace.\ Trailing\ whitespace\ is\ allowed.}}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{comment}{//\ TODO:\ Investigate\ using\ intrinsics\ to\ speed\ up\ the\ slow\ strtod\ path.}}
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a3d54c310fa5a76be6f38ac75a8164689}{string\_to\_float\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result);}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{comment}{//\ parses\ a\ string\ for\ 'true'\ or\ 'false',\ case\ insensitive}}
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{comment}{//\ Return\ PARSE\_FAILURE\ on\ leading\ whitespace.\ Trailing\ whitespace\ is\ allowed.}}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a93569b3ed686520ed837aa05300f8b43}{string\_to\_bool\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result);}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{comment}{//\ Returns\ true\ if\ s\ only\ contains\ whitespace.}}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a763bc9f0bbdf23fc59c66ad241046160}{is\_all\_whitespace}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len)\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ len;\ ++i)\ \{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(\mbox{\hyperlink{classdoris_1_1_string_parser_a6d453cae9636acd4bdf7642569e3286b}{is\_whitespace}}(s[i])))\ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00210\ \ \ \ \ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{comment}{//\ Returns\ the\ position\ of\ the\ first\ non-\/whitespace\ character\ in\ s.}}
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_aaa645f72cfd57b55de070d1d966c2124}{skip\_leading\_whitespace}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len)\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ 0;}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ len\ \&\&\ \mbox{\hyperlink{classdoris_1_1_string_parser_a6d453cae9636acd4bdf7642569e3286b}{is\_whitespace}}(s[i]))\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ ++i;}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ i;}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{comment}{//\ Our\ own\ definition\ of\ "{}isspace"{}\ that\ optimize\ on\ the\ '\ '\ branch.}}
\DoxyCodeLine{00222\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a6d453cae9636acd4bdf7642569e3286b}{is\_whitespace}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\&\ c)\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(c\ ==\ \textcolor{charliteral}{'\ '})\ ||}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(c\ ==\ \textcolor{charliteral}{'\(\backslash\)t'}\ ||\ c\ ==\ \textcolor{charliteral}{'\(\backslash\)n'}\ ||\ c\ ==\ \textcolor{charliteral}{'\(\backslash\)v'}\ ||\ c\ ==\ \textcolor{charliteral}{'\(\backslash\)f'}\ ||\ c\ ==\ \textcolor{charliteral}{'\(\backslash\)r'});}
\DoxyCodeLine{00225\ \ \ \ \ \}}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \};\ \textcolor{comment}{//\ end\ of\ class\ StringParser}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00230\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac370a4490d58ed7401bbd06616b6a7bd}{StringParser::string\_to\_int\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(len\ <=\ 0))\ \{}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00234\ \ \ \ \ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ std::make\_unsigned<T>::type\ UnsignedT;}
\DoxyCodeLine{00237\ \ \ \ \ UnsignedT\ val\ =\ 0;}
\DoxyCodeLine{00238\ \ \ \ \ UnsignedT\ max\_val\ =\ StringParser::numeric\_limits<T>(\textcolor{keyword}{false});}
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordtype}{bool}\ negative\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ 0;}
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordflow}{switch}\ (*s)\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'-\/'}:}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ negative\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ max\_val\ =\ StringParser::numeric\_limits<T>(\textcolor{keyword}{false})\ +\ 1;}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ ++i;}
\DoxyCodeLine{00247\ \ \ \ \ \}}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{comment}{//\ This\ is\ the\ fast\ path\ where\ the\ string\ cannot\ overflow.}}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(len\ -\/\ i\ <\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits}{StringParseTraits<T>::max\_ascii\_len}}()))\ \{}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ val\ =\ string\_to\_int\_no\_overflow<UnsignedT>(s\ +\ i,\ len\ -\/\ i,\ result);}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\textcolor{keyword}{>}(negative\ ?\ -\/val\ :\ val);}
\DoxyCodeLine{00253\ \ \ \ \ \}}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ max\_div\_10\ =\ max\_val\ /\ 10;}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ max\_mod\_10\ =\ max\_val\ \%\ 10;}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordtype}{int}\ first\ =\ i;}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ i\ <\ len;\ ++i)\ \{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(s[i]\ >=\ \textcolor{charliteral}{'0'}\ \&\&\ s[i]\ <=\ \textcolor{charliteral}{'9'}))\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ digit\ =\ s[i]\ -\/\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ a\ tricky\ check\ to\ see\ if\ adding\ this\ digit\ will\ cause\ an\ overflow.}}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(val\ >\ (max\_div\_10\ -\/\ (digit\ >\ max\_mod\_10))))\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da5c84bb540febe57525dff853b167f72d}{PARSE\_OVERFLOW}};}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ negative\ ?\ -\/max\_val\ :\ max\_val;}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ val\ =\ val\ *\ 10\ +\ digit;}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(i\ ==\ first\ ||\ !\mbox{\hyperlink{classdoris_1_1_string_parser_a763bc9f0bbdf23fc59c66ad241046160}{is\_all\_whitespace}}(s\ +\ i,\ len\ -\/\ i))))\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reject\ the\ string\ because\ either\ the\ first\ char\ was\ not\ a\ digit,}}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ or\ the\ remaining\ chars\ are\ not\ all\ whitespace}}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Returning\ here\ is\ slightly\ faster\ than\ breaking\ the\ loop.}}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\textcolor{keyword}{>}(negative\ ?\ -\/val\ :\ val);}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00279\ \ \ \ \ \}}
\DoxyCodeLine{00280\ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\textcolor{keyword}{>}(negative\ ?\ -\/val\ :\ val);}
\DoxyCodeLine{00282\ \}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00285\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_adbdefd71854ca20feab49855135cc46e}{StringParser::string\_to\_unsigned\_int\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(len\ <=\ 0))\ \{}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00290\ \ \ \ \ \}}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ val\ =\ 0;}
\DoxyCodeLine{00293\ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ max\_val\ =\ std::numeric\_limits<T>::max();}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ 0;}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ std::make\_signed<T>::type\ signedT;}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{comment}{//\ This\ is\ the\ fast\ path\ where\ the\ string\ cannot\ overflow.}}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(len\ -\/\ i\ <\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits}{StringParseTraits<signedT>::max\_ascii\_len}}()))\ \{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ val\ =\ string\_to\_int\_no\_overflow<T>(s\ +\ i,\ len\ -\/\ i,\ result);}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ val;}
\DoxyCodeLine{00301\ \ \ \ \ \}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ max\_div\_10\ =\ max\_val\ /\ 10;}
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ max\_mod\_10\ =\ max\_val\ \%\ 10;}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keywordtype}{int}\ first\ =\ i;}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ i\ <\ len;\ ++i)\ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(s[i]\ >=\ \textcolor{charliteral}{'0'}\ \&\&\ s[i]\ <=\ \textcolor{charliteral}{'9'}))\ \{}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ digit\ =\ s[i]\ -\/\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ a\ tricky\ check\ to\ see\ if\ adding\ this\ digit\ will\ cause\ an\ overflow.}}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(val\ >\ (max\_div\_10\ -\/\ (digit\ >\ max\_mod\_10))))\ \{}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da5c84bb540febe57525dff853b167f72d}{PARSE\_OVERFLOW}};}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ max\_val;}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ val\ =\ val\ *\ 10\ +\ digit;}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(i\ ==\ first\ ||\ !\mbox{\hyperlink{classdoris_1_1_string_parser_a763bc9f0bbdf23fc59c66ad241046160}{is\_all\_whitespace}}(s\ +\ i,\ len\ -\/\ i))))\ \{}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reject\ the\ string\ because\ either\ the\ first\ char\ was\ not\ a\ digit,}}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ or\ the\ remaining\ chars\ are\ not\ all\ whitespace}}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Returning\ here\ is\ slightly\ faster\ than\ breaking\ the\ loop.}}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ val;}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00327\ \ \ \ \ \}}
\DoxyCodeLine{00328\ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00329\ \ \ \ \ \textcolor{keywordflow}{return}\ val;}
\DoxyCodeLine{00330\ \}}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00333\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac370a4490d58ed7401bbd06616b6a7bd}{StringParser::string\_to\_int\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{namespacebase}{base}},}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ std::make\_unsigned<T>::type\ UnsignedT;}
\DoxyCodeLine{00336\ \ \ \ \ UnsignedT\ val\ =\ 0;}
\DoxyCodeLine{00337\ \ \ \ \ UnsignedT\ max\_val\ =\ StringParser::numeric\_limits<T>(\textcolor{keyword}{false});}
\DoxyCodeLine{00338\ \ \ \ \ \textcolor{keywordtype}{bool}\ negative\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00339\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(len\ <=\ 0))\ \{}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00342\ \ \ \ \ \}}
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ 0;}
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{keywordflow}{switch}\ (*s)\ \{}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'-\/'}:}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ negative\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ max\_val\ =\ StringParser::numeric\_limits<T>(\textcolor{keyword}{false})\ +\ 1;}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ i\ =\ 1;}
\DoxyCodeLine{00350\ \ \ \ \ \}}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ max\_div\_base\ =\ max\_val\ /\ \mbox{\hyperlink{namespacebase}{base}};}
\DoxyCodeLine{00353\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ max\_mod\_base\ =\ max\_val\ \%\ \mbox{\hyperlink{namespacebase}{base}};}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \ \ \textcolor{keywordtype}{int}\ first\ =\ i;}
\DoxyCodeLine{00356\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ i\ <\ len;\ ++i)\ \{}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ digit;}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(s[i]\ >=\ \textcolor{charliteral}{'0'}\ \&\&\ s[i]\ <=\ \textcolor{charliteral}{'9'}))\ \{}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ digit\ =\ s[i]\ -\/\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (s[i]\ >=\ \textcolor{charliteral}{'a'}\ \&\&\ s[i]\ <=\ \textcolor{charliteral}{'z'})\ \{}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ digit\ =\ (s[i]\ -\/\ \textcolor{charliteral}{'a'}\ +\ 10);}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (s[i]\ >=\ \textcolor{charliteral}{'A'}\ \&\&\ s[i]\ <=\ \textcolor{charliteral}{'Z'})\ \{}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ digit\ =\ (s[i]\ -\/\ \textcolor{charliteral}{'A'}\ +\ 10);}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(i\ ==\ first\ ||\ !\mbox{\hyperlink{classdoris_1_1_string_parser_a763bc9f0bbdf23fc59c66ad241046160}{is\_all\_whitespace}}(s\ +\ i,\ len\ -\/\ i))))\ \{}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reject\ the\ string\ because\ either\ the\ first\ char\ was\ not\ an\ alpha/digit,}}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ or\ the\ remaining\ chars\ are\ not\ all\ whitespace}}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skip\ trailing\ whitespace.}}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Bail,\ if\ we\ encounter\ a\ digit\ that\ is\ not\ available\ in\ base.}}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (digit\ >=\ \mbox{\hyperlink{namespacebase}{base}})\ \{}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ a\ tricky\ check\ to\ see\ if\ adding\ this\ digit\ will\ cause\ an\ overflow.}}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(val\ >\ (max\_div\_base\ -\/\ (digit\ >\ max\_mod\_base))))\ \{}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da5c84bb540febe57525dff853b167f72d}{PARSE\_OVERFLOW}};}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\textcolor{keyword}{>}(negative\ ?\ -\/max\_val\ :\ max\_val);}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ val\ =\ val\ *\ \mbox{\hyperlink{namespacebase}{base}}\ +\ digit;}
\DoxyCodeLine{00386\ \ \ \ \ \}}
\DoxyCodeLine{00387\ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00388\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\textcolor{keyword}{>}(negative\ ?\ -\/val\ :\ val);}
\DoxyCodeLine{00389\ \}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00392\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_aae36119fcd8159e5f3e95847463e439f}{StringParser::string\_to\_int\_no\_overflow}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ val\ =\ 0;}
\DoxyCodeLine{00394\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(len\ ==\ 0))\ \{}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ val;}
\DoxyCodeLine{00397\ \ \ \ \ \}}
\DoxyCodeLine{00398\ \ \ \ \ \textcolor{comment}{//\ Factor\ out\ the\ first\ char\ for\ error\ handling\ speeds\ up\ the\ loop.}}
\DoxyCodeLine{00399\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(s[0]\ >=\ \textcolor{charliteral}{'0'}\ \&\&\ s[0]\ <=\ \textcolor{charliteral}{'9'}))\ \{}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ val\ =\ s[0]\ -\/\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{00401\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00404\ \ \ \ \ \}}
\DoxyCodeLine{00405\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <\ len;\ ++i)\ \{}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(s[i]\ >=\ \textcolor{charliteral}{'0'}\ \&\&\ s[i]\ <=\ \textcolor{charliteral}{'9'}))\ \{}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ digit\ =\ s[i]\ -\/\ \textcolor{charliteral}{'0'};}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ val\ =\ val\ *\ 10\ +\ digit;}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(!\mbox{\hyperlink{classdoris_1_1_string_parser_a763bc9f0bbdf23fc59c66ad241046160}{is\_all\_whitespace}}(s\ +\ i,\ len\ -\/\ i))))\ \{}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ val;}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00417\ \ \ \ \ \}}
\DoxyCodeLine{00418\ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{keywordflow}{return}\ val;}
\DoxyCodeLine{00420\ \}}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00422\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00423\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a3d54c310fa5a76be6f38ac75a8164689}{StringParser::string\_to\_float\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{keywordtype}{int}\ i\ =\ 0;}
\DoxyCodeLine{00425\ \ \ \ \ \textcolor{comment}{//\ skip\ leading\ spaces}}
\DoxyCodeLine{00426\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ i\ <\ len;\ ++i)\ \{}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classdoris_1_1_string_parser_a6d453cae9636acd4bdf7642569e3286b}{is\_whitespace}}(s[i]))\ \{}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00430\ \ \ \ \ \}}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{comment}{//\ skip\ back\ spaces}}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keywordtype}{int}\ j\ =\ len\ -\/\ 1;}
\DoxyCodeLine{00434\ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ j\ >=\ i;\ j-\/-\/)\ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classdoris_1_1_string_parser_a6d453cae9636acd4bdf7642569e3286b}{is\_whitespace}}(s[j]))\ \{}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00438\ \ \ \ \ \}}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{comment}{//\ skip\ leading\ '+',\ from\_chars\ can\ handle\ '-\/'}}
\DoxyCodeLine{00441\ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ <\ len\ \&\&\ s[i]\ ==\ \textcolor{charliteral}{'+'})\ \{}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ i++;}
\DoxyCodeLine{00443\ \ \ \ \ \}}
\DoxyCodeLine{00444\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(i\ >\ j))\ \{}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00447\ \ \ \ \ \}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{comment}{//\ Use\ double\ here\ to\ not\ lose\ precision\ while\ accumulating\ the\ result}}
\DoxyCodeLine{00450\ \ \ \ \ \textcolor{keywordtype}{double}\ val\ =\ 0;}
\DoxyCodeLine{00451\ \ \ \ \ \textcolor{keyword}{auto}\ res\ =\ fast\_float::from\_chars(s\ +\ i,\ s\ +\ j\ +\ 1,\ val);}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \ \ \textcolor{keywordflow}{if}\ (res.ec\ ==\ std::errc()\ \&\&\ res.ptr\ ==\ s\ +\ j\ +\ 1)\ \{}
\DoxyCodeLine{00454\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{namespacedoris_a3e185a7a7ef1c3bff626a322b64986fb}{abs}}(val)\ ==\ std::numeric\_limits<T>::infinity())\ \{}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ contain\_inf\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ k\ =\ i;\ k\ <\ j\ +\ 1;\ k++)\ \{}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (s[k]\ ==\ \textcolor{charliteral}{'i'}\ ||\ s[k]\ ==\ \textcolor{charliteral}{'I'})\ \{}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ contain\_inf\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ contain\_inf\ ?\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}}\ :\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da5c84bb540febe57525dff853b167f72d}{PARSE\_OVERFLOW}};}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ val;}
\DoxyCodeLine{00468\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00470\ \ \ \ \ \}}
\DoxyCodeLine{00471\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00472\ \}}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a93569b3ed686520ed837aa05300f8b43}{StringParser::string\_to\_bool\_internal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00475\ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{PARSE\_SUCCESS}};}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ >=\ 4\ \&\&\ (s[0]\ ==\ \textcolor{charliteral}{'t'}\ ||\ s[0]\ ==\ \textcolor{charliteral}{'T'}))\ \{}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structmatch}{match}}\ =\ (s[1]\ ==\ \textcolor{charliteral}{'r'}\ ||\ s[1]\ ==\ \textcolor{charliteral}{'R'})\ \&\&\ (s[2]\ ==\ \textcolor{charliteral}{'u'}\ ||\ s[2]\ ==\ \textcolor{charliteral}{'U'})\ \&\&}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (s[3]\ ==\ \textcolor{charliteral}{'e'}\ ||\ s[3]\ ==\ \textcolor{charliteral}{'E'});}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structmatch}{match}}\ \&\&\ \mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(\mbox{\hyperlink{classdoris_1_1_string_parser_a763bc9f0bbdf23fc59c66ad241046160}{is\_all\_whitespace}}(s\ +\ 4,\ len\ -\/\ 4)))\ \{}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00483\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (len\ >=\ 5\ \&\&\ (s[0]\ ==\ \textcolor{charliteral}{'f'}\ ||\ s[0]\ ==\ \textcolor{charliteral}{'F'}))\ \{}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structmatch}{match}}\ =\ (s[1]\ ==\ \textcolor{charliteral}{'a'}\ ||\ s[1]\ ==\ \textcolor{charliteral}{'A'})\ \&\&\ (s[2]\ ==\ \textcolor{charliteral}{'l'}\ ||\ s[2]\ ==\ \textcolor{charliteral}{'L'})\ \&\&}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (s[3]\ ==\ \textcolor{charliteral}{'s'}\ ||\ s[3]\ ==\ \textcolor{charliteral}{'S'})\ \&\&\ (s[4]\ ==\ \textcolor{charliteral}{'e'}\ ||\ s[4]\ ==\ \textcolor{charliteral}{'E'});}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structmatch}{match}}\ \&\&\ \mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(\mbox{\hyperlink{classdoris_1_1_string_parser_a763bc9f0bbdf23fc59c66ad241046160}{is\_all\_whitespace}}(s\ +\ 5,\ len\ -\/\ 5)))\ \{}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00489\ \ \ \ \ \}}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{PARSE\_FAILURE}};}
\DoxyCodeLine{00492\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00493\ \}}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00495\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00496\ \_\_int128\ StringParser::numeric\_limits<\_\_int128>(\textcolor{keywordtype}{bool}\ negative);}
\DoxyCodeLine{00497\ }
\DoxyCodeLine{00498\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00499\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_a05c966689f3c3cb24b813864e6a23e30}{StringParser::numeric\_limits}}(\textcolor{keywordtype}{bool}\ negative)\ \{}
\DoxyCodeLine{00500\ \ \ \ \ \textcolor{keywordflow}{return}\ negative\ ?\ std::numeric\_limits<T>::min()\ :\ std::numeric\_limits<T>::max();}
\DoxyCodeLine{00501\ \}}
\DoxyCodeLine{00502\ }
\DoxyCodeLine{00503\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00504\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{StringParser::StringParseTraits<uint8\_t>::max\_ascii\_len}}()\ \{}
\DoxyCodeLine{00505\ \ \ \ \ \textcolor{keywordflow}{return}\ 3;}
\DoxyCodeLine{00506\ \}}
\DoxyCodeLine{00507\ }
\DoxyCodeLine{00508\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00509\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{StringParser::StringParseTraits<uint16\_t>::max\_ascii\_len}}()\ \{}
\DoxyCodeLine{00510\ \ \ \ \ \textcolor{keywordflow}{return}\ 5;}
\DoxyCodeLine{00511\ \}}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00514\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{StringParser::StringParseTraits<uint32\_t>::max\_ascii\_len}}()\ \{}
\DoxyCodeLine{00515\ \ \ \ \ \textcolor{keywordflow}{return}\ 10;}
\DoxyCodeLine{00516\ \}}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00518\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00519\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{StringParser::StringParseTraits<uint64\_t>::max\_ascii\_len}}()\ \{}
\DoxyCodeLine{00520\ \ \ \ \ \textcolor{keywordflow}{return}\ 20;}
\DoxyCodeLine{00521\ \}}
\DoxyCodeLine{00522\ }
\DoxyCodeLine{00523\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00524\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{StringParser::StringParseTraits<int8\_t>::max\_ascii\_len}}()\ \{}
\DoxyCodeLine{00525\ \ \ \ \ \textcolor{keywordflow}{return}\ 3;}
\DoxyCodeLine{00526\ \}}
\DoxyCodeLine{00527\ }
\DoxyCodeLine{00528\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00529\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{StringParser::StringParseTraits<int16\_t>::max\_ascii\_len}}()\ \{}
\DoxyCodeLine{00530\ \ \ \ \ \textcolor{keywordflow}{return}\ 5;}
\DoxyCodeLine{00531\ \}}
\DoxyCodeLine{00532\ }
\DoxyCodeLine{00533\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00534\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{StringParser::StringParseTraits<int32\_t>::max\_ascii\_len}}()\ \{}
\DoxyCodeLine{00535\ \ \ \ \ \textcolor{keywordflow}{return}\ 10;}
\DoxyCodeLine{00536\ \}}
\DoxyCodeLine{00537\ }
\DoxyCodeLine{00538\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00539\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{StringParser::StringParseTraits<int64\_t>::max\_ascii\_len}}()\ \{}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keywordflow}{return}\ 19;}
\DoxyCodeLine{00541\ \}}
\DoxyCodeLine{00542\ }
\DoxyCodeLine{00543\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00544\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_string_parser_1_1_string_parse_traits_a84e0673c16ad95f7572a29d4b09cc960}{StringParser::StringParseTraits<\_\_int128>::max\_ascii\_len}}()\ \{}
\DoxyCodeLine{00545\ \ \ \ \ \textcolor{keywordflow}{return}\ 39;}
\DoxyCodeLine{00546\ \}}
\DoxyCodeLine{00547\ }
\DoxyCodeLine{00548\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00549\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{classdoris_1_1_string_parser_ab9e88a40e0cafb694d78a20ed99b86dc}{StringParser::string\_to\_decimal}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ s,\ \textcolor{keywordtype}{int}\ len,\ \textcolor{keywordtype}{int}\ type\_precision,\ \textcolor{keywordtype}{int}\ type\_scale,}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66d}{ParseResult}}*\ result)\ \{}
\DoxyCodeLine{00551\ \ \ \ \ \textcolor{comment}{//\ Special\ cases:}}
\DoxyCodeLine{00552\ \ \ \ \ \textcolor{comment}{//\ \ \ 1)\ ''\ ==\ Fail,\ an\ empty\ string\ fails\ to\ parse.}}
\DoxyCodeLine{00553\ \ \ \ \ \textcolor{comment}{//\ \ \ 2)\ '\ \ \ \#\ \ \ '\ ==\ \#,\ leading\ and\ trailing\ white\ space\ is\ ignored.}}
\DoxyCodeLine{00554\ \ \ \ \ \textcolor{comment}{//\ \ \ 3)\ '.'\ ==\ 0,\ a\ single\ dot\ parses\ as\ zero\ (for\ consistency\ with\ other\ types).}}
\DoxyCodeLine{00555\ \ \ \ \ \textcolor{comment}{//\ \ \ 4)\ '\#.'\ ==\ '\#',\ a\ trailing\ dot\ is\ ignored.}}
\DoxyCodeLine{00556\ }
\DoxyCodeLine{00557\ \ \ \ \ \textcolor{comment}{//\ Ignore\ leading\ and\ trailing\ spaces.}}
\DoxyCodeLine{00558\ \ \ \ \ \textcolor{keywordflow}{while}\ (len\ >\ 0\ \&\&\ \mbox{\hyperlink{classdoris_1_1_string_parser_a6d453cae9636acd4bdf7642569e3286b}{is\_whitespace}}(*s))\ \{}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ ++s;}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ -\/-\/len;}
\DoxyCodeLine{00561\ \ \ \ \ \}}
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{keywordflow}{while}\ (len\ >\ 0\ \&\&\ \mbox{\hyperlink{classdoris_1_1_string_parser_a6d453cae9636acd4bdf7642569e3286b}{is\_whitespace}}(s[len\ -\/\ 1]))\ \{}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ -\/-\/len;}
\DoxyCodeLine{00564\ \ \ \ \ \}}
\DoxyCodeLine{00565\ }
\DoxyCodeLine{00566\ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_negative\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00567\ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ >\ 0)\ \{}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (*s)\ \{}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'-\/'}:}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ is\_negative\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ ++s;}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/len;}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00575\ \ \ \ \ \}}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \ \ \ \ \textcolor{comment}{//\ Ignore\ leading\ zeros.}}
\DoxyCodeLine{00578\ \ \ \ \ \textcolor{keywordtype}{bool}\ found\_value\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00579\ \ \ \ \ \textcolor{keywordflow}{while}\ (len\ >\ 0\ \&\&\ \mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(*s\ ==\ \textcolor{charliteral}{'0'}))\ \{}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ found\_value\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ ++s;}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ -\/-\/len;}
\DoxyCodeLine{00583\ \ \ \ \ \}}
\DoxyCodeLine{00584\ }
\DoxyCodeLine{00585\ \ \ \ \ \textcolor{comment}{//\ Ignore\ leading\ zeros\ even\ after\ a\ dot.\ This\ allows\ for\ differentiating\ between}}
\DoxyCodeLine{00586\ \ \ \ \ \textcolor{comment}{//\ cases\ like\ 0.01e2,\ which\ would\ fit\ in\ a\ DECIMAL(1,\ 0),\ and\ 0.10e2,\ which\ would}}
\DoxyCodeLine{00587\ \ \ \ \ \textcolor{comment}{//\ overflow.}}
\DoxyCodeLine{00588\ \ \ \ \ \textcolor{keywordtype}{int}\ scale\ =\ 0;}
\DoxyCodeLine{00589\ \ \ \ \ \textcolor{keywordtype}{int}\ found\_dot\ =\ 0;}
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keywordflow}{if}\ (len\ >\ 0\ \&\&\ *s\ ==\ \textcolor{charliteral}{'.'})\ \{}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ found\_dot\ =\ 1;}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ ++s;}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ -\/-\/len;}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (len\ >\ 0\ \&\&\ \mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(*s\ ==\ \textcolor{charliteral}{'0'}))\ \{}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ found\_value\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ ++scale;}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \ \ ++s;}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/len;}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00600\ \ \ \ \ \}}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \ \ \ \ \textcolor{keywordtype}{int}\ precision\ =\ 0;}
\DoxyCodeLine{00603\ \ \ \ \ \textcolor{keywordtype}{bool}\ found\_exponent\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00604\ \ \ \ \ int8\_t\ exponent\ =\ 0;}
\DoxyCodeLine{00605\ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ =\ 0;}
\DoxyCodeLine{00606\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ len;\ ++i)\ \{}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\&\ c\ =\ s[i];}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(\textcolor{charliteral}{'0'}\ <=\ c\ \&\&\ c\ <=\ \textcolor{charliteral}{'9'}))\ \{}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ found\_value\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ignore\ digits\ once\ the\ type's\ precision\ limit\ is\ reached.\ This\ avoids}}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ overflowing\ the\ underlying\ storage\ while\ handling\ a\ string\ like}}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 10000000000e-\/10\ into\ a\ DECIMAL(1,\ 0).\ Adjustments\ for\ ignored\ digits\ and}}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ an\ exponent\ will\ be\ made\ later.}}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(type\_precision\ >\ precision))\ \{}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ =\ (\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ *\ 10)\ +\ (c\ -\/\ \textcolor{charliteral}{'0'});\ \textcolor{comment}{//\ Benchmarks\ are\ faster\ with\ parenthesis...}}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \ \ \ \ DCHECK(\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ >=\ 0);\ \textcolor{comment}{//\ For\ some\ reason\ //DCHECK\_GE\ doesn't\ work\ with\ \_\_int128.}}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \ \ \ \ ++precision;}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \ \ \ \ scale\ +=\ found\_dot;}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (c\ ==\ \textcolor{charliteral}{'.'}\ \&\&\ \mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(!found\_dot))\ \{}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ found\_dot\ =\ 1;}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ ((c\ ==\ \textcolor{charliteral}{'e'}\ ||\ c\ ==\ \textcolor{charliteral}{'E'})\ \&\&\ \mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(!found\_exponent))\ \{}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ found\_exponent\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ exponent\ =\ string\_to\_int\_internal<int8\_t>(s\ +\ i\ +\ 1,\ len\ -\/\ i\ -\/\ 1,\ result);}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(*result\ !=\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{StringParser::PARSE\_SUCCESS}}))\ \{}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*result\ ==\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da5c84bb540febe57525dff853b167f72d}{StringParser::PARSE\_OVERFLOW}}\ \&\&\ exponent\ <\ 0)\ \{}
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da68b3442dbd88dd85816cd366a882dda4}{StringParser::PARSE\_UNDERFLOW}};}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00632\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ ==\ 0)\ \{}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{StringParser::PARSE\_FAILURE}};}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{StringParser::PARSE\_SUCCESS}};}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ vectorized::Int128I>)\ \{}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ *=\ get\_scale\_multiplier<\_\_int128>(type\_scale\ -\/\ scale);}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ *=\ get\_scale\_multiplier<T>(type\_scale\ -\/\ scale);}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00643\ }
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ is\_negative\ ?\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}(-\/\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}})\ :\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}(\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}});}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00646\ \ \ \ \ \}}
\DoxyCodeLine{00647\ }
\DoxyCodeLine{00648\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ number\ of\ truncated\ digits\ before\ adjusting\ the\ precision\ for\ an\ exponent.}}
\DoxyCodeLine{00649\ \ \ \ \ \textcolor{keywordtype}{int}\ truncated\_digit\_count\ =\ precision\ -\/\ type\_precision;}
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{keywordflow}{if}\ (exponent\ >\ scale)\ \{}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ex:\ 0.1e3\ (which\ at\ this\ point\ would\ have\ precision\ ==\ 1\ and\ scale\ ==\ 1),\ the}}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ scale\ must\ be\ set\ to\ 0\ and\ the\ value\ set\ to\ 100\ which\ means\ a\ precision\ of\ 3.}}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ precision\ +=\ exponent\ -\/\ scale;}
\DoxyCodeLine{00654\ }
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ vectorized::Int128I>)\ \{}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ *=\ get\_scale\_multiplier<\_\_int128>(exponent\ -\/\ scale);}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ *=\ get\_scale\_multiplier<T>(exponent\ -\/\ scale);}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ scale\ =\ 0;}
\DoxyCodeLine{00661\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ex:\ 100e-\/4,\ the\ scale\ must\ be\ set\ to\ 4\ but\ no\ adjustment\ to\ the\ value\ is\ needed,}}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ the\ precision\ must\ also\ be\ set\ to\ 4\ but\ that\ will\ be\ done\ below\ for\ the}}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ non-\/exponent\ case\ anyways.}}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ scale\ -\/=\ exponent;}
\DoxyCodeLine{00666\ \ \ \ \ \}}
\DoxyCodeLine{00667\ \ \ \ \ \textcolor{comment}{//\ Ex:\ 0.001,\ at\ this\ point\ would\ have\ precision\ 1\ and\ scale\ 3\ since\ leading\ zeros}}
\DoxyCodeLine{00668\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ were\ ignored\ during\ previous\ parsing.}}
\DoxyCodeLine{00669\ \ \ \ \ \textcolor{keywordflow}{if}\ (scale\ >\ precision)\ \{}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ precision\ =\ scale;}
\DoxyCodeLine{00671\ \ \ \ \ \}}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \ \ \ \ \textcolor{comment}{//\ Microbenchmarks\ show\ that\ beyond\ this\ point,\ returning\ on\ parse\ failure\ is\ slower}}
\DoxyCodeLine{00674\ \ \ \ \ \textcolor{comment}{//\ than\ just\ letting\ the\ function\ run\ out.}}
\DoxyCodeLine{00675\ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da9674022bcca440239f8c53bcbd4101a0}{StringParser::PARSE\_SUCCESS}};}
\DoxyCodeLine{00676\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(precision\ -\/\ scale\ >\ type\_precision\ -\/\ type\_scale))\ \{}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da5c84bb540febe57525dff853b167f72d}{StringParser::PARSE\_OVERFLOW}};}
\DoxyCodeLine{00678\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(scale\ >\ type\_scale))\ \{}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da68b3442dbd88dd85816cd366a882dda4}{StringParser::PARSE\_UNDERFLOW}};}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ shift\ =\ scale\ -\/\ type\_scale;}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(truncated\_digit\_count\ >\ 0))\ \{}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \ \ \ \ shift\ -\/=\ truncated\_digit\_count;}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (shift\ >\ 0)\ \{}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ divisor;}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ vectorized::Int128I>)\ \{}
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ divisor\ =\ get\_scale\_multiplier<\_\_int128>(shift);}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ divisor\ =\ get\_scale\_multiplier<T>(shift);}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a262afcfe437f4addb13fb1b47a6a7086}{LIKELY}}(divisor\ >=\ 0))\ \{}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}\ remainder\ =\ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ \%\ divisor;}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ /=\ divisor;}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((remainder\ >\ 0\ ?\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}(remainder)\ :\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}(-\/remainder))\ >=\ (divisor\ >>\ 1))\ \{}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ +=\ 1;}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DCHECK(divisor\ ==\ -\/1);\ \textcolor{comment}{//\ //DCHECK\_EQ\ doesn't\ work\ with\ \_\_int128.}}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ =\ 0;}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ DCHECK(\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ >=\ 0);\ \textcolor{comment}{//\ //DCHECK\_GE\ doesn't\ work\ with\ \_\_int128.}}
\DoxyCodeLine{00703\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(!found\_value\ \&\&\ !found\_dot))\ \{}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ *result\ =\ \mbox{\hyperlink{classdoris_1_1_string_parser_ac77cdc32c6f64752dca142a88308d66da8a5eaa538a709e6b7baf4eab139afaaf}{StringParser::PARSE\_FAILURE}};}
\DoxyCodeLine{00705\ \ \ \ \ \}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00707\ \ \ \ \ \textcolor{keywordflow}{if}\ (type\_scale\ >\ scale)\ \{}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (std::is\_same\_v<T,\ vectorized::Int128I>)\ \{}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ *=\ get\_scale\_multiplier<\_\_int128>(type\_scale\ -\/\ scale);}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}}\ *=\ get\_scale\_multiplier<T>(type\_scale\ -\/\ scale);}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00713\ \ \ \ \ \}}
\DoxyCodeLine{00714\ }
\DoxyCodeLine{00715\ \ \ \ \ \textcolor{keywordflow}{return}\ is\_negative\ ?\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}(-\/\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}})\ :\ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}}(\mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}});}
\DoxyCodeLine{00716\ \}}
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00718\ \}\ \textcolor{comment}{//\ end\ namespace\ doris}}

\end{DoxyCode}
