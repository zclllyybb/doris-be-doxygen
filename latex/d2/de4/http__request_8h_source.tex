\hypertarget{http__request_8h_source}{}\doxysection{http\+\_\+request.\+h}
\label{http__request_8h_source}\index{/Users/dabowang/be\_all/http/http\_request.h@{/Users/dabowang/be\_all/http/http\_request.h}}
\mbox{\hyperlink{http__request_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <glog/logging.h>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <boost/algorithm/string.hpp>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <map>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{http__common_8h}{http/http\_common.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{http__headers_8h}{http/http\_headers.h}}"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{http__method_8h}{http/http\_method.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{string__util_8h}{util/string\_util.h}}"{}}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{struct\ }mg\_connection;}
\DoxyCodeLine{00032\ \textcolor{keyword}{struct\ }evhttp\_request;}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{class\ }HttpHandler;}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_http_request}{HttpRequest}}\ \{}
\DoxyCodeLine{00039\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_http_request}{HttpRequest}}(evhttp\_request*\ ev\_req);}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_http_request_a388adc77aeadd6ca0cc23372c3f3714f}{\string~HttpRequest}}();}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1_http_request_a107aa2ddd1f1a354ab34ffbb394b21ab}{init\_from\_evhttp}}();}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a4353a75834bb35c4acd80b51434eef59}{HttpMethod}}\ \mbox{\hyperlink{classdoris_1_1_http_request_adf4e27b3872c8d71f752c44ddfeddde2}{method}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_http_request_a6ca798ce2d38642eda7655d9387b9aeb}{\_method}};\ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{comment}{//\ path\ +\ '?'\ +\ query}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{classdoris_1_1_http_request_aee9951b3b7223919fc5614510c537fbf}{uri}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_http_request_ad89e8cc9bea89e8fab6eb746f748ef5d}{\_uri}};\ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{comment}{//\ return\ raw\ path\ without\ query\ string\ after\ '?'}}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{classdoris_1_1_http_request_a7e5e7e3ef011dcff1c8791f8665cdfc6}{raw\_path}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_http_request_ad0f9882fc4efa766b9f2d9a8fe010c32}{\_raw\_path}};\ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{classdoris_1_1_http_request_a0a6a9c95997853fc015dabe11d010b93}{header}}(\textcolor{keyword}{const}\ std::string\&\ key)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{classdoris_1_1_http_request_a8ce28f423737157723a156016ea2d974}{param}}(\textcolor{keyword}{const}\ std::string\&\ key)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{//\ return\ params}}
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacedoris_a8bb5b3738b082c5081408d17548a0935}{StringCaseUnorderedMap<std::string>}}\&\ \mbox{\hyperlink{classdoris_1_1_http_request_adeb50c972f7a35637d500d07abba79ae}{headers}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_http_request_a493c4e61afacd1906bd0c1a9960132aa}{\_headers}};\ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{comment}{//\ return\ params}}
\DoxyCodeLine{00062\ \ \ \ \ std::map<std::string,\ std::string>*\ \mbox{\hyperlink{classdoris_1_1_http_request_ad397ba8eac3f24dd0afdb700882d8104}{params}}()\ \{\ \textcolor{keywordflow}{return}\ \&\mbox{\hyperlink{classdoris_1_1_http_request_a3cfe08743b45779c75731977eccead2f}{\_params}};\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{const}\ std::map<std::string,\ std::string>\&\ \mbox{\hyperlink{classdoris_1_1_http_request_ae6aafb37ec7aa5f554232d969a6eadb7}{query\_params}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_http_request_ae6aeae8749ab42eb6a9174c418993086}{\_query\_params}};\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1_http_request_a568a94203890f21c44094772c687aff9}{get\_request\_body}}();}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_http_request_ab3bcd8f63f6e9b127279a3d875ab2309}{add\_output\_header}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ key,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}});}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1_http_request_ae21c3e223fb1aec0439964d01e5e0282}{debug\_string}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_http_request_a8ef93a11e341868047424f9756c5be53}{set\_handler}}(\mbox{\hyperlink{classdoris_1_1_http_handler}{HttpHandler}}*\ \mbox{\hyperlink{classdoris_1_1_http_request_a137b084d3689ae2647e426f744864eec}{handler}})\ \{\ \mbox{\hyperlink{classdoris_1_1_http_request_a10508573b9098ff181864fb867af7322}{\_handler}}\ =\ \mbox{\hyperlink{classdoris_1_1_http_request_a137b084d3689ae2647e426f744864eec}{handler}};\ \}}
\DoxyCodeLine{00073\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_http_handler}{HttpHandler}}*\ \mbox{\hyperlink{classdoris_1_1_http_request_a137b084d3689ae2647e426f744864eec}{handler}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_http_request_a10508573b9098ff181864fb867af7322}{\_handler}};\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keyword}{struct\ }evhttp\_request*\ \mbox{\hyperlink{classdoris_1_1_http_request_a66207943df17dd79d88a31cfb65e27cd}{get\_evhttp\_request}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_http_request_a0de68f59271634eacfb16ef78f2d826f}{\_ev\_req}};\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{classdoris_1_1_http_request_a77525d96e765c5db0ccdc7c2ce94c4d8}{handler\_ctx}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_http_request_a9cc127738b1a1c5d391e76ee37f5182b}{\_handler\_ctx}};\ \}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_http_request_aa6e1eb5a7db03bfae08d9dc1e7c04baa}{set\_handler\_ctx}}(\textcolor{keywordtype}{void}*\ ctx)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ DCHECK(\mbox{\hyperlink{classdoris_1_1_http_request_a10508573b9098ff181864fb867af7322}{\_handler}}\ !=\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_http_request_a9cc127738b1a1c5d391e76ee37f5182b}{\_handler\_ctx}}\ =\ ctx;}
\DoxyCodeLine{00081\ \ \ \ \ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{classdoris_1_1_http_request_a4a3b57ee1979f0e13fde39d67e720fb3}{remote\_host}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00086\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a4353a75834bb35c4acd80b51434eef59}{HttpMethod}}\ \mbox{\hyperlink{classdoris_1_1_http_request_a6ca798ce2d38642eda7655d9387b9aeb}{\_method}};}
\DoxyCodeLine{00087\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1_http_request_ad89e8cc9bea89e8fab6eb746f748ef5d}{\_uri}};}
\DoxyCodeLine{00088\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1_http_request_ad0f9882fc4efa766b9f2d9a8fe010c32}{\_raw\_path}};}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a8bb5b3738b082c5081408d17548a0935}{StringCaseUnorderedMap<std::string>}}\ \mbox{\hyperlink{classdoris_1_1_http_request_a493c4e61afacd1906bd0c1a9960132aa}{\_headers}};}
\DoxyCodeLine{00091\ \ \ \ \ std::map<std::string,\ std::string>\ \mbox{\hyperlink{classdoris_1_1_http_request_a3cfe08743b45779c75731977eccead2f}{\_params}};}
\DoxyCodeLine{00092\ \ \ \ \ std::map<std::string,\ std::string>\ \mbox{\hyperlink{classdoris_1_1_http_request_ae6aeae8749ab42eb6a9174c418993086}{\_query\_params}};}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keyword}{struct\ }evhttp\_request*\ \mbox{\hyperlink{classdoris_1_1_http_request_a0de68f59271634eacfb16ef78f2d826f}{\_ev\_req}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00095\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_http_handler}{HttpHandler}}*\ \mbox{\hyperlink{classdoris_1_1_http_request_a10508573b9098ff181864fb867af7322}{\_handler}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{classdoris_1_1_http_request_a9cc127738b1a1c5d391e76ee37f5182b}{\_handler\_ctx}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00098\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1_http_request_ad9aac1de0653a9a13c522412c5bdbaf0}{\_request\_body}};}
\DoxyCodeLine{00099\ \};}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
