\hypertarget{selection__vector_8h_source}{}\doxysection{selection\+\_\+vector.\+h}
\label{selection__vector_8h_source}\index{/Users/dabowang/doris/be/src/olap/selection\_vector.h@{/Users/dabowang/doris/be/src/olap/selection\_vector.h}}
\mbox{\hyperlink{selection__vector_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{bitmap_8h}{util/bitmap.h}}"{}}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{comment}{//\ Bit-\/vector\ representing\ the\ selection\ status\ of\ each\ row\ in\ a\ row\ block.}}
\DoxyCodeLine{00027\ \textcolor{comment}{//}}
\DoxyCodeLine{00028\ \textcolor{comment}{//\ It\ is\ used\ to\ scan\ data\ with\ column\ predicate.}}
\DoxyCodeLine{00029\ \textcolor{comment}{//\ the\ bit\ in\ the\ selection\ vector\ is\ used\ to\ indicate\ whether\ the\ given\ row\ is\ live.}}
\DoxyCodeLine{00030\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_selection_vector}{SelectionVector}}\ \{}
\DoxyCodeLine{00031\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{comment}{//\ Construct\ a\ new\ vector.\ The\ bits\ are\ initially\ in\ an\ indeterminate\ state.}}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{comment}{//\ Call\ set\_all\_true()\ if\ you\ require\ all\ rows\ to\ be\ initially\ selected.}}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_abd048b30619614c85b710f97c9d61ef5}{SelectionVector}}(\textcolor{keywordtype}{size\_t}\ row\_capacity)}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a02a77b2c5479ae9b1b4ab09d34b502f2}{\_n\_rows}}(row\_capacity),}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_selection_vector_a4dcc99125452ba51d2db37bf7df1189c}{\_n\_bytes}}(\mbox{\hyperlink{namespacedoris_a56794e9667cb660cad4debd91077df19}{BitmapSize}}(row\_capacity)),}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}(new\ uint8\_t[\mbox{\hyperlink{classdoris_1_1_selection_vector_a4dcc99125452ba51d2db37bf7df1189c}{\_n\_bytes}}])\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ CHECK\_GT(\mbox{\hyperlink{classdoris_1_1_selection_vector_a4dcc99125452ba51d2db37bf7df1189c}{\_n\_bytes}},\ 0);}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_selection_vector_a710cf6a3a71940bc28bc3b7ef1359d9e}{set\_all\_false}}();}
\DoxyCodeLine{00040\ \ \ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{comment}{//\ return\ the\ number\ of\ selected\ rows.}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a724e27f4d2d6cdfb74a6f3c55e5e6345}{count\_selected}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_bits_a747282d4a5973910c2eb87fc6bb48944}{Bits::Count}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get(),\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a4dcc99125452ba51d2db37bf7df1189c}{\_n\_bytes}});\ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{comment}{//\ Return\ true\ if\ any\ rows\ are\ selected,\ or\ false}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{comment}{//\ This\ is\ equivalent\ to\ (count\_selected()\ >\ 0),\ but\ faster.}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_ae04f11563e3d93c265ab08410b7ae83b}{any\_selected}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_af97ce55c8e11dc70b817c5a1bd3253d7}{is\_row\_selected}}(\textcolor{keywordtype}{size\_t}\ row)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ DCHECK\_LT(row,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a02a77b2c5479ae9b1b4ab09d34b502f2}{\_n\_rows}});}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacedoris_a263e62fecbb6220afbaa29a102b5b67e}{BitmapTest}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get(),\ row);}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_afae6377865b06db2f327a4b0e69188a3}{set\_row\_selected}}(\textcolor{keywordtype}{size\_t}\ row)\ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ DCHECK\_LT(row,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a02a77b2c5479ae9b1b4ab09d34b502f2}{\_n\_rows}});}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_af07391472df64e38e8f40ece88e7e1a9}{BitmapSet}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get(),\ row);}
\DoxyCodeLine{00057\ \ \ \ \ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a18d4ed02403dab7d9b977190ab166b94}{set\_all\_true}}()\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ memset(\mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get(),\ 0xff,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a4dcc99125452ba51d2db37bf7df1189c}{\_n\_bytes}});}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_selection_vector_a10f3873175933767cd8b51ba3d90d74c}{pad\_extra\_bits\_wit\_zeroes}}();}
\DoxyCodeLine{00062\ \ \ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a710cf6a3a71940bc28bc3b7ef1359d9e}{set\_all\_false}}()\ \{\ memset(\mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get(),\ 0,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a4dcc99125452ba51d2db37bf7df1189c}{\_n\_bytes}});\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_afe2c3d627d580e8981de7c085465e1d8}{clear\_bit}}(\textcolor{keywordtype}{size\_t}\ row)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ DCHECK\_LT(row,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a02a77b2c5479ae9b1b4ab09d34b502f2}{\_n\_rows}});}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacedoris_ae850c94174f6f9f74aafca3947ddc8ba}{BitmapClear}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get(),\ row);}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ uint8\_t*\ \mbox{\hyperlink{classdoris_1_1_selection_vector_adce879c142fd06d3d914e73d514ee659}{mutable\_bitmap}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get();\ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{const}\ uint8\_t*\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a220a23e15aa61b7e1776e1f3ad3be065}{bitmap}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get();\ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_afc84015c9191fda5443bfc2c4dc10d3b}{nrows}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a02a77b2c5479ae9b1b4ab09d34b502f2}{\_n\_rows}};\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1_selection_vector_aac993ecccd3d88aafefb6b8e3caa1dee}{to\_string}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacedoris_afdae44dddec1583e65159adfa86ab487}{BitmapToString}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get(),\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a02a77b2c5479ae9b1b4ab09d34b502f2}{\_n\_rows}});\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ Pads\ any\ non-\/byte-\/aligned\ bits\ at\ the\ end\ of\ the\ SelectionVector\ with}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{comment}{//\ zeroes.}}
\DoxyCodeLine{00082\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{comment}{//\ To\ improve\ performance,\ CountSelected()\ and\ AnySelected()\ evaluate\ the}}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{//\ SelectionVector's\ bitmap\ in\ terms\ of\ bytes.\ As\ such,\ they\ consider\ all\ of}}
\DoxyCodeLine{00085\ \ \ \ \ \textcolor{comment}{//\ the\ trailing\ bits,\ even\ if\ the\ bitmap's\ bit\ length\ is\ not\ byte-\/aligned\ and}}
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{comment}{//\ some\ trailing\ bits\ aren't\ part\ of\ the\ bitmap.}}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ To\ address\ this\ without\ sacrificing\ performance,\ we\ need\ to\ zero\ out\ all}}
\DoxyCodeLine{00089\ \ \ \ \ \textcolor{comment}{//\ trailing\ bits\ at\ construction\ time,\ or\ after\ any\ operation\ that\ sets\ all}}
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{comment}{//\ bytes\ in\ bulk.}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a10f3873175933767cd8b51ba3d90d74c}{pad\_extra\_bits\_wit\_zeroes}}()\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bits\_in\_last\_byte\ =\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a02a77b2c5479ae9b1b4ab09d34b502f2}{\_n\_rows}}\ \&\ 7;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (bits\_in\_last\_byte\ >\ 0)\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_a34de88cb8b38c2fafb65f6a21d3da068}{BitmapChangeBits}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get(),\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a02a77b2c5479ae9b1b4ab09d34b502f2}{\_n\_rows}},\ 8\ -\/\ bits\_in\_last\_byte,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \ \ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{comment}{//\ row\ capacity}}
\DoxyCodeLine{00101\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a02a77b2c5479ae9b1b4ab09d34b502f2}{\_n\_rows}};}
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a4dcc99125452ba51d2db37bf7df1189c}{\_n\_bytes}};}
\DoxyCodeLine{00103\ \ \ \ \ std::unique\_ptr<uint8\_t[]>\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}};}
\DoxyCodeLine{00104\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_selection_vector_a1fea40b0361ebcf4d067100e576e0d48}{DISALLOW\_COPY\_AND\_ASSIGN}}(\mbox{\hyperlink{classdoris_1_1_selection_vector}{SelectionVector}});}
\DoxyCodeLine{00105\ \};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_ae04f11563e3d93c265ab08410b7ae83b}{SelectionVector::any\_selected}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ rem\ =\ \mbox{\hyperlink{classdoris_1_1_selection_vector_a4dcc99125452ba51d2db37bf7df1189c}{\_n\_bytes}};}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{const}\ uint32\_t*\ p32\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }uint32\_t*\textcolor{keyword}{>}(\mbox{\hyperlink{classdoris_1_1_selection_vector_a5df630b0751ebcb017904d472e7bc836}{\_bitmap}}.get());}
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keywordflow}{while}\ (rem\ >=\ 4)\ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*p32\ !=\ 0)\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ ++p32;}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ rem\ -\/=\ 4;}
\DoxyCodeLine{00116\ \ \ \ \ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keyword}{const}\ uint8\_t*\ p8\ =\ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }uint8\_t*\textcolor{keyword}{>}(p32);}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{while}\ (rem\ >\ 0)\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*p8\ !=\ 0)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ ++p8;}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ -\/-\/rem;}
\DoxyCodeLine{00125\ \ \ \ \ \}}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \textcolor{comment}{//\ A\ SelectionVectorView\ keeps\ track\ of\ where\ in\ the\ selection\ vector\ a\ given}}
\DoxyCodeLine{00130\ \textcolor{comment}{//\ batch\ will\ start\ from.\ After\ processing\ a\ batch,\ Advance()\ should\ be\ called}}
\DoxyCodeLine{00131\ \textcolor{comment}{//\ and\ the\ view\ will\ move\ forward\ by\ the\ appropriate\ amount.\ In\ this\ way,\ the}}
\DoxyCodeLine{00132\ \textcolor{comment}{//\ underlying\ selection\ vector\ can\ easily\ be\ updated\ batch-\/by-\/batch.}}
\DoxyCodeLine{00133\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_selection_vector_view}{SelectionVectorView}}\ \{}
\DoxyCodeLine{00134\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{comment}{//\ Constructs\ a\ new\ SelectionVectorView.}}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{comment}{//\ The\ 'sel\_vec'\ object\ must\ outlive\ this\ SelectionVectorView.}}
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af578cf496675b215ad878b6738dc5e02}{SelectionVectorView}}(\mbox{\hyperlink{classdoris_1_1_selection_vector}{SelectionVector}}*\ sel\_vec)\ :\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}(sel\_vec),\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}}(0)\ \{\}}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_ab3a4edd5ee802632eb44ecd833a4add6}{advance}}(\textcolor{keywordtype}{size\_t}\ skip)\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ DCHECK\_LE(skip,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}-\/>\mbox{\hyperlink{classdoris_1_1_selection_vector_afc84015c9191fda5443bfc2c4dc10d3b}{nrows}}()\ -\/\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}});}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}}\ +=\ skip;}
\DoxyCodeLine{00142\ \ \ \ \ \}}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af094f41c2232558b57180bc0961f4cad}{set\_bit}}(\textcolor{keywordtype}{size\_t}\ row\_idx)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ DCHECK\_LE(row\_idx,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}-\/>\mbox{\hyperlink{classdoris_1_1_selection_vector_afc84015c9191fda5443bfc2c4dc10d3b}{nrows}}()\ -\/\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}});}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_af07391472df64e38e8f40ece88e7e1a9}{BitmapSet}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}-\/>\mbox{\hyperlink{classdoris_1_1_selection_vector_adce879c142fd06d3d914e73d514ee659}{mutable\_bitmap}}(),\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}}\ +\ row\_idx);}
\DoxyCodeLine{00146\ \ \ \ \ \}}
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_a407c12c645428c33719b03ae39f7e78a}{clear\_bit}}(\textcolor{keywordtype}{size\_t}\ row\_idx)\ \{}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ DCHECK\_LE(row\_idx,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}-\/>\mbox{\hyperlink{classdoris_1_1_selection_vector_afc84015c9191fda5443bfc2c4dc10d3b}{nrows}}()\ -\/\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}});}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_ae850c94174f6f9f74aafca3947ddc8ba}{BitmapClear}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}-\/>\mbox{\hyperlink{classdoris_1_1_selection_vector_adce879c142fd06d3d914e73d514ee659}{mutable\_bitmap}}(),\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}}\ +\ row\_idx);}
\DoxyCodeLine{00150\ \ \ \ \ \}}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_a97f5f951aa5a4b76509a733e42eb0b49}{test\_bit}}(\textcolor{keywordtype}{size\_t}\ row\_idx)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ DCHECK\_LE(row\_idx,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}-\/>\mbox{\hyperlink{classdoris_1_1_selection_vector_afc84015c9191fda5443bfc2c4dc10d3b}{nrows}}()\ -\/\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}});}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacedoris_a263e62fecbb6220afbaa29a102b5b67e}{BitmapTest}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}-\/>\mbox{\hyperlink{classdoris_1_1_selection_vector_a220a23e15aa61b7e1776e1f3ad3be065}{bitmap}}(),\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}}\ +\ row\_idx);}
\DoxyCodeLine{00154\ \ \ \ \ \}}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_acb05b6d5fb54f15c3699ef64bbbaf92c}{clear\_bits}}(\textcolor{keywordtype}{size\_t}\ nrows)\ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ DCHECK\_LE(nrows,\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}-\/>\mbox{\hyperlink{classdoris_1_1_selection_vector_afc84015c9191fda5443bfc2c4dc10d3b}{nrows}}()\ -\/\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}});}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_a34de88cb8b38c2fafb65f6a21d3da068}{BitmapChangeBits}}(\mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}}-\/>\mbox{\hyperlink{classdoris_1_1_selection_vector_adce879c142fd06d3d914e73d514ee659}{mutable\_bitmap}}(),\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}},\ nrows,\ \textcolor{keyword}{false});}
\DoxyCodeLine{00158\ \ \ \ \ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00161\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_selection_vector}{SelectionVector}}*\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_a47aa1287c7f7c8e17bd7905182b812a9}{\_sel\_vec}};}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_selection_vector_view_af279ce1cb04af7fab913f67b956e52d7}{\_row\_offset}};}
\DoxyCodeLine{00163\ \};}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
