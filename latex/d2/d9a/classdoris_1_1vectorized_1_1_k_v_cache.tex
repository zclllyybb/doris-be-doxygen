\hypertarget{classdoris_1_1vectorized_1_1_k_v_cache}{}\doxysection{KVCache\texorpdfstring{$<$}{<} KType \texorpdfstring{$>$}{>} 模板类 参考}
\label{classdoris_1_1vectorized_1_1_k_v_cache}\index{KVCache$<$ KType $>$@{KVCache$<$ KType $>$}}


{\ttfamily \#include $<$format\+\_\+common.\+h$>$}



类 KVCache\texorpdfstring{$<$}{<} KType \texorpdfstring{$>$}{>} 继承关系图\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{d9/dd7/classdoris_1_1vectorized_1_1_k_v_cache__inherit__graph}
\end{center}
\end{figure}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_aacc12be87ab6430291a9c9365897fc87}{KVCache}} ()=default
\item 
\mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_a2c3d047bd5185cab39ecc0f16141d4fe}{$\sim$\+KVCache}} ()
\item 
void \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_a4cf09dcfd0d541967f006b9c22ba6d53}{erase}} (const KType \&key)
\item 
{\footnotesize template$<$class \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $>$ }\\\mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $\ast$ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_aabe9d663b95b5b7b42541bcac3c90609}{get}} (const KType \&key, const std\+::function$<$ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $\ast$()$>$ create\+\_\+func)
\end{DoxyCompactItemize}
\doxysubsection*{Private 类型}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_a0a9c4e6cf4e36b0896afce053b1eb7ea}{Delete\+Fn}} = void($\ast$)(void $\ast$)
\end{DoxyCompactItemize}
\doxysubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
std\+::mutex \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_a888111eeda289ae698cf8e8b92ab9d30}{\+\_\+lock}}
\item 
std\+::unordered\+\_\+map$<$ KType, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_a0a9c4e6cf4e36b0896afce053b1eb7ea}{Delete\+Fn}} $>$ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_acec401daa5b43309c47fce004240bb9f}{\+\_\+delete\+\_\+fn}}
\item 
std\+::unordered\+\_\+map$<$ KType, void $\ast$ $>$ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_a29f41b3a97d69434dc39501aaa2ad69d}{\+\_\+storage}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$typename KType$>$\newline
class doris\+::vectorized\+::\+KVCache$<$ KType $>$}
Key-\/\+Value \mbox{\hyperlink{classdoris_1_1_cache}{Cache}} Helper.

It store a object instance global. User can invoke get method by key and a object creator callback. If there is a instance stored in cache, then it will return a void pointer of it, otherwise, it will invoke creator callback, create a new instance store global, and return it.

The stored objects will be deleted when deconstructing, so user do not need to delete the returned pointer.

User can invoke erase method by key to delete data.


\begin{DoxyTemplParams}{模板参数}
{\em KType} & is the key type \\
\hline
\end{DoxyTemplParams}


\doxysubsection{成员类型定义说明}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_k_v_cache_a0a9c4e6cf4e36b0896afce053b1eb7ea}\label{classdoris_1_1vectorized_1_1_k_v_cache_a0a9c4e6cf4e36b0896afce053b1eb7ea}} 
\index{KVCache$<$ KType $>$@{KVCache$<$ KType $>$}!DeleteFn@{DeleteFn}}
\index{DeleteFn@{DeleteFn}!KVCache$<$ KType $>$@{KVCache$<$ KType $>$}}
\doxysubsubsection{\texorpdfstring{DeleteFn}{DeleteFn}}
{\footnotesize\ttfamily using \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_a0a9c4e6cf4e36b0896afce053b1eb7ea}{Delete\+Fn}} =  void ($\ast$)(void$\ast$)\hspace{0.3cm}{\ttfamily [private]}}



\doxysubsection{构造及析构函数说明}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_k_v_cache_aacc12be87ab6430291a9c9365897fc87}\label{classdoris_1_1vectorized_1_1_k_v_cache_aacc12be87ab6430291a9c9365897fc87}} 
\index{KVCache$<$ KType $>$@{KVCache$<$ KType $>$}!KVCache@{KVCache}}
\index{KVCache@{KVCache}!KVCache$<$ KType $>$@{KVCache$<$ KType $>$}}
\doxysubsubsection{\texorpdfstring{KVCache()}{KVCache()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache}{KVCache}} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_k_v_cache_a2c3d047bd5185cab39ecc0f16141d4fe}\label{classdoris_1_1vectorized_1_1_k_v_cache_a2c3d047bd5185cab39ecc0f16141d4fe}} 
\index{KVCache$<$ KType $>$@{KVCache$<$ KType $>$}!````~KVCache@{$\sim$KVCache}}
\index{````~KVCache@{$\sim$KVCache}!KVCache$<$ KType $>$@{KVCache$<$ KType $>$}}
\doxysubsubsection{\texorpdfstring{$\sim$KVCache()}{~KVCache()}}
{\footnotesize\ttfamily $\sim$\mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache}{KVCache}} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



\doxysubsection{成员函数说明}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_k_v_cache_a4cf09dcfd0d541967f006b9c22ba6d53}\label{classdoris_1_1vectorized_1_1_k_v_cache_a4cf09dcfd0d541967f006b9c22ba6d53}} 
\index{KVCache$<$ KType $>$@{KVCache$<$ KType $>$}!erase@{erase}}
\index{erase@{erase}!KVCache$<$ KType $>$@{KVCache$<$ KType $>$}}
\doxysubsubsection{\texorpdfstring{erase()}{erase()}}
{\footnotesize\ttfamily void erase (\begin{DoxyParamCaption}\item[{const KType \&}]{key }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_k_v_cache_aabe9d663b95b5b7b42541bcac3c90609}\label{classdoris_1_1vectorized_1_1_k_v_cache_aabe9d663b95b5b7b42541bcac3c90609}} 
\index{KVCache$<$ KType $>$@{KVCache$<$ KType $>$}!get@{get}}
\index{get@{get}!KVCache$<$ KType $>$@{KVCache$<$ KType $>$}}
\doxysubsubsection{\texorpdfstring{get()}{get()}}
{\footnotesize\ttfamily \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $\ast$ get (\begin{DoxyParamCaption}\item[{const KType \&}]{key,  }\item[{const std\+::function$<$ \mbox{\hyperlink{exp_8c_a0acb682b8260ab1c60b918599864e2e5}{T}} $\ast$()$>$}]{create\+\_\+func }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d2/d9a/classdoris_1_1vectorized_1_1_k_v_cache_aabe9d663b95b5b7b42541bcac3c90609_icgraph}
\end{center}
\end{figure}


\doxysubsection{类成员变量说明}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_k_v_cache_a888111eeda289ae698cf8e8b92ab9d30}\label{classdoris_1_1vectorized_1_1_k_v_cache_a888111eeda289ae698cf8e8b92ab9d30}} 
\index{KVCache$<$ KType $>$@{KVCache$<$ KType $>$}!\_lock@{\_lock}}
\index{\_lock@{\_lock}!KVCache$<$ KType $>$@{KVCache$<$ KType $>$}}
\doxysubsubsection{\texorpdfstring{\_lock}{\_lock}}
{\footnotesize\ttfamily std\+::mutex \+\_\+lock\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_k_v_cache_acec401daa5b43309c47fce004240bb9f}\label{classdoris_1_1vectorized_1_1_k_v_cache_acec401daa5b43309c47fce004240bb9f}} 
\index{KVCache$<$ KType $>$@{KVCache$<$ KType $>$}!\_delete\_fn@{\_delete\_fn}}
\index{\_delete\_fn@{\_delete\_fn}!KVCache$<$ KType $>$@{KVCache$<$ KType $>$}}
\doxysubsubsection{\texorpdfstring{\_delete\_fn}{\_delete\_fn}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$KType, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_k_v_cache_a0a9c4e6cf4e36b0896afce053b1eb7ea}{Delete\+Fn}}$>$ \+\_\+delete\+\_\+fn\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_k_v_cache_a29f41b3a97d69434dc39501aaa2ad69d}\label{classdoris_1_1vectorized_1_1_k_v_cache_a29f41b3a97d69434dc39501aaa2ad69d}} 
\index{KVCache$<$ KType $>$@{KVCache$<$ KType $>$}!\_storage@{\_storage}}
\index{\_storage@{\_storage}!KVCache$<$ KType $>$@{KVCache$<$ KType $>$}}
\doxysubsubsection{\texorpdfstring{\_storage}{\_storage}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$KType, void$\ast$$>$ \+\_\+storage\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
/\+Users/dabowang/doris/be/src/vec/exec/format/\mbox{\hyperlink{format__common_8h}{format\+\_\+common.\+h}}\end{DoxyCompactItemize}
