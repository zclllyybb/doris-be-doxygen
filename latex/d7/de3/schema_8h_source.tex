\hypertarget{schema_8h_source}{}\doxysection{schema.\+h}
\label{schema_8h_source}\index{/Users/dabowang/doris/be/src/olap/schema.h@{/Users/dabowang/doris/be/src/olap/schema.h}}
\mbox{\hyperlink{schema_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{consts_8h}{common/consts.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{olap_2field_8h}{olap/field.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{row__cursor__cell_8h}{olap/row\_cursor\_cell.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{tablet__schema_8h}{olap/tablet\_schema.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{olap_2types_8h}{olap/types.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{descriptors_8h}{runtime/descriptors.h}}"{}}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{//\ The\ class\ is\ used\ to\ represent\ row's\ format\ in\ memory.\ \ Each\ row\ contains}}
\DoxyCodeLine{00032\ \textcolor{comment}{//\ multiple\ columns,\ some\ of\ which\ are\ key-\/columns\ (the\ rest\ are\ value-\/columns).}}
\DoxyCodeLine{00033\ \textcolor{comment}{//\ NOTE:\ If\ both\ key-\/columns\ and\ value-\/columns\ exist,\ then\ the\ key-\/columns}}
\DoxyCodeLine{00034\ \textcolor{comment}{//\ must\ be\ placed\ before\ value-\/columns.}}
\DoxyCodeLine{00035\ \textcolor{comment}{//}}
\DoxyCodeLine{00036\ \textcolor{comment}{//\ To\ compare\ two\ rows\ whose\ schemas\ are\ different,\ but\ they\ are\ from\ the\ same\ origin}}
\DoxyCodeLine{00037\ \textcolor{comment}{//\ we\ store\ all\ column\ schema\ maybe\ accessed\ here.\ And\ default\ access\ through\ column\ id}}
\DoxyCodeLine{00038\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\ \{}
\DoxyCodeLine{00039\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a9e1d30f938764fb8e0d302459295e24c}{Schema}}(\mbox{\hyperlink{namespacedoris_a9216ba4fd9b418b8808bfb91a407ea20}{TabletSchemaSPtr}}\ tablet\_schema)\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_a98e2d9685769a3ebb2c0c9600a4c77b2}{num\_columns}}\ =\ tablet\_schema-\/>num\_columns();}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ignore\ this\ column}}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tablet\_schema-\/>columns().back().name()\ ==\ \mbox{\hyperlink{namespacedoris_1_1_be_consts_a26f34468c0e9792680fbd1feff1c5247}{BeConsts::ROW\_STORE\_COL}})\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/\mbox{\hyperlink{classdoris_1_1_schema_a98e2d9685769a3ebb2c0c9600a4c77b2}{num\_columns}};}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ std::vector<ColumnId>\ col\_ids(\mbox{\hyperlink{classdoris_1_1_schema_a98e2d9685769a3ebb2c0c9600a4c77b2}{num\_columns}});}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}}.resize(\mbox{\hyperlink{classdoris_1_1_schema_a98e2d9685769a3ebb2c0c9600a4c77b2}{num\_columns}});}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ std::vector<TabletColumn>\ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}};}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}.reserve(\mbox{\hyperlink{classdoris_1_1_schema_a98e2d9685769a3ebb2c0c9600a4c77b2}{num\_columns}});}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}}\ =\ 0;}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint32\_t\ cid\ =\ 0;\ cid\ <\ \mbox{\hyperlink{classdoris_1_1_schema_a98e2d9685769a3ebb2c0c9600a4c77b2}{num\_columns}};\ ++cid)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ col\_ids[cid]\ =\ cid;}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_tablet_column}{TabletColumn}}\&\ \mbox{\hyperlink{classdoris_1_1_schema_ad168f43170837b2bfc3aaec369b076eb}{column}}\ =\ tablet\_schema-\/>column(cid);}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}}[cid]\ =\ \mbox{\hyperlink{classdoris_1_1_schema_ad168f43170837b2bfc3aaec369b076eb}{column}}.\mbox{\hyperlink{classdoris_1_1_field_a35f8b8faec87048cd5072a673e911fd4}{unique\_id}}();}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1_schema_ad168f43170837b2bfc3aaec369b076eb}{column}}.is\_key())\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}};}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1_schema_ad168f43170837b2bfc3aaec369b076eb}{column}}.\mbox{\hyperlink{classdoris_1_1_field_a24dcbf29c0d6cd766009a182a6484e3b}{name}}()\ ==\ \mbox{\hyperlink{namespacedoris_1_1_be_consts_aaaa137594d65ab6eb72bd2c0d49c5dff}{BeConsts::ROWID\_COL}})\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a9762f0aed5b1744514da688bcde373bc}{\_rowid\_col\_idx}}\ =\ cid;}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1_schema_ad168f43170837b2bfc3aaec369b076eb}{column}}.\mbox{\hyperlink{classdoris_1_1_field_a24dcbf29c0d6cd766009a182a6484e3b}{name}}()\ ==\ \mbox{\hyperlink{namespacedoris_ab1012dab7f1ab0df3da576c6789f5384}{VERSION\_COL}})\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a2876389d1a57bfb5d015316a7dcc407f}{\_version\_col\_idx}}\ =\ cid;}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}.push\_back(\mbox{\hyperlink{classdoris_1_1_schema_ad168f43170837b2bfc3aaec369b076eb}{column}});}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a44a5376c7cfc8fdf1b5448e7a64c765d}{\_delete\_sign\_idx}}\ =\ tablet\_schema-\/>delete\_sign\_idx();}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tablet\_schema-\/>has\_sequence\_col())\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aabc459c8455b567ffe3067c45ea4856f}{\_has\_sequence\_col}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a34ef225e80f30801b463d530e93c7d2f}{\_init}}(\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}},\ col\_ids,\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}});}
\DoxyCodeLine{00072\ \ \ \ \ \}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ All\ the\ columns\ of\ one\ table\ may\ exist\ in\ the\ columns\ param,\ but\ col\_ids\ is\ only\ a\ subset.}}
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a622d617ef1f84308dd04b3053dd03d42}{Schema}}(\textcolor{keyword}{const}\ std::vector<TabletColumn>\&\ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}},\ \textcolor{keyword}{const}\ std::vector<ColumnId>\&\ col\_ids)\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}}\ =\ 0;}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}}.resize(\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}.size());}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}.size();\ ++i)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}[i].is\_key())\ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++\mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}};}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}[i].\mbox{\hyperlink{namespacedoris_a8ccf841cb59e451791bcb2e1ac4f1edc}{name}}()\ ==\ \mbox{\hyperlink{namespacedoris_a8f34d92c161d05a97a2b45030dd35cf4}{DELETE\_SIGN}})\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a44a5376c7cfc8fdf1b5448e7a64c765d}{\_delete\_sign\_idx}}\ =\ i;}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}[i].\mbox{\hyperlink{namespacedoris_a8ccf841cb59e451791bcb2e1ac4f1edc}{name}}()\ ==\ \mbox{\hyperlink{namespacedoris_1_1_be_consts_aaaa137594d65ab6eb72bd2c0d49c5dff}{BeConsts::ROWID\_COL}})\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a9762f0aed5b1744514da688bcde373bc}{\_rowid\_col\_idx}}\ =\ i;}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}[i].\mbox{\hyperlink{namespacedoris_a8ccf841cb59e451791bcb2e1ac4f1edc}{name}}()\ ==\ \mbox{\hyperlink{namespacedoris_ab1012dab7f1ab0df3da576c6789f5384}{VERSION\_COL}})\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a2876389d1a57bfb5d015316a7dcc407f}{\_version\_col\_idx}}\ =\ i;}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}}[i]\ =\ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}[i].unique\_id();}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a34ef225e80f30801b463d530e93c7d2f}{\_init}}(\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}},\ col\_ids,\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}});}
\DoxyCodeLine{00094\ \ \ \ \ \}}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{//\ Only\ for\ UT}}
\DoxyCodeLine{00097\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_ab82310e24bc991b45e4e5f53c461d818}{Schema}}(\textcolor{keyword}{const}\ std::vector<TabletColumn>\&\ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}},\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}})\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ std::vector<ColumnId>\ col\_ids(\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}.size());}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}}.resize(\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}.size());}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint32\_t\ cid\ =\ 0;\ cid\ <\ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}.size();\ ++cid)\ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ col\_ids[cid]\ =\ cid;}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}}[cid]\ =\ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}[cid].unique\_id();}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a34ef225e80f30801b463d530e93c7d2f}{\_init}}(\mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}},\ col\_ids,\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}});}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a993511ab07bdc547172cd8551e02774f}{Schema}}(\textcolor{keyword}{const}\ std::vector<const\ Field*>\&\ cols,\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}})\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ std::vector<ColumnId>\ col\_ids(cols.size());}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}}.resize(cols.size());}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint32\_t\ cid\ =\ 0;\ cid\ <\ cols.size();\ ++cid)\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ col\_ids[cid]\ =\ cid;}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cols.at(cid)-\/>name()\ ==\ \mbox{\hyperlink{namespacedoris_a8f34d92c161d05a97a2b45030dd35cf4}{DELETE\_SIGN}})\ \{}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a44a5376c7cfc8fdf1b5448e7a64c765d}{\_delete\_sign\_idx}}\ =\ cid;}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (cols.at(cid)-\/>name()\ ==\ \mbox{\hyperlink{namespacedoris_ab1012dab7f1ab0df3da576c6789f5384}{VERSION\_COL}})\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a2876389d1a57bfb5d015316a7dcc407f}{\_version\_col\_idx}}\ =\ cid;}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}}[cid]\ =\ cols[cid]-\/>unique\_id();}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_a34ef225e80f30801b463d530e93c7d2f}{\_init}}(cols,\ col\_ids,\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}});}
\DoxyCodeLine{00123\ \ \ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\&);}
\DoxyCodeLine{00126\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\&\ \mbox{\hyperlink{classdoris_1_1_schema_a5d403d289845135bb177c713ce3d9a5a}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\&\ other);}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_schema_aa04f3e8afe33db69d59242aff34ddefe}{\string~Schema}}();}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{vectorized::DataTypePtr}}\ \mbox{\hyperlink{classdoris_1_1_schema_a23b7f2a74027fb7721bfd8a7bfd0eb6b}{get\_data\_type\_ptr}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_field}{Field}}\&\ field);}
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_c_o_w_adfc3e84da89b27b9efa22c1e0691fa87}{vectorized::IColumn::MutablePtr}}\ \mbox{\hyperlink{classdoris_1_1_schema_a8dcf00a6b1f7055d9f9fe70d7eebea6e}{get\_column\_by\_field}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_field}{Field}}\&\ field);}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{class_c_o_w_adfc3e84da89b27b9efa22c1e0691fa87}{vectorized::IColumn::MutablePtr}}\ \mbox{\hyperlink{classdoris_1_1_schema_a40f657bcd518b5274f4087b6b0c83b82}{get\_predicate\_column\_ptr}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_field}{Field}}\&\ field,}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespacedoris_a678aadae72e7347a5756e370a2978a15}{ReaderType}}\ reader\_type);}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<Field*>\&\ \mbox{\hyperlink{classdoris_1_1_schema_a3f96b9cc51a6a0f3ae191d74cf7126b4}{columns}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a5413dc8facb936dd4e2b5e72f1ecad8b}{\_cols}};\ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_field}{Field}}*\ \mbox{\hyperlink{classdoris_1_1_schema_ad168f43170837b2bfc3aaec369b076eb}{column}}(\mbox{\hyperlink{namespacedoris_a80282f25dc0e68897f1b17e567afc5b6}{ColumnId}}\ cid)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a5413dc8facb936dd4e2b5e72f1ecad8b}{\_cols}}[cid];\ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_field}{Field}}*\ \mbox{\hyperlink{classdoris_1_1_schema_ac92a520b18291e336c2317d9504b2083}{mutable\_column}}(\mbox{\hyperlink{namespacedoris_a80282f25dc0e68897f1b17e567afc5b6}{ColumnId}}\ cid)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a5413dc8facb936dd4e2b5e72f1ecad8b}{\_cols}}[cid];\ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a89dbce910f49ee2231a3ece40e7f60e9}{\_num\_key\_columns}};\ \}}
\DoxyCodeLine{00144\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_a2a7d14ce609df52e27ab789fef6d19b2}{schema\_size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_aeebf3d05f83efc32c2ae4447c9668fc4}{\_schema\_size}};\ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_a80b68933024968f03828e753703ae764}{column\_offset}}(\mbox{\hyperlink{namespacedoris_a80282f25dc0e68897f1b17e567afc5b6}{ColumnId}}\ cid)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a30795fcee45b1cc8dd09f988ff25121b}{\_col\_offsets}}[cid];\ \}}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_aa8f537459efef8ba170b582401b65a9b}{column\_size}}(\mbox{\hyperlink{namespacedoris_a80282f25dc0e68897f1b17e567afc5b6}{ColumnId}}\ cid)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a5413dc8facb936dd4e2b5e72f1ecad8b}{\_cols}}[cid]-\/>size();\ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_schema_ae654188d1910363b99ed6336c0e56bf8}{is\_null}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ row,\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{column__vector_8cpp_a9d57133bec333a3eac9e3c1693a5ee38}{index}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\textcolor{keywordtype}{bool}*\textcolor{keyword}{>}(row\ +\ \mbox{\hyperlink{classdoris_1_1_schema_a30795fcee45b1cc8dd09f988ff25121b}{\_col\_offsets}}[\mbox{\hyperlink{column__vector_8cpp_a9d57133bec333a3eac9e3c1693a5ee38}{index}}]);}
\DoxyCodeLine{00152\ \ \ \ \ \}}
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_schema_ae7c2745f3d43d50d11af1c3bae6a90ae}{set\_is\_null}}(\textcolor{keywordtype}{void}*\ row,\ uint32\_t\ cid,\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_schema_ae654188d1910363b99ed6336c0e56bf8}{is\_null}})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ *\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{bool}*\textcolor{keyword}{>}((\textcolor{keywordtype}{char}*)row\ +\ \mbox{\hyperlink{classdoris_1_1_schema_a30795fcee45b1cc8dd09f988ff25121b}{\_col\_offsets}}[cid])\ =\ \mbox{\hyperlink{classdoris_1_1_schema_ae654188d1910363b99ed6336c0e56bf8}{is\_null}};}
\DoxyCodeLine{00155\ \ \ \ \ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_a98e2d9685769a3ebb2c0c9600a4c77b2}{num\_columns}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a5413dc8facb936dd4e2b5e72f1ecad8b}{\_cols}}.size();\ \}}
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_a8bbb8fea829dada13d810548a5b5eaaa}{num\_column\_ids}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_abcc7bcb321e2e8245990236d68cc1a2a}{\_col\_ids}}.size();\ \}}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<ColumnId>\&\ \mbox{\hyperlink{classdoris_1_1_schema_a2527816339432972f757d3d2f61bf63d}{column\_ids}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_abcc7bcb321e2e8245990236d68cc1a2a}{\_col\_ids}};\ \}}
\DoxyCodeLine{00160\ \ \ \ \ \textcolor{keyword}{const}\ std::vector<int32\_t>\&\ \mbox{\hyperlink{classdoris_1_1_schema_a90af8bcf1dad430ae32d44e58580fa31}{unique\_ids}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}};\ \}}
\DoxyCodeLine{00161\ \ \ \ \ \mbox{\hyperlink{namespacedoris_a80282f25dc0e68897f1b17e567afc5b6}{ColumnId}}\ \mbox{\hyperlink{classdoris_1_1_schema_a7d68cea7a9389fb9fa7585bfb5ad2086}{column\_id}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{column__vector_8cpp_a9d57133bec333a3eac9e3c1693a5ee38}{index}})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_abcc7bcb321e2e8245990236d68cc1a2a}{\_col\_ids}}[\mbox{\hyperlink{column__vector_8cpp_a9d57133bec333a3eac9e3c1693a5ee38}{index}}];\ \}}
\DoxyCodeLine{00162\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1_schema_a01abb22ad6fbfdcd49f98e30fc601ce7}{unique\_id}}(\textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{column__vector_8cpp_a9d57133bec333a3eac9e3c1693a5ee38}{index}})\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}}[\mbox{\hyperlink{column__vector_8cpp_a9d57133bec333a3eac9e3c1693a5ee38}{index}}];\ \}}
\DoxyCodeLine{00163\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1_schema_a8540f276b6177081f825649f7a95f7d7}{delete\_sign\_idx}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a44a5376c7cfc8fdf1b5448e7a64c765d}{\_delete\_sign\_idx}};\ \}}
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_schema_a55d884401a64ebd2a513a56b01f5a7bd}{has\_sequence\_col}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_aabc459c8455b567ffe3067c45ea4856f}{\_has\_sequence\_col}};\ \}}
\DoxyCodeLine{00165\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1_schema_a3a78b94447f6a44b3ebb00d78295b8a5}{rowid\_col\_idx}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a9762f0aed5b1744514da688bcde373bc}{\_rowid\_col\_idx}};\ \}}
\DoxyCodeLine{00166\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1_schema_a0a9e49c13375f8268024948013eeefbd}{version\_col\_idx}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_schema_a2876389d1a57bfb5d015316a7dcc407f}{\_version\_col\_idx}};\ \}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_schema_a34ef225e80f30801b463d530e93c7d2f}{\_init}}(\textcolor{keyword}{const}\ std::vector<TabletColumn>\&\ cols,\ \textcolor{keyword}{const}\ std::vector<ColumnId>\&\ col\_ids,}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}});}
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_schema_a34ef225e80f30801b463d530e93c7d2f}{\_init}}(\textcolor{keyword}{const}\ std::vector<const\ Field*>\&\ cols,\ \textcolor{keyword}{const}\ std::vector<ColumnId>\&\ col\_ids,}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_aa61c8f3d8ca82f135c0ef9a8f6193eae}{num\_key\_columns}});}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1_schema_acec2242029e65248c3cf522cdc232274}{\_copy\_from}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1_schema}{Schema}}\&\ other);}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{comment}{//\ NOTE:\ The\ ColumnId\ here\ represents\ the\ sequential\ index\ number\ (starting\ from\ 0)\ of}}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{comment}{//\ a\ column\ in\ current\ row,\ not\ the\ unique\ id-\/identifier\ of\ each\ column}}
\DoxyCodeLine{00178\ \ \ \ \ std::vector<ColumnId>\ \mbox{\hyperlink{classdoris_1_1_schema_abcc7bcb321e2e8245990236d68cc1a2a}{\_col\_ids}};}
\DoxyCodeLine{00179\ \ \ \ \ std::vector<int32\_t>\ \mbox{\hyperlink{classdoris_1_1_schema_aea0cf56fcfc4d8eb1dc23a7c065013cf}{\_unique\_ids}};}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{comment}{//\ NOTE:\ Both\ \_cols[cid]\ and\ \_col\_offsets[cid]\ can\ only\ be\ accessed\ when\ the\ cid\ is}}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{comment}{//\ contained\ in\ \_col\_ids}}
\DoxyCodeLine{00182\ \ \ \ \ std::vector<Field*>\ \mbox{\hyperlink{classdoris_1_1_schema_a5413dc8facb936dd4e2b5e72f1ecad8b}{\_cols}};}
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{comment}{//\ The\ value\ of\ each\ item\ indicates\ the\ starting\ offset\ of\ the\ corresponding\ column\ in}}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{comment}{//\ current\ row.\ e.g.\ \_col\_offsets[idx]\ is\ the\ offset\ of\ \_cols[idx]\ (idx\ must\ in\ \_col\_ids)}}
\DoxyCodeLine{00185\ \ \ \ \ std::vector<size\_t>\ \mbox{\hyperlink{classdoris_1_1_schema_a30795fcee45b1cc8dd09f988ff25121b}{\_col\_offsets}};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_a89dbce910f49ee2231a3ece40e7f60e9}{\_num\_key\_columns}};}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1_schema_aeebf3d05f83efc32c2ae4447c9668fc4}{\_schema\_size}};}
\DoxyCodeLine{00189\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1_schema_a44a5376c7cfc8fdf1b5448e7a64c765d}{\_delete\_sign\_idx}}\ =\ -\/1;}
\DoxyCodeLine{00190\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1_schema_aabc459c8455b567ffe3067c45ea4856f}{\_has\_sequence\_col}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00191\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1_schema_a9762f0aed5b1744514da688bcde373bc}{\_rowid\_col\_idx}}\ =\ -\/1;}
\DoxyCodeLine{00192\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1_schema_a2876389d1a57bfb5d015316a7dcc407f}{\_version\_col\_idx}}\ =\ -\/1;}
\DoxyCodeLine{00193\ \};}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
