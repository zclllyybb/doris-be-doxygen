\hypertarget{aggregate__function__window_8cpp}{}\doxysection{/\+Users/dabowang/be\+\_\+all/vec/aggregate\+\_\+functions/aggregate\+\_\+function\+\_\+window.cpp 文件参考}
\label{aggregate__function__window_8cpp}\index{/Users/dabowang/be\_all/vec/aggregate\_functions/aggregate\_function\_window.cpp@{/Users/dabowang/be\_all/vec/aggregate\_functions/aggregate\_function\_window.cpp}}
{\ttfamily \#include \char`\"{}vec/aggregate\+\_\+functions/aggregate\+\_\+function\+\_\+window.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}common/logging.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}vec/aggregate\+\_\+functions/aggregate\+\_\+function\+\_\+simple\+\_\+factory.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}vec/utils/template\+\_\+helpers.\+hpp\char`\"{}}\newline
aggregate\+\_\+function\+\_\+window.\+cpp 的引用(Include)关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d8/d06/aggregate__function__window_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespacedoris}{doris}}
\begin{DoxyCompactList}\small\item\em Utilities for collecting timings. \end{DoxyCompactList}\item 
namespace \mbox{\hyperlink{namespacedoris_1_1vectorized}{doris\+::vectorized}}
\begin{DoxyCompactList}\small\item\em Common helper methods for implementation of different columns. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{aggregate__function__window_8cpp_ad70cacff0398f52fd2d84da6cf7b6db1}{DISPATCH}}(TYPE,  COLUMN\+\_\+\+TYPE)
\item 
\#define \mbox{\hyperlink{aggregate__function__window_8cpp_a93193db58b3137d223e4210c002b3355}{CREATE\+\_\+\+WINDOW\+\_\+\+FUNCTION\+\_\+\+WITH\+\_\+\+NAME\+\_\+\+AND\+\_\+\+DATA}}(CREATE\+\_\+\+FUNCTION\+\_\+\+NAME,  FUNCTION\+\_\+\+DATA,  FUNCTION\+\_\+\+IMPL)
\end{DoxyCompactItemize}
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
Aggregate\+Function\+Ptr \mbox{\hyperlink{namespacedoris_1_1vectorized_a55b8852e513898a2b12aba6a874c0815}{create\+\_\+aggregate\+\_\+function\+\_\+dense\+\_\+rank}} (const std\+::string \&\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}}, const Data\+Types \&argument\+\_\+types, const Array \&parameters, const bool result\+\_\+is\+\_\+nullable)
\item 
Aggregate\+Function\+Ptr \mbox{\hyperlink{namespacedoris_1_1vectorized_a4774a7dd12c728e3bc17e81e159f1d4c}{create\+\_\+aggregate\+\_\+function\+\_\+rank}} (const std\+::string \&\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}}, const Data\+Types \&argument\+\_\+types, const Array \&parameters, const bool result\+\_\+is\+\_\+nullable)
\item 
Aggregate\+Function\+Ptr \mbox{\hyperlink{namespacedoris_1_1vectorized_a0fa39b44479dcc3acdf974a6a2dae622}{create\+\_\+aggregate\+\_\+function\+\_\+row\+\_\+number}} (const std\+::string \&\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}}, const Data\+Types \&argument\+\_\+types, const Array \&parameters, const bool result\+\_\+is\+\_\+nullable)
\item 
Aggregate\+Function\+Ptr \mbox{\hyperlink{namespacedoris_1_1vectorized_afe324aff14449a03c11cade477bcb4ed}{create\+\_\+aggregate\+\_\+function\+\_\+ntile}} (const std\+::string \&\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}}, const Data\+Types \&argument\+\_\+types, const Array \&parameters, const bool result\+\_\+is\+\_\+nullable)
\item 
{\footnotesize template$<$template$<$ typename $>$ class Aggregate\+Function\+Template, template$<$ typename Col\+Vec\+Type, bool, bool $>$ class Data, template$<$ typename $>$ class Impl, bool result\+\_\+is\+\_\+nullable, bool arg\+\_\+is\+\_\+nullable$>$ }\\static IAggregate\+Function $\ast$ \mbox{\hyperlink{namespacedoris_1_1vectorized_aba5e4935def95d840f428dfa0e804e9e}{create\+\_\+function\+\_\+lead\+\_\+lag\+\_\+first\+\_\+last}} (const String \&\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}}, const Data\+Types \&argument\+\_\+types, const Array \&parameters)
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_a98823b7dd01315c153627334cb57342b}{CREATE\+\_\+\+WINDOW\+\_\+\+FUNCTION\+\_\+\+WITH\+\_\+\+NAME\+\_\+\+AND\+\_\+\+DATA}} (create\+\_\+aggregate\+\_\+function\+\_\+window\+\_\+lag, Lead\+Lag\+Data, Window\+Function\+Lag\+Impl)
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_ada7ca50afe82bcdefb413e92806b9edd}{CREATE\+\_\+\+WINDOW\+\_\+\+FUNCTION\+\_\+\+WITH\+\_\+\+NAME\+\_\+\+AND\+\_\+\+DATA}} (create\+\_\+aggregate\+\_\+function\+\_\+window\+\_\+lead, Lead\+Lag\+Data, Window\+Function\+Lead\+Impl)
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_a924543f7ed8908d3751d3df386ca6180}{CREATE\+\_\+\+WINDOW\+\_\+\+FUNCTION\+\_\+\+WITH\+\_\+\+NAME\+\_\+\+AND\+\_\+\+DATA}} (create\+\_\+aggregate\+\_\+function\+\_\+window\+\_\+first, First\+Last\+Data, Window\+Function\+First\+Impl)
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_aab6770185bf5dbf4ba80ae1905878892}{CREATE\+\_\+\+WINDOW\+\_\+\+FUNCTION\+\_\+\+WITH\+\_\+\+NAME\+\_\+\+AND\+\_\+\+DATA}} (create\+\_\+aggregate\+\_\+function\+\_\+window\+\_\+last, First\+Last\+Data, Window\+Function\+Last\+Impl)
\item 
void \mbox{\hyperlink{namespacedoris_1_1vectorized_ace634242f64e73fba49055aef946d898}{register\+\_\+aggregate\+\_\+function\+\_\+window\+\_\+rank}} (Aggregate\+Function\+Simple\+Factory \&factory)
\item 
void \mbox{\hyperlink{namespacedoris_1_1vectorized_a4eec0b59fe173a7ce7269d47330c206c}{register\+\_\+aggregate\+\_\+function\+\_\+window\+\_\+lead\+\_\+lag\+\_\+first\+\_\+last}} (Aggregate\+Function\+Simple\+Factory \&factory)
\end{DoxyCompactItemize}


\doxysubsection{宏定义说明}
\mbox{\Hypertarget{aggregate__function__window_8cpp_ad70cacff0398f52fd2d84da6cf7b6db1}\label{aggregate__function__window_8cpp_ad70cacff0398f52fd2d84da6cf7b6db1}} 
\index{aggregate\_function\_window.cpp@{aggregate\_function\_window.cpp}!DISPATCH@{DISPATCH}}
\index{DISPATCH@{DISPATCH}!aggregate\_function\_window.cpp@{aggregate\_function\_window.cpp}}
\doxysubsubsection{\texorpdfstring{DISPATCH}{DISPATCH}}
{\footnotesize\ttfamily \#define DISPATCH(\begin{DoxyParamCaption}\item[{}]{TYPE,  }\item[{}]{COLUMN\+\_\+\+TYPE }\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (which.idx\ ==\ TypeIndex::TYPE)\ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ AggregateFunctionTemplate<\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Impl<Data<COLUMN\_TYPE,\ result\_is\_nullable,\ arg\_is\_nullable>>>(argument\_types);}

\end{DoxyCode}
\mbox{\Hypertarget{aggregate__function__window_8cpp_a93193db58b3137d223e4210c002b3355}\label{aggregate__function__window_8cpp_a93193db58b3137d223e4210c002b3355}} 
\index{aggregate\_function\_window.cpp@{aggregate\_function\_window.cpp}!CREATE\_WINDOW\_FUNCTION\_WITH\_NAME\_AND\_DATA@{CREATE\_WINDOW\_FUNCTION\_WITH\_NAME\_AND\_DATA}}
\index{CREATE\_WINDOW\_FUNCTION\_WITH\_NAME\_AND\_DATA@{CREATE\_WINDOW\_FUNCTION\_WITH\_NAME\_AND\_DATA}!aggregate\_function\_window.cpp@{aggregate\_function\_window.cpp}}
\doxysubsubsection{\texorpdfstring{CREATE\_WINDOW\_FUNCTION\_WITH\_NAME\_AND\_DATA}{CREATE\_WINDOW\_FUNCTION\_WITH\_NAME\_AND\_DATA}}
{\footnotesize\ttfamily \#define CREATE\+\_\+\+WINDOW\+\_\+\+FUNCTION\+\_\+\+WITH\+\_\+\+NAME\+\_\+\+AND\+\_\+\+DATA(\begin{DoxyParamCaption}\item[{}]{CREATE\+\_\+\+FUNCTION\+\_\+\+NAME,  }\item[{}]{FUNCTION\+\_\+\+DATA,  }\item[{}]{FUNCTION\+\_\+\+IMPL }\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ AggregateFunctionPtr\ CREATE\_FUNCTION\_NAME(\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ \mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}},\ \textcolor{keyword}{const}\ DataTypes\&\ argument\_types,\ \textcolor{keyword}{const}\ Array\&\ parameters,\ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ result\_is\_nullable)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ arg\_is\_nullable\ =\ argument\_types[0]-\/>is\_nullable();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ AggregateFunctionPtr\ res\ =\ \textcolor{keyword}{nullptr};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ std::visit(\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{auto}\ result\_is\_nullable,\ \textcolor{keyword}{auto}\ arg\_is\_nullable)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ AggregateFunctionPtr(\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ create\_function\_lead\_lag\_first\_last<WindowFunctionData,\ FUNCTION\_DATA,\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FUNCTION\_IMPL,\ result\_is\_nullable,\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arg\_is\_nullable>(\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}},\ argument\_types,\ parameters));\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ make\_bool\_variant(result\_is\_nullable),\ make\_bool\_variant(arg\_is\_nullable));\ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (!res)\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ LOG(WARNING)\ <<\ \textcolor{stringliteral}{"{}\ failed\ in\ \ create\_aggregate\_function\_"{}}\ <<\ \mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\ and\ type\ is:\ "{}}\ <<\ argument\_types[0]-\/>get\_name();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ res;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}}

\end{DoxyCode}
