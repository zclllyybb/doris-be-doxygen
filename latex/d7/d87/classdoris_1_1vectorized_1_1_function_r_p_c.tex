\hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c}{}\doxysection{Function\+RPC类 参考}
\label{classdoris_1_1vectorized_1_1_function_r_p_c}\index{FunctionRPC@{FunctionRPC}}


{\ttfamily \#include $<$function\+\_\+rpc.\+h$>$}



类 Function\+RPC 继承关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=160pt]{d0/d5c/classdoris_1_1vectorized_1_1_function_r_p_c__inherit__graph}
\end{center}
\end{figure}


Function\+RPC 的协作图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=160pt]{d6/d7a/classdoris_1_1vectorized_1_1_function_r_p_c__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_aaf7cfa43ac6dcfb0c99bf55585b84eb0}{Function\+RPC}} (const TFunction \&fn, const \mbox{\hyperlink{namespacedoris_1_1vectorized_a8af1a73e445f52cef52b8d3c12fed85e}{Data\+Types}} \&argument\+\_\+types, const \mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{Data\+Type\+Ptr}} \&return\+\_\+type)
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_a5573b97b9e5129f61d289e037d7e806c}{String}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_ab9010f82586f714358e9fa84c4af7c53}{get\+\_\+name}} () const override
\begin{DoxyCompactList}\small\item\em Get the main function name. \end{DoxyCompactList}\item 
const \mbox{\hyperlink{namespacedoris_1_1vectorized_a8af1a73e445f52cef52b8d3c12fed85e}{Data\+Types}} \& \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a13e00db9d26a64eaa04f4d0f556b2823}{get\+\_\+argument\+\_\+types}} () const override
\item 
const \mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{Data\+Type\+Ptr}} \& \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a7354b1b4daf52fa4be48cd81586b9ef4}{get\+\_\+return\+\_\+type}} () const override
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_a91a73268bfa02cf9473b873ea92e7e5a}{Prepared\+Function\+Ptr}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a4f7f078bdfe4c61d736c515feb03ed3f}{prepare}} (\mbox{\hyperlink{classdoris__udf_1_1_function_context}{Function\+Context}} $\ast$context, const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}} \&sample\+\_\+block, const \mbox{\hyperlink{namespacedoris_1_1vectorized_a69df8cb2bb6bcd07aa3b387782deb8f1}{Column\+Numbers}} \&arguments, size\+\_\+t result) const override
\item 
\mbox{\hyperlink{classdoris_1_1_status}{Status}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a6bcc226ce708cc69a2b327b26b63e505}{prepare}} (\mbox{\hyperlink{classdoris__udf_1_1_function_context}{Function\+Context}} $\ast$context, \mbox{\hyperlink{classdoris__udf_1_1_function_context_a3a7d67806e854776e57e0c17010049c8}{Function\+Context\+::\+Function\+State\+Scope}} scope) override
\item 
\mbox{\hyperlink{classdoris_1_1_status}{Status}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a4f5a9b50d4a6b8c3c13566e1eb178f4c}{execute}} (\mbox{\hyperlink{classdoris__udf_1_1_function_context}{Function\+Context}} $\ast$context, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}} \&block, const \mbox{\hyperlink{namespacedoris_1_1vectorized_a69df8cb2bb6bcd07aa3b387782deb8f1}{Column\+Numbers}} \&arguments, size\+\_\+t result, size\+\_\+t input\+\_\+rows\+\_\+count, bool dry\+\_\+run=false) override
\begin{DoxyCompactList}\small\item\em TODO\+: make const \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a185b6712ea48f04279d9d630d211b9da}{is\+\_\+deterministic}} () const override
\item 
bool \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a2bf4f6c3592bd02b3c9f0f2f1a4f8c6d}{is\+\_\+deterministic\+\_\+in\+\_\+scope\+\_\+of\+\_\+query}} () const override
\item 
virtual \mbox{\hyperlink{classdoris_1_1_status}{Status}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a9add0c8702d709f44c242c6cd2d486e3}{close}} (\mbox{\hyperlink{classdoris__udf_1_1_function_context}{Function\+Context}} $\ast$context, \mbox{\hyperlink{classdoris__udf_1_1_function_context_a3a7d67806e854776e57e0c17010049c8}{Function\+Context\+::\+Function\+State\+Scope}} scope)
\item 
virtual bool \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a155e3bddb8a55111818e3e2f1a352a4f}{is\+\_\+stateful}} () const
\item 
virtual bool \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a2f06320b16ddcf247eb0d8520b3d1b23}{can\+\_\+fast\+\_\+execute}} () const
\item 
virtual bool \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a7b826d2c3eb7e91f3f1a6ea488880c21}{is\+\_\+suitable\+\_\+for\+\_\+constant\+\_\+folding}} () const
\item 
virtual \mbox{\hyperlink{namespacedoris_1_1vectorized_aa1d7b67012985a9197efd18f7dd48e51}{Column\+Ptr}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_abaf12a77da9aad5fc0edd8f46741191a}{get\+\_\+result\+\_\+if\+\_\+always\+\_\+returns\+\_\+constant\+\_\+and\+\_\+has\+\_\+arguments}} (const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}} \&, const \mbox{\hyperlink{namespacedoris_1_1vectorized_a69df8cb2bb6bcd07aa3b387782deb8f1}{Column\+Numbers}} \&) const
\item 
virtual bool \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a1d565ffcd558d73c757c10acf121e551}{get\+\_\+is\+\_\+injective}} (const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}} \&)
\item 
virtual bool \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a5624f1f4fb4d160872a0c184a1bad012}{has\+\_\+information\+\_\+about\+\_\+monotonicity}} () const
\item 
virtual \mbox{\hyperlink{structdoris_1_1vectorized_1_1_i_function_base_1_1_monotonicity}{Monotonicity}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a1c9ef0a29b374b455323d7e653b3ce48}{get\+\_\+monotonicity\+\_\+for\+\_\+range}} (const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_data_type}{IData\+Type}} \&, const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_field}{Field}} \&, const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_field}{Field}} \&) const
\end{DoxyCompactItemize}
\doxysubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{namespacedoris_1_1vectorized_a7f96c8dd088c1f093dd8225e8856ac48}{Function\+Base\+Ptr}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a8e4ff92f500463b7f7189a6821c28ef4}{create}} (const TFunction \&fn, const \mbox{\hyperlink{namespacedoris_1_1vectorized_ab91c44a8305e242978050ce39055bf67}{Columns\+With\+Type\+And\+Name}} \&argument\+\_\+types, const \mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{Data\+Type\+Ptr}} \&return\+\_\+type)
\end{DoxyCompactItemize}
\doxysubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_a8af1a73e445f52cef52b8d3c12fed85e}{Data\+Types}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_ae474c6205186acceb2d380a280cc038c}{\+\_\+argument\+\_\+types}}
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{Data\+Type\+Ptr}} \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a0db5062827b42f44eddd6456a5481fd8}{\+\_\+return\+\_\+type}}
\item 
TFunction \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a8da4d9f6ef7fcefd7220d7d17a417727}{\+\_\+tfn}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_r_p_c_fn_impl}{RPCFn\+Impl}} $>$ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c_a6295cbc101b9df84f0cac8bff132a905}{\+\_\+fn}}
\end{DoxyCompactItemize}


\doxysubsection{构造及析构函数说明}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_aaf7cfa43ac6dcfb0c99bf55585b84eb0}\label{classdoris_1_1vectorized_1_1_function_r_p_c_aaf7cfa43ac6dcfb0c99bf55585b84eb0}} 
\index{FunctionRPC@{FunctionRPC}!FunctionRPC@{FunctionRPC}}
\index{FunctionRPC@{FunctionRPC}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{FunctionRPC()}{FunctionRPC()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_r_p_c}{Function\+RPC}} (\begin{DoxyParamCaption}\item[{const TFunction \&}]{fn,  }\item[{const \mbox{\hyperlink{namespacedoris_1_1vectorized_a8af1a73e445f52cef52b8d3c12fed85e}{Data\+Types}} \&}]{argument\+\_\+types,  }\item[{const \mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{Data\+Type\+Ptr}} \&}]{return\+\_\+type }\end{DoxyParamCaption})}



\doxysubsection{成员函数说明}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a8e4ff92f500463b7f7189a6821c28ef4}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a8e4ff92f500463b7f7189a6821c28ef4}} 
\index{FunctionRPC@{FunctionRPC}!create@{create}}
\index{create@{create}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{create()}{create()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{namespacedoris_1_1vectorized_a7f96c8dd088c1f093dd8225e8856ac48}{Function\+Base\+Ptr}} create (\begin{DoxyParamCaption}\item[{const TFunction \&}]{fn,  }\item[{const \mbox{\hyperlink{namespacedoris_1_1vectorized_ab91c44a8305e242978050ce39055bf67}{Columns\+With\+Type\+And\+Name}} \&}]{argument\+\_\+types,  }\item[{const \mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{Data\+Type\+Ptr}} \&}]{return\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=290pt]{d7/d87/classdoris_1_1vectorized_1_1_function_r_p_c_a8e4ff92f500463b7f7189a6821c28ef4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_ab9010f82586f714358e9fa84c4af7c53}\label{classdoris_1_1vectorized_1_1_function_r_p_c_ab9010f82586f714358e9fa84c4af7c53}} 
\index{FunctionRPC@{FunctionRPC}!get\_name@{get\_name}}
\index{get\_name@{get\_name}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{get\_name()}{get\_name()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacedoris_1_1vectorized_a5573b97b9e5129f61d289e037d7e806c}{String}} get\+\_\+name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



Get the main function name. 



实现了 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_ae55496cfafdf6017b737081fe0d7316b}{IFunction\+Base}}.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a13e00db9d26a64eaa04f4d0f556b2823}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a13e00db9d26a64eaa04f4d0f556b2823}} 
\index{FunctionRPC@{FunctionRPC}!get\_argument\_types@{get\_argument\_types}}
\index{get\_argument\_types@{get\_argument\_types}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{get\_argument\_types()}{get\_argument\_types()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{namespacedoris_1_1vectorized_a8af1a73e445f52cef52b8d3c12fed85e}{Data\+Types}} \& get\+\_\+argument\+\_\+types (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



实现了 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a3ea1bb752e7ca366d12f49ad7dc196bd}{IFunction\+Base}}.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a7354b1b4daf52fa4be48cd81586b9ef4}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a7354b1b4daf52fa4be48cd81586b9ef4}} 
\index{FunctionRPC@{FunctionRPC}!get\_return\_type@{get\_return\_type}}
\index{get\_return\_type@{get\_return\_type}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{get\_return\_type()}{get\_return\_type()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{Data\+Type\+Ptr}} \& get\+\_\+return\+\_\+type (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



实现了 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a4b5498dba937a007c3de30f1e22c569a}{IFunction\+Base}}.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a4f7f078bdfe4c61d736c515feb03ed3f}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a4f7f078bdfe4c61d736c515feb03ed3f}} 
\index{FunctionRPC@{FunctionRPC}!prepare@{prepare}}
\index{prepare@{prepare}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{prepare()}{prepare()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacedoris_1_1vectorized_a91a73268bfa02cf9473b873ea92e7e5a}{Prepared\+Function\+Ptr}} prepare (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classdoris__udf_1_1_function_context}{Function\+Context}} $\ast$}]{context,  }\item[{const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}} \&}]{sample\+\_\+block,  }\item[{const \mbox{\hyperlink{namespacedoris_1_1vectorized_a69df8cb2bb6bcd07aa3b387782deb8f1}{Column\+Numbers}} \&}]{arguments,  }\item[{size\+\_\+t}]{result }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Do preparations and return executable. sample\+\_\+block should contain data types of arguments and values of constants, if relevant. 

实现了 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a18a179a3310549fa743cc63483461230}{IFunction\+Base}}.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a6bcc226ce708cc69a2b327b26b63e505}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a6bcc226ce708cc69a2b327b26b63e505}} 
\index{FunctionRPC@{FunctionRPC}!prepare@{prepare}}
\index{prepare@{prepare}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{prepare()}{prepare()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_status}{Status}} prepare (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classdoris__udf_1_1_function_context}{Function\+Context}} $\ast$}]{context,  }\item[{\mbox{\hyperlink{classdoris__udf_1_1_function_context_a3a7d67806e854776e57e0c17010049c8}{Function\+Context\+::\+Function\+State\+Scope}}}]{scope }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}

Override this when function need to store state in the {\ttfamily Function\+Context}, or do some preparation work according to information from {\ttfamily Function\+Context}. 

重载 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a9e1f035c41b09c6ec613bdc0955ac6aa}{IFunction\+Base}} .

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/d87/classdoris_1_1vectorized_1_1_function_r_p_c_a6bcc226ce708cc69a2b327b26b63e505_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a4f5a9b50d4a6b8c3c13566e1eb178f4c}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a4f5a9b50d4a6b8c3c13566e1eb178f4c}} 
\index{FunctionRPC@{FunctionRPC}!execute@{execute}}
\index{execute@{execute}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{execute()}{execute()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classdoris_1_1_status}{Status}} execute (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classdoris__udf_1_1_function_context}{Function\+Context}} $\ast$}]{context,  }\item[{\mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}} \&}]{block,  }\item[{const \mbox{\hyperlink{namespacedoris_1_1vectorized_a69df8cb2bb6bcd07aa3b387782deb8f1}{Column\+Numbers}} \&}]{arguments,  }\item[{size\+\_\+t}]{result,  }\item[{size\+\_\+t}]{input\+\_\+rows\+\_\+count,  }\item[{bool}]{dry\+\_\+run = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



TODO\+: make const 



重载 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a43592e32880a13b8c6b24783cbb54f04}{IFunction\+Base}} .

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a185b6712ea48f04279d9d630d211b9da}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a185b6712ea48f04279d9d630d211b9da}} 
\index{FunctionRPC@{FunctionRPC}!is\_deterministic@{is\_deterministic}}
\index{is\_deterministic@{is\_deterministic}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{is\_deterministic()}{is\_deterministic()}}
{\footnotesize\ttfamily bool is\+\_\+deterministic (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}

Function is called \char`\"{}deterministic\char`\"{}, if it returns same result for same values of arguments. Most of functions are deterministic. Notable counterexample is rand(). Sometimes, functions are \char`\"{}deterministic\char`\"{} in scope of single query (even for distributed query), but not deterministic it general. Example\+: now(). Another example\+: functions that work with periodically updated dictionaries. 

实现了 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_a74de1b921c74d40fdaee9ae2996dc21c}{IFunction\+Base}}.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a2bf4f6c3592bd02b3c9f0f2f1a4f8c6d}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a2bf4f6c3592bd02b3c9f0f2f1a4f8c6d}} 
\index{FunctionRPC@{FunctionRPC}!is\_deterministic\_in\_scope\_of\_query@{is\_deterministic\_in\_scope\_of\_query}}
\index{is\_deterministic\_in\_scope\_of\_query@{is\_deterministic\_in\_scope\_of\_query}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{is\_deterministic\_in\_scope\_of\_query()}{is\_deterministic\_in\_scope\_of\_query()}}
{\footnotesize\ttfamily bool is\+\_\+deterministic\+\_\+in\+\_\+scope\+\_\+of\+\_\+query (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}



实现了 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_base_abc70e0f12ba99501d8e68bb89425a456}{IFunction\+Base}}.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_i_function_base_a9add0c8702d709f44c242c6cd2d486e3}\label{classdoris_1_1vectorized_1_1_i_function_base_a9add0c8702d709f44c242c6cd2d486e3}} 
\index{FunctionRPC@{FunctionRPC}!close@{close}}
\index{close@{close}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{close()}{close()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{classdoris_1_1_status}{Status}} close (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classdoris__udf_1_1_function_context}{Function\+Context}} $\ast$}]{context,  }\item[{\mbox{\hyperlink{classdoris__udf_1_1_function_context_a3a7d67806e854776e57e0c17010049c8}{Function\+Context\+::\+Function\+State\+Scope}}}]{scope }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}

Do cleaning work when function is finished, i.\+e., release state variables in the {\ttfamily Function\+Context} which are registered in {\ttfamily prepare} phase. 

被 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_default_function_ace8032bacf7b50a6eb8fb9a5113d2997}{Default\+Function}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_convert_t_z_ace8032bacf7b50a6eb8fb9a5113d2997}{Function\+Convert\+TZ$<$ Transform, Date\+Type $>$}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_java_function_call_ace8032bacf7b50a6eb8fb9a5113d2997}{Java\+Function\+Call}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_regexp_ace8032bacf7b50a6eb8fb9a5113d2997}{Function\+Regexp$<$ Impl $>$}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_convert_to_ace8032bacf7b50a6eb8fb9a5113d2997}{Function\+Convert\+To}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_geo_function_ace8032bacf7b50a6eb8fb9a5113d2997}{Geo\+Function$<$ Impl, Return\+Type $>$}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_in_ace8032bacf7b50a6eb8fb9a5113d2997}{Function\+In$<$ negative $>$}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_like_base_ace8032bacf7b50a6eb8fb9a5113d2997}{Function\+Like\+Base}} , 以及 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_random_ace8032bacf7b50a6eb8fb9a5113d2997}{Random}} 重载.

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d4/d4f/classdoris_1_1vectorized_1_1_i_function_base_a9add0c8702d709f44c242c6cd2d486e3_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_i_function_base_a155e3bddb8a55111818e3e2f1a352a4f}\label{classdoris_1_1vectorized_1_1_i_function_base_a155e3bddb8a55111818e3e2f1a352a4f}} 
\index{FunctionRPC@{FunctionRPC}!is\_stateful@{is\_stateful}}
\index{is\_stateful@{is\_stateful}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{is\_stateful()}{is\_stateful()}}
{\footnotesize\ttfamily virtual bool is\+\_\+stateful (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}



被 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_function_a4f9f066770b05a9298cf4a1657197f4a}{IFunction}} 重载.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_i_function_base_a2f06320b16ddcf247eb0d8520b3d1b23}\label{classdoris_1_1vectorized_1_1_i_function_base_a2f06320b16ddcf247eb0d8520b3d1b23}} 
\index{FunctionRPC@{FunctionRPC}!can\_fast\_execute@{can\_fast\_execute}}
\index{can\_fast\_execute@{can\_fast\_execute}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{can\_fast\_execute()}{can\_fast\_execute()}}
{\footnotesize\ttfamily virtual bool can\+\_\+fast\+\_\+execute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}



被 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_default_function_a9f1be149bcf6f06fd833bea08e988335}{Default\+Function}} 重载.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_i_function_base_a7b826d2c3eb7e91f3f1a6ea488880c21}\label{classdoris_1_1vectorized_1_1_i_function_base_a7b826d2c3eb7e91f3f1a6ea488880c21}} 
\index{FunctionRPC@{FunctionRPC}!is\_suitable\_for\_constant\_folding@{is\_suitable\_for\_constant\_folding}}
\index{is\_suitable\_for\_constant\_folding@{is\_suitable\_for\_constant\_folding}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{is\_suitable\_for\_constant\_folding()}{is\_suitable\_for\_constant\_folding()}}
{\footnotesize\ttfamily virtual bool is\+\_\+suitable\+\_\+for\+\_\+constant\+\_\+folding (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}

Should we evaluate this function while constant folding, if arguments are constants? Usually this is true. Notable counterexample is function \textquotesingle{}sleep\textquotesingle{}. If we will call it during query analysis, we will sleep extra amount of time. 

被 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_default_function_a851690baa47f374019304f2764857e88}{Default\+Function}} 重载.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_i_function_base_abaf12a77da9aad5fc0edd8f46741191a}\label{classdoris_1_1vectorized_1_1_i_function_base_abaf12a77da9aad5fc0edd8f46741191a}} 
\index{FunctionRPC@{FunctionRPC}!get\_result\_if\_always\_returns\_constant\_and\_has\_arguments@{get\_result\_if\_always\_returns\_constant\_and\_has\_arguments}}
\index{get\_result\_if\_always\_returns\_constant\_and\_has\_arguments@{get\_result\_if\_always\_returns\_constant\_and\_has\_arguments}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{get\_result\_if\_always\_returns\_constant\_and\_has\_arguments()}{get\_result\_if\_always\_returns\_constant\_and\_has\_arguments()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{namespacedoris_1_1vectorized_aa1d7b67012985a9197efd18f7dd48e51}{Column\+Ptr}} get\+\_\+result\+\_\+if\+\_\+always\+\_\+returns\+\_\+constant\+\_\+and\+\_\+has\+\_\+arguments (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}} \&}]{,  }\item[{const \mbox{\hyperlink{namespacedoris_1_1vectorized_a69df8cb2bb6bcd07aa3b387782deb8f1}{Column\+Numbers}} \&}]{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}

Some functions like ignore(...) or to\+Type\+Name(...) always return constant result which doesn\textquotesingle{}t depend on arguments. In this case we can calculate result and assume that it\textquotesingle{}s constant in stream header. There is no need to implement function if it has zero arguments. Must return \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_const}{Column\+Const}} with single row or nullptr. 

被 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_default_function_ab9c32dea0e63148d3c2a59f31f8c6020}{Default\+Function}} 重载.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_i_function_base_a1d565ffcd558d73c757c10acf121e551}\label{classdoris_1_1vectorized_1_1_i_function_base_a1d565ffcd558d73c757c10acf121e551}} 
\index{FunctionRPC@{FunctionRPC}!get\_is\_injective@{get\_is\_injective}}
\index{get\_is\_injective@{get\_is\_injective}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{get\_is\_injective()}{get\_is\_injective()}}
{\footnotesize\ttfamily virtual bool get\+\_\+is\+\_\+injective (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_block}{Block}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}

Function is called \char`\"{}injective\char`\"{} if it returns different result for different values of arguments. Example\+: hex, negate, tuple...

Function could be injective with some arguments fixed to some constant values. Examples\+: plus(const, x); multiply(const, x) where x is an integer and constant is not divisible by two; concat(x, \textquotesingle{}const\textquotesingle{}); concat(x, \textquotesingle{}const\textquotesingle{}, y) where const contain at least one non-\/numeric character; concat with Fixed\+String dict\+Get... functions takes name of dictionary as its argument, and some dictionaries could be explicitly defined as injective.

It could be used, for example, to remove useless function applications from GROUP BY.

Sometimes, function is not really injective, but considered as injective, for purpose of query optimization. For example, to\+\_\+string function is not injective for Float64 data type, as it returns \textquotesingle{}nan\textquotesingle{} for many different representation of Na\+Ns. But we assume, that it is injective. This could be documented as implementation-\/specific behaviour.

sample\+\_\+block should contain data types of arguments and values of constants, if relevant. 

被 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_convert_afad2d3da70b4f8c4256cb55373df8a0e}{Function\+Convert$<$ To\+Data\+Type, Name, Monotonicity\+Impl $>$}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_reverse_common_afad2d3da70b4f8c4256cb55373df8a0e}{Function\+Reverse\+Common}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_string_to_string_afad2d3da70b4f8c4256cb55373df8a0e}{Function\+String\+To\+String$<$ Impl, Name, is\+\_\+injective $>$}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_unary_arithmetic_afad2d3da70b4f8c4256cb55373df8a0e}{Function\+Unary\+Arithmetic$<$ Op, Name, is\+\_\+injective $>$}} , 以及 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_default_function_a8f615d9d45038aea7c4a4bbaa3362a2d}{Default\+Function}} 重载.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_i_function_base_a5624f1f4fb4d160872a0c184a1bad012}\label{classdoris_1_1vectorized_1_1_i_function_base_a5624f1f4fb4d160872a0c184a1bad012}} 
\index{FunctionRPC@{FunctionRPC}!has\_information\_about\_monotonicity@{has\_information\_about\_monotonicity}}
\index{has\_information\_about\_monotonicity@{has\_information\_about\_monotonicity}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{has\_information\_about\_monotonicity()}{has\_information\_about\_monotonicity()}}
{\footnotesize\ttfamily virtual bool has\+\_\+information\+\_\+about\+\_\+monotonicity (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}

Lets you know if the function is monotonic in a range of values. This is used to work with the index in a sorted chunk of data. And allows to use the index not only when it is written, for example {\ttfamily date \texorpdfstring{$>$}{>}= const}, but also, for example, {\ttfamily to\+Month(date) \texorpdfstring{$>$}{>}= 11}. All this is considered only for functions of one argument. 

被 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_default_function_a5802a3644f457a184e95303943227779}{Default\+Function}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_convert_a5802a3644f457a184e95303943227779}{Function\+Convert$<$ To\+Data\+Type, Name, Monotonicity\+Impl $>$}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_cast_a5802a3644f457a184e95303943227779}{Function\+Cast}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_date_or_date_time_to_something_a5802a3644f457a184e95303943227779}{Function\+Date\+Or\+Date\+Time\+To\+Something$<$ To\+Data\+Type, Transform $>$}} , 以及 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_unary_arithmetic_a5802a3644f457a184e95303943227779}{Function\+Unary\+Arithmetic$<$ Op, Name, is\+\_\+injective $>$}} 重载.

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_i_function_base_a1c9ef0a29b374b455323d7e653b3ce48}\label{classdoris_1_1vectorized_1_1_i_function_base_a1c9ef0a29b374b455323d7e653b3ce48}} 
\index{FunctionRPC@{FunctionRPC}!get\_monotonicity\_for\_range@{get\_monotonicity\_for\_range}}
\index{get\_monotonicity\_for\_range@{get\_monotonicity\_for\_range}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{get\_monotonicity\_for\_range()}{get\_monotonicity\_for\_range()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{structdoris_1_1vectorized_1_1_i_function_base_1_1_monotonicity}{Monotonicity}} get\+\_\+monotonicity\+\_\+for\+\_\+range (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_i_data_type}{IData\+Type}} \&}]{,  }\item[{const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_field}{Field}} \&}]{,  }\item[{const \mbox{\hyperlink{classdoris_1_1vectorized_1_1_field}{Field}} \&}]{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}, {\ttfamily [inherited]}}

Get information about monotonicity on a range of values. Call only if has\+Information\+About\+Monotonicity. NULL can be passed as one of the arguments. This means that the corresponding range is unlimited on the left or on the right. 

被 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_default_function_a834b8a2f060fea6e2af760fd9f66bd44}{Default\+Function}}, \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_convert_abcaac50d8eef7019c067170df2ab04e8}{Function\+Convert$<$ To\+Data\+Type, Name, Monotonicity\+Impl $>$}} , 以及 \mbox{\hyperlink{classdoris_1_1vectorized_1_1_function_cast_abcaac50d8eef7019c067170df2ab04e8}{Function\+Cast}} 重载.

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=282pt]{d4/d4f/classdoris_1_1vectorized_1_1_i_function_base_a1c9ef0a29b374b455323d7e653b3ce48_cgraph}
\end{center}
\end{figure}


\doxysubsection{类成员变量说明}
\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_ae474c6205186acceb2d380a280cc038c}\label{classdoris_1_1vectorized_1_1_function_r_p_c_ae474c6205186acceb2d380a280cc038c}} 
\index{FunctionRPC@{FunctionRPC}!\_argument\_types@{\_argument\_types}}
\index{\_argument\_types@{\_argument\_types}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{\_argument\_types}{\_argument\_types}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacedoris_1_1vectorized_a8af1a73e445f52cef52b8d3c12fed85e}{Data\+Types}} \+\_\+argument\+\_\+types\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a0db5062827b42f44eddd6456a5481fd8}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a0db5062827b42f44eddd6456a5481fd8}} 
\index{FunctionRPC@{FunctionRPC}!\_return\_type@{\_return\_type}}
\index{\_return\_type@{\_return\_type}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{\_return\_type}{\_return\_type}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{Data\+Type\+Ptr}} \+\_\+return\+\_\+type\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a8da4d9f6ef7fcefd7220d7d17a417727}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a8da4d9f6ef7fcefd7220d7d17a417727}} 
\index{FunctionRPC@{FunctionRPC}!\_tfn@{\_tfn}}
\index{\_tfn@{\_tfn}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{\_tfn}{\_tfn}}
{\footnotesize\ttfamily TFunction \+\_\+tfn\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classdoris_1_1vectorized_1_1_function_r_p_c_a6295cbc101b9df84f0cac8bff132a905}\label{classdoris_1_1vectorized_1_1_function_r_p_c_a6295cbc101b9df84f0cac8bff132a905}} 
\index{FunctionRPC@{FunctionRPC}!\_fn@{\_fn}}
\index{\_fn@{\_fn}!FunctionRPC@{FunctionRPC}}
\doxysubsubsection{\texorpdfstring{\_fn}{\_fn}}
{\footnotesize\ttfamily std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{classdoris_1_1vectorized_1_1_r_p_c_fn_impl}{RPCFn\+Impl}}$>$ \+\_\+fn\hspace{0.3cm}{\ttfamily [private]}}



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
/\+Users/dabowang/be\+\_\+all/vec/functions/\mbox{\hyperlink{function__rpc_8h}{function\+\_\+rpc.\+h}}\item 
/\+Users/dabowang/be\+\_\+all/vec/functions/\mbox{\hyperlink{function__rpc_8cpp}{function\+\_\+rpc.\+cpp}}\end{DoxyCompactItemize}
