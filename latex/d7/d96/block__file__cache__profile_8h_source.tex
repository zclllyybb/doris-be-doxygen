\hypertarget{block__file__cache__profile_8h_source}{}\doxysection{block\+\_\+file\+\_\+cache\+\_\+profile.\+h}
\label{block__file__cache__profile_8h_source}\index{/Users/dabowang/doris/be/src/io/cache/block/block\_file\_cache\_profile.h@{/Users/dabowang/doris/be/src/io/cache/block/block\_file\_cache\_profile.h}}
\mbox{\hyperlink{block__file__cache__profile_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <cstdlib>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <unordered\_map>}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{olap_2olap__common_8h}{olap/olap\_common.h}}"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{doris__metrics_8h}{util/doris\_metrics.h}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{metrics_8h}{util/metrics.h}}"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{runtime__profile_8h}{util/runtime\_profile.h}}"{}}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00035\ \textcolor{keyword}{namespace\ }io\ \{}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1io_1_1_atomic_statistics}{AtomicStatistics}}\ \{}
\DoxyCodeLine{00038\ \ \ \ \ std::atomic<int64\_t>\ \mbox{\hyperlink{structdoris_1_1io_1_1_atomic_statistics_a476ac64b4f8ba8852c2d69c21a28abd2}{num\_io\_bytes\_read\_from\_cache}}\ =\ 0;}
\DoxyCodeLine{00039\ \ \ \ \ std::atomic<int64\_t>\ \mbox{\hyperlink{structdoris_1_1io_1_1_atomic_statistics_a1ac9e29f8181dd1c6ac9a020bab215e0}{num\_io\_bytes\_read\_from\_remote}}\ =\ 0;}
\DoxyCodeLine{00040\ \};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile}{FileCacheProfile}};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric}{FileCacheMetric}}\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_af6125fb7ddc539a0d94582e60bd31057}{FileCacheMetric}}(int64\_t\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_ac83498c1cf0b272365fe0703883cd735}{table\_id}},\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile}{FileCacheProfile}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a36202eb411d7988a21cb5a2e48fcbc90}{profile}})}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a36202eb411d7988a21cb5a2e48fcbc90}{profile}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a36202eb411d7988a21cb5a2e48fcbc90}{profile}}),\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_ac83498c1cf0b272365fe0703883cd735}{table\_id}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_ac83498c1cf0b272365fe0703883cd735}{table\_id}})\ \{\}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a0a20fac5feeb5669aeeb25e7d104dbb3}{FileCacheMetric}}(int64\_t\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_ac83498c1cf0b272365fe0703883cd735}{table\_id}},\ int64\_t\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a3c43652ca8ec1d18bff18ad314afe000}{partition\_id}},\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile}{FileCacheProfile}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a36202eb411d7988a21cb5a2e48fcbc90}{profile}})}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a36202eb411d7988a21cb5a2e48fcbc90}{profile}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a36202eb411d7988a21cb5a2e48fcbc90}{profile}}),\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_ac83498c1cf0b272365fe0703883cd735}{table\_id}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_ac83498c1cf0b272365fe0703883cd735}{table\_id}}),\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a3c43652ca8ec1d18bff18ad314afe000}{partition\_id}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a3c43652ca8ec1d18bff18ad314afe000}{partition\_id}})\ \{\}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a1c1a66ad2fb83b446a0ca0f77e7619f9}{register\_entity}}();}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a57c04255ec0d261ab251b4e5874b6c43}{deregister\_entity}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_doris_metrics_a4d0ce88513091aec833045b4eddeee8b}{DorisMetrics::instance}}()-\/>\mbox{\hyperlink{classdoris_1_1_doris_metrics_ac35419b87a3fe0126cb635fb8fe889ae}{metric\_registry}}()-\/>\mbox{\hyperlink{classdoris_1_1_metric_registry_aea814151e21597b5a31316959adb11d7}{deregister\_entity}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_ac22a878ebf1568dcd8a3f9d356f76e17}{entity}});}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a683137e77683974d307639a58033118a}{update\_table\_metrics}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_af7cea6f09c5e209d775104b6dc7bb22c}{update\_partition\_metrics}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric}{FileCacheMetric}}\&\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_af499b6f216088141c729c8afbf77113c}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric}{FileCacheMetric}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00059\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a9d070bf8f9f51c0d6c5c74b535c621e6}{FileCacheMetric}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric}{FileCacheMetric}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00060\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile}{FileCacheProfile}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a36202eb411d7988a21cb5a2e48fcbc90}{profile}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00061\ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_ac83498c1cf0b272365fe0703883cd735}{table\_id}}\ =\ -\/1;}
\DoxyCodeLine{00062\ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a3c43652ca8ec1d18bff18ad314afe000}{partition\_id}}\ =\ -\/1;}
\DoxyCodeLine{00063\ \ \ \ \ std::shared\_ptr<MetricEntity>\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_ac22a878ebf1568dcd8a3f9d356f76e17}{entity}};}
\DoxyCodeLine{00064\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_atomic_counter}{IntAtomicCounter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_aa24c5acaab266fa6dac4dc27d252b275}{num\_io\_bytes\_read\_total}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00065\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_atomic_counter}{IntAtomicCounter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_af4941c4c11bb7d1db1da8ed806b855b3}{num\_io\_bytes\_read\_from\_cache}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00066\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_atomic_counter}{IntAtomicCounter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_metric_a47b8cf18b13cf4620fde35223e9de140}{num\_io\_bytes\_read\_from\_remote}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00067\ \};}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile}{FileCacheProfile}}\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile}{FileCacheProfile}}\&\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a16755d4be72b3d6af470c9d7b5a57ce0}{instance}}()\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile}{FileCacheProfile}}\ s\_profile;}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ s\_profile;}
\DoxyCodeLine{00073\ \ \ \ \ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_aaf12ca6e08fcf46c4fac3e63917b0fbd}{FileCacheProfile}}()\ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_olap_reader_statistics}{OlapReaderStatistics}}\ stats;}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a37c5bbea44f58706c62f280a7817b4c3}{update}}(0,\ 0,\ \&stats);}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ avoid\ performance\ impact,\ use\ https\ to\ control}}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{static}\ std::atomic<bool>\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a1b602fbd903cfaf029aa8b93f8b57741}{s\_enable\_profile}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a5f78fb10eb829cca7405b6ca95db06ac}{set\_enable\_profile}}(\textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}})\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ enable\_profile\ =\ false\ originally,\ set\ true,\ it\ will\ clear\ the\ count}}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a1b602fbd903cfaf029aa8b93f8b57741}{s\_enable\_profile}}\ \&\&\ \mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}})\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ std::lock\_guard\ lock(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a16755d4be72b3d6af470c9d7b5a57ce0}{instance}}().\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a8bd24c60307804494c1d8e35976758f6}{\_mtx}});}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a16755d4be72b3d6af470c9d7b5a57ce0}{instance}}().\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_adcf490b63216b74929a60575358709c8}{\_profile}}.clear();}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a1b602fbd903cfaf029aa8b93f8b57741}{s\_enable\_profile}}.store(\mbox{\hyperlink{namespacedoris_aa22c8aa4a1f9eb102cc140540239702e}{flag}},\ std::memory\_order\_release);}
\DoxyCodeLine{00090\ \ \ \ \ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a37c5bbea44f58706c62f280a7817b4c3}{update}}(int64\_t\ table\_id,\ int64\_t\ partition\_id,\ \mbox{\hyperlink{structdoris_1_1_olap_reader_statistics}{OlapReaderStatistics}}*\ stats);}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_aa933f13d46c4d4008905bdd5582f1af1}{deregister\_metric}}(int64\_t\ table\_id,\ int64\_t\ partition\_id);}
\DoxyCodeLine{00095\ \ \ \ \ std::mutex\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a8bd24c60307804494c1d8e35976758f6}{\_mtx}};}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{comment}{//\ use\ shared\_ptr\ for\ concurrent}}
\DoxyCodeLine{00097\ \ \ \ \ std::unordered\_map<int64\_t,\ std::unordered\_map<int64\_t,\ std::shared\_ptr<AtomicStatistics>>>}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_adcf490b63216b74929a60575358709c8}{\_profile}};}
\DoxyCodeLine{00099\ \ \ \ \ std::unordered\_map<int64\_t,\ std::shared\_ptr<FileCacheMetric>>\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a28475ec8dd994fbf87c9f2208b4adb21}{\_table\_metrics}};}
\DoxyCodeLine{00100\ \ \ \ \ std::unordered\_map<int64\_t,\ std::unordered\_map<int64\_t,\ std::shared\_ptr<FileCacheMetric>>>}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a90f4efe48846dc1052b0f3bf1e7abf91}{\_partition\_metrics}};}
\DoxyCodeLine{00102\ \ \ \ \ std::shared\_ptr<AtomicStatistics>\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a44b5f6bb0fe2f5988e32688745ed2265}{report}}(int64\_t\ table\_id);}
\DoxyCodeLine{00103\ \ \ \ \ std::shared\_ptr<AtomicStatistics>\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_a44b5f6bb0fe2f5988e32688745ed2265}{report}}(int64\_t\ table\_id,\ int64\_t\ partition\_id);}
\DoxyCodeLine{00104\ \};}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter}{FileCacheProfileReporter}}\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a082c3fd2795ce4d746b1b5e2f8ad94d7}{num\_local\_io\_total}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00108\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a3285f18ebf3785922ae2d66c54ae99b2}{num\_remote\_io\_total}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00109\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a248bf5b5af320358463f53f054666cb3}{local\_io\_timer}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00110\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a329ee135dc8d7c38e0fc8720c2a51b17}{bytes\_scanned\_from\_cache}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00111\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a894c7ad6b1c090e756bbc7470ad652c0}{bytes\_scanned\_from\_remote}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00112\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_adf0c639fa8e5f86fb593770fbe5bd3f1}{remote\_io\_timer}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00113\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a516825257fb243909f7c347c0ea7b4df}{write\_cache\_io\_timer}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00114\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_ae73d0816ef57af8b776dd532e12b9624}{bytes\_write\_into\_cache}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00115\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_ad268888d50c1a1ea88060f7845f25799}{num\_skip\_cache\_io\_total}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_aa63ca50f0c45a6749476b0a7b2591f36}{FileCacheProfileReporter}}(\mbox{\hyperlink{classdoris_1_1_runtime_profile}{RuntimeProfile}}*\ profile)\ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ cache\_profile\ =\ \textcolor{stringliteral}{"{}FileCache"{}};}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a8841ca205b2a05d608e82d443bad3a77}{ADD\_TIMER}}(profile,\ cache\_profile);}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a082c3fd2795ce4d746b1b5e2f8ad94d7}{num\_local\_io\_total}}\ =}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a1493ed307aec5af9d605b0fd5d23051d}{ADD\_CHILD\_COUNTER}}(profile,\ \textcolor{stringliteral}{"{}NumLocalIOTotal"{}},\ TUnit::UNIT,\ cache\_profile);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a3285f18ebf3785922ae2d66c54ae99b2}{num\_remote\_io\_total}}\ =}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a1493ed307aec5af9d605b0fd5d23051d}{ADD\_CHILD\_COUNTER}}(profile,\ \textcolor{stringliteral}{"{}NumRemoteIOTotal"{}},\ TUnit::UNIT,\ cache\_profile);}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a248bf5b5af320358463f53f054666cb3}{local\_io\_timer}}\ =\ \mbox{\hyperlink{runtime__profile_8h_a8d817beaf6c704ff590230236d7591b1}{ADD\_CHILD\_TIMER}}(profile,\ \textcolor{stringliteral}{"{}LocalIOUseTimer"{}},\ cache\_profile);}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_adf0c639fa8e5f86fb593770fbe5bd3f1}{remote\_io\_timer}}\ =\ \mbox{\hyperlink{runtime__profile_8h_a8d817beaf6c704ff590230236d7591b1}{ADD\_CHILD\_TIMER}}(profile,\ \textcolor{stringliteral}{"{}RemoteIOUseTimer"{}},\ cache\_profile);}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a516825257fb243909f7c347c0ea7b4df}{write\_cache\_io\_timer}}\ =\ \mbox{\hyperlink{runtime__profile_8h_a8d817beaf6c704ff590230236d7591b1}{ADD\_CHILD\_TIMER}}(profile,\ \textcolor{stringliteral}{"{}WriteCacheIOUseTimer"{}},\ cache\_profile);}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_ae73d0816ef57af8b776dd532e12b9624}{bytes\_write\_into\_cache}}\ =}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a1493ed307aec5af9d605b0fd5d23051d}{ADD\_CHILD\_COUNTER}}(profile,\ \textcolor{stringliteral}{"{}BytesWriteIntoCache"{}},\ TUnit::BYTES,\ cache\_profile);}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_ad268888d50c1a1ea88060f7845f25799}{num\_skip\_cache\_io\_total}}\ =}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a1493ed307aec5af9d605b0fd5d23051d}{ADD\_CHILD\_COUNTER}}(profile,\ \textcolor{stringliteral}{"{}NumSkipCacheIOTotal"{}},\ TUnit::UNIT,\ cache\_profile);}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a329ee135dc8d7c38e0fc8720c2a51b17}{bytes\_scanned\_from\_cache}}\ =}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a1493ed307aec5af9d605b0fd5d23051d}{ADD\_CHILD\_COUNTER}}(profile,\ \textcolor{stringliteral}{"{}BytesScannedFromCache"{}},\ TUnit::BYTES,\ cache\_profile);}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a894c7ad6b1c090e756bbc7470ad652c0}{bytes\_scanned\_from\_remote}}\ =}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a1493ed307aec5af9d605b0fd5d23051d}{ADD\_CHILD\_COUNTER}}(profile,\ \textcolor{stringliteral}{"{}BytesScannedFromRemote"{}},\ TUnit::BYTES,\ cache\_profile);}
\DoxyCodeLine{00135\ \ \ \ \ \}}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a5d91d487981270f4447838db75207781}{update}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics}{FileCacheStatistics}}*\ statistics)\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a3c0413085db33b5cfe29ea149ed3cf0c}{COUNTER\_UPDATE}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a082c3fd2795ce4d746b1b5e2f8ad94d7}{num\_local\_io\_total}},\ statistics-\/>\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics_aeaa3f6d60f56a23c248aafc910b39480}{num\_local\_io\_total}});}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a3c0413085db33b5cfe29ea149ed3cf0c}{COUNTER\_UPDATE}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a3285f18ebf3785922ae2d66c54ae99b2}{num\_remote\_io\_total}},\ statistics-\/>\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics_a213619995b7d4c59de9296d7b362f46f}{num\_remote\_io\_total}});}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a3c0413085db33b5cfe29ea149ed3cf0c}{COUNTER\_UPDATE}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a248bf5b5af320358463f53f054666cb3}{local\_io\_timer}},\ statistics-\/>\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics_a21a864dd6ad6b46a91f18ef3da15d5cd}{local\_io\_timer}});}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a3c0413085db33b5cfe29ea149ed3cf0c}{COUNTER\_UPDATE}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_adf0c639fa8e5f86fb593770fbe5bd3f1}{remote\_io\_timer}},\ statistics-\/>\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics_ad65b22e015abf32be1f23d6ab1331e39}{remote\_io\_timer}});}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a3c0413085db33b5cfe29ea149ed3cf0c}{COUNTER\_UPDATE}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a516825257fb243909f7c347c0ea7b4df}{write\_cache\_io\_timer}},\ statistics-\/>\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics_a547609bff3d77adb1a3e4307a98b20d8}{write\_cache\_io\_timer}});}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a3c0413085db33b5cfe29ea149ed3cf0c}{COUNTER\_UPDATE}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_ae73d0816ef57af8b776dd532e12b9624}{bytes\_write\_into\_cache}},\ statistics-\/>\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics_ae36cc38f374d2cf5a14f8d5ee93b904f}{bytes\_write\_into\_cache}});}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a3c0413085db33b5cfe29ea149ed3cf0c}{COUNTER\_UPDATE}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_ad268888d50c1a1ea88060f7845f25799}{num\_skip\_cache\_io\_total}},\ statistics-\/>\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics_aaabbaf063ac5236fd5c41f89947d9e22}{num\_skip\_cache\_io\_total}});}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a3c0413085db33b5cfe29ea149ed3cf0c}{COUNTER\_UPDATE}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a329ee135dc8d7c38e0fc8720c2a51b17}{bytes\_scanned\_from\_cache}},\ statistics-\/>\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics_a73300b274b123f37e762eba2415d3e84}{bytes\_read\_from\_local}});}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{runtime__profile_8h_a3c0413085db33b5cfe29ea149ed3cf0c}{COUNTER\_UPDATE}}(\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_profile_reporter_a894c7ad6b1c090e756bbc7470ad652c0}{bytes\_scanned\_from\_remote}},\ statistics-\/>\mbox{\hyperlink{structdoris_1_1io_1_1_file_cache_statistics_a29a3fdd6a02e1a21a496177434399695}{bytes\_read\_from\_remote}});}
\DoxyCodeLine{00147\ \ \ \ \ \}}
\DoxyCodeLine{00148\ \};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \}\ \textcolor{comment}{//\ namespace\ io}}
\DoxyCodeLine{00151\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
