\hypertarget{structdoris_1_1vectorized_1_1_arena_1_1_chunk}{}\doxysection{Arena\+::Chunk结构体 参考}
\label{structdoris_1_1vectorized_1_1_arena_1_1_chunk}\index{Arena::Chunk@{Arena::Chunk}}


Contiguous chunk of memory and pointer to free space inside it. Member of single-\/linked list.  




类 Arena\+::Chunk 继承关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{dd/dfe/structdoris_1_1vectorized_1_1_arena_1_1_chunk__inherit__graph}
\end{center}
\end{figure}


Arena\+::Chunk 的协作图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=244pt]{d4/d35/structdoris_1_1vectorized_1_1_arena_1_1_chunk__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a8cb8b955856744c831f48accf17c4907}{Chunk}} (size\+\_\+t size\+\_\+, \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk}{Chunk}} $\ast$prev\+\_\+)
\item 
\mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a5aab0c1f2cbca353b840193d9d54cdd7}{$\sim$\+Chunk}} ()
\item 
size\+\_\+t \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a259cb5a711406a8c3e5d937eb9350cca}{size}} () const
\item 
size\+\_\+t \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_ab3e071504522add73d49d22e9b0f2db7}{remaining}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Public 属性}
\begin{DoxyCompactItemize}
\item 
char $\ast$ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_aa9f974458dc400bd897fe724a13dcd47}{begin}}
\item 
char $\ast$ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_ab5ad9aa3d3e725ca44ebfa85e0b1020d}{pos}}
\item 
char $\ast$ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a8fd806ad19b8f5513a4cf18cbf77532c}{end}}
\item 
\mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk}{Chunk}} $\ast$ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a10f5e1367bdde8552902c68abb214564}{prev}}
\begin{DoxyCompactList}\small\item\em does not include padding. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private 成员函数}
\begin{DoxyCompactItemize}
\item 
void $\ast$ \mbox{\hyperlink{class_allocator_a35677db523083f8c3a508d75cd9bb77b}{alloc}} (size\+\_\+t \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a259cb5a711406a8c3e5d937eb9350cca}{size}}, size\+\_\+t alignment=0)
\begin{DoxyCompactList}\small\item\em Allocate memory range. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_allocator_a82e090801fb5ae0c014e85fc401bca47}{free}} (void $\ast$buf, size\+\_\+t \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a259cb5a711406a8c3e5d937eb9350cca}{size}})
\begin{DoxyCompactList}\small\item\em Free memory range. \end{DoxyCompactList}\item 
void $\ast$ \mbox{\hyperlink{class_allocator_af48b30af68c846da954ef85a876ac5a9}{realloc}} (void $\ast$buf, size\+\_\+t old\+\_\+size, size\+\_\+t new\+\_\+size, size\+\_\+t alignment=0)
\item 
void $\ast$ \mbox{\hyperlink{class_allocator_a2e4223e7158b40f4e4c5cc08216f0a56}{get\+\_\+mmap\+\_\+hint}} ()
\end{DoxyCompactItemize}
\doxysubsection*{静态 Private 成员函数}
\begin{DoxyCompactItemize}
\item 
static constexpr size\+\_\+t \mbox{\hyperlink{class_allocator_a60b3b47bca967c70d89d5bda6d5c50c0}{get\+\_\+stack\+\_\+threshold}} ()
\end{DoxyCompactItemize}
\doxysubsection*{静态 Private 属性}
\begin{DoxyCompactItemize}
\item 
static constexpr bool \mbox{\hyperlink{class_allocator_aef026d27e574609185dcf1d047e241d6}{clear\+\_\+memory}}
\item 
static constexpr int \mbox{\hyperlink{class_allocator_a4823c06be87da26bc7f8fd6573d7efb8}{mmap\+\_\+flags}}
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
Contiguous chunk of memory and pointer to free space inside it. Member of single-\/linked list. 

empty base optimization 

\doxysubsection{构造及析构函数说明}
\mbox{\Hypertarget{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a8cb8b955856744c831f48accf17c4907}\label{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a8cb8b955856744c831f48accf17c4907}} 
\index{Arena::Chunk@{Arena::Chunk}!Chunk@{Chunk}}
\index{Chunk@{Chunk}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{Chunk()}{Chunk()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk}{Chunk}} (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size\+\_\+,  }\item[{\mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk}{Chunk}} $\ast$}]{prev\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d8/d39/structdoris_1_1vectorized_1_1_arena_1_1_chunk_a8cb8b955856744c831f48accf17c4907_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a5aab0c1f2cbca353b840193d9d54cdd7}\label{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a5aab0c1f2cbca353b840193d9d54cdd7}} 
\index{Arena::Chunk@{Arena::Chunk}!````~Chunk@{$\sim$Chunk}}
\index{````~Chunk@{$\sim$Chunk}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{$\sim$Chunk()}{~Chunk()}}
{\footnotesize\ttfamily $\sim$\mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk}{Chunk}} (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

We must unpoison the memory before returning to the allocator, because the allocator might not have asan integration, and the memory would stay poisoned forever. If the allocator supports asan, it will correctly poison the memory by itself.函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d8/d39/structdoris_1_1vectorized_1_1_arena_1_1_chunk_a5aab0c1f2cbca353b840193d9d54cdd7_cgraph}
\end{center}
\end{figure}


\doxysubsection{成员函数说明}
\mbox{\Hypertarget{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a259cb5a711406a8c3e5d937eb9350cca}\label{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a259cb5a711406a8c3e5d937eb9350cca}} 
\index{Arena::Chunk@{Arena::Chunk}!size@{size}}
\index{size@{size}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{size()}{size()}}
{\footnotesize\ttfamily size\+\_\+t size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d8/d39/structdoris_1_1vectorized_1_1_arena_1_1_chunk_a259cb5a711406a8c3e5d937eb9350cca_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{structdoris_1_1vectorized_1_1_arena_1_1_chunk_ab3e071504522add73d49d22e9b0f2db7}\label{structdoris_1_1vectorized_1_1_arena_1_1_chunk_ab3e071504522add73d49d22e9b0f2db7}} 
\index{Arena::Chunk@{Arena::Chunk}!remaining@{remaining}}
\index{remaining@{remaining}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{remaining()}{remaining()}}
{\footnotesize\ttfamily size\+\_\+t remaining (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=297pt]{d8/d39/structdoris_1_1vectorized_1_1_arena_1_1_chunk_ab3e071504522add73d49d22e9b0f2db7_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_allocator_a35677db523083f8c3a508d75cd9bb77b}\label{class_allocator_a35677db523083f8c3a508d75cd9bb77b}} 
\index{Arena::Chunk@{Arena::Chunk}!alloc@{alloc}}
\index{alloc@{alloc}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{alloc()}{alloc()}}
{\footnotesize\ttfamily void $\ast$ alloc (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t}]{alignment = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [inherited]}}



Allocate memory range. 

No need for zero-\/fill, because mmap guarantees it.\mbox{\Hypertarget{class_allocator_a82e090801fb5ae0c014e85fc401bca47}\label{class_allocator_a82e090801fb5ae0c014e85fc401bca47}} 
\index{Arena::Chunk@{Arena::Chunk}!free@{free}}
\index{free@{free}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{free()}{free()}}
{\footnotesize\ttfamily void free (\begin{DoxyParamCaption}\item[{void $\ast$}]{buf,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [inherited]}}



Free memory range. 

\mbox{\Hypertarget{class_allocator_af48b30af68c846da954ef85a876ac5a9}\label{class_allocator_af48b30af68c846da954ef85a876ac5a9}} 
\index{Arena::Chunk@{Arena::Chunk}!realloc@{realloc}}
\index{realloc@{realloc}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{realloc()}{realloc()}}
{\footnotesize\ttfamily void $\ast$ realloc (\begin{DoxyParamCaption}\item[{void $\ast$}]{buf,  }\item[{size\+\_\+t}]{old\+\_\+size,  }\item[{size\+\_\+t}]{new\+\_\+size,  }\item[{size\+\_\+t}]{alignment = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [inherited]}}

Enlarge memory range. Data from old range is moved to the beginning of new range. Address of memory range could change. nothing to do. BTW, it\textquotesingle{}s not possible to change alignment while doing realloc.

Resize malloc\textquotesingle{}d memory region with no special alignment requirement.

Resize mmap\textquotesingle{}d memory region.

No need for zero-\/fill, because mmap guarantees it.\mbox{\Hypertarget{class_allocator_a60b3b47bca967c70d89d5bda6d5c50c0}\label{class_allocator_a60b3b47bca967c70d89d5bda6d5c50c0}} 
\index{Arena::Chunk@{Arena::Chunk}!get\_stack\_threshold@{get\_stack\_threshold}}
\index{get\_stack\_threshold@{get\_stack\_threshold}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{get\_stack\_threshold()}{get\_stack\_threshold()}}
{\footnotesize\ttfamily static constexpr size\+\_\+t get\+\_\+stack\+\_\+threshold (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}, {\ttfamily [protected]}, {\ttfamily [inherited]}}

\mbox{\Hypertarget{class_allocator_a2e4223e7158b40f4e4c5cc08216f0a56}\label{class_allocator_a2e4223e7158b40f4e4c5cc08216f0a56}} 
\index{Arena::Chunk@{Arena::Chunk}!get\_mmap\_hint@{get\_mmap\_hint}}
\index{get\_mmap\_hint@{get\_mmap\_hint}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{get\_mmap\_hint()}{get\_mmap\_hint()}}
{\footnotesize\ttfamily void $\ast$ get\+\_\+mmap\+\_\+hint (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}, {\ttfamily [inherited]}}

In debug builds, request mmap() at random addresses (a kind of ASLR), to reproduce more memory stomping bugs. Note that Linux doesn\textquotesingle{}t do it by default. This may lead to worse TLB performance. 

\doxysubsection{类成员变量说明}
\mbox{\Hypertarget{structdoris_1_1vectorized_1_1_arena_1_1_chunk_aa9f974458dc400bd897fe724a13dcd47}\label{structdoris_1_1vectorized_1_1_arena_1_1_chunk_aa9f974458dc400bd897fe724a13dcd47}} 
\index{Arena::Chunk@{Arena::Chunk}!begin@{begin}}
\index{begin@{begin}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{begin}{begin}}
{\footnotesize\ttfamily char$\ast$ begin}

\mbox{\Hypertarget{structdoris_1_1vectorized_1_1_arena_1_1_chunk_ab5ad9aa3d3e725ca44ebfa85e0b1020d}\label{structdoris_1_1vectorized_1_1_arena_1_1_chunk_ab5ad9aa3d3e725ca44ebfa85e0b1020d}} 
\index{Arena::Chunk@{Arena::Chunk}!pos@{pos}}
\index{pos@{pos}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{pos}{pos}}
{\footnotesize\ttfamily char$\ast$ pos}

\mbox{\Hypertarget{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a8fd806ad19b8f5513a4cf18cbf77532c}\label{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a8fd806ad19b8f5513a4cf18cbf77532c}} 
\index{Arena::Chunk@{Arena::Chunk}!end@{end}}
\index{end@{end}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{end}{end}}
{\footnotesize\ttfamily char$\ast$ end}

\mbox{\Hypertarget{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a10f5e1367bdde8552902c68abb214564}\label{structdoris_1_1vectorized_1_1_arena_1_1_chunk_a10f5e1367bdde8552902c68abb214564}} 
\index{Arena::Chunk@{Arena::Chunk}!prev@{prev}}
\index{prev@{prev}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{prev}{prev}}
{\footnotesize\ttfamily \mbox{\hyperlink{structdoris_1_1vectorized_1_1_arena_1_1_chunk}{Chunk}}$\ast$ prev}



does not include padding. 

\mbox{\Hypertarget{class_allocator_aef026d27e574609185dcf1d047e241d6}\label{class_allocator_aef026d27e574609185dcf1d047e241d6}} 
\index{Arena::Chunk@{Arena::Chunk}!clear\_memory@{clear\_memory}}
\index{clear\_memory@{clear\_memory}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{clear\_memory}{clear\_memory}}
{\footnotesize\ttfamily constexpr bool clear\+\_\+memory\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}, {\ttfamily [protected]}, {\ttfamily [inherited]}}

\mbox{\Hypertarget{class_allocator_a4823c06be87da26bc7f8fd6573d7efb8}\label{class_allocator_a4823c06be87da26bc7f8fd6573d7efb8}} 
\index{Arena::Chunk@{Arena::Chunk}!mmap\_flags@{mmap\_flags}}
\index{mmap\_flags@{mmap\_flags}!Arena::Chunk@{Arena::Chunk}}
\doxysubsubsection{\texorpdfstring{mmap\_flags}{mmap\_flags}}
{\footnotesize\ttfamily constexpr int mmap\+\_\+flags\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}, {\ttfamily [protected]}, {\ttfamily [inherited]}}



该结构体的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
/\+Users/dabowang/be\+\_\+all/vec/common/\mbox{\hyperlink{arena_8h}{arena.\+h}}\end{DoxyCompactItemize}
