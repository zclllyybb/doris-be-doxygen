\hypertarget{ph__hash__map_8h_source}{}\doxysection{ph\+\_\+hash\+\_\+map.\+h}
\label{ph__hash__map_8h_source}\index{/Users/dabowang/be\_all/vec/common/hash\_table/ph\_hash\_map.h@{/Users/dabowang/be\_all/vec/common/hash\_table/ph\_hash\_map.h}}
\mbox{\hyperlink{ph__hash__map_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <parallel\_hashmap/phmap.h>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <boost/noncopyable.hpp>}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vec_2common_2hash__table_2hash_8h}{vec/common/hash\_table/hash.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{hash__table__utils_8h}{vec/common/hash\_table/hash\_table\_utils.h}}"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Key,\ \textcolor{keyword}{typename}\ Mapped>}
\DoxyCodeLine{00028\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{ph__hash__map_8h_ae94c9d76a45e36354497855bc46956c5}{lookup\_result\_get\_mapped}}(std::pair<const\ Key,\ Mapped>*\ it)\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordflow}{return}\ \&(it-\/>second);}
\DoxyCodeLine{00030\ \}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Key,\ \textcolor{keyword}{typename}\ Mapped,\ \textcolor{keyword}{typename}\ HashMethod\ =\ DefaultHash<Key>,}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ PartitionedHashTable\ =\ false>}
\DoxyCodeLine{00034\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_p_h_hash_map}{PHHashMap}}\ :\ \textcolor{keyword}{private}\ boost::noncopyable\ \{}
\DoxyCodeLine{00035\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map}{Self}}\ =\ \mbox{\hyperlink{class_p_h_hash_map_af8ee35d0f4f4d0f3a4951db7925230fe}{PHHashMap}};}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_a35c2373d47d8eb2187eb3b72c13da089}{Hash}}\ =\ HashMethod;}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_a9f5b30958d48e64711a29d997f6da28f}{cell\_type}}\ =\ std::pair<const\ Key,\ Mapped>;}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_a0164653d3dfb9e9479386f718017b36e}{HashMapImpl}}\ =\ phmap::flat\_hash\_map<Key,\ Mapped,\ Hash>;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_acf4be953c7037c26797d1e8784b3074d}{key\_type}}\ =\ Key;}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_a23a5273823db36e45e79574330b6e541}{mapped\_type}}\ =\ Mapped;}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_a0d51084d4345bbddfd58261167b379fe}{value\_type}}\ =\ std::pair<const\ Key,\ Mapped>;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_aa0280038291cec230b9a86655e1af382}{LookupResult}}\ =\ std::pair<const\ Key,\ Mapped>*;}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_a2ec5e2a0a30702cc5db00d79f5905087}{ConstLookupResult}}\ =\ \textcolor{keyword}{const}\ std::pair<const\ Key,\ Mapped>*;}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_a679b99a10cea24255c260c5f8f3f04fe}{const\_iterator\_impl}}\ =\ \textcolor{keyword}{typename}\ HashMapImpl::const\_iterator;}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_a997ae9e0e1ffe4541b9646ddca8699a8}{iterator\_impl}}\ =\ \textcolor{keyword}{typename}\ HashMapImpl::iterator;}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_af8ee35d0f4f4d0f3a4951db7925230fe}{PHHashMap}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_af332160b161317be3deaed4c06585acb}{PHHashMap}}(\textcolor{keywordtype}{size\_t}\ reserve\_for\_num\_elements)\ \{\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.reserve(reserve\_for\_num\_elements);\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_a1f2a47fe25b596fee91ca8cf393254c0}{PHHashMap}}(\mbox{\hyperlink{class_p_h_hash_map}{PHHashMap}}\&\&\ other)\ \{\ *\textcolor{keyword}{this}\ =\ std::move(other);\ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map}{PHHashMap}}\&\ \mbox{\hyperlink{class_p_h_hash_map_a3fb0614a84e114863793f93c0afabd7c}{operator=}}(\mbox{\hyperlink{class_p_h_hash_map}{PHHashMap}}\&\&\ rhs)\ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.clear();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}\ =\ std::move(rhs.\_hash\_map);}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ std::swap(\mbox{\hyperlink{class_p_h_hash_map_ad619874c0d3c23e6612d165c2cb9ae51}{\_need\_partition}},\ rhs.\_need\_partition);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ std::swap(\mbox{\hyperlink{class_p_h_hash_map_a1ff1f7ec64a6dc522c13ba92dd79c957}{\_partitioned\_threshold}},\ rhs.\_partitioned\_threshold);}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00064\ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Derived,\ \textcolor{keywordtype}{bool}\ is\_const>}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base}{iterator\_base}}\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a9b63c90f3071dd357c2f8afa5ffd2488}{BaseIterator}}\ =\ std::conditional\_t<is\_const,\ const\_iterator\_impl,\ iterator\_impl>;}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a9b63c90f3071dd357c2f8afa5ffd2488}{BaseIterator}}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}};}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_p_h_hash_map}{PHHashMap}};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a91fbc1535b71dd53bf2f17c1cbe21308}{iterator\_base}}()\ \{\}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a41d557eff6263d1e41c2ff6c6bfbb26c}{iterator\_base}}(\mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a9b63c90f3071dd357c2f8afa5ffd2488}{BaseIterator}}\ it)\ :\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}}(it)\ \{\}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_acd33c156deeca689a7b4f0277a045cfb}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base}{iterator\_base}}\&\ rhs)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}}\ ==\ rhs.\mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}};}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_af50b1ef399f7d2fd44352e257dfad41c}{operator!=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base}{iterator\_base}}\&\ rhs)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}}\ !=\ rhs.\mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}};}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ Derived\&\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a5dc20aa91709453024849d45351245bf}{operator++}}()\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}}++;}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}Derived\&\textcolor{keyword}{>}(*this);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00088\ }
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a6ef7fc4a0c7287c4c026c77b63c8abb9}{operator*}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a687c254fc3be665f33fffb7b45b3a353}{operator-\/>}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a6ffafb04970fe8292f7cd899a9713238}{operator*}}()\ \{\ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}*\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a318d51e071ac7998ad0290c2140209eb}{operator-\/>}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a9739d5ca94b972c4a0dc51a0fd66bd0b}{get\_first}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}}-\/>first;\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a5ca8852eeb06dd1c4841f3be58ef7815}{get\_second}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}}-\/>second;\ \}}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a7acb467be23158da60715b8632d04e29}{get\_second}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}}-\/>second;\ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_acfbc4bf99dd92a2e238bde01f4a33894}{get\_ptr}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};\ \}}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_ae1ac2018a4646d71125fa5473670aea8}{get\_hash}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a8fcfbb3370a673fc7724df8066247342}{base\_iterator}}-\/>get\_hash();\ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_ad07656856239a4495c5c352cabf52e7f}{get\_collision\_chain\_length}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ 0;\ \}}
\DoxyCodeLine{00105\ \ \ \ \ \};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_p_h_hash_map_1_1iterator}{iterator}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base}{iterator\_base}}<iterator,\ false>\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base}{iterator\_base}}<\mbox{\hyperlink{class_p_h_hash_map_1_1iterator}{iterator}},\ \textcolor{keyword}{false}>\mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a91fbc1535b71dd53bf2f17c1cbe21308}{::iterator\_base}};}
\DoxyCodeLine{00110\ \ \ \ \ \};}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base}{iterator\_base}}<const\_iterator,\ true>\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base}{iterator\_base}}<\mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}},\ \textcolor{keyword}{true}>\mbox{\hyperlink{class_p_h_hash_map_1_1iterator__base_a91fbc1535b71dd53bf2f17c1cbe21308}{::iterator\_base}};}
\DoxyCodeLine{00115\ \ \ \ \ \};}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}}\ \mbox{\hyperlink{class_p_h_hash_map_a29305669b60ca1680752e2fc3592ba99}{begin}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}}(\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.cbegin());\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}}\ \mbox{\hyperlink{class_p_h_hash_map_a39112ae08f6ffc7ee58c6aa79772e094}{cbegin}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}}(\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.cbegin());\ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator}{iterator}}\ \mbox{\hyperlink{class_p_h_hash_map_ad69bd11391be1a1dba5c8202259664f8}{begin}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator}{iterator}}(\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.begin());\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}}\ \mbox{\hyperlink{class_p_h_hash_map_accf9a4bd0c34d4a5f6a7dab66ea10cdc}{end}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}}(\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.cend());\ \}}
\DoxyCodeLine{00124\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}}\ \mbox{\hyperlink{class_p_h_hash_map_a93791e61ab486b4022c389d634b4facc}{cend}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1const__iterator}{const\_iterator}}(\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.cend());\ \}}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator}{iterator}}\ \mbox{\hyperlink{class_p_h_hash_map_acad38d52497a975bfb6f2f6acd76631f}{end}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_1_1iterator}{iterator}}(\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.end());\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ KeyHolder>}
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \mbox{\hyperlink{class_p_h_hash_map_a129c4582c39f1121609be23f4dcc27ee}{emplace}}(KeyHolder\&\&\ key\_holder,\ \mbox{\hyperlink{class_p_h_hash_map_aa0280038291cec230b9a86655e1af382}{LookupResult}}\&\ it,\ \textcolor{keywordtype}{bool}\&\ inserted)\ \{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ key\ =\ \mbox{\hyperlink{hash__table__key__holder_8h_a4fac8bfd05ae4013aa33bd42a824f9eb}{key\_holder\_get\_key}}(key\_holder);}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ inserted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ it\ =\ \&*\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.lazy\_emplace(key,\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ ctor)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ inserted\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hash__table__key__holder_8h_a425b39a22161c4748fabb6731c74f7fe}{key\_holder\_persist\_key}}(key\_holder);}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ ctor(\mbox{\hyperlink{hash__table__key__holder_8h_a4fac8bfd05ae4013aa33bd42a824f9eb}{key\_holder\_get\_key}}(key\_holder),\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{class_partitioned_hash_table}{PartitionedHashTable}})\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_ab86e9a1c6ca3064c6ab1c9fe74483808}{\_check\_if\_need\_partition}}();}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00140\ \ \ \ \ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ KeyHolder,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \mbox{\hyperlink{class_p_h_hash_map_a10b80df53e31d368020ba6575ce72624}{lazy\_emplace}}(KeyHolder\&\&\ key\_holder,\ \mbox{\hyperlink{class_p_h_hash_map_aa0280038291cec230b9a86655e1af382}{LookupResult}}\&\ it,\ Func\&\&\ f)\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ key\ =\ \mbox{\hyperlink{hash__table__key__holder_8h_a4fac8bfd05ae4013aa33bd42a824f9eb}{key\_holder\_get\_key}}(key\_holder);}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ it\ =\ \&*\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.lazy\_emplace(key,\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ ctor)\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hash__table__key__holder_8h_a425b39a22161c4748fabb6731c74f7fe}{key\_holder\_persist\_key}}(key\_holder);}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ f(ctor,\ key);}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{class_partitioned_hash_table}{PartitionedHashTable}})\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_ab86e9a1c6ca3064c6ab1c9fe74483808}{\_check\_if\_need\_partition}}();}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00153\ \ \ \ \ \}}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ KeyHolder>}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \mbox{\hyperlink{class_p_h_hash_map_a0f074e94ef6b0bad3f70b63f0332f552}{emplace}}(KeyHolder\&\&\ key\_holder,\ \mbox{\hyperlink{class_p_h_hash_map_aa0280038291cec230b9a86655e1af382}{LookupResult}}\&\ it,\ \textcolor{keywordtype}{size\_t}\ hash\_value,}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\&\ inserted)\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ key\ =\ \mbox{\hyperlink{hash__table__key__holder_8h_a4fac8bfd05ae4013aa33bd42a824f9eb}{key\_holder\_get\_key}}(key\_holder);}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ inserted\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ it\ =\ \&*\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.lazy\_emplace\_with\_hash(key,\ hash\_value,\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ ctor)\ \{}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ inserted\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hash__table__key__holder_8h_a425b39a22161c4748fabb6731c74f7fe}{key\_holder\_persist\_key}}(key\_holder);}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ ctor(key,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{class_partitioned_hash_table}{PartitionedHashTable}})\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_ab86e9a1c6ca3064c6ab1c9fe74483808}{\_check\_if\_need\_partition}}();}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00169\ \ \ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ KeyHolder,\ \textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \mbox{\hyperlink{class_p_h_hash_map_a5e2fcd31687cdf66fe293d48cff80c73}{lazy\_emplace}}(KeyHolder\&\&\ key\_holder,\ \mbox{\hyperlink{class_p_h_hash_map_aa0280038291cec230b9a86655e1af382}{LookupResult}}\&\ it,\ \textcolor{keywordtype}{size\_t}\ hash\_value,}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Func\&\&\ f)\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ key\ =\ \mbox{\hyperlink{hash__table__key__holder_8h_a4fac8bfd05ae4013aa33bd42a824f9eb}{key\_holder\_get\_key}}(key\_holder);}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ it\ =\ \&*\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.lazy\_emplace\_with\_hash(key,\ hash\_value,\ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ ctor)\ \{}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{hash__table__key__holder_8h_a425b39a22161c4748fabb6731c74f7fe}{key\_holder\_persist\_key}}(key\_holder);}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ f(ctor,\ key);}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{class_partitioned_hash_table}{PartitionedHashTable}})\ \{}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_ab86e9a1c6ca3064c6ab1c9fe74483808}{\_check\_if\_need\_partition}}();}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \}}
\DoxyCodeLine{00185\ }
\DoxyCodeLine{00186\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \mbox{\hyperlink{class_p_h_hash_map_a6476706a7df01aa921025e822ab99607}{insert}}(\textcolor{keyword}{const}\ Key\&\ key,\ \textcolor{keywordtype}{size\_t}\ hash\_value,\ \textcolor{keyword}{const}\ Mapped\&\ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}})\ \{}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \&*\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.lazy\_emplace\_with\_hash(key,\ hash\_value,}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\&](\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ ctor)\ \{\ ctor(key,\ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}});\ \});}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ it-\/>second\ =\ \mbox{\hyperlink{util_2types_8h_adae7202c63102b0934c3ac5be41b0dae}{value}};}
\DoxyCodeLine{00190\ \ \ \ \ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ KeyHolder>}
\DoxyCodeLine{00193\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_aa0280038291cec230b9a86655e1af382}{LookupResult}}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \mbox{\hyperlink{class_p_h_hash_map_a9c483f961953d802d5aab29c73f10025}{find}}(KeyHolder\&\&\ key\_holder)\ \{}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ key\ =\ \mbox{\hyperlink{hash__table__key__holder_8h_a4fac8bfd05ae4013aa33bd42a824f9eb}{key\_holder\_get\_key}}(key\_holder);}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.find(key);}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ it\ !=\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.end()\ ?\ \&*it\ :\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00197\ \ \ \ \ \}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ KeyHolder>}
\DoxyCodeLine{00200\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_aa0280038291cec230b9a86655e1af382}{LookupResult}}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \mbox{\hyperlink{class_p_h_hash_map_ab0575f6fc1af4b06a393744821e83f08}{find}}(KeyHolder\&\&\ key\_holder,\ \textcolor{keywordtype}{size\_t}\ hash\_value)\ \{}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ key\ =\ \mbox{\hyperlink{hash__table__key__holder_8h_a4fac8bfd05ae4013aa33bd42a824f9eb}{key\_holder\_get\_key}}(key\_holder);}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ it\ =\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.find(key,\ hash\_value);}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ it\ !=\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.end()\ ?\ \&*it\ :\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00204\ \ \ \ \ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_p_h_hash_map_a0902d3327344aca5739605fd268a2481}{hash}}(\textcolor{keyword}{const}\ Key\&\ x)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.hash(x);\ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \mbox{\hyperlink{class_p_h_hash_map_a5e5041b24f089fe334c999bf4ef84434}{prefetch\_by\_hash}}(\textcolor{keywordtype}{size\_t}\ hash\_value)\ \{\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.prefetch\_hash(hash\_value);\ \}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{compiler__util_8h_aa1dec568e79152c892dcf63f445cbd7a}{ALWAYS\_INLINE}}\ \mbox{\hyperlink{class_p_h_hash_map_a6872672ef03715ed1009b51c364457f1}{prefetch\_by\_key}}(Key\ key)\ \{\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.prefetch(key);\ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_p_h_hash_map_a34ca7b675bb2ef68d65ba0faf5447b82}{for\_each\_value}}(Func\&\&\ func)\ \{}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ v\ :\ *\textcolor{keyword}{this})\ func(v.get\_first(),\ v.get\_second());}
\DoxyCodeLine{00216\ \ \ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00219\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Func>}
\DoxyCodeLine{00220\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_p_h_hash_map_a79c4ec79b42efc5bd321e2026a6193d1}{for\_each\_mapped}}(Func\&\&\ func)\ \{}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ v\ :\ *\textcolor{keyword}{this})\ func(v.get\_second());}
\DoxyCodeLine{00222\ \ \ \ \ \}}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_p_h_hash_map_a198db9796b9203b37490600dd1d312af}{get\_buffer\_size\_in\_bytes}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ capacity\ =\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.capacity();}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ capacity\ *\ \textcolor{keyword}{sizeof}(\textcolor{keyword}{typename}\ HashMapImpl::slot\_type);}
\DoxyCodeLine{00227\ \ \ \ \ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_p_h_hash_map_acf71b39cbb3e50ad83e1ab7af13da34a}{get\_buffer\_size\_in\_cells}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.capacity();\ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_p_h_hash_map_ad396ee4db0d26a90a0141eac02fb0070}{add\_elem\_size\_overflow}}(\textcolor{keywordtype}{size\_t}\ row)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ capacity\ =\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.capacity();}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ phmap\ use\ 7/8th\ as\ maximum\ load\ factor.}}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.size()\ +\ row)\ >\ (capacity\ *\ 7\ /\ 8);}
\DoxyCodeLine{00235\ \ \ \ \ \}}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{class_p_h_hash_map_a259cb5a711406a8c3e5d937eb9350cca}{size}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.size();\ \}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00239\ \ \ \ \ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{class_p_h_hash_map_a6760a4dcc80a0f9e0624f757467be793}{get\_null\_key\_data}}()\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{nullptr};\ \}}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_p_h_hash_map_a9452146613e16214d663680183b2e92a}{has\_null\_key\_data}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_p_h_hash_map_a6922aad0d6cc35006f10a93e8bf160cb}{need\_partition}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_ad619874c0d3c23e6612d165c2cb9ae51}{\_need\_partition}};\ \}}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_p_h_hash_map_a47e1e77832c3cfec157cf5143921af48}{set\_partitioned\_threshold}}(\textcolor{keywordtype}{int}\ threshold)\ \{\ \mbox{\hyperlink{class_p_h_hash_map_a1ff1f7ec64a6dc522c13ba92dd79c957}{\_partitioned\_threshold}}\ =\ threshold;\ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_p_h_hash_map_a8b8fe0155e31957108021f1f9ddd5298}{check\_if\_need\_partition}}(\textcolor{keywordtype}{size\_t}\ bucket\_count)\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}\ (\mbox{\hyperlink{class_partitioned_hash_table}{PartitionedHashTable}})\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_a1ff1f7ec64a6dc522c13ba92dd79c957}{\_partitioned\_threshold}}\ >\ 0\ \&\&\ bucket\_count\ >=\ \mbox{\hyperlink{class_p_h_hash_map_a1ff1f7ec64a6dc522c13ba92dd79c957}{\_partitioned\_threshold}};}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00252\ \ \ \ \ \}}
\DoxyCodeLine{00253\ }
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_p_h_hash_map_a644718bb2fb240de962dc3c9a1fdf0dc}{empty}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.empty();\ \}}
\DoxyCodeLine{00255\ }
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_p_h_hash_map_af9521c93c45ed1ac85597d233a65cb79}{clear\_and\_shrink}}()\ \{\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.clear();\ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_p_h_hash_map_ab86e9a1c6ca3064c6ab1c9fe74483808}{\_check\_if\_need\_partition}}()\ \{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{compiler__util_8h_a9acc330d508b9a3b775cfdf7ce405e7d}{UNLIKELY}}(\mbox{\hyperlink{class_p_h_hash_map_a8b8fe0155e31957108021f1f9ddd5298}{check\_if\_need\_partition}}(\mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}}.size()\ +\ 1)))\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_ad619874c0d3c23e6612d165c2cb9ae51}{\_need\_partition}}\ =\ \mbox{\hyperlink{class_p_h_hash_map_ad396ee4db0d26a90a0141eac02fb0070}{add\_elem\_size\_overflow}}(1);}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00263\ \ \ \ \ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \ \ \ \ \mbox{\hyperlink{class_p_h_hash_map_a0164653d3dfb9e9479386f718017b36e}{HashMapImpl}}\ \mbox{\hyperlink{class_p_h_hash_map_a53e4679fb96c9fb32d532c5d84a70fd4}{\_hash\_map}};}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{comment}{//\ the\ bucket\ count\ threshold\ above\ which\ it's\ converted\ to\ partioned\ hash\ table}}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{comment}{//\ >\ 0:\ enable\ convert\ dynamically}}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{comment}{//\ 0:\ convert\ is\ disabled}}
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_p_h_hash_map_a1ff1f7ec64a6dc522c13ba92dd79c957}{\_partitioned\_threshold}}\ =\ 0;}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{comment}{//\ if\ need\ resize\ and\ bucket\ count\ after\ resize\ will\ be\ >=\ \_partitioned\_threshold,}}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{comment}{//\ this\ flag\ is\ set\ to\ true,\ and\ resize\ does\ not\ actually\ happen,}}
\DoxyCodeLine{00272\ \ \ \ \ \textcolor{comment}{//\ PartitionedHashTable\ will\ convert\ this\ hash\ table\ to\ partitioned\ hash\ table}}
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_p_h_hash_map_ad619874c0d3c23e6612d165c2cb9ae51}{\_need\_partition}};}
\DoxyCodeLine{00274\ \};}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Key,\ \textcolor{keyword}{typename}\ Mapped,\ \textcolor{keyword}{typename}\ Hash,\ \textcolor{keywordtype}{bool}\ PartitionedHashTable>}
\DoxyCodeLine{00277\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_hash_table_traits}{HashTableTraits}}<\mbox{\hyperlink{class_p_h_hash_map}{PHHashMap}}<Key,\ Mapped,\ Hash,\ \mbox{\hyperlink{class_partitioned_hash_table}{PartitionedHashTable}}>>\ \{}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_hash_table_traits_a64793ef8bb036996662e85e357d7ec05}{is\_phmap}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00279\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_hash_table_traits_abf473b7cbad64e1f6a6e4a9fa26c642b}{is\_string\_hash\_table}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_hash_table_traits_a4023b6e002c008054eceddca52352baa}{is\_partitioned\_table}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00281\ \};}

\end{DoxyCode}
