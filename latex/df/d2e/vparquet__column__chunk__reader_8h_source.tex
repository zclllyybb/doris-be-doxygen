\hypertarget{vparquet__column__chunk__reader_8h_source}{}\doxysection{vparquet\+\_\+column\+\_\+chunk\+\_\+reader.\+h}
\label{vparquet__column__chunk__reader_8h_source}\index{/Users/dabowang/doris/be/src/vec/exec/format/parquet/vparquet\_column\_chunk\_reader.h@{/Users/dabowang/doris/be/src/vec/exec/format/parquet/vparquet\_column\_chunk\_reader.h}}
\mbox{\hyperlink{vparquet__column__chunk__reader_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <unordered\_map>}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{status_8h}{common/status.h}}"{}}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{decoder_8h}{decoder.h}}"{}}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ "{}gen\_cpp/parquet\_types.h"{}}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{buffered__reader_8h}{io/fs/buffered\_reader.h}}"{}}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{level__decoder_8h}{level\_decoder.h}}"{}}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{schema__desc_8h}{schema\_desc.h}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{block__compression_8h}{util/block\_compression.h}}"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vparquet__page__reader_8h}{vparquet\_page\_reader.h}}"{}}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris_1_1vectorized}{doris::vectorized}}\ \{}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00056\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader}{ColumnChunkReader}}\ \{}
\DoxyCodeLine{00057\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics}{Statistics}}\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics_a83519fa4a6e715734dc2005b7b6f468b}{decompress\_time}}\ =\ 0;}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics_a4b2d868af9e846f3d5125c622545251e}{decompress\_cnt}}\ =\ 0;}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics_afd6f3081c2ecfe9aa3d15958b7ea8f4b}{decode\_header\_time}}\ =\ 0;}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics_a6364835f17ab175f756a0b8a34ac1e42}{decode\_value\_time}}\ =\ 0;}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics_a034f40bc65f05123c3f52a725770f314}{decode\_dict\_time}}\ =\ 0;}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ int64\_t\ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics_a8a61f6efe4eab8773bcf4fe4e0a4b182}{decode\_level\_time}}\ =\ 0;}
\DoxyCodeLine{00065\ \ \ \ \ \};}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader}{ColumnChunkReader}}(\mbox{\hyperlink{classdoris_1_1io_1_1_buffered_stream_reader}{io::BufferedStreamReader}}*\ reader,\ tparquet::ColumnChunk*\ column\_chunk,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_field_schema}{FieldSchema}}*\ field\_schema,\ cctz::time\_zone*\ ctz,\ \mbox{\hyperlink{classdoris_1_1io_1_1_i_o_context}{io::IOContext}}*\ io\_ctx);}
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ae1e19eb92e33da2659f69485d6147d03}{\string~ColumnChunkReader}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{comment}{//\ Initialize\ chunk\ reader,\ will\ generate\ the\ decoder\ and\ codec.}}
\DoxyCodeLine{00072\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a223508714f7b7c2a338265d09a23a25f}{init}}();}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{comment}{//\ Whether\ the\ chunk\ reader\ has\ a\ more\ page\ to\ read.}}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a6b7985e1f160b81abee092a36fcf0e7d}{has\_next\_page}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aade3443d71d6079856faff57e50fbd61}{\_page\_reader}}-\/>has\_next\_page();\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{comment}{//\ Seek\ to\ the\ specific\ page,\ page\_header\_offset\ must\ be\ the\ start\ offset\ of\ the\ page\ header.}}
\DoxyCodeLine{00078\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ad0dc1235d8bdff7f9f956a257a21eea4}{seek\_to\_page}}(int64\_t\ page\_header\_offset)\ \{}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ab96588ae58fa897a0ffb19c83a41ffa4}{\_remaining\_num\_values}}\ =\ 0;}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aade3443d71d6079856faff57e50fbd61}{\_page\_reader}}-\/>seek\_to\_page(page\_header\_offset);}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a2835def5d336fd6d512e9197ff50c020}{\_state}}\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4aa307353740245a4be434ad2ca7169232}{INITIALIZED}};}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{comment}{//\ Seek\ to\ next\ page.\ Only\ read\ and\ parse\ the\ page\ header.}}
\DoxyCodeLine{00085\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a512dacdea3256f8cc5f76510d0192c52}{next\_page}}();}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{comment}{//\ Skip\ current\ page(will\ not\ read\ and\ parse)\ if\ the\ page\ is\ filtered\ by\ predicates.}}
\DoxyCodeLine{00088\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_af6f191b5f6b0f3f0c03bb52287fa23e7}{skip\_page}}()\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ res\ =\ \mbox{\hyperlink{classdoris_1_1_status_a6ec1a217f203269ab53d2290d602db24}{Status::OK}}();}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ab96588ae58fa897a0ffb19c83a41ffa4}{\_remaining\_num\_values}}\ =\ 0;}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a2835def5d336fd6d512e9197ff50c020}{\_state}}\ ==\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4adac16e3097bed91a2e68a73ce6f4f472}{HEADER\_PARSED}})\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aade3443d71d6079856faff57e50fbd61}{\_page\_reader}}-\/>skip\_page();}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a2835def5d336fd6d512e9197ff50c020}{\_state}}\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4afe656b6aed325854a6840d63c129307f}{PAGE\_SKIPPED}};}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{00096\ \ \ \ \ \}}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{comment}{//\ Skip\ some\ values(will\ not\ read\ and\ parse)\ in\ current\ page\ if\ the\ values\ are\ filtered\ by\ predicates.}}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{comment}{//\ when\ skip\_data\ =\ false,\ the\ underlying\ decoder\ will\ not\ skip\ data,}}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{comment}{//\ only\ used\ when\ maintaining\ the\ consistency\ of\ \_remaining\_num\_values.}}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a29f23516228b9f0fec2c5e0a16200344}{skip\_values}}(\textcolor{keywordtype}{size\_t}\ num\_values,\ \textcolor{keywordtype}{bool}\ skip\_data\ =\ \textcolor{keyword}{true});}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{comment}{//\ Load\ page\ data\ into\ the\ underlying\ container,}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{comment}{//\ and\ initialize\ the\ repetition\ and\ definition\ level\ decoder\ for\ current\ page\ data.}}
\DoxyCodeLine{00104\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a96dce54ffc9a5e80562ad649f6fcc6b1}{load\_page\_data}}();}
\DoxyCodeLine{00105\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a08d2ecd72082a00df5af1cc2c2b2ac4e}{load\_page\_data\_idempotent}}()\ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a2835def5d336fd6d512e9197ff50c020}{\_state}}\ ==\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4a2faa46d241a2edd1c10f50ed5144dad2}{DATA\_LOADED}})\ \{}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_status_a6ec1a217f203269ab53d2290d602db24}{Status::OK}}();}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a96dce54ffc9a5e80562ad649f6fcc6b1}{load\_page\_data}}();}
\DoxyCodeLine{00110\ \ \ \ \ \}}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{comment}{//\ The\ remaining\ number\ of\ values\ in\ current\ page(including\ null\ values).\ Decreased\ when\ reading\ or\ skipping.}}
\DoxyCodeLine{00112\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a1359006ca4d2b5470727c75ff07fefd4}{remaining\_num\_values}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ab96588ae58fa897a0ffb19c83a41ffa4}{\_remaining\_num\_values}};\ \}}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{comment}{//\ null\ values\ are\ generated\ from\ definition\ levels}}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{comment}{//\ the\ caller\ should\ maintain\ the\ consistency\ after\ analyzing\ null\ values\ from\ definition\ levels.}}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37e57c41005ddb594feb40feee1a1c0}{insert\_null\_values}}(\mbox{\hyperlink{namespacedoris_1_1vectorized_ac01d3bf9792b1f5f19e8acb2a08553a3}{MutableColumnPtr}}\&\ doris\_column,\ \textcolor{keywordtype}{size\_t}\ num\_values);}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ raw\ data\ of\ current\ page.}}
\DoxyCodeLine{00117\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a29d4e16e9e61dce2882e0656e6f2b158}{get\_page\_data}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ae0b562db4e86811005028ba541abbf08}{\_page\_data}};\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ repetition\ levels}}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a58d1049f2fe61970aec6a9e0a129e40f}{get\_rep\_levels}}(\mbox{\hyperlink{namespacedoris_1_1vectorized_af4858e805cd61091fda56def91798020}{level\_t}}*\ levels,\ \textcolor{keywordtype}{size\_t}\ n);}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ definition\ levels}}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a045997fb2e9d1e4b80070574e3bcb01d}{get\_def\_levels}}(\mbox{\hyperlink{namespacedoris_1_1vectorized_af4858e805cd61091fda56def91798020}{level\_t}}*\ levels,\ \textcolor{keywordtype}{size\_t}\ n);}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{comment}{//\ Decode\ values\ in\ current\ page\ into\ doris\ column.}}
\DoxyCodeLine{00125\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aad321a3e582ef524f96c97fb02ebfe4d}{decode\_values}}(\mbox{\hyperlink{namespacedoris_1_1vectorized_ac01d3bf9792b1f5f19e8acb2a08553a3}{MutableColumnPtr}}\&\ doris\_column,\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a160d474c1487ffb0ca43c78931aedc2a}{DataTypePtr}}\&\ data\_type,}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_select_vector}{ColumnSelectVector}}\&\ select\_vector,\ \textcolor{keywordtype}{bool}\ is\_dict\_filter);}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ repetition\ level\ decoder\ of\ current\ page.}}
\DoxyCodeLine{00129\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_level_decoder}{LevelDecoder}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a8176e7428c52afcbb05cb2abe8caf4ac}{rep\_level\_decoder}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a92860630765fd04948ba0a5785962890}{\_rep\_level\_decoder}};\ \}}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{comment}{//\ Get\ the\ definition\ level\ decoder\ of\ current\ page.}}
\DoxyCodeLine{00131\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_level_decoder}{LevelDecoder}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa55a9d284c256174ecc883752cb1732c}{def\_level\_decoder}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a52b3d0ef784baaa25b62d9f83d39f0ea}{\_def\_level\_decoder}};\ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_af4858e805cd61091fda56def91798020}{level\_t}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_af60a565749497e16d8ff5399c3b95aa6}{max\_rep\_level}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a950a32d48524c215ef7d2f4b14ef62f2}{\_max\_rep\_level}};\ \}}
\DoxyCodeLine{00134\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_af4858e805cd61091fda56def91798020}{level\_t}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ac8cb6210e1457c4c34c3c55f47639757}{max\_def\_level}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a16418e676b463b50ae40345995b37078}{\_max\_def\_level}};\ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_af49f602e89277c69dd34d0a9d03ac910}{has\_dict}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a8260e2a0fd1003e923383ac792223792}{\_has\_dict}};\ \};}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{comment}{//\ Get\ page\ decoder}}
\DoxyCodeLine{00139\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_decoder}{Decoder}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ad3f678597c41cce04005d8e119c096db}{get\_page\_decoder}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a0b436ebe1d2002afebe8a62dca1e390c}{\_page\_decoder}};\ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics}{Statistics}}\&\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_af157e8d31443b9997700074c24620bf4}{statistics}}()\ \{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa433b6c439368a45af23b07724869920}{\_statistics}}.\mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics_afd6f3081c2ecfe9aa3d15958b7ea8f4b}{decode\_header\_time}}\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aade3443d71d6079856faff57e50fbd61}{\_page\_reader}}-\/>statistics().decode\_header\_time;}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa433b6c439368a45af23b07724869920}{\_statistics}};}
\DoxyCodeLine{00144\ \ \ \ \ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a7fa421a72e67b263ea32578f0a57cb8a}{read\_dict\_values\_to\_column}}(\mbox{\hyperlink{namespacedoris_1_1vectorized_ac01d3bf9792b1f5f19e8acb2a08553a3}{MutableColumnPtr}}\&\ doris\_column)\ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a11a9a987555f6df4f5c43a9121181554}{\_decoders}}[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(tparquet::Encoding::RLE\_DICTIONARY)]}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>\mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a7fa421a72e67b263ea32578f0a57cb8a}{read\_dict\_values\_to\_column}}(doris\_column);}
\DoxyCodeLine{00149\ \ \ \ \ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a014a66533a9555fe359da416b7d737d5}{get\_dict\_codes}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_string}{ColumnString}}*\ column\_string,\ std::vector<int32\_t>*\ dict\_codes)\ \{}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a11a9a987555f6df4f5c43a9121181554}{\_decoders}}[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(tparquet::Encoding::RLE\_DICTIONARY)]-\/>\mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a014a66533a9555fe359da416b7d737d5}{get\_dict\_codes}}(}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ column\_string,\ dict\_codes);}
\DoxyCodeLine{00154\ \ \ \ \ \}}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_ac01d3bf9792b1f5f19e8acb2a08553a3}{MutableColumnPtr}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a2cfb8728964985d3a536ddc17774ba60}{convert\_dict\_column\_to\_string\_column}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_vector}{ColumnInt32}}*\ dict\_column)\ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a11a9a987555f6df4f5c43a9121181554}{\_decoders}}[\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(tparquet::Encoding::RLE\_DICTIONARY)]}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/>\mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a2cfb8728964985d3a536ddc17774ba60}{convert\_dict\_column\_to\_string\_column}}(dict\_column);}
\DoxyCodeLine{00159\ \ \ \ \ \}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keyword}{enum}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4}{ColumnChunkReaderState}}\ \{\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4a9aa925bc1a8429e54310c03c882df4a3}{NOT\_INIT}},\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4aa307353740245a4be434ad2ca7169232}{INITIALIZED}},\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4adac16e3097bed91a2e68a73ce6f4f472}{HEADER\_PARSED}},\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4a2faa46d241a2edd1c10f50ed5144dad2}{DATA\_LOADED}},\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4afe656b6aed325854a6840d63c129307f}{PAGE\_SKIPPED}}\ \};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a2f01ec3492ba2cc281864d24f5b83a07}{\_decode\_dict\_page}}();}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a8957cca7100385d34d1f86fad461b145}{\_reserve\_decompress\_buf}}(\textcolor{keywordtype}{size\_t}\ size);}
\DoxyCodeLine{00166\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a5371b58438fdaf010fcb6246efd00079}{\_get\_type\_length}}();}
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a40a5de4f01b7e2aa4fc5a2859ffb17ed}{\_get\_uncompressed\_levels}}(\textcolor{keyword}{const}\ tparquet::DataPageHeaderV2\&\ page\_v2,\ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\&\ page\_data);}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4}{ColumnChunkReaderState}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a2835def5d336fd6d512e9197ff50c020}{\_state}}\ =\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa37275e3b712a718613254ed3d689fa4a9aa925bc1a8429e54310c03c882df4a3}{NOT\_INIT}};}
\DoxyCodeLine{00170\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_field_schema}{FieldSchema}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aed79194a2ba8fc92ab63decd7ca6dd43}{\_field\_schema}};}
\DoxyCodeLine{00171\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_af4858e805cd61091fda56def91798020}{level\_t}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a950a32d48524c215ef7d2f4b14ef62f2}{\_max\_rep\_level}};}
\DoxyCodeLine{00172\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_af4858e805cd61091fda56def91798020}{level\_t}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a16418e676b463b50ae40345995b37078}{\_max\_def\_level}};}
\DoxyCodeLine{00173\ \ \ \ \ tparquet::LogicalType\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_abe667461a82bda7fc5fbea2fa771f601}{\_parquet\_logical\_type}};}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00175\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1io_1_1_buffered_stream_reader}{io::BufferedStreamReader}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a2107643686c9363300d14f3e9eb203c8}{\_stream\_reader}};}
\DoxyCodeLine{00176\ \ \ \ \ tparquet::ColumnMetaData\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a036827a9c37d8ba538b830abd21008e4}{\_metadata}};}
\DoxyCodeLine{00177\ \ \ \ \ cctz::time\_zone*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a320aaf50043ac607885ecae36eb96aed}{\_ctz}};}
\DoxyCodeLine{00178\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1io_1_1_i_o_context}{io::IOContext}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a432dbd94b60d1e75232daf3e97e1112a}{\_io\_ctx}};}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ std::unique\_ptr<PageReader>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aade3443d71d6079856faff57e50fbd61}{\_page\_reader}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00181\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_block_compression_codec}{BlockCompressionCodec}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a83f129e7bc71a8cf33461f5ad9ab1bdb}{\_block\_compress\_codec}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_level_decoder}{LevelDecoder}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a92860630765fd04948ba0a5785962890}{\_rep\_level\_decoder}};}
\DoxyCodeLine{00184\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_level_decoder}{LevelDecoder}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a52b3d0ef784baaa25b62d9f83d39f0ea}{\_def\_level\_decoder}};}
\DoxyCodeLine{00185\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ab96588ae58fa897a0ffb19c83a41ffa4}{\_remaining\_num\_values}}\ =\ 0;}
\DoxyCodeLine{00186\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ae0b562db4e86811005028ba541abbf08}{\_page\_data}};}
\DoxyCodeLine{00187\ \ \ \ \ std::unique\_ptr<uint8\_t[]>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ae0bafef96be135f4da4d220a845f4fe8}{\_decompress\_buf}};}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a7bc46cafca7fd8b5e3c6a1a5cc75020a}{\_decompress\_buf\_size}}\ =\ 0;}
\DoxyCodeLine{00189\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_ae1519edf36d8cabc663c13eaaabf1f3b}{\_v2\_rep\_levels}};}
\DoxyCodeLine{00190\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a5e1631c1d0473132a68f4e3c4a202734}{\_v2\_def\_levels}};}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a8260e2a0fd1003e923383ac792223792}{\_has\_dict}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00192\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_decoder}{Decoder}}*\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a0b436ebe1d2002afebe8a62dca1e390c}{\_page\_decoder}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{comment}{//\ Map:\ encoding\ -\/>\ Decoder}}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{comment}{//\ Plain\ or\ Dictionary\ encoding.\ If\ the\ dictionary\ grows\ too\ big,\ the\ encoding\ will\ fall\ back\ to\ the\ plain\ encoding}}
\DoxyCodeLine{00195\ \ \ \ \ std::unordered\_map<int,\ std::unique\_ptr<Decoder>>\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_a11a9a987555f6df4f5c43a9121181554}{\_decoders}};}
\DoxyCodeLine{00196\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1vectorized_1_1_column_chunk_reader_1_1_statistics}{Statistics}}\ \mbox{\hyperlink{classdoris_1_1vectorized_1_1_column_chunk_reader_aa433b6c439368a45af23b07724869920}{\_statistics}};}
\DoxyCodeLine{00197\ \};}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \}\ \textcolor{comment}{//\ namespace\ doris::vectorized}}

\end{DoxyCode}
