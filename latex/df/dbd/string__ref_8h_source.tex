\hypertarget{string__ref_8h_source}{}\doxysection{string\+\_\+ref.\+h}
\label{string__ref_8h_source}\index{/Users/dabowang/doris/be/src/vec/common/string\_ref.h@{/Users/dabowang/doris/be/src/vec/common/string\_ref.h}}
\mbox{\hyperlink{string__ref_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ This\ file\ is\ copied\ from}}
\DoxyCodeLine{00018\ \textcolor{comment}{//\ https://github.com/ClickHouse/ClickHouse/blob/master/base/base/StringRef.h}}
\DoxyCodeLine{00019\ \textcolor{comment}{//\ and\ modified\ by\ Doris}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ <climits>}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <ostream>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <string\_view>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{gutil_2hash_2city_8h}{gutil/hash/city.h}}"{}}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{hash128to64_8h}{gutil/hash/hash128to64.h}}"{}}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{cpu__info_8h}{util/cpu\_info.h}}"{}}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{hash__util_8hpp}{util/hash\_util.hpp}}"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{slice_8h}{util/slice.h}}"{}}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{string__ref_8h}{vec/common/string\_ref.h}}"{}}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{unaligned_8h}{vec/common/unaligned.h}}"{}}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{vec_2core_2types_8h}{vec/core/types.h}}"{}}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#if\ defined(\_\_SSE2\_\_)}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#include\ <emmintrin.h>}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#if\ defined(\_\_SSE4\_2\_\_)}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#include\ <nmmintrin.h>}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#include\ <smmintrin.h>}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{sse__util_8hpp}{util/sse\_util.hpp}}"{}}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\#if\ defined(\_\_aarch64\_\_)}}
\DoxyCodeLine{00051\ \textcolor{preprocessor}{\#include\ <sse2neon.h>}}
\DoxyCodeLine{00052\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00057\ \textcolor{keyword}{namespace\ }\{}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{preprocessor}{\#if\ defined(\_\_SSE2\_\_)\ ||\ defined(\_\_aarch64\_\_)}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00066\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ compareSSE2(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ p1,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ p2)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{return}\ 0xFFFF\ ==}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \_mm\_movemask\_epi8(\_mm\_cmpeq\_epi8(\_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p1)),}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p2))));}
\DoxyCodeLine{00070\ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ compareSSE2x4(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ p1,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ p2)\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordflow}{return}\ 0xFFFF\ ==}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \_mm\_movemask\_epi8(\_mm\_and\_si128(}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_and\_si128(}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_cmpeq\_epi8(\_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p1)),}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p2))),}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_cmpeq\_epi8(}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p1)\ +\ 1),}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p2)\ +\ 1))),}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_and\_si128(}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_cmpeq\_epi8(}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p1)\ +\ 2),}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p2)\ +\ 2)),}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_cmpeq\_epi8(}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p1)\ +\ 3),}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(p2)\ +\ 3)))));}
\DoxyCodeLine{00088\ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ memequalSSE2Wide(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ p1,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ p2,\ \textcolor{keywordtype}{size\_t}\ size)\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ <=\ 16)\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ >=\ 8)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ unaligned\_load<uint64\_t>(p1)\ ==\ unaligned\_load<uint64\_t>(p2)\ \&\&}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unaligned\_load<uint64\_t>(p1\ +\ size\ -\/\ 8)\ ==}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unaligned\_load<uint64\_t>(p2\ +\ size\ -\/\ 8);}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (size\ >=\ 4)\ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ unaligned\_load<uint32\_t>(p1)\ ==\ unaligned\_load<uint32\_t>(p2)\ \&\&}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unaligned\_load<uint32\_t>(p1\ +\ size\ -\/\ 4)\ ==}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unaligned\_load<uint32\_t>(p2\ +\ size\ -\/\ 4);}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (size\ >=\ 2)\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ unaligned\_load<uint16\_t>(p1)\ ==\ unaligned\_load<uint16\_t>(p2)\ \&\&}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unaligned\_load<uint16\_t>(p1\ +\ size\ -\/\ 2)\ ==}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ unaligned\_load<uint16\_t>(p2\ +\ size\ -\/\ 2);}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (size\ >=\ 1)\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *p1\ ==\ *p2;}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00118\ \ \ \ \ \}}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{while}\ (size\ >=\ 64)\ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (compareSSE2x4(p1,\ p2))\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ p1\ +=\ 64;}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ p2\ +=\ 64;}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ size\ -\/=\ 64;}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordflow}{switch}\ (size\ /\ 16)\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!compareSSE2(p1\ +\ 32,\ p2\ +\ 32))\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ [[fallthrough]];}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!compareSSE2(p1\ +\ 16,\ p2\ +\ 16))\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ [[fallthrough]];}
\DoxyCodeLine{00141\ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!compareSSE2(p1,\ p2))\ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00145\ \ \ \ \ \}}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keywordflow}{return}\ compareSSE2(p1\ +\ size\ -\/\ 16,\ p2\ +\ size\ -\/\ 16);}
\DoxyCodeLine{00148\ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \textcolor{comment}{//\ Compare\ two\ strings\ using\ sse4.2\ intrinsics\ if\ they\ are\ available.\ This\ code\ assumes}}
\DoxyCodeLine{00153\ \textcolor{comment}{//\ that\ the\ trivial\ cases\ are\ already\ handled\ (i.e.\ one\ string\ is\ empty).}}
\DoxyCodeLine{00154\ \textcolor{comment}{//\ Returns:}}
\DoxyCodeLine{00155\ \textcolor{comment}{//\ \ \ <\ 0\ if\ s1\ <\ s2}}
\DoxyCodeLine{00156\ \textcolor{comment}{//\ \ \ 0\ if\ s1\ ==\ s2}}
\DoxyCodeLine{00157\ \textcolor{comment}{//\ \ \ >\ 0\ if\ s1\ >\ s2}}
\DoxyCodeLine{00158\ \textcolor{comment}{//\ The\ SSE\ code\ path\ is\ just\ under\ 2x\ faster\ than\ the\ non-\/sse\ code\ path.}}
\DoxyCodeLine{00159\ \textcolor{comment}{//\ \ \ -\/\ s1/n1:\ ptr/len\ for\ the\ first\ string}}
\DoxyCodeLine{00160\ \textcolor{comment}{//\ \ \ -\/\ s2/n2:\ ptr/len\ for\ the\ second\ string}}
\DoxyCodeLine{00161\ \textcolor{comment}{//\ \ \ -\/\ len:\ min(n1,\ n2)\ -\/\ this\ can\ be\ more\ cheaply\ passed\ in\ by\ the\ caller}}
\DoxyCodeLine{00162\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ string\_compare(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{lgamma_8c_a1ff9ee3251659529629e761b307fada6}{s1}},\ int64\_t\ n1,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{lgamma_8c_a6f99aff13f96e26313f4fdfb4fbe5b1d}{s2}},\ int64\_t\ n2,\ int64\_t\ len)\ \{}
\DoxyCodeLine{00163\ \ \ \ \ DCHECK\_EQ(len,\ std::min(n1,\ n2));}
\DoxyCodeLine{00164\ \textcolor{preprocessor}{\#ifdef\ \_\_SSE4\_2\_\_}}
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordflow}{while}\ (len\ >=\ \mbox{\hyperlink{namespacedoris_1_1sse__util_a3d634f65addf5411b1f1668b0396e835}{sse\_util::CHARS\_PER\_128\_BIT\_REGISTER}})\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}\ xmm0\ =\ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(\mbox{\hyperlink{lgamma_8c_a1ff9ee3251659529629e761b307fada6}{s1}}));}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}\ xmm1\ =\ \_mm\_loadu\_si128(\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }\mbox{\hyperlink{memcpy__aarch64_8cpp_ae568b00e462205af997f7d5d84814f70}{\_\_m128i}}*\textcolor{keyword}{>}(\mbox{\hyperlink{lgamma_8c_a6f99aff13f96e26313f4fdfb4fbe5b1d}{s2}}));}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ chars\_match\ =\ \_mm\_cmpestri(xmm0,\ \mbox{\hyperlink{namespacedoris_1_1sse__util_a3d634f65addf5411b1f1668b0396e835}{sse\_util::CHARS\_PER\_128\_BIT\_REGISTER}},\ xmm1,}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1sse__util_a3d634f65addf5411b1f1668b0396e835}{sse\_util::CHARS\_PER\_128\_BIT\_REGISTER}},\ \mbox{\hyperlink{namespacedoris_1_1sse__util_ac3860f44453421574c4802e7f70c2ae7}{sse\_util::STRCMP\_MODE}});}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (chars\_match\ !=\ \mbox{\hyperlink{namespacedoris_1_1sse__util_a3d634f65addf5411b1f1668b0396e835}{sse\_util::CHARS\_PER\_128\_BIT\_REGISTER}})\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})\mbox{\hyperlink{lgamma_8c_a1ff9ee3251659529629e761b307fada6}{s1}}[chars\_match]\ -\/\ (\textcolor{keywordtype}{unsigned}\ char)\mbox{\hyperlink{lgamma_8c_a6f99aff13f96e26313f4fdfb4fbe5b1d}{s2}}[chars\_match];}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ len\ -\/=\ \mbox{\hyperlink{namespacedoris_1_1sse__util_a3d634f65addf5411b1f1668b0396e835}{sse\_util::CHARS\_PER\_128\_BIT\_REGISTER}};}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{lgamma_8c_a1ff9ee3251659529629e761b307fada6}{s1}}\ +=\ \mbox{\hyperlink{namespacedoris_1_1sse__util_a3d634f65addf5411b1f1668b0396e835}{sse\_util::CHARS\_PER\_128\_BIT\_REGISTER}};}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{lgamma_8c_a6f99aff13f96e26313f4fdfb4fbe5b1d}{s2}}\ +=\ \mbox{\hyperlink{namespacedoris_1_1sse__util_a3d634f65addf5411b1f1668b0396e835}{sse\_util::CHARS\_PER\_128\_BIT\_REGISTER}};}
\DoxyCodeLine{00176\ \ \ \ \ \}}
\DoxyCodeLine{00177\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{lgamma_8c_a181b0d478013a93f01f2bc0e90bfe20c}{u1}},\ \mbox{\hyperlink{lgamma_8c_ac15b0b429752550f8a8778cad0ba1698}{u2}};}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordflow}{while}\ (len-\/-\/\ >\ 0)\ \{}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{lgamma_8c_a181b0d478013a93f01f2bc0e90bfe20c}{u1}}\ =\ (\textcolor{keywordtype}{unsigned}\ char)*\mbox{\hyperlink{lgamma_8c_a1ff9ee3251659529629e761b307fada6}{s1}}++;}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{lgamma_8c_ac15b0b429752550f8a8778cad0ba1698}{u2}}\ =\ (\textcolor{keywordtype}{unsigned}\ char)*\mbox{\hyperlink{lgamma_8c_a6f99aff13f96e26313f4fdfb4fbe5b1d}{s2}}++;}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{lgamma_8c_a181b0d478013a93f01f2bc0e90bfe20c}{u1}}\ !=\ \mbox{\hyperlink{lgamma_8c_ac15b0b429752550f8a8778cad0ba1698}{u2}})\ \{}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{lgamma_8c_a181b0d478013a93f01f2bc0e90bfe20c}{u1}}\ -\/\ \mbox{\hyperlink{lgamma_8c_ac15b0b429752550f8a8778cad0ba1698}{u2}};}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00185\ \ \ \ \ \}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keywordflow}{return}\ n1\ -\/\ n2;}
\DoxyCodeLine{00188\ \}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \}\ \textcolor{comment}{//\ unnamed\ namespace}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00195\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ \{}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{comment}{//\ FIXME:\ opening\ member\ accessing\ really\ damages.}}
\DoxyCodeLine{00197\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}\ =\ 0;}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref_ac06f8fc1d48f7d20a45f2317daf902a4}{StringRef}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00201\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref_a86b77ee2b0796d9348bb0c6c88b055d1}{StringRef}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ data\_,\ \textcolor{keywordtype}{size\_t}\ size\_)\ :\ \mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}}(data\_),\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}(size\_)\ \{\}}
\DoxyCodeLine{00202\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref_af87d464a432c62ff8fae6a6a6fe1c508}{StringRef}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*\ data\_,\ \textcolor{keywordtype}{size\_t}\ size\_)}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}(reinterpret\_cast<const\ char*>(data\_),\ size\_)\ \{\}}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref_a3759c8aff2891c6af0e632927e79e78d}{StringRef}}(\textcolor{keyword}{const}\ std::string\&\ s)\ :\ \mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}}(s.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}}()),\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}(s.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}())\ \{\}}
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a3796986683f9c24c80774607d8bd5442}{StringRef}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ str)\ :\ \mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}}(str),\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}(strlen(str))\ \{\}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ std::string\ \mbox{\hyperlink{structdoris_1_1_string_ref_aac993ecccd3d88aafefb6b8e3caa1dee}{to\_string}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ std::string(\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}});\ \}}
\DoxyCodeLine{00209\ \ \ \ \ std::string\ \mbox{\hyperlink{structdoris_1_1_string_ref_ae21c3e223fb1aec0439964d01e5e0282}{debug\_string}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_aac993ecccd3d88aafefb6b8e3caa1dee}{to\_string}}();\ \}}
\DoxyCodeLine{00210\ \ \ \ \ std::string\_view\ \mbox{\hyperlink{structdoris_1_1_string_ref_aa99a7dc6becd9e8587bb3b1e4cae0809}{to\_string\_view}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ std::string\_view(\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}});\ \}}
\DoxyCodeLine{00211\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_slice}{Slice}}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a0fa8acdca4eb2b23032e655cbdf8d798}{to\_slice}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_slice}{doris::Slice}}(\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}});\ \}}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00213\ \ \ \ \ \textcolor{comment}{//\ this\ is\ just\ for\ show,\ e.g.\ print\ data\ to\ error\ log,\ to\ avoid\ print\ large\ string.}}
\DoxyCodeLine{00214\ \ \ \ \ std::string\ \mbox{\hyperlink{structdoris_1_1_string_ref_a173c0493216abe02c8b11406be50dff3}{to\_prefix}}(\textcolor{keywordtype}{size\_t}\ length)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ std::string(\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ std::min(length,\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}));\ \}}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \textcolor{keyword}{explicit}\ \textcolor{keyword}{operator}\ std::string()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_aac993ecccd3d88aafefb6b8e3caa1dee}{to\_string}}();\ \}}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keyword}{operator}\ std::string\_view()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ std::string\_view\ \{\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}\};\ \}}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a47aae17eeb9619afa660b6cc2dd20629}{substring}}(\textcolor{keywordtype}{int}\ start\_pos,\ \textcolor{keywordtype}{int}\ new\_len)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ac06f8fc1d48f7d20a45f2317daf902a4}{StringRef}}(\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}}\ +\ start\_pos,\ (new\_len\ <\ 0)\ ?\ (\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}\ -\/\ start\_pos)\ :\ new\_len);}
\DoxyCodeLine{00221\ \ \ \ \ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a65f885a38d4eae6691c63242e86119a8}{substring}}(\textcolor{keywordtype}{int}\ start\_pos)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a65f885a38d4eae6691c63242e86119a8}{substring}}(start\_pos,\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}\ -\/\ start\_pos);\ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{structdoris_1_1_string_ref_a2e811ebacb455ae97dda37f25f21d1c4}{begin}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}};\ \}}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{structdoris_1_1_string_ref_a898071010deac660e55695d38c9708de}{end}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}}\ +\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}};\ \}}
\DoxyCodeLine{00227\ \ \ \ \ \textcolor{comment}{//\ there's\ no\ border\ check\ in\ functions\ below.\ That's\ same\ with\ STL.}}
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a961a5488c2f478464d8c7e394d53572c}{front}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}};\ \}}
\DoxyCodeLine{00229\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ad7f4b641e901df7b3eb62783ae29a1e8}{back}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ *(\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}}\ +\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}\ -\/\ 1);\ \}}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \textcolor{comment}{//\ Trims\ leading\ and\ trailing\ spaces.}}
\DoxyCodeLine{00232\ \ \ \ \ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a6b73ebad14b45cebfc9645ba5e4bee36}{trim}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a644718bb2fb240de962dc3c9a1fdf0dc}{empty}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}\ ==\ 0;\ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{comment}{//\ support\ for\ type\_limit}}
\DoxyCodeLine{00237\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a1f4099ce04f64d923b6a06506ea68a56}{MIN\_CHAR}}\ =\ 0;}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a4d21423ba92a29914176d67bcc7fec58}{MAX\_CHAR}}\ =\ char(}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ UCHAR\_MAX);\ \textcolor{comment}{//\ We\ will\ convert\ char\ to\ uchar\ and\ compare,\ so\ we\ define\ max\_char\ to\ unsigned\ char\ max.}}
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ac3124cecef5bc1193fb641af86c084d0}{min\_string\_val}}();}
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a57f621b81b9e866fb21e607c8f12d6bd}{max\_string\_val}}();}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_afdb88b4371aa7d3a6d39560a863f0e93}{start\_with}}(\textcolor{keywordtype}{char})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a3ea76e0c277fd816801a894e6f8fcf11}{end\_with}}(\textcolor{keywordtype}{char})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_afdb88b4371aa7d3a6d39560a863f0e93}{start\_with}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ search\_string)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a3ea76e0c277fd816801a894e6f8fcf11}{end\_with}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ search\_string)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{comment}{//\ Byte-\/by-\/byte\ comparison.\ Returns:}}
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{comment}{//\ this\ <\ other:\ -\/1}}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{comment}{//\ this\ ==\ other:\ 0}}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{comment}{//\ this\ >\ other:\ 1}}
\DoxyCodeLine{00252\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ae025c54841da5d39154997607b3fb21b}{compare}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ l\ =\ std::min(\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}},\ other.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}});}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (l\ ==\ 0)\ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}\ ==\ other.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}})\ \{}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}\ ==\ 0)\ \{}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ DCHECK\_EQ(other.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}},\ 0);}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ string\_compare(this-\/>data,\ this-\/>size,\ other.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ other.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}},\ l);}
\DoxyCodeLine{00267\ \ \ \ \ \}}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{structdoris_1_1_string_ref_aa06be28e0dd2ba7b75b65e3185115e43}{replace}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ ptr,\ \textcolor{keywordtype}{int}\ len)\ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ this-\/>data\ =\ ptr;}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ this-\/>size\ =\ len;}
\DoxyCodeLine{00272\ \ \ \ \ \}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{comment}{//\ Find\ the\ first\ position\ char\ of\ appear,\ return\ -\/1\ if\ not\ found}}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ae01f7334f055e425e8c6384b0020b407}{find\_first\_of}}(\textcolor{keywordtype}{char}\ c)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{comment}{//\ ==}}
\DoxyCodeLine{00278\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a66d7cb798db5666acf94d42208970c00}{eq}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (this-\/>size\ !=\ other.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}})\ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00282\ \textcolor{preprocessor}{\#if\ defined(\_\_SSE2\_\_)}}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ memequalSSE2Wide(this-\/>data,\ other.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ this-\/>size);}
\DoxyCodeLine{00284\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ string\_compare(this-\/>data,\ this-\/>size,\ other.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ other.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}},\ this-\/>size)\ ==\ 0;}
\DoxyCodeLine{00286\ \ \ \ \ \}}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a0464240fb79952a68abb5c7214546fe1}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a66d7cb798db5666acf94d42208970c00}{eq}}(other);\ \}}
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{comment}{//\ !=}}
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_afebfdbf30bec32e4563fcbb969214414}{ne}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{structdoris_1_1_string_ref_a66d7cb798db5666acf94d42208970c00}{eq}}(other);\ \}}
\DoxyCodeLine{00291\ \ \ \ \ \textcolor{comment}{//\ <=}}
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_aff715b6585ff69d9315e95db497fe11c}{le}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ae025c54841da5d39154997607b3fb21b}{compare}}(other)\ <=\ 0;\ \}}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{comment}{//\ >=}}
\DoxyCodeLine{00294\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ad5fc485413a2fb8ed7caab5d07bde353}{ge}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ae025c54841da5d39154997607b3fb21b}{compare}}(other)\ >=\ 0;\ \}}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{comment}{//\ <}}
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a590e7915d4cbfab235de43999bba4eb3}{lt}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ae025c54841da5d39154997607b3fb21b}{compare}}(other)\ <\ 0;\ \}}
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{comment}{//\ >}}
\DoxyCodeLine{00298\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a409891605d8b8b82a0c65a08c31a26a0}{gt}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ae025c54841da5d39154997607b3fb21b}{compare}}(other)\ >\ 0;\ \}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a6bc3b288724ee25954c261c604153510}{operator!=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_afebfdbf30bec32e4563fcbb969214414}{ne}}(other);\ \}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a639c5d1a2d6dc0fa21e2ca0e210cc7d1}{operator<=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_aff715b6585ff69d9315e95db497fe11c}{le}}(other);\ \}}
\DoxyCodeLine{00303\ }
\DoxyCodeLine{00304\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a4019c279f003ad3d7bdc3bcb6ad3a8a4}{operator>=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_ad5fc485413a2fb8ed7caab5d07bde353}{ge}}(other);\ \}}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_af7a31878afe77a8e7f3a1778dace620f}{operator<}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a590e7915d4cbfab235de43999bba4eb3}{lt}}(other);\ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a01806c2a25bc78fd2b7fc549b2b3640e}{operator>}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{structdoris_1_1_string_ref_a409891605d8b8b82a0c65a08c31a26a0}{gt}}(other);\ \}}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1_string_ref_1_1_comparator}{Comparator}}\ \{}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structdoris_1_1_string_ref_1_1_comparator_a11e0751d29b781a95eb26be83ff1b2ed}{operator()}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ b)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}}.compare(b)\ <\ 0;\ \}}
\DoxyCodeLine{00312\ \ \ \ \ \};}
\DoxyCodeLine{00313\ \};\ \textcolor{comment}{//\ class\ StringRef}}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \textcolor{comment}{//\ This\ function\ must\ be\ called\ 'hash\_value'\ to\ be\ picked\ up\ by\ boost.}}
\DoxyCodeLine{00316\ \textcolor{keyword}{inline}\ std::size\_t\ \mbox{\hyperlink{namespacedoris_ab9737ee3c43e1023a13ca008047f332d}{hash\_value}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ v)\ \{}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1_hash_util_af859ad5532f11b9fb98fed728353cc75}{HashUtil::hash}}(v.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ v.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}},\ 0);}
\DoxyCodeLine{00318\ \}}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespacedoris_a494c71c8e0815e0ec4f66099446082dc}{StringRefs}}\ =\ std::vector<StringRef>;}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00330\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1_string_ref_hash64}{StringRefHash64}}\ \{}
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structdoris_1_1_string_ref_hash64_a16069670a9f411adb346037f9e6dacc5}{operator()}}(\mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ x)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceutil__hash_ad0ba022ddd9dae3ad8f79eadc9568c76}{util\_hash::CityHash64}}(x.\mbox{\hyperlink{structdoris_1_1_string_ref_a8f64897c7ccc5c13f276d1d07c4e7095}{data}},\ x.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}});\ \}}
\DoxyCodeLine{00332\ \};}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \textcolor{preprocessor}{\#if\ defined(\_\_SSE4\_2\_\_)\ ||\ defined(\_\_aarch64\_\_)}}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ hash\_len16(\mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ u,}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ v)\ \{}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{hash128to64_8h_a277d7697b63b8321e906beccd0ce3339}{Hash128to64}}(\mbox{\hyperlink{classuint128}{uint128}}(u,\ v));}
\DoxyCodeLine{00341\ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ shift\_mix(\mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ val)\ \{}
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{keywordflow}{return}\ val\ \string^\ (val\ >>\ 47);}
\DoxyCodeLine{00345\ \}}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ rotate\_by\_at\_least1(\mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ val,\ \textcolor{keywordtype}{int}\ shift)\ \{}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{keywordflow}{return}\ (val\ >>\ shift)\ |\ (val\ <<\ (64\ -\/\ shift));}
\DoxyCodeLine{00349\ \}}
\DoxyCodeLine{00350\ }
\DoxyCodeLine{00351\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ hash\_less\_than8(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ \textcolor{keywordtype}{size\_t}\ size)\ \{}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ k2\ =\ 0x9ae16a3b2f90404fULL;}
\DoxyCodeLine{00353\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ k3\ =\ 0xc949d7c7509e6557ULL;}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ >=\ 4)\ \{}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}}\ =\ unaligned\_load<uint32\_t>(\mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ hash\_len16(size\ +\ (\mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}}\ <<\ 3),\ unaligned\_load<uint32\_t>(\mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}}\ +\ size\ -\/\ 4));}
\DoxyCodeLine{00358\ \ \ \ \ \}}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ >\ 0)\ \{}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ uint8\_t\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}}\ =\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}}[0];}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ uint8\_t\ b\ =\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}}[size\ >>\ 1];}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ uint8\_t\ c\ =\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}}[size\ -\/\ 1];}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ uint32\_t\ y\ =\ \textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}})\ +\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(b)\ <<\ 8);}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ uint32\_t\ z\ =\ size\ +\ (\textcolor{keyword}{static\_cast<}uint32\_t\textcolor{keyword}{>}(c)\ <<\ 2);}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ shift\_mix(y\ *\ k2\ \string^\ z\ *\ k3)\ *\ k2;}
\DoxyCodeLine{00367\ \ \ \ \ \}}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \ \ \ \ \textcolor{keywordflow}{return}\ k2;}
\DoxyCodeLine{00370\ \}}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ hash\_less\_than16(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ \mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ \textcolor{keywordtype}{size\_t}\ size)\ \{}
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ >\ 8)\ \{}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ \mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}}\ =\ unaligned\_load<doris::vectorized::UInt64>(\mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}});}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ b\ =\ unaligned\_load<doris::vectorized::UInt64>(\mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}}\ +\ size\ -\/\ 8);}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ hash\_len16(\mbox{\hyperlink{memcpy__aarch64_8cpp_a20972992d1a551bcd609cfb231f91d8a}{a}},\ rotate\_by\_at\_least1(b\ +\ size,\ size))\ \string^\ b;}
\DoxyCodeLine{00377\ \ \ \ \ \}}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{return}\ hash\_less\_than8(\mbox{\hyperlink{uint24_8h_aa99be7b8b4274b2256b394ea7bf80762}{data}},\ size);}
\DoxyCodeLine{00380\ \}}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00382\ \textcolor{keyword}{struct\ }CRC32Hash\ \{}
\DoxyCodeLine{00383\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structdoris_1_1_c_r_c32_hash_a9e52129f8e861454b5caf866b5fde7a0}{operator()}}(\textcolor{keyword}{const}\ StringRef\&\ x)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ pos\ =\ x.data;}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ size\ =\ x.size;}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ ==\ 0)\ \{}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (size\ <\ 8)\ \{}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ hash\_less\_than8(x.data,\ x.size);}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ end\ =\ pos\ +\ size;}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ res\ =\ -\/1ULL;}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ word\ =\ unaligned\_load<doris::vectorized::UInt64>(pos);}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ res\ =\ \_mm\_crc32\_u64(res,\ word);}
\DoxyCodeLine{00401\ }
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ pos\ +=\ 8;}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (pos\ +\ 8\ <\ end);}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1vectorized_a81586a76c764e2556f67139907fa5440}{doris::vectorized::UInt64}}\ word\ =\ unaligned\_load<doris::vectorized::UInt64>(}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ end\ -\/\ 8);\ }
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ res\ =\ \_mm\_crc32\_u64(res,\ word);}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ res;}
\DoxyCodeLine{00410\ \ \ \ \ \}}
\DoxyCodeLine{00411\ \};}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \textcolor{keyword}{struct\ }StringRefHash\ :\ CRC32Hash\ \{\};}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00415\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1_c_r_c32_hash}{CRC32Hash}}\ \{}
\DoxyCodeLine{00418\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{structdoris_1_1_c_r_c32_hash_a9e52129f8e861454b5caf866b5fde7a0}{operator()}}(\mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\ \textcolor{comment}{/*\ x\ */})\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::logic\_error\ \{\textcolor{stringliteral}{"{}Not\ implemented\ CRC32Hash\ without\ SSE"{}}\};}
\DoxyCodeLine{00420\ \ \ \ \ \}}
\DoxyCodeLine{00421\ \};}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdoris_1_1_string_ref_hash}{StringRefHash}}\ :\ \mbox{\hyperlink{structdoris_1_1_string_ref_hash64}{StringRefHash64}}\ \{\};}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ end\ of\ hash\ functions}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \textcolor{keyword}{inline}\ std::ostream\&\ operator<<(std::ostream\&\ os,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{StringRef}}\&\ str)\ \{}
\DoxyCodeLine{00428\ \ \ \ \ \textcolor{keywordflow}{return}\ os\ <<\ str.\mbox{\hyperlink{structdoris_1_1_string_ref_aac993ecccd3d88aafefb6b8e3caa1dee}{to\_string}}();}
\DoxyCodeLine{00429\ \}}
\DoxyCodeLine{00430\ \}\ \textcolor{comment}{//\ namespace\ doris}}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_zero_traits}{ZeroTraits}}\ \{}
\DoxyCodeLine{00433\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespace_zero_traits_a0517f3cc4f3f256ce870ecd619187cca}{check}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_string_ref}{doris::StringRef}}\&\ x)\ \{}
\DoxyCodeLine{00434\ \ \ \ \ \textcolor{keywordflow}{return}\ 0\ ==\ x.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}};}
\DoxyCodeLine{00435\ \}}
\DoxyCodeLine{00436\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespace_zero_traits_a89ab63592e7dd40399be3e63f30d9ce0}{set}}(\mbox{\hyperlink{structdoris_1_1_string_ref}{doris::StringRef}}\&\ x)\ \{}
\DoxyCodeLine{00437\ \ \ \ \ x.\mbox{\hyperlink{structdoris_1_1_string_ref_a854352f53b148adc24983a58a1866d66}{size}}\ =\ 0;}
\DoxyCodeLine{00438\ \}}
\DoxyCodeLine{00439\ \}\ \textcolor{comment}{//\ namespace\ ZeroTraits}}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \textcolor{keyword}{template}\ <>}
\DoxyCodeLine{00442\ \textcolor{keyword}{struct\ }std::hash<\mbox{\hyperlink{namespacedoris}{doris}}::StringRef>\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{structdoris_1_1_string_ref_hash}{doris::StringRefHash}}\ \{\};}

\end{DoxyCode}
