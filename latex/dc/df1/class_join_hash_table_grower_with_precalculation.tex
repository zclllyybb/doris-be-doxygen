\hypertarget{class_join_hash_table_grower_with_precalculation}{}\doxysection{Join\+Hash\+Table\+Grower\+With\+Precalculation\texorpdfstring{$<$}{<} initial\+\_\+size\+\_\+degree \texorpdfstring{$>$}{>} 模板类 参考}
\label{class_join_hash_table_grower_with_precalculation}\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}


{\ttfamily \#include $<$join\+\_\+hash\+\_\+table.\+h$>$}

\doxysubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_ac82f32fb6f16dbdc32cb4076004e63c4}{doris\+::vectorized\+::\+UInt8}} \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a75964e716639a0bc52ca172725188f1e}{size\+\_\+degree}} () const
\item 
void \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a7473817f0d89611bc8e2008a58301819}{increase\+\_\+size\+\_\+degree}} (\mbox{\hyperlink{namespacedoris_1_1vectorized_ac82f32fb6f16dbdc32cb4076004e63c4}{doris\+::vectorized\+::\+UInt8}} delta)
\item 
size\+\_\+t \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a0545c7a81d7cb2fd2189f8c9ff575b1a}{bucket\+\_\+size}} () const
\item 
size\+\_\+t \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a5cfd4e88f719ff67b0a8184ea7915087}{buf\+\_\+size}} () const
\begin{DoxyCompactList}\small\item\em The size of the join hash table in the cells. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a63ff69e15481c5ffe27fefd1da16dfce}{place}} (size\+\_\+t x) const
\begin{DoxyCompactList}\small\item\em From the hash value, get the cell number in the join hash table. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a259aefaed5c74605ef0753eb01061175}{overflow}} (size\+\_\+t elems) const
\begin{DoxyCompactList}\small\item\em Whether the join hash table is full. You need to increase the size of the hash table, or remove something unnecessary from it. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_ab6a577cbba3588fe8ea8074e132596fc}{increase\+\_\+size}} ()
\begin{DoxyCompactList}\small\item\em Increase the size of the join hash table. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a270245ec7a14642d03b1f3483bcacd35}{set}} (size\+\_\+t num\+\_\+elems)
\begin{DoxyCompactList}\small\item\em Set the buffer size by the number of elements in the join hash table. Used when deserializing a join hash table. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_ac19899838e161ea5398b6775b4bd5e19}{set\+\_\+buf\+\_\+size}} (size\+\_\+t buf\+\_\+size\+\_\+)
\end{DoxyCompactItemize}
\doxysubsection*{静态 Public 属性}
\begin{DoxyCompactItemize}
\item 
static constexpr auto \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a3c699482f4a86cc8b758feac0875768f}{initial\+\_\+count}} = 1ULL $<$$<$ initial\+\_\+size\+\_\+degree
\item 
static constexpr auto \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_acd0187acccc0890da268d77c4280b1a7}{performs\+\_\+linear\+\_\+probing\+\_\+with\+\_\+single\+\_\+step}} = true
\begin{DoxyCompactList}\small\item\em If collision resolution chains are contiguous, we can implement erase operation by moving the elements. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private 属性}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacedoris_1_1vectorized_ac82f32fb6f16dbdc32cb4076004e63c4}{doris\+::vectorized\+::\+UInt8}} \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a00cbe8119c966d1eca7d9dbb673872a0}{size\+\_\+degree\+\_\+}} = initial\+\_\+size\+\_\+degree
\begin{DoxyCompactList}\small\item\em The state of this structure is enough to get the buffer size of the join hash table. \end{DoxyCompactList}\item 
size\+\_\+t \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_aed66a70c2c70193973680623bba302b1}{precalculated\+\_\+mask}} = (1ULL $<$$<$ (initial\+\_\+size\+\_\+degree -\/ 1)) -\/ 1
\item 
size\+\_\+t \mbox{\hyperlink{class_join_hash_table_grower_with_precalculation_a3e5537e6cb0403bcca5fe9d3782e3f66}{precalculated\+\_\+max\+\_\+fill}} = 1ULL $<$$<$ initial\+\_\+size\+\_\+degree
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$size\+\_\+t initial\+\_\+size\+\_\+degree = 8$>$\newline
class Join\+Hash\+Table\+Grower\+With\+Precalculation$<$ initial\+\_\+size\+\_\+degree $>$}
Determines the size of the join hash table, and when and how much it should be resized. This structure is aligned to cache line boundary and also occupies it all. Precalculates some values to speed up lookups and insertion into the \mbox{\hyperlink{class_join_hash_table}{Join\+Hash\+Table}} (and thus has bigger memory footprint than \mbox{\hyperlink{struct_join_hash_table_grower}{Join\+Hash\+Table\+Grower}}). 

\doxysubsection{成员函数说明}
\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a75964e716639a0bc52ca172725188f1e}\label{class_join_hash_table_grower_with_precalculation_a75964e716639a0bc52ca172725188f1e}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!size\_degree@{size\_degree}}
\index{size\_degree@{size\_degree}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{size\_degree()}{size\_degree()}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacedoris_1_1vectorized_ac82f32fb6f16dbdc32cb4076004e63c4}{doris\+::vectorized\+::\+UInt8}} size\+\_\+degree (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a7473817f0d89611bc8e2008a58301819}\label{class_join_hash_table_grower_with_precalculation_a7473817f0d89611bc8e2008a58301819}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!increase\_size\_degree@{increase\_size\_degree}}
\index{increase\_size\_degree@{increase\_size\_degree}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{increase\_size\_degree()}{increase\_size\_degree()}}
{\footnotesize\ttfamily void increase\+\_\+size\+\_\+degree (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacedoris_1_1vectorized_ac82f32fb6f16dbdc32cb4076004e63c4}{doris\+::vectorized\+::\+UInt8}}}]{delta }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

这是这个函数的调用关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{dc/df1/class_join_hash_table_grower_with_precalculation_a7473817f0d89611bc8e2008a58301819_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a0545c7a81d7cb2fd2189f8c9ff575b1a}\label{class_join_hash_table_grower_with_precalculation_a0545c7a81d7cb2fd2189f8c9ff575b1a}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!bucket\_size@{bucket\_size}}
\index{bucket\_size@{bucket\_size}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{bucket\_size()}{bucket\_size()}}
{\footnotesize\ttfamily size\+\_\+t bucket\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a5cfd4e88f719ff67b0a8184ea7915087}\label{class_join_hash_table_grower_with_precalculation_a5cfd4e88f719ff67b0a8184ea7915087}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!buf\_size@{buf\_size}}
\index{buf\_size@{buf\_size}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{buf\_size()}{buf\_size()}}
{\footnotesize\ttfamily size\+\_\+t buf\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



The size of the join hash table in the cells. 

\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a63ff69e15481c5ffe27fefd1da16dfce}\label{class_join_hash_table_grower_with_precalculation_a63ff69e15481c5ffe27fefd1da16dfce}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!place@{place}}
\index{place@{place}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{place()}{place()}}
{\footnotesize\ttfamily size\+\_\+t place (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{x }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



From the hash value, get the cell number in the join hash table. 

\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a259aefaed5c74605ef0753eb01061175}\label{class_join_hash_table_grower_with_precalculation_a259aefaed5c74605ef0753eb01061175}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!overflow@{overflow}}
\index{overflow@{overflow}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{overflow()}{overflow()}}
{\footnotesize\ttfamily bool overflow (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{elems }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Whether the join hash table is full. You need to increase the size of the hash table, or remove something unnecessary from it. 

\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_ab6a577cbba3588fe8ea8074e132596fc}\label{class_join_hash_table_grower_with_precalculation_ab6a577cbba3588fe8ea8074e132596fc}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!increase\_size@{increase\_size}}
\index{increase\_size@{increase\_size}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{increase\_size()}{increase\_size()}}
{\footnotesize\ttfamily void increase\+\_\+size (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Increase the size of the join hash table. 

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{dc/df1/class_join_hash_table_grower_with_precalculation_ab6a577cbba3588fe8ea8074e132596fc_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a270245ec7a14642d03b1f3483bcacd35}\label{class_join_hash_table_grower_with_precalculation_a270245ec7a14642d03b1f3483bcacd35}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!set@{set}}
\index{set@{set}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{set()}{set()}}
{\footnotesize\ttfamily void set (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{num\+\_\+elems }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Set the buffer size by the number of elements in the join hash table. Used when deserializing a join hash table. 

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dc/df1/class_join_hash_table_grower_with_precalculation_a270245ec7a14642d03b1f3483bcacd35_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_ac19899838e161ea5398b6775b4bd5e19}\label{class_join_hash_table_grower_with_precalculation_ac19899838e161ea5398b6775b4bd5e19}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!set\_buf\_size@{set\_buf\_size}}
\index{set\_buf\_size@{set\_buf\_size}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{set\_buf\_size()}{set\_buf\_size()}}
{\footnotesize\ttfamily void set\+\_\+buf\+\_\+size (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{buf\+\_\+size\+\_\+ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

函数调用图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dc/df1/class_join_hash_table_grower_with_precalculation_ac19899838e161ea5398b6775b4bd5e19_cgraph}
\end{center}
\end{figure}


\doxysubsection{类成员变量说明}
\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a00cbe8119c966d1eca7d9dbb673872a0}\label{class_join_hash_table_grower_with_precalculation_a00cbe8119c966d1eca7d9dbb673872a0}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!size\_degree\_@{size\_degree\_}}
\index{size\_degree\_@{size\_degree\_}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{size\_degree\_}{size\_degree\_}}
{\footnotesize\ttfamily \mbox{\hyperlink{namespacedoris_1_1vectorized_ac82f32fb6f16dbdc32cb4076004e63c4}{doris\+::vectorized\+::\+UInt8}} size\+\_\+degree\+\_\+ = initial\+\_\+size\+\_\+degree\hspace{0.3cm}{\ttfamily [private]}}



The state of this structure is enough to get the buffer size of the join hash table. 

\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_aed66a70c2c70193973680623bba302b1}\label{class_join_hash_table_grower_with_precalculation_aed66a70c2c70193973680623bba302b1}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!precalculated\_mask@{precalculated\_mask}}
\index{precalculated\_mask@{precalculated\_mask}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{precalculated\_mask}{precalculated\_mask}}
{\footnotesize\ttfamily size\+\_\+t precalculated\+\_\+mask = (1ULL $<$$<$ (initial\+\_\+size\+\_\+degree -\/ 1)) -\/ 1\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a3e5537e6cb0403bcca5fe9d3782e3f66}\label{class_join_hash_table_grower_with_precalculation_a3e5537e6cb0403bcca5fe9d3782e3f66}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!precalculated\_max\_fill@{precalculated\_max\_fill}}
\index{precalculated\_max\_fill@{precalculated\_max\_fill}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{precalculated\_max\_fill}{precalculated\_max\_fill}}
{\footnotesize\ttfamily size\+\_\+t precalculated\+\_\+max\+\_\+fill = 1ULL $<$$<$ initial\+\_\+size\+\_\+degree\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_a3c699482f4a86cc8b758feac0875768f}\label{class_join_hash_table_grower_with_precalculation_a3c699482f4a86cc8b758feac0875768f}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!initial\_count@{initial\_count}}
\index{initial\_count@{initial\_count}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{initial\_count}{initial\_count}}
{\footnotesize\ttfamily constexpr auto initial\+\_\+count = 1ULL $<$$<$ initial\+\_\+size\+\_\+degree\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}

\mbox{\Hypertarget{class_join_hash_table_grower_with_precalculation_acd0187acccc0890da268d77c4280b1a7}\label{class_join_hash_table_grower_with_precalculation_acd0187acccc0890da268d77c4280b1a7}} 
\index{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}!performs\_linear\_probing\_with\_single\_step@{performs\_linear\_probing\_with\_single\_step}}
\index{performs\_linear\_probing\_with\_single\_step@{performs\_linear\_probing\_with\_single\_step}!JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$@{JoinHashTableGrowerWithPrecalculation$<$ initial\_size\_degree $>$}}
\doxysubsubsection{\texorpdfstring{performs\_linear\_probing\_with\_single\_step}{performs\_linear\_probing\_with\_single\_step}}
{\footnotesize\ttfamily constexpr auto performs\+\_\+linear\+\_\+probing\+\_\+with\+\_\+single\+\_\+step = true\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [constexpr]}}



If collision resolution chains are contiguous, we can implement erase operation by moving the elements. 



该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
/\+Users/dabowang/be\+\_\+all/vec/common/hash\+\_\+table/\mbox{\hyperlink{join__hash__table_8h}{join\+\_\+hash\+\_\+table.\+h}}\end{DoxyCompactItemize}
