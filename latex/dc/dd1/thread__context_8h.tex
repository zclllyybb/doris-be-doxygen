\hypertarget{thread__context_8h}{}\doxysection{/\+Users/dabowang/be\+\_\+all/runtime/thread\+\_\+context.h 文件参考}
\label{thread__context_8h}\index{/Users/dabowang/be\_all/runtime/thread\_context.h@{/Users/dabowang/be\_all/runtime/thread\_context.h}}
{\ttfamily \#include $<$bthread/bthread.\+h$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$thread$>$}\newline
{\ttfamily \#include \char`\"{}common/logging.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gen\+\_\+cpp/\+Palo\+Internal\+Service\+\_\+types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gutil/macros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}runtime/memory/thread\+\_\+mem\+\_\+tracker\+\_\+mgr.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}runtime/threadlocal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}util/debug/tracing.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}util/defer\+\_\+op.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}pipeline/pipeline\+\_\+task.\+h\char`\"{}}\newline
thread\+\_\+context.\+h 的引用(Include)关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{df/d10/thread__context_8h__incl}
\end{center}
\end{figure}
此图展示该文件直接或间接的被哪些文件引用了\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/d11/thread__context_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classdoris_1_1_thread_context_ptr}{Thread\+Context\+Ptr}}
\item 
class \mbox{\hyperlink{classdoris_1_1_thread_context}{Thread\+Context}}
\item 
class \mbox{\hyperlink{classdoris_1_1_scope_mem_count}{Scope\+Mem\+Count}}
\item 
class \mbox{\hyperlink{classdoris_1_1_attach_task}{Attach\+Task}}
\item 
class \mbox{\hyperlink{classdoris_1_1_switch_thread_mem_tracker_limiter}{Switch\+Thread\+Mem\+Tracker\+Limiter}}
\item 
class \mbox{\hyperlink{classdoris_1_1_add_thread_mem_tracker_consumer}{Add\+Thread\+Mem\+Tracker\+Consumer}}
\item 
class \mbox{\hyperlink{classdoris_1_1_stop_check_thread_mem_tracker_limit}{Stop\+Check\+Thread\+Mem\+Tracker\+Limit}}
\end{DoxyCompactItemize}
\doxysubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespacedoris}{doris}}
\begin{DoxyCompactList}\small\item\em Utilities for collecting timings. \end{DoxyCompactList}\item 
namespace \mbox{\hyperlink{namespacedoris_1_1debug}{doris\+::debug}}
\end{DoxyCompactItemize}
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{thread__context_8h_a740856e600cef8af83ee220fbb03da47}{SCOPED\+\_\+\+MEM\+\_\+\+COUNT}}(scope\+\_\+mem)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_a6c59bced0850b2f8a70d29dcdf9e75d2}{SCOPED\+\_\+\+CONSUME\+\_\+\+MEM\+\_\+\+TRACKER}}(mem\+\_\+tracker)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_add8b936131a73aeadc63ec4e470ec958}{SCOPED\+\_\+\+ATTACH\+\_\+\+TASK}}(arg1, ...)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_a29e887f9f9288b849700454864b37c05}{SCOPED\+\_\+\+SWITCH\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER\+\_\+\+LIMITER}}(mem\+\_\+tracker\+\_\+limiter)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_ac9a3c83af472b1f82ce6e4658fcbccb1}{STOP\+\_\+\+CHECK\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER\+\_\+\+LIMIT}}()~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_a1ef32c9cd699a26c3cdb18f480372804}{RETURN\+\_\+\+LIMIT\+\_\+\+EXCEEDED}}(state,  msg, ...)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_a0cd132682c29b6fc970527e159bbb661}{CONSUME\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER}}(size)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_a553de69356cf3392128a14ec0f8a51f9}{TRY\+\_\+\+CONSUME\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER}}(size)~true
\item 
\#define \mbox{\hyperlink{thread__context_8h_aa35459ee502c7520ac13ca43a4a072e8}{RELEASE\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER}}(size)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_a0bd9df4b5fc95180b4bc263e3ae9dc57}{THREAD\+\_\+\+MEM\+\_\+\+TRACKER\+\_\+\+TRANSFER\+\_\+\+TO}}(size,  tracker)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_abf5729fd5a398c306a98854a0490035d}{THREAD\+\_\+\+MEM\+\_\+\+TRACKER\+\_\+\+TRANSFER\+\_\+\+FROM}}(size,  tracker)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_a5b52646a480c2bf8c8af764e51330177}{CONSUME\+\_\+\+MEM\+\_\+\+TRACKER}}(size)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_a61088e965701fc42638889b171249f27}{TRY\+\_\+\+CONSUME\+\_\+\+MEM\+\_\+\+TRACKER}}(size,  fail\+\_\+ret)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_acf0fe4665e60c7e7f945275819875c55}{RELEASE\+\_\+\+MEM\+\_\+\+TRACKER}}(size)~(void)0
\item 
\#define \mbox{\hyperlink{thread__context_8h_ad52df795f331adf8e7fdb332bfcaf0ab}{RETURN\+\_\+\+IF\+\_\+\+CATCH\+\_\+\+BAD\+\_\+\+ALLOC}}(stmt)~(stmt)
\end{DoxyCompactItemize}
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
debug\+::\+Query\+Trace\+Context \& \mbox{\hyperlink{namespacedoris_ac83655030800897650bb4e335683617e}{get\+\_\+tls\+\_\+trace\+\_\+ctx}} ()
\item 
static void \mbox{\hyperlink{namespacedoris_acdf6d015bf6270fe1af78c95cf27ab78}{pthread\+\_\+attach\+\_\+bthread}} ()
\item 
static Thread\+Context $\ast$ \mbox{\hyperlink{namespacedoris_aac6d54871694470911d08aaf876eccf3}{thread\+\_\+context}} ()
\end{DoxyCompactItemize}
\doxysubsection*{变量}
\begin{DoxyCompactItemize}
\item 
bthread\+\_\+key\+\_\+t \mbox{\hyperlink{namespacedoris_a25bce985ec9093e2a15fbcb0dc41d77e}{btls\+\_\+key}}
\item 
thread\+\_\+local Thread\+Context\+Ptr \mbox{\hyperlink{namespacedoris_a4ce45b5aeb024ff259888cbdc3fddd92}{thread\+\_\+context\+\_\+ptr}}
\item 
thread\+\_\+local bool \mbox{\hyperlink{namespacedoris_a21a47b46c497d4e73372a36a77b712e3}{enable\+\_\+thread\+\_\+catch\+\_\+bad\+\_\+alloc}} = false
\item 
thread\+\_\+local Thread\+Context $\ast$ \mbox{\hyperlink{namespacedoris_a17d08faa86e82da29ca5c5cf2b33a5bb}{bthread\+\_\+context}}
\item 
thread\+\_\+local bthread\+\_\+t \mbox{\hyperlink{namespacedoris_a97cfde243d678f40e09dcbce78d0dd8c}{bthread\+\_\+id}}
\end{DoxyCompactItemize}


\doxysubsection{宏定义说明}
\mbox{\Hypertarget{thread__context_8h_a740856e600cef8af83ee220fbb03da47}\label{thread__context_8h_a740856e600cef8af83ee220fbb03da47}} 
\index{thread\_context.h@{thread\_context.h}!SCOPED\_MEM\_COUNT@{SCOPED\_MEM\_COUNT}}
\index{SCOPED\_MEM\_COUNT@{SCOPED\_MEM\_COUNT}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{SCOPED\_MEM\_COUNT}{SCOPED\_MEM\_COUNT}}
{\footnotesize\ttfamily \#define SCOPED\+\_\+\+MEM\+\_\+\+COUNT(\begin{DoxyParamCaption}\item[{}]{scope\+\_\+mem }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_a6c59bced0850b2f8a70d29dcdf9e75d2}\label{thread__context_8h_a6c59bced0850b2f8a70d29dcdf9e75d2}} 
\index{thread\_context.h@{thread\_context.h}!SCOPED\_CONSUME\_MEM\_TRACKER@{SCOPED\_CONSUME\_MEM\_TRACKER}}
\index{SCOPED\_CONSUME\_MEM\_TRACKER@{SCOPED\_CONSUME\_MEM\_TRACKER}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{SCOPED\_CONSUME\_MEM\_TRACKER}{SCOPED\_CONSUME\_MEM\_TRACKER}}
{\footnotesize\ttfamily \#define SCOPED\+\_\+\+CONSUME\+\_\+\+MEM\+\_\+\+TRACKER(\begin{DoxyParamCaption}\item[{}]{mem\+\_\+tracker }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_add8b936131a73aeadc63ec4e470ec958}\label{thread__context_8h_add8b936131a73aeadc63ec4e470ec958}} 
\index{thread\_context.h@{thread\_context.h}!SCOPED\_ATTACH\_TASK@{SCOPED\_ATTACH\_TASK}}
\index{SCOPED\_ATTACH\_TASK@{SCOPED\_ATTACH\_TASK}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{SCOPED\_ATTACH\_TASK}{SCOPED\_ATTACH\_TASK}}
{\footnotesize\ttfamily \#define SCOPED\+\_\+\+ATTACH\+\_\+\+TASK(\begin{DoxyParamCaption}\item[{}]{arg1,  }\item[{}]{... }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_a29e887f9f9288b849700454864b37c05}\label{thread__context_8h_a29e887f9f9288b849700454864b37c05}} 
\index{thread\_context.h@{thread\_context.h}!SCOPED\_SWITCH\_THREAD\_MEM\_TRACKER\_LIMITER@{SCOPED\_SWITCH\_THREAD\_MEM\_TRACKER\_LIMITER}}
\index{SCOPED\_SWITCH\_THREAD\_MEM\_TRACKER\_LIMITER@{SCOPED\_SWITCH\_THREAD\_MEM\_TRACKER\_LIMITER}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{SCOPED\_SWITCH\_THREAD\_MEM\_TRACKER\_LIMITER}{SCOPED\_SWITCH\_THREAD\_MEM\_TRACKER\_LIMITER}}
{\footnotesize\ttfamily \#define SCOPED\+\_\+\+SWITCH\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER\+\_\+\+LIMITER(\begin{DoxyParamCaption}\item[{}]{mem\+\_\+tracker\+\_\+limiter }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_ac9a3c83af472b1f82ce6e4658fcbccb1}\label{thread__context_8h_ac9a3c83af472b1f82ce6e4658fcbccb1}} 
\index{thread\_context.h@{thread\_context.h}!STOP\_CHECK\_THREAD\_MEM\_TRACKER\_LIMIT@{STOP\_CHECK\_THREAD\_MEM\_TRACKER\_LIMIT}}
\index{STOP\_CHECK\_THREAD\_MEM\_TRACKER\_LIMIT@{STOP\_CHECK\_THREAD\_MEM\_TRACKER\_LIMIT}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{STOP\_CHECK\_THREAD\_MEM\_TRACKER\_LIMIT}{STOP\_CHECK\_THREAD\_MEM\_TRACKER\_LIMIT}}
{\footnotesize\ttfamily \#define STOP\+\_\+\+CHECK\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER\+\_\+\+LIMIT(\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_a1ef32c9cd699a26c3cdb18f480372804}\label{thread__context_8h_a1ef32c9cd699a26c3cdb18f480372804}} 
\index{thread\_context.h@{thread\_context.h}!RETURN\_LIMIT\_EXCEEDED@{RETURN\_LIMIT\_EXCEEDED}}
\index{RETURN\_LIMIT\_EXCEEDED@{RETURN\_LIMIT\_EXCEEDED}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{RETURN\_LIMIT\_EXCEEDED}{RETURN\_LIMIT\_EXCEEDED}}
{\footnotesize\ttfamily \#define RETURN\+\_\+\+LIMIT\+\_\+\+EXCEEDED(\begin{DoxyParamCaption}\item[{}]{state,  }\item[{}]{msg,  }\item[{}]{... }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_a0cd132682c29b6fc970527e159bbb661}\label{thread__context_8h_a0cd132682c29b6fc970527e159bbb661}} 
\index{thread\_context.h@{thread\_context.h}!CONSUME\_THREAD\_MEM\_TRACKER@{CONSUME\_THREAD\_MEM\_TRACKER}}
\index{CONSUME\_THREAD\_MEM\_TRACKER@{CONSUME\_THREAD\_MEM\_TRACKER}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{CONSUME\_THREAD\_MEM\_TRACKER}{CONSUME\_THREAD\_MEM\_TRACKER}}
{\footnotesize\ttfamily \#define CONSUME\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER(\begin{DoxyParamCaption}\item[{}]{size }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_a553de69356cf3392128a14ec0f8a51f9}\label{thread__context_8h_a553de69356cf3392128a14ec0f8a51f9}} 
\index{thread\_context.h@{thread\_context.h}!TRY\_CONSUME\_THREAD\_MEM\_TRACKER@{TRY\_CONSUME\_THREAD\_MEM\_TRACKER}}
\index{TRY\_CONSUME\_THREAD\_MEM\_TRACKER@{TRY\_CONSUME\_THREAD\_MEM\_TRACKER}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{TRY\_CONSUME\_THREAD\_MEM\_TRACKER}{TRY\_CONSUME\_THREAD\_MEM\_TRACKER}}
{\footnotesize\ttfamily \#define TRY\+\_\+\+CONSUME\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER(\begin{DoxyParamCaption}\item[{}]{size }\end{DoxyParamCaption})~true}

\mbox{\Hypertarget{thread__context_8h_aa35459ee502c7520ac13ca43a4a072e8}\label{thread__context_8h_aa35459ee502c7520ac13ca43a4a072e8}} 
\index{thread\_context.h@{thread\_context.h}!RELEASE\_THREAD\_MEM\_TRACKER@{RELEASE\_THREAD\_MEM\_TRACKER}}
\index{RELEASE\_THREAD\_MEM\_TRACKER@{RELEASE\_THREAD\_MEM\_TRACKER}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{RELEASE\_THREAD\_MEM\_TRACKER}{RELEASE\_THREAD\_MEM\_TRACKER}}
{\footnotesize\ttfamily \#define RELEASE\+\_\+\+THREAD\+\_\+\+MEM\+\_\+\+TRACKER(\begin{DoxyParamCaption}\item[{}]{size }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_a0bd9df4b5fc95180b4bc263e3ae9dc57}\label{thread__context_8h_a0bd9df4b5fc95180b4bc263e3ae9dc57}} 
\index{thread\_context.h@{thread\_context.h}!THREAD\_MEM\_TRACKER\_TRANSFER\_TO@{THREAD\_MEM\_TRACKER\_TRANSFER\_TO}}
\index{THREAD\_MEM\_TRACKER\_TRANSFER\_TO@{THREAD\_MEM\_TRACKER\_TRANSFER\_TO}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{THREAD\_MEM\_TRACKER\_TRANSFER\_TO}{THREAD\_MEM\_TRACKER\_TRANSFER\_TO}}
{\footnotesize\ttfamily \#define THREAD\+\_\+\+MEM\+\_\+\+TRACKER\+\_\+\+TRANSFER\+\_\+\+TO(\begin{DoxyParamCaption}\item[{}]{size,  }\item[{}]{tracker }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_abf5729fd5a398c306a98854a0490035d}\label{thread__context_8h_abf5729fd5a398c306a98854a0490035d}} 
\index{thread\_context.h@{thread\_context.h}!THREAD\_MEM\_TRACKER\_TRANSFER\_FROM@{THREAD\_MEM\_TRACKER\_TRANSFER\_FROM}}
\index{THREAD\_MEM\_TRACKER\_TRANSFER\_FROM@{THREAD\_MEM\_TRACKER\_TRANSFER\_FROM}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{THREAD\_MEM\_TRACKER\_TRANSFER\_FROM}{THREAD\_MEM\_TRACKER\_TRANSFER\_FROM}}
{\footnotesize\ttfamily \#define THREAD\+\_\+\+MEM\+\_\+\+TRACKER\+\_\+\+TRANSFER\+\_\+\+FROM(\begin{DoxyParamCaption}\item[{}]{size,  }\item[{}]{tracker }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_a5b52646a480c2bf8c8af764e51330177}\label{thread__context_8h_a5b52646a480c2bf8c8af764e51330177}} 
\index{thread\_context.h@{thread\_context.h}!CONSUME\_MEM\_TRACKER@{CONSUME\_MEM\_TRACKER}}
\index{CONSUME\_MEM\_TRACKER@{CONSUME\_MEM\_TRACKER}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{CONSUME\_MEM\_TRACKER}{CONSUME\_MEM\_TRACKER}}
{\footnotesize\ttfamily \#define CONSUME\+\_\+\+MEM\+\_\+\+TRACKER(\begin{DoxyParamCaption}\item[{}]{size }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_a61088e965701fc42638889b171249f27}\label{thread__context_8h_a61088e965701fc42638889b171249f27}} 
\index{thread\_context.h@{thread\_context.h}!TRY\_CONSUME\_MEM\_TRACKER@{TRY\_CONSUME\_MEM\_TRACKER}}
\index{TRY\_CONSUME\_MEM\_TRACKER@{TRY\_CONSUME\_MEM\_TRACKER}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{TRY\_CONSUME\_MEM\_TRACKER}{TRY\_CONSUME\_MEM\_TRACKER}}
{\footnotesize\ttfamily \#define TRY\+\_\+\+CONSUME\+\_\+\+MEM\+\_\+\+TRACKER(\begin{DoxyParamCaption}\item[{}]{size,  }\item[{}]{fail\+\_\+ret }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_acf0fe4665e60c7e7f945275819875c55}\label{thread__context_8h_acf0fe4665e60c7e7f945275819875c55}} 
\index{thread\_context.h@{thread\_context.h}!RELEASE\_MEM\_TRACKER@{RELEASE\_MEM\_TRACKER}}
\index{RELEASE\_MEM\_TRACKER@{RELEASE\_MEM\_TRACKER}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{RELEASE\_MEM\_TRACKER}{RELEASE\_MEM\_TRACKER}}
{\footnotesize\ttfamily \#define RELEASE\+\_\+\+MEM\+\_\+\+TRACKER(\begin{DoxyParamCaption}\item[{}]{size }\end{DoxyParamCaption})~(void)0}

\mbox{\Hypertarget{thread__context_8h_ad52df795f331adf8e7fdb332bfcaf0ab}\label{thread__context_8h_ad52df795f331adf8e7fdb332bfcaf0ab}} 
\index{thread\_context.h@{thread\_context.h}!RETURN\_IF\_CATCH\_BAD\_ALLOC@{RETURN\_IF\_CATCH\_BAD\_ALLOC}}
\index{RETURN\_IF\_CATCH\_BAD\_ALLOC@{RETURN\_IF\_CATCH\_BAD\_ALLOC}!thread\_context.h@{thread\_context.h}}
\doxysubsubsection{\texorpdfstring{RETURN\_IF\_CATCH\_BAD\_ALLOC}{RETURN\_IF\_CATCH\_BAD\_ALLOC}}
{\footnotesize\ttfamily \#define RETURN\+\_\+\+IF\+\_\+\+CATCH\+\_\+\+BAD\+\_\+\+ALLOC(\begin{DoxyParamCaption}\item[{}]{stmt }\end{DoxyParamCaption})~(stmt)}

