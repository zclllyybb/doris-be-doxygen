\hypertarget{pipeline__fragment__context_8h_source}{}\doxysection{pipeline\+\_\+fragment\+\_\+context.\+h}
\label{pipeline__fragment__context_8h_source}\index{/Users/dabowang/doris/be/src/pipeline/pipeline\_fragment\_context.h@{/Users/dabowang/doris/be/src/pipeline/pipeline\_fragment\_context.h}}
\mbox{\hyperlink{pipeline__fragment__context_8h}{浏览该文件的文档.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Licensed\ to\ the\ Apache\ Software\ Foundation\ (ASF)\ under\ one}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ or\ more\ contributor\ license\ agreements.\ \ See\ the\ NOTICE\ file}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ distributed\ with\ this\ work\ for\ additional\ information}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ regarding\ copyright\ ownership.\ \ The\ ASF\ licenses\ this\ file}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ to\ you\ under\ the\ Apache\ License,\ Version\ 2.0\ (the}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except\ in\ compliance}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ with\ the\ License.\ \ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00008\ \textcolor{comment}{//}}
\DoxyCodeLine{00009\ \textcolor{comment}{//\ \ \ http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{00010\ \textcolor{comment}{//}}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,}}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ software\ distributed\ under\ the\ License\ is\ distributed\ on\ an}}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ CONDITIONS\ OF\ ANY}}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ KIND,\ either\ express\ or\ implied.\ \ See\ the\ License\ for\ the}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations}}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ under\ the\ License.}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <future>}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{stream__load__pipe_8h}{io/fs/stream\_load\_pipe.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pipeline_8h}{pipeline/pipeline.h}}"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pipeline__task_8h}{pipeline/pipeline\_task.h}}"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{runtime__state_8h}{runtime/runtime\_state.h}}"{}}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacedoris}{doris}}\ \{}
\DoxyCodeLine{00028\ \textcolor{keyword}{class\ }ExecNode;}
\DoxyCodeLine{00029\ \textcolor{keyword}{class\ }DataSink;}
\DoxyCodeLine{00030\ \textcolor{keyword}{struct\ }ReportStatusRequest;}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{namespace\ }vectorized\ \{}
\DoxyCodeLine{00033\ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ is\_\textcolor{keywordtype}{int}ersect>}
\DoxyCodeLine{00034\ \textcolor{keyword}{class\ }VSetOperationNode;}
\DoxyCodeLine{00035\ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \textcolor{keyword}{namespace\ }pipeline\ \{}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \textcolor{keyword}{class\ }PipelineTask;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context}{PipelineFragmentContext}}\ :\ \textcolor{keyword}{public}\ std::enable\_shared\_from\_this<PipelineFragmentContext>\ \{}
\DoxyCodeLine{00042\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ Callback\ to\ report\ execution\ status\ of\ plan\ fragment.}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{comment}{//\ 'profile'\ is\ the\ cumulative\ profile,\ 'done'\ indicates\ whether\ the\ execution}}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{comment}{//\ is\ done\ or\ still\ continuing.}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{comment}{//\ Note:\ this\ does\ not\ take\ a\ const\ RuntimeProfile\&,\ because\ it\ might\ need\ to\ call}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{comment}{//\ functions\ like\ PrettyPrint()\ or\ to\_thrift(),\ neither\ of\ which\ is\ const}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{comment}{//\ because\ they\ take\ locks.}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{using\ }\mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a2cffae08fcfc57699fbc710a0ee6951a}{report\_status\_callback}}\ =\ std::function<void(\textcolor{keyword}{const}\ \mbox{\hyperlink{structdoris_1_1_report_status_request}{ReportStatusRequest}})>;}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context}{PipelineFragmentContext}}(\textcolor{keyword}{const}\ TUniqueId\&\ query\_id,\ \textcolor{keyword}{const}\ TUniqueId\&\ instance\_id,}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ fragment\_id,\ \textcolor{keywordtype}{int}\ backend\_num,}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::shared\_ptr<QueryFragmentsCtx>\ query\_ctx,\ \mbox{\hyperlink{classdoris_1_1_exec_env}{ExecEnv}}*\ exec\_env,}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::function<\textcolor{keywordtype}{void}(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*,\ \mbox{\hyperlink{classdoris_1_1_status}{Status}}*)>\&\ call\_back,}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a2cffae08fcfc57699fbc710a0ee6951a}{report\_status\_callback}}\&\ report\_status\_cb);}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_adf924159dc3fe9d5211deb8007d9405a}{\string~PipelineFragmentContext}}();}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1pipeline_a498463505b8f460b544619427ac78aab}{PipelinePtr}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ae605319290f8801e07e0f27bcc16eb23}{add\_pipeline}}();}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ TUniqueId\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a4f282ba862457c16a60676bd6597849c}{get\_fragment\_instance\_id}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a969d360d5b2bf368cef4a6a1041b9141}{\_fragment\_instance\_id}};\ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a8ff97432def92da4e40ec39fe874d7f2}{get\_runtime\_state}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a46170bcb9a55ad401f8f75781afc1544}{\_runtime\_state}}.get();\ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{//\ should\ be\ protected\ by\ lock?}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aaaf2606f70dfd8c73ac687d73366c0f0}{is\_canceled}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a46170bcb9a55ad401f8f75781afc1544}{\_runtime\_state}}-\/>is\_cancelled();\ \}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a339ca013cabf6c6629888158c597a41c}{next\_operator\_builder\_id}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a7b59f66dfef274e753343e7f5dd4d694}{\_next\_operator\_builder\_id}}++;\ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a29b6a19bc1bd3cecb83354f5a4780e7c}{prepare}}(\textcolor{keyword}{const}\ doris::TPipelineFragmentParams\&\ request,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ \mbox{\hyperlink{rowset__tree_8cpp_ae40354a1051342eb5a9db005715dcfa9}{idx}});}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ac4a97b2560eb66274a1fe91558af10e4}{submit}}();}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a7b1bd3ef3f2ad70629f0bbd1ddb404f2}{close\_if\_prepare\_failed}}();}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a84f7c414eb44322e3ea8756da70d3ad0}{set\_is\_report\_success}}(\textcolor{keywordtype}{bool}\ is\_report\_success)\ \{\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a70cede923313c14029f44d1a83a003b1}{\_is\_report\_success}}\ =\ is\_report\_success;\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a841e14442a392f25bb8f4f77ba832999}{cancel}}(\textcolor{keyword}{const}\ PPlanFragmentCancelReason\&\ reason\ =\ PPlanFragmentCancelReason::INTERNAL\_ERROR,}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\&\ msg\ =\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{comment}{//\ TODO:\ Support\ pipeline\ runtime\ filter}}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_query_fragments_ctx}{QueryFragmentsCtx}}*\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_abcb487eb1ca583589237fe35c82be70f}{get\_query\_context}}()\ \{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_adab86ff63642348d2d96980bf95deb81}{\_query\_ctx}}.get();\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ TUniqueId\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a337653ddeb3626bc9d3ca47adf5c88e9}{get\_query\_id}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ac2bc236893fc726dd0f12dcd7cafab3c}{\_query\_id}};\ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a359b2ea23c0b59ccc470e31af687734a}{close\_a\_pipeline}}();}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_abaff7e2f002c112a2dbae3a87c3e4f8e}{to\_http\_path}}(\textcolor{keyword}{const}\ std::string\&\ file\_name);}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a6cffa8c855f593f2e381cd2a1ab82861}{set\_merge\_controller\_handler}}(}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ std::shared\_ptr<RuntimeFilterMergeControllerEntity>\&\ handler)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ac5b9fa3b07ea1549befc41c907abdb9e}{\_merge\_controller\_handler}}\ =\ handler;}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aa281e7b97b54f3a89dbe0b01bad4a1ec}{send\_report}}(\textcolor{keywordtype}{bool});}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_af63bb00345c521735d273ff388561c99}{report\_profile}}();}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a2596405bc8c5d91f8db13eaf8999b381}{update\_status}}(\mbox{\hyperlink{classdoris_1_1_status}{Status}}\ status)\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ l(\mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aa9c9b5347d15af23481a7f2583b5b69b}{\_status\_lock}});}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!status.\mbox{\hyperlink{classdoris_1_1_status_a03cb7eaa663dc83af68bc28a596d09e6}{ok}}()\ \&\&\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aad5471eb5c31c55ac0309589e1e8f4fd}{\_exec\_status}}.\mbox{\hyperlink{classdoris_1_1_status_a03cb7eaa663dc83af68bc28a596d09e6}{ok}}())\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aad5471eb5c31c55ac0309589e1e8f4fd}{\_exec\_status}}\ =\ status;}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aad5471eb5c31c55ac0309589e1e8f4fd}{\_exec\_status}};}
\DoxyCodeLine{00105\ \ \ \ \ \}}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1taskgroup_1_1_task_group}{taskgroup::TaskGroup}}*\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a7d553479e8ea00e28f5d33a1f254d622}{get\_task\_group}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_adab86ff63642348d2d96980bf95deb81}{\_query\_ctx}}-\/>get\_task\_group();\ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00110\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aedeeb101fdc095a192d7ca3f94b7fd10}{\_create\_sink}}(\textcolor{keyword}{const}\ TDataSink\&\ t\_data\_sink);}
\DoxyCodeLine{00111\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ae26df05798dc4ba4bfc8fd2c472ad3f5}{\_build\_pipelines}}(\mbox{\hyperlink{classdoris_1_1_exec_node}{ExecNode}}*,\ \mbox{\hyperlink{namespacedoris_1_1pipeline_a498463505b8f460b544619427ac78aab}{PipelinePtr}});}
\DoxyCodeLine{00112\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a516f4ad27eb4781cb76a72fd734d1ac1}{\_build\_pipeline\_tasks}}(\textcolor{keyword}{const}\ doris::TPipelineFragmentParams\&\ request);}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keywordtype}{bool}\ is\_\textcolor{keywordtype}{int}ersect>}
\DoxyCodeLine{00114\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ac8cb153f9184ab2a3cd8670cb7db3cdb}{\_build\_operators\_for\_set\_operation\_node}}(\mbox{\hyperlink{classdoris_1_1_exec_node}{ExecNode}}*,\ \mbox{\hyperlink{namespacedoris_1_1pipeline_a498463505b8f460b544619427ac78aab}{PipelinePtr}});}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a4e1ff7d46110f328533c9463615eec02}{\_close\_action}}();}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a8f3cc455eca1046c38579866f5107530}{\_stop\_report\_thread}}();}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a0576e9601aa54ddec573919487ad5737}{\_set\_is\_report\_on\_cancel}}(\textcolor{keywordtype}{bool}\ val)\ \{\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a8f1bf16a4a1edfea2a43394c704317f2}{\_is\_report\_on\_cancel}}\ =\ val;\ \}}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{comment}{//\ Id\ of\ this\ query}}
\DoxyCodeLine{00120\ \ \ \ \ TUniqueId\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ac2bc236893fc726dd0f12dcd7cafab3c}{\_query\_id}};}
\DoxyCodeLine{00121\ \ \ \ \ TUniqueId\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a969d360d5b2bf368cef4a6a1041b9141}{\_fragment\_instance\_id}};}
\DoxyCodeLine{00122\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ad86fdbcb7bae4043b61aa5de7db897bd}{\_fragment\_id}};}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_afd227f9b531b8a2030f63754001b9cca}{\_backend\_num}};}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_exec_env}{ExecEnv}}*\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a1597f639b99219fa0b93e8ca8c9e5f3a}{\_exec\_env}};}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a172dfd8fdb71d5342bea7ab847110cdb}{\_prepared}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a294e7b4f6dd0bded0e1ff7df62a88582}{\_submitted}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ std::mutex\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aa9c9b5347d15af23481a7f2583b5b69b}{\_status\_lock}};}
\DoxyCodeLine{00132\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_status}{Status}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aad5471eb5c31c55ac0309589e1e8f4fd}{\_exec\_status}};}
\DoxyCodeLine{00133\ \ \ \ \ PPlanFragmentCancelReason\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aa508f3cd3a6cd1287a6ad6920c8f5ba1}{\_cancel\_reason}};}
\DoxyCodeLine{00134\ \ \ \ \ std::string\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a93c1a2e56335774be22ff19c5efac081}{\_cancel\_msg}};}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1pipeline_ac3d951bbf025d831077bd567d8b4bf87}{Pipelines}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a6f78bc02dc9c7aeec321c523b4f813ba}{\_pipelines}};}
\DoxyCodeLine{00137\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1pipeline_aaec249c4ccb957ad0d7f4665029044f9}{PipelineId}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ae429da24bd9b932e513a8879bf65d07c}{\_next\_pipeline\_id}}\ =\ 0;}
\DoxyCodeLine{00138\ \ \ \ \ std::atomic\_int\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ae7e53cbc68227bf1b1150c43d62d143a}{\_closed\_tasks}}\ =\ 0;}
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{comment}{//\ After\ prepared,\ `\_total\_tasks`\ is\ equal\ to\ the\ size\ of\ `\_tasks`.}}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{comment}{//\ When\ submit\ fail,\ `\_total\_tasks`\ is\ equal\ to\ the\ number\ of\ tasks\ submitted.}}
\DoxyCodeLine{00141\ \ \ \ \ std::atomic\_int\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ab7ab4f5716077a94c18b05db10739c74}{\_total\_tasks}}\ =\ 0;}
\DoxyCodeLine{00142\ \ \ \ \ std::vector<std::unique\_ptr<PipelineTask>>\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a963e70282de6f6e7db3ba49ceed1f81f}{\_tasks}};}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ int32\_t\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a7b59f66dfef274e753343e7f5dd4d694}{\_next\_operator\_builder\_id}}\ =\ 10000;}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \mbox{\hyperlink{namespacedoris_1_1pipeline_a498463505b8f460b544619427ac78aab}{PipelinePtr}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a1fa6014b3786c7648e173e6a7a343bb3}{\_root\_pipeline}};}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ std::unique\_ptr<RuntimeProfile>\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a3de8e991ff5f2cc0fe039a43d0d12330}{\_runtime\_profile}};}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a70cede923313c14029f44d1a83a003b1}{\_is\_report\_success}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00151\ \ \ \ \ std::unique\_ptr<RuntimeState>\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a46170bcb9a55ad401f8f75781afc1544}{\_runtime\_state}};}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_exec_node}{ExecNode}}*\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a02558cadae064c92e2329d23f3700eb5}{\_root\_plan}}\ =\ \textcolor{keyword}{nullptr};\ \textcolor{comment}{//\ lives\ in\ \_runtime\_state-\/>obj\_pool()}}
\DoxyCodeLine{00154\ \ \ \ \ std::unique\_ptr<DataSink>\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_acb8d89b2fd8cdccdaa8872d1554593a3}{\_sink}};}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00156\ \ \ \ \ std::shared\_ptr<QueryFragmentsCtx>\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_adab86ff63642348d2d96980bf95deb81}{\_query\_ctx}};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ std::shared\_ptr<RuntimeFilterMergeControllerEntity>\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ac5b9fa3b07ea1549befc41c907abdb9e}{\_merge\_controller\_handler}};}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_custom_stop_watch}{MonotonicStopWatch}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a3580fbee62fe50316fb583da3d6935a4}{\_fragment\_watcher}};}
\DoxyCodeLine{00161\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a3c8ab1a52d7d7f164c3a38b350846870}{\_start\_timer}};}
\DoxyCodeLine{00162\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1_runtime_profile_1_1_counter}{RuntimeProfile::Counter}}*\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a48b07b657e2fe267da15e3d75c179af3}{\_prepare\_timer}};}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ std::function<void(\mbox{\hyperlink{classdoris_1_1_runtime_state}{RuntimeState}}*,\ \mbox{\hyperlink{classdoris_1_1_status}{Status}}*)>\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a6dcfa02fbe862a6ba7619c80b729022b}{\_call\_back}};}
\DoxyCodeLine{00165\ \ \ \ \ std::once\_flag\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a6dba36d8cbcb08f560109cdd9623445e}{\_close\_once\_flag}};}
\DoxyCodeLine{00166\ }
\DoxyCodeLine{00167\ \ \ \ \ std::condition\_variable\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aafa7a3e82a67d34dea0626a1070e819f}{\_report\_thread\_started\_cv}};}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{comment}{//\ true\ if\ we\ started\ the\ thread}}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_aa97d8611060e513fb40836a8b17a1f7e}{\_report\_thread\_active}};}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{comment}{//\ profile\ reporting-\/related}}
\DoxyCodeLine{00171\ \ \ \ \ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a2cffae08fcfc57699fbc710a0ee6951a}{report\_status\_callback}}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_abe629c3937afd3cece4e144b085dd11e}{\_report\_status\_cb}};}
\DoxyCodeLine{00172\ \ \ \ \ std::promise<bool>\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ae5a6762fe3a2c4312524c8322f6546cf}{\_report\_thread\_promise}};}
\DoxyCodeLine{00173\ \ \ \ \ std::future<bool>\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a7d2c4689facf674cec98d10f2f82b8d6}{\_report\_thread\_future}};}
\DoxyCodeLine{00174\ \ \ \ \ std::mutex\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_ab12b41cab65d5dc1d060d3aed9799769}{\_report\_thread\_lock}};}
\DoxyCodeLine{00175\ }
\DoxyCodeLine{00176\ \ \ \ \ \textcolor{comment}{//\ Indicates\ that\ profile\ reporting\ thread\ should\ stop.}}
\DoxyCodeLine{00177\ \ \ \ \ \textcolor{comment}{//\ Tied\ to\ \_report\_thread\_lock.}}
\DoxyCodeLine{00178\ \ \ \ \ std::condition\_variable\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a151fb9ec0c9b1e737a1f2b986d30b7b9}{\_stop\_report\_thread\_cv}};}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{comment}{//\ If\ this\ is\ set\ to\ false,\ and\ '\_is\_report\_success'\ is\ false\ as\ well,}}
\DoxyCodeLine{00180\ \ \ \ \ \textcolor{comment}{//\ This\ executor\ will\ not\ report\ status\ to\ FE\ on\ being\ cancelled.}}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classdoris_1_1pipeline_1_1_pipeline_fragment_context_a8f1bf16a4a1edfea2a43394c704317f2}{\_is\_report\_on\_cancel}};}
\DoxyCodeLine{00182\ \};}
\DoxyCodeLine{00183\ \}\ \textcolor{comment}{//\ namespace\ pipeline}}
\DoxyCodeLine{00184\ \}\ \textcolor{comment}{//\ namespace\ doris}}

\end{DoxyCode}
