\hypertarget{lru__cache_8h}{}\doxysection{/\+Users/dabowang/be\+\_\+all/olap/lru\+\_\+cache.h 文件参考}
\label{lru__cache_8h}\index{/Users/dabowang/be\_all/olap/lru\_cache.h@{/Users/dabowang/be\_all/olap/lru\_cache.h}}
{\ttfamily \#include $<$gtest/gtest\+\_\+prod.\+h$>$}\newline
{\ttfamily \#include $<$rapidjson/document.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$functional$>$}\newline
{\ttfamily \#include $<$queue$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include \char`\"{}olap/olap\+\_\+common.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}runtime/memory/mem\+\_\+tracker.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}runtime/thread\+\_\+context.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}util/metrics.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}util/slice.\+h\char`\"{}}\newline
lru\+\_\+cache.\+h 的引用(Include)关系图\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d3a/lru__cache_8h__incl}
\end{center}
\end{figure}
此图展示该文件直接或间接的被哪些文件引用了\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dd/d80/lru__cache_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{类}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classdoris_1_1_cache_key}{Cache\+Key}}
\item 
class \mbox{\hyperlink{classdoris_1_1_cache}{Cache}}
\item 
struct \mbox{\hyperlink{structdoris_1_1_cache_1_1_handle}{Cache\+::\+Handle}}
\item 
struct \mbox{\hyperlink{struct_l_r_u_handle}{LRUHandle}}
\item 
class \mbox{\hyperlink{classdoris_1_1_handle_table}{Handle\+Table}}
\item 
class \mbox{\hyperlink{classdoris_1_1_l_r_u_cache}{LRUCache}}
\item 
class \mbox{\hyperlink{classdoris_1_1_sharded_l_r_u_cache}{Sharded\+LRUCache}}
\end{DoxyCompactItemize}
\doxysubsection*{命名空间}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespacedoris}{doris}}
\begin{DoxyCompactList}\small\item\em Utilities for collecting timings. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{宏定义}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{lru__cache_8h_a4a6b9cdb26cf5ee2aa5877a5b3326170}{OLAP\+\_\+\+CACHE\+\_\+\+STRING\+\_\+\+TO\+\_\+\+BUF}}(cur,  str,  r\+\_\+len)
\item 
\#define \mbox{\hyperlink{lru__cache_8h_a1437f25273e0d46588682d05c10671b5}{OLAP\+\_\+\+CACHE\+\_\+\+NUMERIC\+\_\+\+TO\+\_\+\+BUF}}(cur,  numeric,  r\+\_\+len)
\end{DoxyCompactItemize}
\doxysubsection*{类型定义}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{namespacedoris_a95cb627707aff70ffb60b6e50a436237}{Cache\+Value\+Predicate}} = std\+::function$<$ bool(const void $\ast$)$>$
\item 
using \mbox{\hyperlink{namespacedoris_a727f9da52f88c99a0cefb11aaae0f126}{Cache\+Value\+Time\+Extractor}} = std\+::function$<$ int64\+\_\+t(const void $\ast$)$>$
\item 
typedef std\+::priority\+\_\+queue$<$ std\+::pair$<$ int64\+\_\+t, \mbox{\hyperlink{struct_l_r_u_handle}{LRUHandle}} $\ast$ $>$, std\+::vector$<$ std\+::pair$<$ int64\+\_\+t, \mbox{\hyperlink{struct_l_r_u_handle}{LRUHandle}} $\ast$ $>$ $>$, std\+::greater$<$ std\+::pair$<$ int64\+\_\+t, \mbox{\hyperlink{struct_l_r_u_handle}{LRUHandle}} $\ast$ $>$ $>$ $>$ \mbox{\hyperlink{namespacedoris_a8374741f5eb3f952296a65c7c7a7b8a9}{LRUHandle\+Heap}}
\end{DoxyCompactItemize}
\doxysubsection*{枚举}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{namespacedoris_a97c7f452860b02163e386723e586c954}{LRUCache\+Type}} \{ \mbox{\hyperlink{namespacedoris_a97c7f452860b02163e386723e586c954a4aa71180778b711338785695df5d7c52}{SIZE}}
, \mbox{\hyperlink{namespacedoris_a97c7f452860b02163e386723e586c954a12a90dfe20486bbe3e075afcd19ef2d0}{NUMBER}}
 \}
\item 
enum class \mbox{\hyperlink{namespacedoris_afb029ea18bce8f55247344803ffe372b}{Cache\+Priority}} \{ \mbox{\hyperlink{namespacedoris_afb029ea18bce8f55247344803ffe372ba1e23852820b9154316c7c06e2b7ba051}{NORMAL}} = 0
, \mbox{\hyperlink{namespacedoris_afb029ea18bce8f55247344803ffe372ba339b2f19a3f2821963c7d2b0ca441bd2}{DURABLE}} = 1
 \}
\end{DoxyCompactItemize}
\doxysubsection*{函数}
\begin{DoxyCompactItemize}
\item 
Cache $\ast$ \mbox{\hyperlink{namespacedoris_a62b6fa8336b62746fe12620c18b8742b}{new\+\_\+lru\+\_\+cache}} (const std\+::string \&\mbox{\hyperlink{signal__handler_8h_a8f8f80d37794cde9472343e4487ba3eb}{name}}, size\+\_\+t capacity, LRUCache\+Type type, uint32\+\_\+t num\+\_\+shards)
\end{DoxyCompactItemize}


\doxysubsection{宏定义说明}
\mbox{\Hypertarget{lru__cache_8h_a4a6b9cdb26cf5ee2aa5877a5b3326170}\label{lru__cache_8h_a4a6b9cdb26cf5ee2aa5877a5b3326170}} 
\index{lru\_cache.h@{lru\_cache.h}!OLAP\_CACHE\_STRING\_TO\_BUF@{OLAP\_CACHE\_STRING\_TO\_BUF}}
\index{OLAP\_CACHE\_STRING\_TO\_BUF@{OLAP\_CACHE\_STRING\_TO\_BUF}!lru\_cache.h@{lru\_cache.h}}
\doxysubsubsection{\texorpdfstring{OLAP\_CACHE\_STRING\_TO\_BUF}{OLAP\_CACHE\_STRING\_TO\_BUF}}
{\footnotesize\ttfamily \#define OLAP\+\_\+\+CACHE\+\_\+\+STRING\+\_\+\+TO\+\_\+\+BUF(\begin{DoxyParamCaption}\item[{}]{cur,  }\item[{}]{str,  }\item[{}]{r\+\_\+len }\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{do}\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (r\_len\ >\ str.size())\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ memcpy(cur,\ str.c\_str(),\ str.size());\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ r\_len\ -\/=\ str.size();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ cur\ +=\ str.size();\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ LOG(WARNING)\ <<\ \textcolor{stringliteral}{"{}construct\ cache\ key\ buf\ not\ enough."{}};\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ CacheKey(\textcolor{keyword}{nullptr},\ 0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}\ \textcolor{keywordflow}{while}\ (0)}

\end{DoxyCode}
\mbox{\Hypertarget{lru__cache_8h_a1437f25273e0d46588682d05c10671b5}\label{lru__cache_8h_a1437f25273e0d46588682d05c10671b5}} 
\index{lru\_cache.h@{lru\_cache.h}!OLAP\_CACHE\_NUMERIC\_TO\_BUF@{OLAP\_CACHE\_NUMERIC\_TO\_BUF}}
\index{OLAP\_CACHE\_NUMERIC\_TO\_BUF@{OLAP\_CACHE\_NUMERIC\_TO\_BUF}!lru\_cache.h@{lru\_cache.h}}
\doxysubsubsection{\texorpdfstring{OLAP\_CACHE\_NUMERIC\_TO\_BUF}{OLAP\_CACHE\_NUMERIC\_TO\_BUF}}
{\footnotesize\ttfamily \#define OLAP\+\_\+\+CACHE\+\_\+\+NUMERIC\+\_\+\+TO\+\_\+\+BUF(\begin{DoxyParamCaption}\item[{}]{cur,  }\item[{}]{numeric,  }\item[{}]{r\+\_\+len }\end{DoxyParamCaption})}

{\bfseries 值\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{do}\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ if\ (r\_len\ >\ \textcolor{keyword}{sizeof}(numeric))\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ memcpy(cur,\ \&numeric,\ \textcolor{keyword}{sizeof}(numeric));\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ r\_len\ -\/=\ \textcolor{keyword}{sizeof}(numeric);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ cur\ +=\ \textcolor{keyword}{sizeof}(numeric);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ LOG(WARNING)\ <<\ \textcolor{stringliteral}{"{}construct\ cache\ key\ buf\ not\ enough."{}};\ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ CacheKey(\textcolor{keyword}{nullptr},\ 0);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}
\DoxyCodeLine{\ \ \ \ \}\ \textcolor{keywordflow}{while}\ (0)}

\end{DoxyCode}
